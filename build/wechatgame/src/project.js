window.__require=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var _="function"==typeof __require&&__require;if(!a&&_)return _(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){!function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.MGOBE=r():r()}(0,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){var r;e.exports=r=r||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){t=t;var n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var a=o(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},_=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(_.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return _.parse(unescape(encodeURIComponent(e)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=o/(4*i),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*i,_=e.min(4*c,o);if(c){for(var u=0;u<c;u+=i)this._doProcessBlock(r,u);var l=r.splice(0,c);n.sigBytes-=_}return new s.init(l,_)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(o.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math)},function(e,t){},function(e){e.exports={sdkType:1,version:"1.2.8"}},function(e,t,n){var r,o,i;e.exports=(r=n(0),i=(o=r).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,c=n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=(a|c)<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},function(e,t,n){var r;e.exports=(r=n(0),n(5),n(6),r.HmacSHA1)},function(e,t,n){var r,o,i,s,a,c,_,u;e.exports=(i=(o=r=n(0)).lib,s=i.WordArray,a=i.Hasher,c=o.algo,_=[],u=c.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],c=0;c<80;c++){if(c<16)_[c]=0|e[t+c];else{var u=_[c-3]^_[c-8]^_[c-14]^_[c-16];_[c]=u<<1|u>>>31}var l=(r<<5|r>>>27)+a+_[c];l+=c<20?1518500249+(o&i|~o&s):c<40?1859775393+(o^i^s):c<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514,a=s,s=i,i=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),o.SHA1=a._createHelper(u),o.HmacSHA1=a._createHmacHelper(u),r.SHA1)},function(e,t,n){var r,o,i,s;e.exports=(o=(r=n(0)).lib.Base,i=r.enc,s=i.Utf8,void(r.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),a=o.words,c=i.words,_=0;_<n;_++)a[_]^=1549556828,c[_]^=909522486;o.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){var r,o;void 0===(o="function"==typeof(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o,i,s="";this.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},this.parseInt=function(e,t){return/^(-|\+)?([0-9]+|Infinity)$/.test(e)?parseInt(e,t):NaN},this.seps="cfhistuCFHISTU",this.minLength=0<parseInt(n,10)?n:0,this.salt="string"==typeof t?t:"","string"==typeof r&&(this.alphabet=r);for(var a=0;a!==this.alphabet.length;a++)-1===s.indexOf(this.alphabet.charAt(a))&&(s+=this.alphabet.charAt(a));if(this.alphabet=s,this.alphabet.length<16)throw"error: alphabet must contain at least X unique characters".replace("X",16);if(-1!==this.alphabet.search(" "))throw"error: alphabet cannot contain spaces";for(var c=0;c!==this.seps.length;c++){var _=this.alphabet.indexOf(this.seps.charAt(c));-1===_?this.seps=this.seps.substr(0,c)+" "+this.seps.substr(c+1):this.alphabet=this.alphabet.substr(0,_)+" "+this.alphabet.substr(_+1)}this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this._shuffle(this.seps,this.salt),(!this.seps.length||3.5<this.alphabet.length/this.seps.length)&&(o=Math.ceil(this.alphabet.length/3.5))>this.seps.length&&(i=o-this.seps.length,this.seps+=this.alphabet.substr(0,i),this.alphabet=this.alphabet.substr(i)),this.alphabet=this._shuffle(this.alphabet,this.salt);var u=Math.ceil(this.alphabet.length/12);this.alphabet.length<3?(this.guards=this.seps.substr(0,u),this.seps=this.seps.substr(u)):(this.guards=this.alphabet.substr(0,u),this.alphabet=this.alphabet.substr(u))}var t;return(t=[{key:"encode",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return"";if(t[0]&&t[0].constructor===Array&&!(t=t[0]).length)return"";for(var r=0;r!==t.length;r++)if(t[r]=this.parseInt(t[r],10),!(0<=t[r]))return"";return this._encode(t)}},{key:"decode",value:function(e){return e&&e.length&&"string"==typeof e?this._decode(e,this.alphabet):[]}},{key:"encodeHex",value:function(e){if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(var t=e.match(/[\w\W]{1,12}/g),n=0;n!==t.length;n++)t[n]=parseInt("1"+t[n],16);return this.encode.apply(this,t)}},{key:"decodeHex",value:function(e){for(var t=[],n=this.decode(e),r=0;r!==n.length;r++)t+=n[r].toString(16).substr(1);return t}},{key:"_encode",value:function(e){for(var t,n=this.alphabet,r=0,o=0;o!==e.length;o++)r+=e[o]%(o+100);for(var i=t=n.charAt(r%n.length),s=0;s!==e.length;s++){var a=e[s],c=i+this.salt+n;n=this._shuffle(n,c.substr(0,n.length));var _=this._toAlphabet(a,n);if(t+=_,s+1<e.length){var u=(a%=_.charCodeAt(0)+s)%this.seps.length;t+=this.seps.charAt(u)}}if(t.length<this.minLength){var l=(r+t[0].charCodeAt(0))%this.guards.length,f=this.guards[l];(t=f+t).length<this.minLength&&(l=(r+t[2].charCodeAt(0))%this.guards.length,t+=f=this.guards[l])}for(var E=parseInt(n.length/2,10);t.length<this.minLength;){var d=(t=(n=this._shuffle(n,n)).substr(E)+t+n.substr(0,E)).length-this.minLength;0<d&&(t=t.substr(d/2,this.minLength))}return t}},{key:"_decode",value:function(e,t){var n=[],r=0,o=new RegExp("[".concat(this.escapeRegExp(this.guards),"]"),"g"),i=e.replace(o," "),s=i.split(" ");if(3!==s.length&&2!==s.length||(r=1),void 0!==(i=s[r])[0]){var a=i[0];i=i.substr(1),o=new RegExp("[".concat(this.escapeRegExp(this.seps),"]"),"g"),s=(i=i.replace(o," ")).split(" ");for(var c=0;c!==s.length;c++){var _=s[c],u=a+this.salt+t;t=this._shuffle(t,u.substr(0,t.length)),n.push(this._fromAlphabet(_,t))}this.encode(n)!==e&&(n=[])}return n}},{key:"_shuffle",value:function(e,t){var n;if(!t.length)return e;for(var r=(e=e.split("")).length-1,o=0,i=0,s=0;0<r;r--,o++){o%=t.length,i+=n=t.charCodeAt(o);var a=e[s=(n+o+i)%r];e[s]=e[r],e[r]=a}return e.join("")}},{key:"_toAlphabet",value:function(e,t){for(var n="";n=t.charAt(e%t.length)+n,e=parseInt(e/t.length,10););return n}},{key:"_fromAlphabet",value:function(e,t){return e.split("").map(function(e){return t.indexOf(e)}).reduce(function(e,n){return e*t.length+n},0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();e.default=t})?r.apply(t,[t]):r)||(e.exports=o)},function(e,t,n){(function(r){var o,i,s;i=[n(10)],void 0===(s="function"==typeof(o=function(e,t){"use strict";var o,i={};return i.ByteBuffer=e,i.Long=e.Long||null,i.VERSION="5.0.3",i.WIRE_TYPES={},i.WIRE_TYPES.VARINT=0,i.WIRE_TYPES.BITS64=1,i.WIRE_TYPES.LDELIM=2,i.WIRE_TYPES.STARTGROUP=3,i.WIRE_TYPES.ENDGROUP=4,i.WIRE_TYPES.BITS32=5,i.PACKABLE_WIRE_TYPES=[i.WIRE_TYPES.VARINT,i.WIRE_TYPES.BITS64,i.WIRE_TYPES.BITS32],i.TYPES={int32:{name:"int32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},uint64:{name:"uint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.UZERO:void 0},sint64:{name:"sint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},bool:{name:"bool",wireType:i.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:i.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:i.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.ZERO:void 0},float:{name:"float",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:i.WIRE_TYPES.STARTGROUP,defaultValue:null}},i.MAP_KEY_TYPES=[i.TYPES.int32,i.TYPES.sint32,i.TYPES.sfixed32,i.TYPES.uint32,i.TYPES.fixed32,i.TYPES.int64,i.TYPES.sint64,i.TYPES.sfixed64,i.TYPES.uint64,i.TYPES.fixed64,i.TYPES.bool,i.TYPES.string,i.TYPES.bytes],i.ID_MIN=1,i.ID_MAX=536870911,i.convertFieldsToCamelCase=!1,i.populateAccessors=!0,i.populateDefaults=!0,i.Util=((o={}).IS_NODE=!("object"!=typeof r||r+""!="[object process]"||r.browser),o.XHR=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,n=0;n<e.length;n++){try{t=e[n]()}catch(e){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},o.fetch=function(e,t){if(t&&"function"!=typeof t&&(t=null),o.IS_NODE){var r=n(12);if(t)r.readFile(e,function(e,n){t(e?null:""+n)});else try{return r.readFileSync(e)}catch(e){return null}}else{var i=o.XHR();if(i.open("GET",e,!!t),i.setRequestHeader("Accept","text/plain"),"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/plain"),!t)return i.send(null),200==i.status||0==i.status&&"string"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&"string"==typeof i.responseText?t(i.responseText):t(null))},4==i.readyState)return;i.send(null)}},o.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},o),i.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,FQTYPEREF:/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},i.DotProto=function(e,t){var n={},r=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},o=r.prototype;o._readString=function(){var e='"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;e.lastIndex=this.index-1;var n=e.exec(this.source);if(!n)throw Error("unterminated string");return this.index=e.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,n[1]},o.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var e,n,r;do{for(e=!1;t.WHITESPACE.test(r=this.source.charAt(this.index));)if("\n"===r&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(r=this.source.charAt(this.index)))return"/";do{if("\n"===r&&++this.line,++this.index===this.source.length)return null;n=r,r=this.source.charAt(this.index)}while("*"!==n||"/"!==r);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;var o=this.index;if(t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(o++)))for(;o<this.source.length&&!t.DELIM.test(this.source.charAt(o));)++o;var i=this.source.substring(this.index,this.index=o);return'"'!==i&&"'"!==i||(this._stringOpen=i),i},o.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},o.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},o.omit=function(e){return this.peek()===e&&(this.next(),!0)},o.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},n.Tokenizer=r;var i=function(e){this.tn=new r(e),this.proto3=!1},s=i.prototype;function a(e,n){var r=-1,o=1;if("-"==e.charAt(0)&&(o=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))r=parseInt(e);else if(t.NUMBER_HEX.test(e))r=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(o<0?"-":"")+e);r=parseInt(e.substring(1),8)}if(r=o*r|0,!n&&r<0)throw Error("illegal id value: "+(o<0?"-":"")+e);return r}function c(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return n*(1/0);if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(n<0?"-":"")+e)}function _(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}return s.parse=function(){var e,n,r={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},o=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!o||null!==r.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),r.package=e;break;case"import":if(!o)throw Error("unexpected 'import'");("public"===(e=this.tn.peek())||(n="weak"===e))&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n||r.imports.push(e);break;case"syntax":if(!o)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(r.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(r,null),o=!1;break;case"enum":this._parseEnum(r),o=!1;break;case"option":this._parseOption(r);break;case"service":this._parseService(r);break;case"extend":this._parseExtend(r);break;default:throw Error("unexpected '"+e+"'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete r.name,r},i.parse=function(e){return new i(e).parse()},s._readString=function(){var e,t,n="";do{if("'"!==(t=this.tn.next())&&'"'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return n},s._readValue=function(e){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return c(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},s._parseOption=function(e,n){var r=this.tn.next(),o=!1;if("("===r&&(o=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal option name: "+r);var i=r;o&&(this.tn.skip(")"),i="("+i+")",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(i+=r,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,i),n||this.tn.skip(";")},s._parseOptionValue=function(e,n){var r=this.tn.peek();if("{"!==r)_(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(r=this.tn.next());){if(!t.NAME.test(r))throw Error("illegal option name: "+n+"."+r);this.tn.omit(":")?_(e.options,n+"."+r,this._readValue(!0)):this._parseOptionValue(e,n+"."+r)}},s._parseService=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal service name at line "+this.tn.line+": "+n);var r={name:n,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(r);else{if("rpc"!==n)throw Error("illegal service token: "+n);this._parseServiceRPC(r)}this.tn.omit(";"),e.services.push(r)},s._parseServiceRPC=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal rpc service method name: "+n);var r=n,o={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(o.request_stream=!0,n=this.tn.next()),!t.TYPEREF.test(n))throw Error("illegal rpc service request type: "+n);if(o.request=n,this.tn.skip(")"),"returns"!==(n=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+n);if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(o.response_stream=!0,n=this.tn.next()),o.response=n,this.tn.skip(")"),"{"===(n=this.tn.peek())){for(this.tn.next();"}"!==(n=this.tn.next());){if("option"!==n)throw Error("illegal rpc service token: "+n);this._parseOption(o)}this.tn.omit(";")}else this.tn.skip(";");void 0===e.rpc&&(e.rpc={}),e.rpc[r]=o},s._parseMessage=function(e,n){var r=!!n,o=this.tn.next(),i={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(o))throw Error("illegal "+(r?"group":"message")+" name: "+o);for(i.name=o,r&&(this.tn.skip("="),n.id=a(this.tn.next()),i.isGroup=!0),"["===(o=this.tn.peek())&&n&&this._parseFieldOptions(n),this.tn.skip("{");"}"!==(o=this.tn.next());)if(t.RULE.test(o))this._parseMessageField(i,o);else if("oneof"===o)this._parseMessageOneOf(i);else if("enum"===o)this._parseEnum(i);else if("message"===o)this._parseMessage(i);else if("option"===o)this._parseOption(i);else if("service"===o)this._parseService(i);else if("extensions"===o)i.hasOwnProperty("extensions")?i.extensions=i.extensions.concat(this._parseExtensionRanges()):i.extensions=this._parseExtensionRanges();else if("reserved"===o)this._parseIgnored();else if("extend"===o)this._parseExtend(i);else{if(!t.TYPEREF.test(o))throw Error("illegal message token: "+o);if(!this.proto3)throw Error("illegal field rule: "+o);this._parseMessageField(i,"optional",o)}return this.tn.omit(";"),e.messages.push(i),i},s._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},s._parseMessageField=function(e,n,r){if(!t.RULE.test(n))throw Error("illegal message field rule: "+n);var o,i={rule:n,type:"",name:"",options:{},id:0};if("map"===n){if(r)throw Error("illegal type: "+r);if(this.tn.skip("<"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error("illegal message field type: "+o);if(i.keytype=o,this.tn.skip(","),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error("illegal message field: "+o);if(i.type=o,this.tn.skip(">"),o=this.tn.next(),!t.NAME.test(o))throw Error("illegal message field name: "+o);i.name=o,this.tn.skip("="),i.id=a(this.tn.next()),"["===(o=this.tn.peek())&&this._parseFieldOptions(i),this.tn.skip(";")}else if("group"===(r=void 0!==r?r:this.tn.next())){var s=this._parseMessage(e,i);if(!/^[A-Z]/.test(s.name))throw Error("illegal group name: "+s.name);i.type=s.name,i.name=s.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(i.type=r,o=this.tn.next(),!t.NAME.test(o))throw Error("illegal message field name: "+o);i.name=o,this.tn.skip("="),i.id=a(this.tn.next()),"["===(o=this.tn.peek())&&this._parseFieldOptions(i),this.tn.skip(";")}return e.fields.push(i),i},s._parseMessageOneOf=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal oneof name: "+n);var r,o=n,i=[];for(this.tn.skip("{");"}"!==(n=this.tn.next());)(r=this._parseMessageField(e,"optional",n)).oneof=o,i.push(r.id);this.tn.omit(";"),e.oneofs[o]=i},s._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},s._parseEnum=function(e){var n={name:"",values:[],options:{}},r=this.tn.next();if(!t.NAME.test(r))throw Error("illegal name: "+r);for(n.name=r,this.tn.skip("{");"}"!==(r=this.tn.next());)if("option"===r)this._parseOption(n);else{if(!t.NAME.test(r))throw Error("illegal name: "+r);this.tn.skip("=");var o={name:r,id:a(this.tn.next(),!0)};"["===(r=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),n.values.push(o)}this.tn.omit(";"),e.enums.push(n)},s._parseExtensionRanges=function(){var t,n,r,o=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":r=e.ID_MIN;break;case"max":r=e.ID_MAX;break;default:r=c(t)}if(n.push(r),2===n.length)break;if("to"!==this.tn.peek()){n.push(r);break}this.tn.next()}o.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),o},s._parseExtend=function(e){var n=this.tn.next();if(!t.TYPEREF.test(n))throw Error("illegal extend reference: "+n);var r={ref:n,fields:[]};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if(t.RULE.test(n))this._parseMessageField(r,n);else{if(!t.TYPEREF.test(n))throw Error("illegal extend token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(r,"optional",n)}return this.tn.omit(";"),e.messages.push(r),r},s.toString=function(){return"Parser at line "+this.tn.line},n.Parser=i,n}(i,i.Lang),i.Reflect=function(t){var n={},r=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},o=r.prototype;o.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+"."+e;return e},o.toString=function(e){return(e?this.className+" ":"")+this.fqn()},o.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},n.T=r;var i=function(e,t,n,o,i){r.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=o||{},this.syntax=i||"proto2"},s=i.prototype=Object.create(r.prototype);s.getChildren=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],n=0,r=this.children.length;n<r;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},s.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof u.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof u.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},s.getChild=function(e){for(var t="number"==typeof e?"id":"name",n=0,r=this.children.length;n<r;++n)if(this.children[n][t]===e)return this.children[n];return null},s.resolve=function(e,t){var r,o="string"==typeof e?e.split("."):e,i=this,s=0;if(""===o[s]){for(;null!==i.parent;)i=i.parent;s++}do{do{if(!(i instanceof n.Namespace)){i=null;break}if(!(r=i.getChild(o[s]))||!(r instanceof n.T)||t&&!(r instanceof n.Namespace)){i=null;break}i=r,s++}while(s<o.length);if(null!=i)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=i);return i},s.qn=function(e){var t=[],r=e;do{t.unshift(r.name),r=r.parent}while(null!==r);for(var o=1;o<=t.length;o++){var i=t.slice(t.length-o);if(e===this.resolve(i,e instanceof n.Namespace))return i.join(".")}return e.fqn()},s.build=function(){for(var e,t={},n=this.children,r=0,o=n.length;r<o;++r)(e=n[r])instanceof i&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},s.buildOpt=function(){for(var e={},t=Object.keys(this.options),n=0,r=t.length;n<r;++n){var o=t[n],i=this.options[t[n]];e[o]=i}return e},s.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},n.Namespace=i;var a=function(e,n,r,o,i){if(this.type=e,this.resolvedType=n,this.isMapKey=r,this.syntax=o,this.name=i,r&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)},c=a.prototype;function _(e,n){if(e&&"number"==typeof e.low&&"number"==typeof e.high&&"boolean"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if("string"==typeof e)return t.Long.fromString(e,n||!1,10);if("number"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error("not convertible to Long")}a.defaultFieldValue=function(n){if("string"==typeof n&&(n=t.TYPES[n]),void 0===n.defaultValue)throw Error("default value for type "+n.name+" is not supported");return n==t.TYPES.bytes?new e(0):n.defaultValue},c.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},c.verifyValue=function(n){var r=this;function o(e,t){throw Error("Illegal value for "+r.toString(!0)+" of type "+r.type.name+": "+e+" ("+t+")")}switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&o(typeof n,"not an integer"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&o(typeof n,"not an integer"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return _(n,!1)}catch(e){o(typeof n,e.message)}else o(typeof n,"requires Long.js");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return _(n,!0)}catch(e){o(typeof n,e.message)}else o(typeof n,"requires Long.js");case t.TYPES.bool:return"boolean"!=typeof n&&o(typeof n,"not a boolean"),n;case t.TYPES.float:case t.TYPES.double:return"number"!=typeof n&&o(typeof n,"not a number"),n;case t.TYPES.string:return"string"==typeof n||n&&n instanceof String||o(typeof n,"not a string"),""+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n,"base64");case t.TYPES.enum:var i=this.resolvedType.getChildren(t.Reflect.Enum.Value);for(a=0;a<i.length;a++){if(i[a].name==n)return i[a].id;if(i[a].id==n)return i[a].id}if("proto3"===this.syntax)return("number"!=typeof n||n==n&&n%1!=0)&&o(typeof n,"not an integer"),(n>4294967295||n<0)&&o(typeof n,"not in range for uint32"),n;o(n,"not a valid enum value");case t.TYPES.group:case t.TYPES.message:if(n&&"object"==typeof n||o(typeof n,"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){var s={};for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);n=s}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},c.calculateLength=function(n,r){if(null===r)return 0;var o;switch(this.type){case t.TYPES.int32:return r<0?e.calculateVarint64(r):e.calculateVarint32(r);case t.TYPES.uint32:return e.calculateVarint32(r);case t.TYPES.sint32:return e.calculateVarint32(e.zigZagEncode32(r));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return e.calculateVarint64(r);case t.TYPES.sint64:return e.calculateVarint64(e.zigZagEncode64(r));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return e.calculateVarint32(r);case t.TYPES.double:return 8;case t.TYPES.string:return o=e.calculateUTF8Bytes(r),e.calculateVarint32(o)+o;case t.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");return e.calculateVarint32(r.remaining())+r.remaining();case t.TYPES.message:return o=this.resolvedType.calculate(r),e.calculateVarint32(o)+o;case t.TYPES.group:return(o=this.resolvedType.calculate(r))+e.calculateVarint32(n<<3|t.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")},c.encodeValue=function(n,r,o){if(null===r)return o;switch(this.type){case t.TYPES.int32:r<0?o.writeVarint64(r):o.writeVarint32(r);break;case t.TYPES.uint32:o.writeVarint32(r);break;case t.TYPES.sint32:o.writeVarint32ZigZag(r);break;case t.TYPES.fixed32:o.writeUint32(r);break;case t.TYPES.sfixed32:o.writeInt32(r);break;case t.TYPES.int64:case t.TYPES.uint64:o.writeVarint64(r);break;case t.TYPES.sint64:o.writeVarint64ZigZag(r);break;case t.TYPES.fixed64:o.writeUint64(r);break;case t.TYPES.sfixed64:o.writeInt64(r);break;case t.TYPES.bool:"string"==typeof r?o.writeVarint32("false"===r.toLowerCase()?0:!!r):o.writeVarint32(r?1:0);break;case t.TYPES.enum:o.writeVarint32(r);break;case t.TYPES.float:o.writeFloat32(r);break;case t.TYPES.double:o.writeFloat64(r);break;case t.TYPES.string:o.writeVString(r);break;case t.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");var i=r.offset;o.writeVarint32(r.remaining()),o.append(r),r.offset=i;break;case t.TYPES.message:var s=(new e).LE();this.resolvedType.encode(r,s),o.writeVarint32(s.offset),o.append(s.flip());break;case t.TYPES.group:this.resolvedType.encode(r,o),o.writeVarint32(n<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")}return o},c.decode=function(e,n,r){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var o,i;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(i=e.readVarint32(),e.remaining()<i)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+i+" required but got only "+e.remaining());return(o=e.clone()).limit=o.offset+i,e.offset+=i,o;case t.TYPES.message:return i=e.readVarint32(),this.resolvedType.decode(e,i);case t.TYPES.group:return this.resolvedType.decode(e,-1,r)}throw Error("[INTERNAL] Illegal decode type")},c.valueFromString=function(n){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(n));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(n);case t.TYPES.bool:return"true"===n;case t.TYPES.string:return this.verifyValue(n);case t.TYPES.bytes:return e.fromBinary(n)}},c.valueToString=function(e){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===t.TYPES.bytes?e.toString("binary"):e.toString()},n.Element=a;var u=function(e,t,n,r,o,s){i.call(this,e,t,n,r,s),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!o,this._fields=null,this._fieldsById=null,this._fieldsByName=null},l=u.prototype=Object.create(i.prototype);function f(e,n){var r=n.readVarint32(),o=7&r,i=r>>>3;switch(o){case t.WIRE_TYPES.VARINT:do{r=n.readUint8()}while(128==(128&r));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:r=n.readVarint32(),n.offset+=r;break;case t.WIRE_TYPES.STARTGROUP:f(i,n);break;case t.WIRE_TYPES.ENDGROUP:if(i===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+i+" ("+e+" expected)");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+o)}return!0}l.build=function(n){if(this.clazz&&!n)return this.clazz;var r=function(t,n){var r=n.getChildren(t.Reflect.Message.Field),o=n.getChildren(t.Reflect.Message.OneOf),i=function(s,a){t.Builder.Message.call(this);for(var c=0,_=o.length;c<_;++c)this[o[c].name]=null;for(c=0,_=r.length;c<_;++c){var u=r[c];this[u.name]=u.repeated?[]:u.map?new t.Map(u):null,!u.required&&"proto3"!==n.syntax||null===u.defaultValue||(this[u.name]=u.defaultValue)}var l;if(arguments.length>0)if(1!==arguments.length||null===s||"object"!=typeof s||!("function"!=typeof s.encode||s instanceof i)||Array.isArray(s)||s instanceof t.Map||e.isByteBuffer(s)||s instanceof ArrayBuffer||t.Long&&s instanceof t.Long)for(c=0,_=arguments.length;c<_;++c)void 0!==(l=arguments[c])&&this.$set(r[c].name,l);else this.$set(s)},s=i.prototype=Object.create(t.Builder.Message.prototype);s.add=function(e,r,o){var i=n._fieldsByName[e];if(!o){if(!i)throw Error(this+"#"+e+" is undefined");if(!(i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+i.toString(!0));if(!i.repeated)throw Error(this+"#"+e+" is not a repeated field");r=i.verifyValue(r,!0)}return null===this[e]&&(this[e]=[]),this[e].push(r),this},s.$add=s.add,s.set=function(e,r,o){if(e&&"object"==typeof e){for(var i in o=r,e)e.hasOwnProperty(i)&&void 0!==(r=e[i])&&void 0===n._oneofsByName[i]&&this.$set(i,r,o);return this}var s=n._fieldsByName[e];if(o)this[e]=r;else{if(!s)throw Error(this+"#"+e+" is not a field: undefined");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));this[s.name]=r=s.verifyValue(r)}if(s&&s.oneof){var a=this[s.oneof.name];null!==r?(null!==a&&a!==s.name&&(this[a]=null),this[s.oneof.name]=s.name):a===e&&(this[s.oneof.name]=null)}return this},s.$set=s.set,s.get=function(e,r){if(r)return this[e];var o=n._fieldsByName[e];if(!(o&&o instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: undefined");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+o.toString(!0));return this[o.name]},s.$get=s.get;for(var a=0;a<r.length;a++){var c=r[a];c instanceof t.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var r=e.originalName.replace(/([A-Z])/g,function(e){return"_"+e}),o=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},i=function(){return this[e.name]};null===n.getChild("set"+t)&&(s["set"+t]=o),null===n.getChild("set_"+r)&&(s["set_"+r]=o),null===n.getChild("get"+t)&&(s["get"+t]=i),null===n.getChild("get_"+r)&&(s["get_"+r]=i)}(c)}function _(n,r,o,i){if(null===n||"object"!=typeof n){if(i&&i instanceof t.Reflect.Enum){var s=t.Reflect.Enum.getName(i.object,n);if(null!==s)return s}return n}if(e.isByteBuffer(n))return r?n.toBase64():n.toBuffer();if(t.Long.isLong(n))return o?n.toString():t.Long.fromValue(n);var a;if(Array.isArray(n))return a=[],n.forEach(function(e,t){a[t]=_(e,r,o,i)}),a;if(a={},n instanceof t.Map){for(var c=n.entries(),u=c.next();!u.done;u=c.next())a[n.keyElem.valueToString(u.value[0])]=_(u.value[1],r,o,n.valueElem.resolvedType);return a}var l=n.$type,f=void 0;for(var E in n)n.hasOwnProperty(E)&&(l&&(f=l.getChild(E))?a[E]=_(n[E],r,o,f.resolvedType):a[E]=_(n[E],r,o));return a}return s.encode=function(t,r){"boolean"==typeof t&&(r=t,t=void 0);var o=!1;t||(t=new e,o=!0);var i=t.littleEndian;try{return n.encode(this,t.LE(),r),(o?t.flip():t).LE(i)}catch(e){throw t.LE(i),e}},i.encode=function(e,t,n){return new i(e).encode(t,n)},s.calculate=function(){return n.calculate(this)},s.encodeDelimited=function(t,r){var o=!1;t||(t=new e,o=!0);var i=(new e).LE();return n.encode(this,i,r).flip(),t.writeVarint32(i.remaining()),t.append(i),o?t.flip():t},s.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},s.toArrayBuffer=s.encodeAB,s.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},s.toBuffer=s.encodeNB,s.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},s.toBase64=s.encode64,s.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},s.toHex=s.encodeHex,s.toRaw=function(e,t){return _(this,!!e,!!t,this.$type)},s.encodeJSON=function(){return JSON.stringify(_(this,!0,!0,this.$type))},i.decode=function(t,r,o){"string"==typeof r&&(o=r,r=-1),"string"==typeof t?t=e.wrap(t,o||"base64"):e.isByteBuffer(t)||(t=e.wrap(t));var i=t.littleEndian;try{var s=n.decode(t.LE(),r);return t.LE(i),s}catch(e){throw t.LE(i),e}},i.decodeDelimited=function(t,r){if("string"==typeof t?t=e.wrap(t,r||"base64"):e.isByteBuffer(t)||(t=e.wrap(t)),t.remaining()<1)return null;var o=t.offset,i=t.readVarint32();if(t.remaining()<i)return t.offset=o,null;try{var s=n.decode(t.slice(t.offset,t.offset+i).LE());return t.offset+=i,s}catch(e){throw t.offset+=i,e}},i.decode64=function(e){return i.decode(e,"base64")},i.decodeHex=function(e){return i.decode(e,"hex")},i.decodeJSON=function(e){return new i(JSON.parse(e))},s.toString=function(){return n.toString()},Object.defineProperty&&(Object.defineProperty(i,"$options",{value:n.buildOpt()}),Object.defineProperty(s,"$options",{value:i.$options}),Object.defineProperty(i,"$type",{value:n}),Object.defineProperty(s,"$type",{value:n})),i}(t,this);this._fields=[],this._fieldsById={},this._fieldsByName={},this._oneofsByName={};for(var o,i=0,s=this.children.length;i<s;i++)if((o=this.children[i])instanceof p||o instanceof u||o instanceof y){if(r.hasOwnProperty(o.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+o.toString(!0)+" cannot override static property '"+o.name+"'");r[o.name]=o.build()}else if(o instanceof u.Field)o.build(),this._fields.push(o),this._fieldsById[o.id]=o,this._fieldsByName[o.name]=o;else if(o instanceof u.OneOf)this._oneofsByName[o.name]=o;else if(!(o instanceof u.OneOf||o instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[i].toString(!0));return this.clazz=r},l.encode=function(e,t,n){for(var r,o,i=null,s=0,a=this._fields.length;s<a;++s)o=e[(r=this._fields[s]).name],r.required&&null===o?null===i&&(i=r):r.encode(n?o:r.verifyValue(o),t,e);if(null!==i){var c=Error("Missing at least one required field for "+this.toString(!0)+": "+i);throw c.encoded=t,c}return t},l.calculate=function(e){for(var t,n,r=0,o=0,i=this._fields.length;o<i;++o){if(n=e[(t=this._fields[o]).name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);r+=t.calculate(n,e)}return r},l.decode=function(e,n,r){"number"!=typeof n&&(n=-1);for(var o,i,s,a,c=e.offset,_=new this.clazz;e.offset<c+n||-1===n&&e.remaining()>0;){if(s=(o=e.readVarint32())>>>3,(i=7&o)===t.WIRE_TYPES.ENDGROUP){if(s!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+s+" ("+(r?r+" expected":"not a group")+")");break}if(a=this._fieldsById[s]){if(a.repeated&&!a.options.packed)_[a.name].push(a.decode(i,e));else if(a.map){var u=a.decode(i,e);_[a.name].set(u[0],u[1])}else if(_[a.name]=a.decode(i,e),a.oneof){var l=_[a.oneof.name];null!==l&&l!==a.name&&(_[l]=null),_[a.oneof.name]=a.name}}else switch(i){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:var E=e.readVarint32();e.offset+=E;break;case t.WIRE_TYPES.STARTGROUP:for(;f(s,e););break;default:throw Error("Illegal wire type for unknown field "+s+" in "+this.toString(!0)+"#decode: "+i)}}for(var d=0,h=this._fields.length;d<h;++d)if(null===_[(a=this._fields[d]).name])if("proto3"===this.syntax)_[a.name]=a.defaultValue;else{if(a.required){var p=Error("Missing at least one required field for "+this.toString(!0)+": "+a.name);throw p.decoded=_,p}t.populateDefaults&&null!==a.defaultValue&&(_[a.name]=a.defaultValue)}return _},n.Message=u;var E=function(e,n,o,i,s,a,c,_,l,f){r.call(this,e,n,a),this.className="Message.Field",this.required="required"===o,this.repeated="repeated"===o,this.map="map"===o,this.keyType=i||null,this.type=s,this.resolvedType=null,this.id=c,this.options=_||{},this.defaultValue=null,this.oneof=l||null,this.syntax=f||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof u.ExtensionField||(this.name=t.Util.toCamelCase(this.name))},d=E.prototype=Object.create(r.prototype);d.build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},d.verifyValue=function(e,n){n=n||!1;var r,o=this;function i(e,t){throw Error("Illegal value for "+o.toString(!0)+" of type "+o.type.name+": "+e+" ("+t+")")}if(null===e)return this.required&&i(typeof e,"required"),"proto3"===this.syntax&&this.type!==t.TYPES.message&&i(typeof e,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){Array.isArray(e)||(e=[e]);var s=[];for(r=0;r<e.length;r++)s.push(this.element.verifyValue(e[r]));return s}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||i(typeof e,"expected ProtoBuf.Map or raw object for map field"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&i(typeof e,"no array expected"),this.element.verifyValue(e))},d.hasWirePresence=function(e,n){if("proto3"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},d.encode=function(n,r,o){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return r;try{var i;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);var s=r.offset;for(i=0;i<n.length;i++)this.element.encodeValue(this.id,n[i],r);var a=r.offset-s,c=e.calculateVarint32(a);if(c>1){var _=r.slice(s,r.offset);s+=c-1,r.offset=s,r.append(_)}r.writeVarint32(a,s-c)}else for(i=0;i<n.length;i++)r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n[i],r);else this.map?n.forEach(function(n,o,i){var s=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,o)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);r.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r.writeVarint32(s),r.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,o,r),r.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,n,r)},this):this.hasWirePresence(n,o)&&(r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n,r))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return r},d.calculate=function(n,r){if(n=this.verifyValue(n),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return 0;var o=0;try{var i,s;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(o+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),s=0,i=0;i<n.length;i++)s+=this.element.calculateLength(this.id,n[i]);o+=e.calculateVarint32(s),o+=s}else for(i=0;i<n.length;i++)o+=e.calculateVarint32(this.id<<3|this.type.wireType),o+=this.element.calculateLength(this.id,n[i]);else this.map?n.forEach(function(n,r,i){var s=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);o+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),o+=e.calculateVarint32(s),o+=s},this):this.hasWirePresence(n,r)&&(o+=e.calculateVarint32(this.id<<3|this.type.wireType),o+=this.element.calculateLength(this.id,n))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return o},d.decode=function(e,n,r){var o,i;if(!(!this.map&&e==this.type.wireType||!r&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!r){i=n.readVarint32(),i=n.offset+i;for(var s=[];n.offset<i;)s.push(this.decode(this.type.wireType,n,!0));return s}if(this.map){var c=a.defaultFieldValue(this.keyType);if(o=a.defaultFieldValue(this.type),i=n.readVarint32(),n.remaining()<i)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+i+" required but got only "+n.remaining());var _=n.clone();for(_.limit=_.offset+i,n.offset+=i;_.remaining()>0;){var u=_.readVarint32();e=7&u;var l=u>>>3;if(1===l)c=this.keyElement.decode(_,e,l);else{if(2!==l)throw Error("Unexpected tag in map field key/value submessage");o=this.element.decode(_,e,l)}}return[c,o]}return this.element.decode(n,e,this.id)},n.Message.Field=E;var h=function(e,t,n,r,o,i,s){E.call(this,e,t,n,null,r,o,i,s),this.extension};h.prototype=Object.create(E.prototype),n.Message.ExtensionField=h,n.Message.OneOf=function(e,t,n){r.call(this,e,t,n),this.fields=[]};var p=function(e,t,n,r,o){i.call(this,e,t,n,r,o),this.className="Enum",this.object=null};p.getName=function(e,t){for(var n,r=Object.keys(e),o=0;o<r.length;++o)if(e[n=r[o]]===t)return n;return null},(p.prototype=Object.create(i.prototype)).build=function(e){if(this.object&&!e)return this.object;for(var n=new t.Builder.Enum,r=this.getChildren(p.Value),o=0,i=r.length;o<i;++o)n[r[o].name]=r[o].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},n.Enum=p;var R=function(e,t,n,o){r.call(this,e,t,n),this.className="Enum.Value",this.id=o};R.prototype=Object.create(r.prototype),n.Enum.Value=R;var m=function(e,t,n,o){r.call(this,e,t,n),this.field=o};m.prototype=Object.create(r.prototype),n.Extension=m;var y=function(e,t,n,r){i.call(this,e,t,n,r),this.className="Service",this.clazz=null};(y.prototype=Object.create(i.prototype)).build=function(n){return this.clazz&&!n?this.clazz:this.clazz=function(t,n){for(var r=function(e){t.Builder.Service.call(this),this.rpcImpl=e||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},o=r.prototype=Object.create(t.Builder.Service.prototype),i=n.getChildren(t.Reflect.Service.RPCMethod),s=0;s<i.length;s++)!function(t){o[t.name]=function(r,o){try{try{r=t.resolvedRequestType.clazz.decode(e.wrap(r))}catch(e){if(!(e instanceof TypeError))throw e}if(null===r||"object"!=typeof r)throw Error("Illegal arguments");r instanceof t.resolvedRequestType.clazz||(r=new t.resolvedRequestType.clazz(r)),this.rpcImpl(t.fqn(),r,function(e,r){if(e)o(e);else{null===r&&(r="");try{r=t.resolvedResponseType.clazz.decode(r)}catch(e){}r&&r instanceof t.resolvedResponseType.clazz?o(null,r):o(Error("Illegal response type received in service method "+n.name+"#"+t.name))}})}catch(e){setTimeout(o.bind(this,e),0)}},r[t.name]=function(e,n,o){new r(e)[t.name](n,o)},Object.defineProperty&&(Object.defineProperty(r[t.name],"$options",{value:t.buildOpt()}),Object.defineProperty(o[t.name],"$options",{value:r[t.name].$options}))}(i[s]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:n.buildOpt()}),Object.defineProperty(o,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:n}),Object.defineProperty(o,"$type",{value:n})),r}(t,this)},n.Service=y;var S=function(e,t,n,o){r.call(this,e,t,n),this.className="Service.Method",this.options=o||{}};(S.prototype=Object.create(r.prototype)).buildOpt=s.buildOpt,n.Service.Method=S;var g=function(e,t,n,r,o,i,s,a){S.call(this,e,t,n,a),this.className="Service.RPCMethod",this.requestName=r,this.responseName=o,this.requestStream=i,this.responseStream=s,this.resolvedRequestType=null,this.resolvedResponseType=null};return g.prototype=Object.create(S.prototype),n.Service.RPCMethod=g,n}(i),i.Builder=function(e,t,r){var o=function(e){this.ns=new r.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},i=o.prototype;return o.isMessage=function(e){return"string"==typeof e.name&&void 0===e.values&&void 0===e.rpc},o.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},o.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},o.isService=function(e){return!("string"!=typeof e.name||"object"!=typeof e.rpc||!e.rpc)},o.isExtend=function(e){return"string"==typeof e.ref},i.reset=function(){return this.ptr=this.ns,this},i.define=function(e){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach(function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new r.Namespace(this,this.ptr,e)),this.ptr=t},this),this},i.create=function(t){if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(var n=[t];n.length>0;){if(t=n.pop(),!Array.isArray(t))throw Error("not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var i=t.shift();if(o.isMessage(i)){var s=new r.Message(this,this.ptr,i.name,i.options,i.isGroup,i.syntax),a={};i.oneofs&&Object.keys(i.oneofs).forEach(function(e){s.addChild(a[e]=new r.Message.OneOf(this,s,e))},this),i.fields&&i.fields.forEach(function(e){if(null!==s.getChild(0|e.id))throw Error("duplicate or invalid field id in "+s.name+": "+e.id);if(e.options&&"object"!=typeof e.options)throw Error("illegal field options in "+s.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=a[e.oneof]))throw Error("illegal oneof in "+s.name+"#"+e.name+": "+e.oneof);e=new r.Message.Field(this,s,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,i.syntax),t&&t.fields.push(e),s.addChild(e)},this);var c=[];if(i.enums&&i.enums.forEach(function(e){c.push(e)}),i.messages&&i.messages.forEach(function(e){c.push(e)}),i.services&&i.services.forEach(function(e){c.push(e)}),i.extensions&&("number"==typeof i.extensions[0]?s.extensions=[i.extensions]:s.extensions=i.extensions),this.ptr.addChild(s),c.length>0){n.push(t),t=c,c=null,this.ptr=s,s=null;continue}c=null}else if(o.isEnum(i))s=new r.Enum(this,this.ptr,i.name,i.options,i.syntax),i.values.forEach(function(e){s.addChild(new r.Enum.Value(this,s,e.name,e.id))},this),this.ptr.addChild(s);else if(o.isService(i))s=new r.Service(this,this.ptr,i.name,i.options),Object.keys(i.rpc).forEach(function(e){var t=i.rpc[e];s.addChild(new r.Service.RPCMethod(this,s,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))},this),this.ptr.addChild(s);else{if(!o.isExtend(i))throw Error("not a valid definition: "+JSON.stringify(i));if(s=this.ptr.resolve(i.ref,!0))i.fields.forEach(function(t){if(null!==s.getChild(0|t.id))throw Error("duplicate extended field id in "+s.name+": "+t.id);if(s.extensions){var n=!1;if(s.extensions.forEach(function(e){t.id>=e[0]&&t.id<=e[1]&&(n=!0)}),!n)throw Error("illegal extended field id in "+s.name+": "+t.id+" (not within valid ranges)")}var o=t.name;this.options.convertFieldsToCamelCase&&(o=e.Util.toCamelCase(o));var i=new r.Message.ExtensionField(this,s,t.rule,t.type,this.ptr.fqn()+"."+o,t.id,t.options),a=new r.Extension(this,this.ptr,t.name,i);i.extension=a,this.ptr.addChild(a),s.addChild(i)},this);else if(!/\.?google\.protobuf\./.test(i.ref))throw Error("extended message "+i.ref+" is not defined")}i=null,s=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},i.import=function(t,r){var o="/";if("string"==typeof r){if(e.Util.IS_NODE&&(r=n(1).resolve(r)),!0===this.files[r])return this.reset();this.files[r]=!0}else if("object"==typeof r){var i,s=r.root;if(e.Util.IS_NODE&&(s=n(1).resolve(s)),(s.indexOf("\\")>=0||r.file.indexOf("\\")>=0)&&(o="\\"),i=e.Util.IS_NODE?n(1).join(s,r.file):s+o+r.file,!0===this.files[i])return this.reset();this.files[i]=!0}if(t.imports&&t.imports.length>0){var a,c=!1;"object"==typeof r?(this.importRoot=r.root,c=!0,a=this.importRoot,r=r.file,(a.indexOf("\\")>=0||r.indexOf("\\")>=0)&&(o="\\")):"string"==typeof r?this.importRoot?a=this.importRoot:r.indexOf("/")>=0?""===(a=r.replace(/\/[^\/]*$/,""))&&(a="/"):r.indexOf("\\")>=0?(a=r.replace(/\\[^\\]*$/,""),o="\\"):a=".":a=null;for(var _=0;_<t.imports.length;_++)if("string"==typeof t.imports[_]){if(!a)throw Error("cannot determine import root");var u=t.imports[_];if("google/protobuf/descriptor.proto"===u)continue;if(u=e.Util.IS_NODE?n(1).join(a,u):a+o+u,!0===this.files[u])continue;/\.proto$/i.test(u)&&!e.DotProto&&(u=u.replace(/\.proto$/,".json"));var l=e.Util.fetch(u);if(null===l)throw Error("failed to import '"+u+"' in '"+r+"': file not found");/\.json$/i.test(u)?this.import(JSON.parse(l+""),u):this.import(e.DotProto.Parser.parse(l),u)}else r?/\.(\w+)$/.test(r)?this.import(t.imports[_],r.replace(/^(.+)\.(\w+)$/,function(e,t,n){return t+"_import"+_+"."+n})):this.import(t.imports[_],r+"_import"+_):this.import(t.imports[_]);c&&(this.importRoot=null)}t.package&&this.define(t.package),t.syntax&&function e(t){t.messages&&t.messages.forEach(function(n){n.syntax=t.syntax,e(n)}),t.enums&&t.enums.forEach(function(e){e.syntax=t.syntax})}(t);var f=this.ptr;return t.options&&Object.keys(t.options).forEach(function(e){f.options[e]=t.options[e]}),t.messages&&(this.create(t.messages),this.ptr=f),t.enums&&(this.create(t.enums),this.ptr=f),t.services&&(this.create(t.services),this.ptr=f),t.extends&&this.create(t.extends),this.reset()},i.resolveAll=function(){var n;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof r.Namespace)this.ptr.children.forEach(function(e){this.ptr=e,this.resolveAll()},this);else if(this.ptr instanceof r.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(n=(this.ptr instanceof r.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=n,n instanceof r.Enum){if(this.ptr.type=e.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==n.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(n instanceof r.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=n.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}"proto3"===this.ptr.syntax&&this.ptr.repeated&&void 0===this.ptr.options.packed&&-1!==e.PACKABLE_WIRE_TYPES.indexOf(this.ptr.type.wireType)&&(this.ptr.options.packed=!0)}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((n=this.ptr.parent.resolve(this.ptr.requestName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=n,!((n=this.ptr.parent.resolve(this.ptr.responseName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=n}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},i.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(var t="string"==typeof e?e.split("."):e,n=this.result,r=0;r<t.length;r++){if(!n[t[r]]){n=null;break}n=n[t[r]]}return n},i.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},i.toString=function(){return"Builder"},o.Message=function(){},o.Enum=function(){},o.Service=function(){},o}(i,i.Lang,i.Reflect),i.Map=function(e,t){var n=function(e,n){if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(var r=Object.keys(n),o=0;o<r.length;o++){var i=this.keyElem.valueFromString(r[o]),s=this.valueElem.verifyValue(n[r[o]]);this.map[this.keyElem.valueToString(i)]={key:i,value:s}}},r=n.prototype;function o(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){for(var e,t=[],n=Object.keys(this.map),r=0;r<n.length;r++)t.push([(e=this.map[n[r]]).key,e.value]);return o(t)},r.keys=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].key);return o(e)},r.values=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].value);return o(e)},r.forEach=function(e,t){for(var n,r=Object.keys(this.map),o=0;o<r.length;o++)e.call(t,(n=this.map[r[o]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),r=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:r},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));if(t in this.map)return this.map[t].value},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},n}(0,i.Reflect),i.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),i.loadJson(i.DotProto.Parser.parse(e),t,n)},i.protoFromString=i.loadProto,i.loadProtoFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(r){if(null!==r)try{t(null,i.loadProto(r,n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var r=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:i.loadProto(r,n,e)},i.protoFromFile=i.loadProtoFile,i.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=i.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=i.populateAccessors),new i.Builder(e)},i.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=i.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},i.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(r){if(null!==r)try{t(null,i.loadJson(JSON.parse(r),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var r=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:i.loadJson(JSON.parse(r),n,e)},i})?o.apply(t,i):o)||(e.exports=s)}).call(this,n(9))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,_=[],u=!1,l=-1;function f(){u&&c&&(u=!1,c.length?_=c.concat(_):l=-1,_.length&&E())}function E(){if(!u){var e=a(f);u=!0;for(var t=_.length;t;){for(c=_,_=[];++l<t;)c&&c[l].run();l=-1,t=_.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];_.push(new d(e,t)),1!==_.length||u||a(E)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){var r,o,i;o=[n(11)],void 0===(i="function"==typeof(r=function(e){"use strict";var t=function(e,n,o){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===n&&(n=t.DEFAULT_ENDIAN),void 0===o&&(o=t.DEFAULT_NOASSERT),!o){if((e|=0)<0)throw RangeError("Illegal capacity");n=!!n,o=!!o}this.buffer=0===e?r:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=n,this.noAssert=o};t.VERSION="5.0.1",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var n=t.prototype;n.__isByteBuffer__,Object.defineProperty(n,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var r=new ArrayBuffer(0),o=String.fromCharCode;function i(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function s(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+o.apply(String,e);e.length+arguments.length>1024&&(t.push(o.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function a(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,_=c>>1,u=-7,l=n?o-1:0,f=n?-1:1,E=e[t+l];for(l+=f,i=E&(1<<-u)-1,E>>=-u,u+=a;u>0;i=256*i+e[t+l],l+=f,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+l],l+=f,u-=8);if(0===i)i=1-_;else{if(i===c)return s?NaN:1/0*(E?-1:1);s+=Math.pow(2,r),i-=_}return(E?-1:1)*s*Math.pow(2,i-r)}function c(e,t,n,r,o,i){var s,a,c,_=8*i-o-1,u=(1<<_)-1,l=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,E=r?0:i-1,d=r?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=u?(a=0,s=u):s+l>=1?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[n+E]=255&a,E+=d,a/=256,o-=8);for(s=s<<o|a,_+=o;_>0;e[n+E]=255&s,E+=d,s/=256,_-=8);e[n+E-d]|=128*h}t.accessor=function(){return Uint8Array},t.allocate=function(e,n,r){return new t(e,n,r)},t.concat=function(e,n,r,o){"boolean"!=typeof n&&"string"==typeof n||(o=r,r=n,n=void 0);for(var i,s=0,a=0,c=e.length;a<c;++a)t.isByteBuffer(e[a])||(e[a]=t.wrap(e[a],n)),(i=e[a].limit-e[a].offset)>0&&(s+=i);if(0===s)return new t(0,r,o);var _,u=new t(s,r,o);for(a=0;a<c;)(i=(_=e[a++]).limit-_.offset)<=0||(u.view.set(_.view.subarray(_.offset,_.limit),u.offset),u.offset+=i);return u.limit=u.offset,u.offset=0,u},t.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},t.type=function(){return ArrayBuffer},t.wrap=function(e,r,o,i){if("string"!=typeof r&&(i=o,o=r,r=void 0),"string"==typeof e)switch(void 0===r&&(r="utf8"),r){case"base64":return t.fromBase64(e,o);case"hex":return t.fromHex(e,o);case"binary":return t.fromBinary(e,o);case"utf8":return t.fromUTF8(e,o);case"debug":return t.fromDebug(e,o);default:throw Error("Unsupported encoding: "+r)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var s;if(t.isByteBuffer(e))return(s=n.clone.call(e)).markedOffset=-1,s;if(e instanceof Uint8Array)s=new t(0,o,i),e.length>0&&(s.buffer=e.buffer,s.offset=e.byteOffset,s.limit=e.byteOffset+e.byteLength,s.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)s=new t(0,o,i),e.byteLength>0&&(s.buffer=e,s.offset=0,s.limit=e.byteLength,s.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");(s=new t(e.length,o,i)).limit=e.length;for(var a=0;a<e.length;++a)s.view[a]=e[a]}return s},n.writeBitSet=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,o=t,i=e.length,s=i>>3,a=0;for(t+=this.writeVarint32(i,t);s--;)r=1&!!e[a++]|(1&!!e[a++])<<1|(1&!!e[a++])<<2|(1&!!e[a++])<<3|(1&!!e[a++])<<4|(1&!!e[a++])<<5|(1&!!e[a++])<<6|(1&!!e[a++])<<7,this.writeByte(r,t++);if(a<i){var c=0;for(r=0;a<i;)r|=(1&!!e[a++])<<c++;this.writeByte(r,t++)}return n?(this.offset=t,this):t-o},n.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var n,r=this.readVarint32(e),o=r.value,i=o>>3,s=0,a=[];for(e+=r.length;i--;)n=this.readByte(e++),a[s++]=!!(1&n),a[s++]=!!(2&n),a[s++]=!!(4&n),a[s++]=!!(8&n),a[s++]=!!(16&n),a[s++]=!!(32&n),a[s++]=!!(64&n),a[s++]=!!(128&n);if(s<o){var c=0;for(n=this.readByte(e++);s<o;)a[s++]=!!(n>>c++&1)}return t&&(this.offset=e),a},n.readBytes=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var r=this.slice(t,t+e);return n&&(this.offset+=e),r},n.writeBytes=n.append,n.writeInt8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeByte=n.writeInt8,n.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return 128==(128&n)&&(n=-(255-n+1)),t&&(this.offset+=1),n},n.readByte=n.readInt8,n.writeUint8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeUInt8=n.writeUint8,n.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return t&&(this.offset+=1),n},n.readUInt8=n.readUint8,n.writeInt16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeShort=n.writeInt16,n.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),32768==(32768&n)&&(n=-(65535-n+1)),t&&(this.offset+=2),n},n.readShort=n.readInt16,n.writeUint16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeUInt16=n.writeUint16,n.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),t&&(this.offset+=2),n},n.readUInt16=n.readUint16,n.writeInt32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeInt=n.writeInt32,n.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),n|=0,t&&(this.offset+=4),n},n.readInt=n.readInt32,n.writeUint32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeUInt32=n.writeUint32,n.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),t&&(this.offset+=4),n},n.readUInt32=n.readUint32,e&&(n.writeInt64=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var o=this.buffer.byteLength;n>o&&this.resize((o*=2)>n?o:n),n-=8;var i=t.low,s=t.high;return this.littleEndian?(this.view[n+3]=i>>>24&255,this.view[n+2]=i>>>16&255,this.view[n+1]=i>>>8&255,this.view[n]=255&i,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=i>>>24&255,this.view[n+1]=i>>>16&255,this.view[n+2]=i>>>8&255,this.view[n+3]=255&i),r&&(this.offset+=8),this},n.writeLong=n.writeInt64,n.readInt64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,o=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0):(o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var i=new e(r,o,!1);return n&&(this.offset+=8),i},n.readLong=n.readInt64,n.writeUint64=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var o=this.buffer.byteLength;n>o&&this.resize((o*=2)>n?o:n),n-=8;var i=t.low,s=t.high;return this.littleEndian?(this.view[n+3]=i>>>24&255,this.view[n+2]=i>>>16&255,this.view[n+1]=i>>>8&255,this.view[n]=255&i,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=i>>>24&255,this.view[n+1]=i>>>16&255,this.view[n+2]=i>>>8&255,this.view[n+3]=255&i),r&&(this.offset+=8),this},n.writeUInt64=n.writeUint64,n.readUint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,o=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0):(o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var i=new e(r,o,!0);return n&&(this.offset+=8),i},n.readUInt64=n.readUint64),n.writeFloat32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,c(this.view,e,t,this.littleEndian,23,4),n&&(this.offset+=4),this},n.writeFloat=n.writeFloat32,n.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=a(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),n},n.readFloat=n.readFloat32,n.writeFloat64=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=8,c(this.view,e,t,this.littleEndian,52,8),n&&(this.offset+=8),this},n.writeDouble=n.writeFloat64,n.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=a(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),n},n.readDouble=n.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},n.writeVarint32=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var o,i=t.calculateVarint32(e);n+=i;var s=this.buffer.byteLength;for(n>s&&this.resize((s*=2)>n?s:n),n-=i,e>>>=0;e>=128;)o=127&e|128,this.view[n++]=o,e>>>=7;return this.view[n++]=e,r?(this.offset=n,this):i},n.writeVarint32ZigZag=function(e,n){return this.writeVarint32(t.zigZagEncode32(e),n)},n.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=0,o=0;do{if(!this.noAssert&&e>this.limit){var i=Error("Truncated");throw i.truncated=!0,i}n=this.view[e++],r<5&&(o|=(127&n)<<7*r),++r}while(0!=(128&n));return o|=0,t?(this.offset=e,o):{value:o,length:r}},n.readVarint32ZigZag=function(e){var n=this.readVarint32(e);return"object"==typeof n?n.value=t.zigZagDecode32(n.value):n=t.zigZagDecode32(n),n},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,r=t.shiftRightUnsigned(28).toInt()>>>0,o=t.shiftRightUnsigned(56).toInt()>>>0;return 0==o?0==r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:o<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},n.writeVarint64=function(n,r){var o=void 0===r;if(o&&(r=this.offset),!this.noAssert){if("number"==typeof n)n=e.fromNumber(n);else if("string"==typeof n)n=e.fromString(n);else if(!(n&&n instanceof e))throw TypeError("Illegal value: "+n+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof n?n=e.fromNumber(n,!1):"string"==typeof n?n=e.fromString(n,!1):!1!==n.unsigned&&(n=n.toSigned());var i=t.calculateVarint64(n),s=n.toInt()>>>0,a=n.shiftRightUnsigned(28).toInt()>>>0,c=n.shiftRightUnsigned(56).toInt()>>>0;r+=i;var _=this.buffer.byteLength;switch(r>_&&this.resize((_*=2)>r?_:r),r-=i,i){case 10:this.view[r+9]=c>>>7&1;case 9:this.view[r+8]=9!==i?128|c:127&c;case 8:this.view[r+7]=8!==i?a>>>21|128:a>>>21&127;case 7:this.view[r+6]=7!==i?a>>>14|128:a>>>14&127;case 6:this.view[r+5]=6!==i?a>>>7|128:a>>>7&127;case 5:this.view[r+4]=5!==i?128|a:127&a;case 4:this.view[r+3]=4!==i?s>>>21|128:s>>>21&127;case 3:this.view[r+2]=3!==i?s>>>14|128:s>>>14&127;case 2:this.view[r+1]=2!==i?s>>>7|128:s>>>7&127;case 1:this.view[r]=1!==i?128|s:127&s}return o?(this.offset+=i,this):i},n.writeVarint64ZigZag=function(e,n){return this.writeVarint64(t.zigZagEncode64(e),n)},n.readVarint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=t,o=0,i=0,s=0,a=0;if(o=127&(a=this.view[t++]),128&a&&(o|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(i=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(s=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[t++]))<<7,128&a||this.noAssert&&void 0===a))))))))))throw Error("Buffer overrun");var c=e.fromBits(o|i<<28,i>>>4|s<<24,!1);return n?(this.offset=t,c):{value:c,length:t-r}},n.readVarint64ZigZag=function(n){var r=this.readVarint64(n);return r&&r.value instanceof e?r.value=t.zigZagDecode64(r.value):r=t.zigZagDecode64(r),r}),n.writeCString=function(e,t){var n=void 0===t;n&&(t=this.offset);var r,o=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(r=0;r<o;++r)if(0===e.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}o=u.calculateUTF16asUTF8(i(e))[1],t+=o+1;var s=this.buffer.byteLength;return t>s&&this.resize((s*=2)>t?s:t),t-=o+1,u.encodeUTF16toUTF8(i(e),function(e){this.view[t++]=e}.bind(this)),this.view[t++]=0,n?(this.offset=t,this):o},n.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=e,o=-1;return u.decodeUTF8toUTF16(function(){if(0===o)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(o=this.view[e++])?null:o}.bind(this),n=s(),!0),t?(this.offset=e,n()):{string:n(),length:e-r}},n.writeIString=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,o=t;r=u.calculateUTF16asUTF8(i(e),this.noAssert)[1],t+=4+r;var s=this.buffer.byteLength;if(t>s&&this.resize((s*=2)>t?s:t),t-=4+r,this.littleEndian?(this.view[t+3]=r>>>24&255,this.view[t+2]=r>>>16&255,this.view[t+1]=r>>>8&255,this.view[t]=255&r):(this.view[t]=r>>>24&255,this.view[t+1]=r>>>16&255,this.view[t+2]=r>>>8&255,this.view[t+3]=255&r),t+=4,u.encodeUTF16toUTF8(i(e),function(e){this.view[t++]=e}.bind(this)),t!==o+4+r)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+r));return n?(this.offset=t,this):t-o},n.readIString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=e,o=this.readUint32(e),i=this.readUTF8String(o,t.METRICS_BYTES,e+=4);return e+=i.length,n?(this.offset=e,i.string):{string:i.string,length:e-r}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",n.writeUTF8String=function(e,t){var n,r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var o=t;n=u.calculateUTF16asUTF8(i(e))[1],t+=n;var s=this.buffer.byteLength;return t>s&&this.resize((s*=2)>t?s:t),t-=n,u.encodeUTF16toUTF8(i(e),function(e){this.view[t++]=e}.bind(this)),r?(this.offset=t,this):t-o},n.writeString=n.writeUTF8String,t.calculateUTF8Chars=function(e){return u.calculateUTF16asUTF8(i(e))[0]},t.calculateUTF8Bytes=function(e){return u.calculateUTF16asUTF8(i(e))[1]},t.calculateString=t.calculateUTF8Bytes,n.readUTF8String=function(e,n,r){"number"==typeof n&&(r=n,n=void 0);var o=void 0===r;if(o&&(r=this.offset),void 0===n&&(n=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,a=0,c=r;if(n===t.METRICS_CHARS){if(i=s(),u.decodeUTF8(function(){return a<e&&r<this.limit?this.view[r++]:null}.bind(this),function(e){++a,u.UTF8toUTF16(e,i)}),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return o?(this.offset=r,i()):{string:i(),length:r-c}}if(n===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+e+") <= "+this.buffer.byteLength)}var _=r+e;if(u.decodeUTF8toUTF16(function(){return r<_?this.view[r++]:null}.bind(this),i=s(),this.noAssert),r!==_)throw RangeError("Illegal range: Truncated data, "+r+" == "+_);return o?(this.offset=r,i()):{string:i(),length:r-c}}throw TypeError("Unsupported metrics: "+n)},n.readString=n.readUTF8String,n.writeVString=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var o,s,a=n;o=u.calculateUTF16asUTF8(i(e),this.noAssert)[1],s=t.calculateVarint32(o),n+=s+o;var c=this.buffer.byteLength;if(n>c&&this.resize((c*=2)>n?c:n),n-=s+o,n+=this.writeVarint32(o,n),u.encodeUTF16toUTF8(i(e),function(e){this.view[n++]=e}.bind(this)),n!==a+o+s)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+o+s));return r?(this.offset=n,this):n-a},n.readVString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=e,o=this.readVarint32(e),i=this.readUTF8String(o.value,t.METRICS_BYTES,e+=o.length);return e+=i.length,n?(this.offset=e,i.string):{string:i.string,length:e-r}},n.append=function(e,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var o=void 0===r;if(o&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var i=e.limit-e.offset;if(i<=0)return this;r+=i;var s=this.buffer.byteLength;return r>s&&this.resize((s*=2)>r?s:r),r-=i,this.view.set(e.view.subarray(e.offset,e.limit),r),e.offset+=i,o&&(this.offset+=i),this},n.appendTo=function(e,t){return e.append(this,t),this},n.assert=function(e){return this.noAssert=!e,this},n.capacity=function(){return this.buffer.byteLength},n.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},n.clone=function(e){var n=new t(0,this.littleEndian,this.noAssert);return e?(n.buffer=new ArrayBuffer(this.buffer.byteLength),n.view=new Uint8Array(n.buffer)):(n.buffer=this.buffer,n.view=this.view),n.offset=this.offset,n.markedOffset=this.markedOffset,n.limit=this.limit,n},n.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var n=t-e;if(0===n)return this.buffer=r,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var o=new ArrayBuffer(n),i=new Uint8Array(o);return i.set(this.view.subarray(e,t)),this.buffer=o,this.view=i,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},n.copy=function(e,n){if(void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(e===n)return new t(0,this.littleEndian,this.noAssert);var r=n-e,o=new t(r,this.littleEndian,this.noAssert);return o.offset=0,o.limit=r,o.markedOffset>=0&&(o.markedOffset-=e),this.copyTo(o,0,e,n),o},n.copyTo=function(e,n,r,o){var i,s;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(n=(s=void 0===n)?e.offset:0|n,r=(i=void 0===r)?this.offset:0|r,o=void 0===o?this.limit:0|o,n<0||n>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+n+" <= "+e.buffer.byteLength);if(r<0||o>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=o-r;return 0===a?e:(e.ensureCapacity(n+a),e.view.set(this.view.subarray(r,o),n),i&&(this.offset+=a),s&&(e.offset+=a),this)},n.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},n.fill=function(e,t,n){var r=void 0===t;if(r&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;t<n;)this.view[t++]=e;return r&&(this.offset=t),this},n.flip=function(){return this.limit=this.offset,this.offset=0,this},n.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},n.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},n.LE=function(e){return this.littleEndian=void 0===e||!!e,this},n.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},n.prepend=function(e,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var o=void 0===r;if(o&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var i=e.limit-e.offset;if(i<=0)return this;var s=i-r;if(s>0){var a=new ArrayBuffer(this.buffer.byteLength+s),c=new Uint8Array(a);c.set(this.view.subarray(r,this.buffer.byteLength),i),this.buffer=a,this.view=c,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,r+=s}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),r-i),e.offset=e.limit,o&&(this.offset-=i),this},n.prependTo=function(e,t){return e.prepend(this,t),this},n.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},n.remaining=function(){return this.limit-this.offset},n.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},n.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),n=new Uint8Array(t);n.set(this.view),this.buffer=t,this.view=n}return this},n.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(this.view.subarray(e,t)),this)},n.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},n.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},n.toBuffer=function(e){var t=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return r;var o=new ArrayBuffer(n-t);return new Uint8Array(o).set(new Uint8Array(this.buffer).subarray(t,n),0),o},n.toArrayBuffer=n.toBuffer,n.toString=function(e,t,n){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(n=t=e="utf8"),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var _=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],r=0,o=t.length;r<o;++r)n[t[r]]=r;return e.encode=function(e,n){for(var r,o;null!==(r=e());)n(t[r>>2&63]),o=(3&r)<<4,null!==(r=e())?(n(t[63&((o|=r>>4&15)|r>>4&15)]),o=(15&r)<<2,null!==(r=e())?(n(t[63&(o|r>>6&3)]),n(t[63&r])):(n(t[63&o]),n(61))):(n(t[63&o]),n(61),n(61))},e.decode=function(e,t){var r,o,i;function s(e){throw Error("Illegal character code: "+e)}for(;null!==(r=e());)if(void 0===(o=n[r])&&s(r),null!==(r=e())&&(void 0===(i=n[r])&&s(r),t(o<<2>>>0|(48&i)>>4),null!==(r=e()))){if(void 0===(o=n[r])){if(61===r)break;s(r)}if(t((15&i)<<4>>>0|(60&o)>>2),null!==(r=e())){if(void 0===(i=n[r])){if(61===r)break;s(r)}t((3&o)<<6>>>0|i)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();n.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var n;return _.encode(function(){return e<t?this.view[e++]:null}.bind(this),n=s()),n()},t.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var r=new t(e.length/4*3,n),o=0;return _.decode(i(e),function(e){r.view[o++]=e}),r.limit=o,r},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},n.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],r=[];e<t;)n.push(this.view[e++]),n.length>=1024&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},t.fromBinary=function(e,n){if("string"!=typeof e)throw TypeError("str");for(var r,o=0,i=e.length,s=new t(i,n);o<i;){if((r=e.charCodeAt(o))>255)throw RangeError("illegal char code: "+r);s.view[o++]=r}return s.limit=i,s},n.toDebug=function(e){for(var t,n=-1,r=this.buffer.byteLength,o="",i="",s="";n<r;){if(-1!==n&&(o+=(t=this.view[n])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(i+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16==0&&n!==r){for(;o.length<51;)o+=" ";s+=o+i+"\n",o=i=""}n===this.offset&&n===this.limit?o+=n===this.markedOffset?"!":"|":n===this.offset?o+=n===this.markedOffset?"[":"<":n===this.limit?o+=n===this.markedOffset?"]":">":o+=n===this.markedOffset?"'":e||0!==n&&n!==r?" ":""}if(e&&" "!==o){for(;o.length<51;)o+=" ";s+=o+i+"\n"}return e?s:o},t.fromDebug=function(e,n,r){for(var o,i,s=e.length,a=new t((s+1)/3|0,n,r),c=0,_=0,u=!1,l=!1,f=!1,E=!1,d=!1;c<s;){switch(o=e.charAt(c++)){case"!":if(!r){if(l||f||E){d=!0;break}l=f=E=!0}a.offset=a.markedOffset=a.limit=_,u=!1;break;case"|":if(!r){if(l||E){d=!0;break}l=E=!0}a.offset=a.limit=_,u=!1;break;case"[":if(!r){if(l||f){d=!0;break}l=f=!0}a.offset=a.markedOffset=_,u=!1;break;case"<":if(!r){if(l){d=!0;break}l=!0}a.offset=_,u=!1;break;case"]":if(!r){if(E||f){d=!0;break}E=f=!0}a.limit=a.markedOffset=_,u=!1;break;case">":if(!r){if(E){d=!0;break}E=!0}a.limit=_,u=!1;break;case"'":if(!r){if(f){d=!0;break}f=!0}a.markedOffset=_,u=!1;break;case" ":u=!1;break;default:if(!r&&u){d=!0;break}if(i=parseInt(o+e.charAt(c++),16),!r&&(isNaN(i)||i<0||i>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[_++]=i,u=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+c)}if(!r){if(!l||!E)throw TypeError("Illegal str: Missing offset or limit");if(_<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+_+" < "+s)}return a},n.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,r=new Array(t-e);e<t;)(n=this.view[e++])<16?r.push("0",n.toString(16)):r.push(n.toString(16));return r.join("")},t.fromHex=function(e,n,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var o,i=e.length,s=new t(i/2|0,n),a=0,c=0;a<i;a+=2){if(o=parseInt(e.substring(a,a+2),16),!r&&(!isFinite(o)||o<0||o>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[c++]=o}return s.limit=c,s};var u=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(n>>6&31|192),t(63&n|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},decodeUTF8:function(e,t){for(var n,r,o,i,s=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(r=e())&&s([n,r]),t((31&n)<<6|63&r);else if(224==(240&n))(null===(r=e())||null===(o=e()))&&s([n,r,o]),t((15&n)<<12|(63&r)<<6|63&o);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=e())||null===(o=e())||null===(i=e()))&&s([n,r,o,i]),t((7&n)<<18|(63&r)<<12|(63&o)<<6|63&i)}},UTF16toUTF8:function(e,t){for(var n,r=null;null!==(n=null!==r?r:e());)n>=55296&&n<=57343&&null!==(r=e())&&r>=56320&&r<=57343?(t(1024*(n-55296)+r-56320+65536),r=null):t(n);null!==r&&t(r)},UTF8toUTF16:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,n)})},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,n)})},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,r=0;return e.UTF16toUTF8(t,function(e){++n,r+=e<128?1:e<2048?2:e<65536?3:4}),[n,r]}};return e}();return n.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;try{u.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),n=s())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return n()},t.fromUTF8=function(e,n,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var o=new t(u.calculateUTF16asUTF8(i(e),!0)[1],n,r),s=0;return u.encodeUTF16toUTF8(i(e),function(e){o.view[s++]=e}),o.limit=s,o},t})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){var r,o;void 0===(o="function"==typeof(r=function(){"use strict";function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},r={};function o(e,t){var o,i,a;return t?(a=0<=(e>>>=0)&&e<256)&&(i=r[e])?i:(o=s(e,(0|e)<0?-1:0,!0),a&&(r[e]=o),o):(a=-128<=(e|=0)&&e<128)&&(i=n[e])?i:(o=s(e,e<0?-1:0,!1),a&&(n[e]=o),o)}function i(e,t){if(isNaN(e)||!isFinite(e))return t?h:d;if(t){if(e<0)return h;if(e>=l)return S}else{if(e<=-f)return g;if(e+1>=f)return y}return e<0?i(-e,t).neg():s(e%u|0,e/u|0,t)}function s(t,n,r){return new e(t,n,r)}e.fromInt=o,e.fromNumber=i,e.fromBits=s;var a=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return d;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var o=i(a(n,8)),s=d,_=0;_<e.length;_+=8){var u=Math.min(8,e.length-_),l=parseInt(e.substring(_,_+u),n);if(u<8){var f=i(a(n,u));s=s.mul(f).add(i(l))}else s=(s=s.mul(o)).add(i(l))}return s.unsigned=t,s}function _(t){return t instanceof e?t:"number"==typeof t?i(t):"string"==typeof t?c(t):s(t.low,t.high,t.unsigned)}e.fromString=c,e.fromValue=_;var u=4294967296,l=u*u,f=l/2,E=o(1<<24),d=o(0);e.ZERO=d;var h=o(0,!0);e.UZERO=h;var p=o(1);e.ONE=p;var R=o(1,!0);e.UONE=R;var m=o(-1);e.NEG_ONE=m;var y=s(-1,2147483647,!1);e.MAX_VALUE=y;var S=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=S;var g=s(0,-2147483648,!1);e.MIN_VALUE=g;var C=e.prototype;return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*u+(this.low>>>0):this.high*u+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(g)){var t=i(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=i(a(e,6),this.unsigned),s=this,c="";;){var _=s.div(o),u=(s.sub(_.mul(o)).toInt()>>>0).toString(e);if((s=_).isZero())return u+c;for(;u.length<6;)u="0"+u;c=""+u+c}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(g)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return t(e)||(e=_(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.compare=function(e){if(t(e)||(e=_(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(g)?g:this.not().add(p)},C.neg=C.negate,C.add=function(e){t(e)||(e=_(e));var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,a=e.high>>>16,c=65535&e.high,u=e.low>>>16,l=0,f=0,E=0,d=0;return E+=(d+=i+(65535&e.low))>>>16,f+=(E+=o+u)>>>16,l+=(f+=r+c)>>>16,l+=n+a,s((E&=65535)<<16|(d&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},C.subtract=function(e){return t(e)||(e=_(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return d;if(t(e)||(e=_(e)),e.isZero())return d;if(this.eq(g))return e.isOdd()?g:d;if(e.eq(g))return this.isOdd()?g:d;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(E)&&e.lt(E))return i(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,a=65535&this.low,c=e.high>>>16,u=65535&e.high,l=e.low>>>16,f=65535&e.low,h=0,p=0,R=0,m=0;return R+=(m+=a*f)>>>16,p+=(R+=o*f)>>>16,R&=65535,p+=(R+=a*l)>>>16,h+=(p+=r*f)>>>16,p&=65535,h+=(p+=o*l)>>>16,p&=65535,h+=(p+=a*u)>>>16,h+=n*f+r*l+o*u+a*c,s((R&=65535)<<16|(m&=65535),(h&=65535)<<16|(p&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(t(e)||(e=_(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?h:d;var n,r,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return h;if(e.gt(this.shru(1)))return R;o=h}else{if(this.eq(g))return e.eq(p)||e.eq(m)?g:e.eq(g)?p:(n=this.shr(1).div(e).shl(1)).eq(d)?e.isNegative()?p:m:(r=this.sub(e.mul(n)),o=n.add(r.div(e)));if(e.eq(g))return this.unsigned?h:d;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=d}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:a(2,s-48),u=i(n),l=u.mul(e);l.isNegative()||l.gt(r);)l=(u=i(n-=c,this.unsigned)).mul(e);u.isZero()&&(u=p),o=o.add(u),r=r.sub(l)}return o},C.div=C.divide,C.modulo=function(e){return t(e)||(e=_(e)),this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.not=function(){return s(~this.low,~this.high,this.unsigned)},C.and=function(e){return t(e)||(e=_(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return t(e)||(e=_(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return t(e)||(e=_(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;return e<32?s(this.low>>>e|n<<32-e,n>>>e,this.unsigned):s(32===e?n:n>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e})?r.apply(t,[]):r)||(e.exports=o)},function(e,t){},function(e){e.exports={package:"mgobexs",syntax:"proto3",messages:[{name:"ClientSendServerReqWrap1",syntax:"proto3",fields:[{name:"version",type:"string",id:1},{name:"appName",type:"string",id:2},{name:"cmd",type:"string",id:3},{name:"seq",type:"string",id:4},{name:"clientIp",type:"string",id:5},{name:"serviceIp",type:"string",id:6},{name:"business",type:"string",id:7},{name:"authKey",type:"string",id:8},{name:"authType",type:"uint32",id:9},{name:"authIp",type:"string",id:10},{name:"gameId",type:"string",id:11},{name:"uid",type:"uint64",id:12},{name:"playerId",type:"string",id:13},{name:"body",type:"bytes",id:14}]},{name:"ServerSendClientBstWrap1",syntax:"proto3",fields:[{name:"version",type:"string",id:1},{name:"appName",type:"string",id:2},{name:"cmd",type:"string",id:3},{name:"seq",type:"string",id:4},{name:"clientIp",type:"string",id:5},{name:"serviceIp",type:"string",id:6},{name:"business",type:"string",id:7},{name:"authKey",type:"string",id:8},{name:"authType",type:"uint32",id:9},{name:"authIp",type:"string",id:10},{name:"gameId",type:"string",id:11},{name:"uid",type:"uint64",id:12},{name:"playerId",type:"string",id:13},{name:"body",type:"bytes",id:14}]},{name:"ClientSendServerRspWrap1",syntax:"proto3",fields:[{name:"seq",type:"string",id:1},{name:"errCode",type:"int32",id:2},{name:"errMsg",type:"string",id:3},{name:"body",type:"bytes",id:4}]},{name:"ClientSendServerReqWrap2",syntax:"proto3",fields:[{name:"cmd",type:"ClientSendServerReqWrap2Cmd",id:1},{name:"body",type:"bytes",id:2}]},{name:"ClientSendServerRspWrap2",syntax:"proto3",fields:[{name:"body",type:"bytes",id:1}]},{name:"HeartBeatReq",syntax:"proto3",fields:[{name:"conType",type:"ConnectionType",id:1},{name:"routeId",type:"string",id:2}]},{name:"HeartBeatRsp",syntax:"proto3",fields:[]},{name:"ServerSendClientBstWrap2",syntax:"proto3",fields:[{name:"type",type:"ServerSendClientBstWrap2Type",id:1},{name:"msg",type:"bytes",id:2}]},{name:"NOUSEServerSendClientBstRspWrap2",syntax:"proto3",fields:[]},{name:"CheckLoginReq",syntax:"proto3",fields:[{name:"token",type:"string",id:1},{name:"routeId",type:"string",id:2}]},{name:"CheckLoginRsp",syntax:"proto3",fields:[]},{name:"PushBodyType",syntax:"proto3",fields:[{name:"pushMsg",type:"string",id:1}]},{name:"LoginReq",syntax:"proto3",fields:[{name:"gameId",type:"string",id:1},{name:"openId",type:"string",id:2},{name:"platform",type:"uint64",id:3},{name:"channel",type:"uint64",id:4},{name:"nonce",type:"uint64",id:5},{name:"timestamp",type:"uint64",id:6},{name:"sign",type:"string",id:7},{name:"deviceId",type:"string",id:8},{name:"mac",type:"string",id:9},{name:"imei",type:"string",id:10}]},{name:"LoginRsp",syntax:"proto3",fields:[{name:"token",type:"string",id:1},{name:"playerId",type:"string",id:2},{name:"expireTime",type:"uint64",id:3},{name:"sdkConfig",type:"SdkConfig",id:4}]},{name:"SdkConfig",syntax:"proto3",fields:[{name:"pingInterval",type:"uint32",id:1},{name:"reportInterval",type:"uint32",id:2},{name:"serverTime",type:"uint64",id:3},{name:"enableUdp",type:"bool",id:4}]},{name:"LogoutReq",syntax:"proto3",fields:[]},{name:"LogoutRsp",syntax:"proto3",fields:[]},{name:"StartFrameSyncReq",syntax:"proto3",fields:[]},{name:"StartFrameSyncRsp",syntax:"proto3",fields:[]},{name:"StopFrameSyncReq",syntax:"proto3",fields:[]},{name:"StopFrameSyncRsp",syntax:"proto3",fields:[]},{name:"FrameItem",syntax:"proto3",fields:[{name:"playerId",type:"string",id:1},{name:"data",type:"string",id:2},{name:"timestamp",type:"uint64",id:3}]},{name:"SendFrameReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"item",type:"FrameItem",id:2}]},{name:"SendFrameRsp",syntax:"proto3",fields:[]},{name:"FrameExtInfo",syntax:"proto3",fields:[{name:"seed",type:"uint64",id:1}]},{name:"Frame",syntax:"proto3",fields:[{name:"id",type:"uint64",id:1},{rule:"repeated",name:"items",type:"FrameItem",id:2},{name:"ext",type:"FrameExtInfo",id:3}]},{name:"RequestFrameReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"beginFrameId",type:"uint64",id:2},{name:"endFrameId",type:"uint64",id:3}]},{name:"RequestFrameRsp",syntax:"proto3",fields:[{rule:"repeated",name:"frames",type:"Frame",id:1}]},{name:"PlayerInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"teamId",type:"string",id:3},{name:"customPlayerStatus",type:"uint64",id:4},{name:"customProfile",type:"string",id:5},{name:"commonNetworkState",type:"NetworkState",id:6},{name:"relayNetworkState",type:"NetworkState",id:7},{name:"isRobot",type:"bool",id:8},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:9}]},{name:"TeamInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"minPlayers",type:"uint32",id:3},{name:"maxPlayers",type:"uint32",id:4}]},{name:"RoomInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"type",type:"string",id:3},{name:"createType",type:"CreateRoomType",id:4},{name:"maxPlayers",type:"uint64",id:5},{name:"owner",type:"string",id:6},{name:"isPrivate",type:"bool",id:9},{name:"customProperties",type:"string",id:10},{rule:"repeated",name:"playerList",type:"PlayerInfo",id:11},{rule:"repeated",name:"teamList",type:"TeamInfo",id:13},{name:"frameSyncState",type:"FrameSyncState",id:14},{name:"frameRate",type:"uint32",id:15},{name:"routeId",type:"string",id:16},{name:"createTime",type:"uint64",id:17},{name:"startGameTime",type:"uint64",id:18},{name:"isForbidJoin",type:"bool",id:19}]},{name:"CreateRoomReq",syntax:"proto3",fields:[{name:"roomName",type:"string",id:1},{name:"roomType",type:"string",id:2},{name:"createType",type:"CreateRoomType",id:3},{name:"maxPlayers",type:"uint64",id:4},{name:"isPrivate",type:"bool",id:7},{name:"customProperties",type:"string",id:8},{name:"playerInfo",type:"PlayerInfo",id:9},{name:"region",type:"string",id:11},{name:"owner",type:"string",id:12},{rule:"repeated",name:"playerList",type:"PlayerInfo",id:13},{rule:"repeated",name:"teamList",type:"TeamInfo",id:14}]},{name:"CreateRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"JoinRoomReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"teamId",type:"string",id:2},{name:"joinType",type:"JoinRoomType",id:3},{name:"playerInfo",type:"PlayerInfo",id:4}]},{name:"JoinRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"LeaveRoomReq",syntax:"proto3",fields:[]},{name:"LeaveRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"DismissRoomReq",syntax:"proto3",fields:[]},{name:"DismissRoomRsp",syntax:"proto3",fields:[]},{name:"ChangeRoomReq",syntax:"proto3",fields:[{name:"roomName",type:"string",id:1},{name:"owner",type:"string",id:2},{name:"isPrivate",type:"bool",id:5},{name:"customProperties",type:"string",id:6},{name:"isForbidJoin",type:"bool",id:7},{rule:"repeated",name:"changeRoomOptionList",type:"ChangeRoomOption",id:8}]},{name:"ChangeRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:4}]},{name:"SvrChangeRoomReq",syntax:"proto3",fields:[{name:"roomName",type:"string",id:1},{name:"owner",type:"string",id:2},{name:"isPrivate",type:"bool",id:5},{name:"customProperties",type:"string",id:6},{name:"isForbidJoin",type:"bool",id:7},{name:"roomId",type:"string",id:8},{rule:"repeated",name:"changeRoomOptionList",type:"ChangeRoomOption",id:9}]},{name:"SvrChangeRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:4}]},{name:"RemovePlayerReq",syntax:"proto3",fields:[{name:"removePlayerId",type:"string",id:3}]},{name:"RemovePlayerRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"SvrRemovePlayerReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"removePlayerId",type:"string",id:3}]},{name:"SvrRemovePlayerRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"GetRoomByRoomIdReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1}]},{name:"GetRoomByRoomIdRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"SendToClientReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{rule:"repeated",name:"recvPlayerList",type:"string",id:2},{name:"msg",type:"string",id:3}]},{name:"SendToClientRsp",syntax:"proto3",fields:[]},{name:"ChangeCustomPlayerStatusReq",syntax:"proto3",fields:[{name:"customPlayerStatus",type:"uint64",id:1}]},{name:"ChangeCustomPlayerStatusRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"SvrChangeCustomPlayerStatusReq",syntax:"proto3",fields:[{name:"customPlayerStatus",type:"uint64",id:1}]},{name:"SvrChangeCustomPlayerStatusRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"ChangePlayerNetworkStateReq",syntax:"proto3",fields:[{name:"networkState",type:"NetworkState",id:1}]},{name:"ChangePlayerNetworkStateRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"GetRoomListReq",syntax:"proto3",fields:[{name:"gameId",type:"string",id:1},{name:"pageNo",type:"uint32",id:2},{name:"pageSize",type:"uint32",id:3},{name:"roomType",type:"string",id:4},{name:"isDesc",type:"bool",id:5}]},{name:"GetRoomListRsp",syntax:"proto3",fields:[{name:"gameId",type:"string",id:1},{rule:"repeated",name:"roomList",type:"RoomInfo",id:2},{name:"total",type:"uint64",id:3}]},{name:"MatchRoomSimpleReq",syntax:"proto3",fields:[{name:"roomType",type:"string",id:1},{name:"maxPlayers",type:"uint64",id:2},{name:"playerInfo",type:"PlayerInfo",id:3}]},{name:"MatchRoomSimpleRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"MatchRoomComplexReq",syntax:"proto3",fields:[]},{name:"MatchRoomComplexRsp",syntax:"proto3",fields:[]},{name:"MatchPlayersSimpleReq",syntax:"proto3",fields:[]},{name:"MatchPlayersSimpleRsp",syntax:"proto3",fields:[]},{name:"MatchAttribute",syntax:"proto3",fields:[{name:"name",type:"string",id:1},{name:"value",type:"int32",id:2}]},{name:"MatchPlayerInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"customPlayerStatus",type:"uint64",id:3},{name:"customProfile",type:"string",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{name:"matchStatus",type:"MatchStatus",id:6},{name:"teamId",type:"string",id:7},{name:"region",type:"string",id:8},{name:"teamLeader",type:"string",id:9},{name:"sdkVersion",type:"string",id:10},{name:"groupId",type:"string",id:11}]},{name:"MatchGroupPlayerInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"customPlayerStatus",type:"uint64",id:3},{name:"customProfile",type:"string",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{name:"matchStatus",type:"MatchStatus",id:6},{name:"teamId",type:"string",id:7},{name:"region",type:"string",id:8},{name:"teamLeader",type:"string",id:9},{name:"sdkVersion",type:"string",id:10},{name:"groupId",type:"string",id:11}]},{name:"MatchGroupInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"leader",type:"string",id:2},{rule:"repeated",name:"playerIdList",type:"string",id:3},{rule:"repeated",name:"playerInfoList",type:"MatchPlayerInfo",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{name:"region",type:"string",id:6},{name:"sdkVersion",type:"string",id:7},{name:"teamId",type:"string",id:8}]},{name:"MatchTeamInfo",syntax:"proto3",fields:[{name:"teamId",type:"string",id:1},{name:"teamName",type:"string",id:2},{name:"teamLeader",type:"string",id:3},{rule:"repeated",name:"members",type:"string",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{rule:"repeated",name:"memberSdkVersions",type:"string",id:6},{rule:"repeated",name:"groupIds",type:"string",id:7},{rule:"repeated",name:"groupSdkVersions",type:"string",id:8}]},{name:"MatchPlayersReq",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:2},{name:"playerInfo",type:"MatchPlayerInfo",id:3}]},{name:"MatchPlayersRsp",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1}]},{name:"MatchGroupReq",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1},{rule:"repeated",name:"playerInfoList",type:"MatchGroupPlayerInfo",id:2}]},{name:"MatchGroupRsp",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1}]},{name:"CancelPlayerMatchReq",syntax:"proto3",fields:[{name:"matchType",type:"MatchType",id:3}]},{name:"CancelPlayerMatchRsp",syntax:"proto3",fields:[]},{name:"CreateRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"DestroyRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"JoinRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1},{name:"joinPlayerId",type:"string",id:2}]},{name:"LeaveRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1},{name:"leavePlayerId",type:"string",id:2}]},{name:"RemovePlayerBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1},{name:"removePlayerId",type:"string",id:2}]},{name:"DismissRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"ChangeRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"RecvFromClientBst",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"sendPlayerId",type:"string",id:2},{name:"msg",type:"string",id:3}]},{name:"ChangeCustomPlayerStatusBst",syntax:"proto3",fields:[{name:"changePlayerId",type:"string",id:1},{name:"customPlayerStatus",type:"uint64",id:2},{name:"roomInfo",type:"RoomInfo",id:3}]},{name:"ChangePlayerNetworkStateBst",syntax:"proto3",fields:[{name:"changePlayerId",type:"string",id:1},{name:"networkState",type:"NetworkState",id:2},{name:"roomInfo",type:"RoomInfo",id:3}]},{name:"MatchTimeoutBst",syntax:"proto3",fields:[{name:"matchType",type:"MatchType",id:1},{name:"errCode",type:"int32",id:2}]},{name:"CancelMatchBst",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1},{name:"playerId",type:"string",id:2}]},{name:"MatchPlayersBst",syntax:"proto3",fields:[{name:"matchType",type:"MatchType",id:1},{name:"roomInfo",type:"RoomInfo",id:2}]},{name:"StartFrameSyncBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"StopFrameSyncBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"RecvFrameBst",syntax:"proto3",fields:[{name:"frame",type:"Frame",id:1}]},{name:"GameSvrCommunication",syntax:"proto3",fields:[{name:"type",type:"GameSvrForwardType",id:1},{name:"body",type:"bytes",id:2}]},{name:"NotifyRelayConnectionReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"ip",type:"string",id:2},{name:"port",type:"uint32",id:3}]},{name:"NotifyRoomEventReq",syntax:"proto3",fields:[{name:"cmd",type:"ServerSendClientBstWrap2Type",id:1},{name:"msg",type:"bytes",id:2}]},{name:"SendToGameSvrReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"playerId",type:"string",id:2},{name:"data",type:"string",id:3}]},{name:"SendToGameSvrRsp",syntax:"proto3",fields:[]},{name:"RecvFromGameSvrBst",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{rule:"repeated",name:"recvPlayerIdList",type:"string",id:2},{name:"data",type:"string",id:3}]},{name:"ClientRecvFromGameSvrRsp",syntax:"proto3",fields:[]}],enums:[{name:"ConnectionType",syntax:"proto3",values:[{name:"COMMON",id:0},{name:"RELAY",id:1}]},{name:"ServerSendClientBstWrap2Type",syntax:"proto3",values:[{name:"E_PUSH_TYPE_TEST",id:0},{name:"E_PUSH_TYPE_RELAY",id:1},{name:"E_PUSH_TYPE_GAMESVR",id:2},{name:"E_PUSH_TYPE_JOIN_ROOM",id:100},{name:"E_PUSH_TYPE_LEAVE_ROOM",id:101},{name:"E_PUSH_TYPE_DISMISS_ROOM",id:102},{name:"E_PUSH_TYPE_REMOVE_PLAYER",id:103},{name:"E_PUSH_TYPE_MODIFY_ROOM_PROPERTY",id:104},{name:"E_PUSH_TYPE_NETWORK_STATE",id:105},{name:"E_PUSH_TYPE_ROOM_CHAT",id:106},{name:"E_PUSH_TYPE_PLAYER_STATE",id:107},{name:"E_PUSH_TYPE_START_GAME",id:108},{name:"E_PUSH_TYPE_STOP_GAME",id:109},{name:"E_PUSH_TYPE_CREATE_ROOM",id:110},{name:"E_PUSH_TYPE_DESTROY_ROOM",id:111},{name:"E_PUSH_TYPE_MATCH_SUCCESS",id:200},{name:"E_PUSH_TYPE_MATCH_TIMEOUT",id:201},{name:"E_PUSH_TYPE_MATCH_CANCEL",id:202}]},{name:"ClientSendServerReqWrap2Cmd",syntax:"proto3",values:[{name:"E_CMD_INVALID",id:0},{name:"E_CMD_HEART_BEAT_REQ",id:100},{name:"E_CMD_CHECK_LOGIN_REQ",id:101},{name:"E_CMD_LOGIN_TO_ROOM_REQ",id:102},{name:"E_CMD_FORWARD_TO_RELAY_REQ",id:103},{name:"E_CMD_LOGIN_REQ",id:1e3},{name:"E_CMD_LOGOUT_REQ",id:1001},{name:"E_CMD_AUTH_REQ",id:1002},{name:"E_CMD_QUERY_BY_PLAYER_ID_REQ",id:1003},{name:"E_CMD_QUERY_BY_GAME_ID_REQ",id:1004},{name:"E_CMD_GET_ROOM_DETAIL_REQ",id:2001},{name:"E_CMD_JOIN_ROOM_REQ",id:2002},{name:"E_CMD_QUIT_ROOM_REQ",id:2003},{name:"E_CMD_CREATE_ROOM_REQ",id:2004},{name:"E_CMD_DESTORY_ROOM_REQ",id:2005},{name:"E_CMD_REMOVE_MEMBER_REQ",id:2006},{name:"E_CMD_CHANGE_ROOM_PROPERTIS_REQ",id:2007},{name:"E_CMD_DISSMISS_ROOM_REQ",id:2008},{name:"E_CMD_CHANGE_PLAYER_STATE_REQ",id:2009},{name:"E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ",id:2010},{name:"E_CMD_ROOM_CHAT_REQ",id:2011},{name:"E_CMD_START_FRAME_SYNC_REQ",id:2012},{name:"E_CMD_STOP_FRAME_SYNC_REQ",id:2013},{name:"E_CMD_GET_ROOM_LIST_REQ",id:2014},{name:"E_CMD_SVR_REMOVE_MEMBER_REQ",id:2015},{name:"E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ",id:2016},{name:"E_CMD_SVR_CHANGE_PLAYER_STATE_REQ",id:2017},{name:"E_CMD_GET_ROOM_LIST_V2_REQ",id:2018},{name:"E_CMD_MATCH_ROOM_SIMPLE_REQ",id:3001},{name:"E_CMD_MATCH_USER_SIMPLE_REQ",id:3002},{name:"E_CMD_MATCH_CANCEL_MATCH_REQ",id:3003},{name:"E_CMD_MATCH_ROOM_COMPLEX_REQ",id:3004},{name:"E_CMD_MATCH_PLAYER_COMPLEX_REQ",id:3005},{name:"E_CMD_MATCH_GROUP_REQ",id:3006},{name:"E_CMD_RELAY_SEND_FRAME_REQ",id:4e3},{name:"E_CMD_RELAY_REQUEST_FRAME_REQ",id:4001},{name:"E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ",id:4002},{name:"E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ",id:4003},{name:"E_CMD_NOTIFY_JOIN_ROOM",id:5e3},{name:"E_CMD_NOTIFY_QUIT_ROOM",id:5001},{name:"E_CMD_NOTIFY_DESTORY_ROOM",id:5002},{name:"E_CMD_NOTIFY_NET_STATE",id:5003},{name:"E_CMD_NOTIFY_KICK_MEMBER",id:5004},{name:"E_CMD_GET_ADDR_BY_ROUTER_ID_REQ",id:6e3}]},{name:"QAppProtoErrCode",syntax:"proto3",values:[{name:"EC_OK",id:0},{name:"EC_REQ_BAD_PKG",id:1},{name:"EC_CMD_INVALID",id:2},{name:"EC_PARAMS_INVALID",id:3},{name:"EC_INNER_ERROR",id:4},{name:"EC_TIME_OUT",id:5},{name:"EC_SERVER_BUSY",id:6},{name:"EC_NO_RIGHT",id:7},{name:"EC_ACCESS_CMD_INVALID_ERR",id:200},{name:"EC_ACCESS_CMD_GET_TOKEN_ERR",id:201},{name:"EC_ACCESS_CMD_TOKEN_PRE_EXPIRE",id:202},{name:"EC_ACCESS_CMD_INVALID_TOKEN",id:203},{name:"EC_ACCESS_PUSH_SERIALIZE_ERR",id:204},{name:"EC_ACCESS_LOGIN_BODY_PARSE_ERR",id:205},{name:"EC_ACCESS_CONN_ERR",id:206},{name:"EC_ACCESS_GET_RS_IP_ERR",id:207},{name:"EC_ACCESS_ADD_COMM_CONN_ERR",id:208},{name:"EC_ACCESS_ADD_HEART_CONN_ERR",id:209},{name:"EC_ACCESS_ADD_RELAY_CONN_ERR",id:210},{name:"EC_ACCESS_HEART_BODY_PARSE_ERR",id:211},{name:"EC_ACCESS_GET_COMM_CONNECT_ERR",id:212},{name:"EC_ACCESS_GET_RELAY_CONNECT_ERR",id:213},{name:"EC_ACCESS_ACCESS_INFO_EMPTY",id:214},{name:"EC_ACCESS_PLAYER_DUPLICATE_LOGIN",id:215},{name:"EC_ACCESS_NOE_RELAY_OR_STATE_SVR",id:216},{name:"EC_PLAYER_GAME_NOT_EXIST",id:1e4},{name:"EC_PLAYER_SECRET_KEY_FAIL",id:10001},{name:"EC_PLAYER_SIGN_ERR",id:10002},{name:"EC_PLAYER_DUPLICATE_REQ",id:10003},{name:"EC_PLAYER_TIMESTAMP_INVALID",id:10004},{name:"EC_PLAYER_QUERY_PLAYER_FAIL",id:10005},{name:"EC_PLAYER_ADD_PLAYER_FAIL",id:10006},{name:"EC_PLAYER_QUERY_GAME_FAIL",id:10007},{name:"EC_PLAYER_RECORD_NUM_ERR",id:10008},{name:"EC_PLAYER_GET_TOKEN_FAIL",id:10009},{name:"EC_PLAYER_TOKEN_NOT_EXIST",id:10010},{name:"EC_PLAYER_TOKEN_INVALID",id:10011},{name:"EC_PLAYER_CLEAR_TOKEN_FAIL",id:10012},{name:"EC_PLAYER_LOCK_FAIL",id:10013},{name:"EC_PLAYER_UNLOCK_FAIL",id:10014},{name:"EC_PLAYER_SAVE_TOKEN_FAIL",id:10015},{name:"EC_ROOM_CREATE_NO_PERMISSION",id:2e4},{name:"EC_ROOM_DESTORY_NO_PERMISSION",id:20001},{name:"EC_ROOM_JOIN_NO_PERMISSION",id:20002},{name:"EC_ROOM_REMOVE_PLAYER_NO_PERMISSION",id:20003},{name:"EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION",id:20004},{name:"EC_ROOM_DISSMISS_NO_PERMISSION",id:20005},{name:"EC_ROOM_REMOVE_SELF_NO_PERMISSION",id:20006},{name:"EC_ROOM_CHECK_LOGIN_SESSION_ERR",id:20007},{name:"EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM",id:20008},{name:"EC_ROOM_PLAYER_ALREADY_IN_ROOM",id:20010},{name:"EC_ROOM_PLAYER_NOT_IN_ROOM",id:20011},{name:"EC_ROOM_PLAYERS_EXCEED_LIMIT",id:20012},{name:"EC_ROOM_JOIN_NOT_ALLOW",id:20013},{name:"EC_ROOM_MAX_PLAYERS_INVALID",id:20014},{name:"EC_ROOM_CREATE_FAIL",id:20015},{name:"EC_ROOM_PLAYER_OFFLINE",id:20016},{name:"EC_ROOM_PARAM_PAGE_INVALID",id:20017},{name:"EC_ROOM_GET_PLAYER_INFO_ERR",id:20050},{name:"EC_ROOM_GET_ROOM_INFO_ERR",id:20051},{name:"EC_ROOM_MODIFY_OWNER_ERR",id:20052},{name:"EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT",id:20053},{name:"EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR",id:-20052},{name:"EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR",id:-20053},{name:"EC_ROOM_REDIS_UPDATE_ERR",id:-20054},{name:"EC_ROOM_REDIS_GET_LOCK_ERR",id:-20055},{name:"EC_ROOM_REDIS_CHECK_LOCK_ERR",id:-20056},{name:"EC_ROOM_REDIS_DEL_LOCK_ERR",id:-20057},{name:"EC_ROOM_QUERY_PLAYER_ERR",id:20060},{name:"EC_ROOM_QUERY_GAME_ERR",id:20061},{name:"EC_ROOM_PLAYER_INFO_NOT_EXIST",id:20062},{name:"EC_ROOM_GAME_INFO_NOT_EXIST",id:20063},{name:"EC_ROOM_HISTORY_INFO_INSERT_ERR",id:-20064},{name:"EC_ROOM_REGION_INFO_NOT_EXIST",id:20065},{name:"EC_ROOM_QUERY_REGION_ERR",id:20066},{name:"EC_ROOM_MODIFY_PLAYER_BUSY",id:20070},{name:"EC_ROOM_INFO_UNEXIST",id:20080},{name:"EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR",id:20090},{name:"EC_ROOM_INVALID_PARAMS_TEAM_ID",id:20100},{name:"EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED",id:20101},{name:"EC_ROOM_ALLOCATE_SERVICE_FAIL",id:-20200},{name:"EC_MATCH_NO_ROOM",id:3e4},{name:"EC_MATCH_TIMEOUT",id:30001},{name:"EC_MATCH_LOGIC_ERR",id:30002},{name:"EC_MATCH_ERR",id:30010},{name:"EC_MATCH_PLAYER_IS_IN_MATCH",id:30011},{name:"EC_MATCH_PLAYER_NOT_IN_MATCH",id:30012},{name:"EC_MATCH_GET_MATCH_INFO_ERR",id:30013},{name:"EC_MATCH_UPDATE_MATCH_INFO_ERR",id:30014},{name:"EC_MATCH_CANCEL_FAILED",id:30015},{name:"EC_MATCH_GET_PLAYER_LIST_INFO_ERR",id:30016},{name:"EC_MATCH_CREATE_ROOM_ERR",id:30041},{name:"EC_MATCH_JOIN_ROOM_ERR",id:30042},{name:"EC_MATCH_INVALID_PARAMS",id:30043},{name:"EC_MATCH_GROUP_NUM_EXCEED_LIMIT",id:30044},{name:"EC_MATCH_PLAYER_ID_IS_REPEATED",id:30045},{name:"EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM",id:30050},{name:"EC_MATCH_QUERY_PLAYER_ERR",id:30100},{name:"EC_MATCH_PLAYER_INFO_NOT_EXIST",id:30101},{name:"EC_MATCH_QUERY_GAME_ERR",id:30102},{name:"EC_MATCH_GAME_INFO_NOT_EXIST",id:30103},{name:"EC_MATCH_QUERY_REGION_ERR",id:30104},{name:"EC_MATCH_REGION_INFO_NOT_EXIST",id:30105},{name:"EC_MATCH_TEAM_FAIL",id:30106},{name:"EC_MATCH_PLAY_RULE_NOT_RUNNING",id:30107},{name:"EC_MATCH_PLAY_ATTR_NOT_FOUND",id:30108},{name:"EC_MATCH_PLAY_RULE_NOT_FOUND",id:30109},{name:"EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND",id:30110},{name:"EC_MATCH_PLAY_RULE_FUNC_ERR",id:30111},{name:"EC_MATCH_GET_PLAYER_ATTR_FAIL",id:30112},{name:"EC_MATCH_GET_TEAM_ATTR_FAIL",id:30113},{name:"EC_MATCH_INNER_LOGIC_ERR",id:-30150},{name:"EC_MATCH_INNER_PARAMS_ERR",id:-30160},{name:"EC_RELAY_ALREADY_EXISTS",id:4e4},{name:"EC_RELAY_NOT_EXISTS",id:40001},{name:"EC_RELAY_DATA_EXCEED_LIMITED",id:40002},{name:"EC_RELAY_MEMBER_ALREADY_EXISTS",id:40003},{name:"EC_RELAY_MEMBER_NOT_EXISTS",id:40004},{name:"EC_RELAY_STATE_INVALID",id:40005},{name:"EC_RELAY_INVALID_FRAME_RATE",id:40006},{name:"EC_RELAY_SET_FRAME_RATE_FORBIDDEN",id:40007},{name:"EC_RELAY_NO_MEMBERS",id:40008},{name:"EC_RELAY_GAMESVR_SERVICE_NOT_OPEN",id:40009},{name:"EC_RELAY_REQ_POD_FAIL",id:40010},{name:"EC_RELAY_NO_AVAILABLE_POD",id:40011},{name:"EC_RELAY_GET_FRAME_CACHE_FAIL",id:40012},{name:"EC_RELAY_HKV_CACHE_ERROR",id:40015},{name:"EC_RELAY_REDIS_CACHE_ERROR",id:40016},{name:"EC_RELAY_NOTIFY_RELAYWORKER_FAIL",id:40018},{name:"EC_RELAY_RESET_RELAY_ROOM_FAIL",id:40019},{name:"EC_RELAY_CLEAN_RELAY_ROOM_FAIL",id:40020},{name:"EC_RELAY_NO_PERMISSION",id:40100},{name:"EC_RELAY_NOTIFY_GAMESVR_FAIL",id:40200},{name:"EC_RELAY_FORWARD_TO_GAMESVR_FAIL",id:40201},{name:"EC_RELAY_FORWARD_TO_CLIENT_FAIL",id:40202},{name:"EC_INVALID_PARAMS",id:6e4},{name:"EC_INVALID_PARAMS_PLAY_MODE_VERSION",id:60001},{name:"EC_INVALID_PARAMS_PLAY_MODE_RULETYPE",id:60002},{name:"EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION",id:60003},{name:"EC_INVALID_PARAMS_PLAY_MODE_TEAM",id:60004},{name:"EC_INVALID_PARAMS_MSGQ_ENCODE",id:60020},{name:"EC_INVALID_PARAMS_MSGQ_DECODE",id:60021},{name:"EC_INVALID_PARAMS_GAME_ID",id:61e3},{name:"EC_INVALID_PARAMS_PLAYER_INFO",id:61001},{name:"EC_INVALID_PARAMS_MAX_PLAYERS",id:61002},{name:"EC_INVALID_PARAMS_ROOM_TYPE",id:61003},{name:"EC_INVALID_PARAMS_PLAYER_ID",id:61004},{name:"EC_INVALID_PARAMS_MATCH_TYPE",id:61005},{name:"EC_INVALID_PARAMS_MATCH_CODE",id:61006},{name:"EC_INVALID_PARAMS_OPEN_ID",id:61007},{name:"EC_INVALID_PARAMS_PLATFORM",id:61008},{name:"EC_INVALID_PARAMS_TIMESTAMP",id:61009},{name:"EC_INVALID_PARAMS_SIGN",id:61010},{name:"EC_INVALID_PARAMS_NONCE",id:61011},{name:"EC_INVALID_PARAMS_TOKEN",id:61012},{name:"EC_INVALID_PARAMS_NETWORK_STATE",id:61013},{name:"EC_INVALID_PARAMS_ROOM_NAME",id:61014},{name:"EC_INVALID_PARAMS_CREATE_ROOM_TYPE",id:61015},{name:"EC_INVALID_PARAMS_DEVICE_ID",id:61016},{name:"EC_INVALID_PARAMS_PAGE_NO",id:61017},{name:"EC_INVALID_PARAMS_PAGE_SIZE",id:61018},{name:"EC_INVALID_PARAMS_PLAYER_LIST",id:61019},{name:"EC_INVALID_PARAMS_MESSAGE",id:61020},{name:"EC_INVALID_CHANGE_ROOM_OPTION",id:61021},{name:"EC_MYSPP_SYSTEM_ERR",id:-1e3},{name:"EC_REDIS_KEY_NOT_EXIST",id:-66e3},{name:"EC_REDIS_SET_OP_ERR",id:-66001},{name:"EC_REDIS_GET_OP_ERR",id:-66002},{name:"EC_REDIS_DEL_OP_ERR",id:-66003},{name:"EC_REDIS_EXPIRE_OP_ERR",id:-66004},{name:"EC_REDIS_LOCK_OP_ERR",id:-66005},{name:"EC_REDIS_LOCK_ALREADY_EXIST",id:-66006},{name:"EC_REDIS_LIST_OP_ERR",id:-66020},{name:"EC_REDIS_LIST_POP_EMPTY",id:-66021},{name:"EC_REDIS_POOL_GET_INSTANCE_FAIL",id:-66022},{name:"EC_REDIS_SET_IS_EMPTY",id:-66023},{name:"EC_REDIS_OP_INVALID_PARAMS",id:-66024},{name:"EC_MYSQL_NO_ROW_FOUND",id:-66100},{name:"EC_MYSQL_MULTI_ROW_FOUND",id:-66101},{name:"EC_MYSQL_INSERT_FAIL",id:-66102},{name:"EC_MYSQL_DELETE_FAIL",id:-66103},{name:"EC_MYSQL_UPDATE_FAIL",id:-66104},{name:"EC_MYSQL_QUERYS_FAIL",id:-66105},{name:"EC_PB_SERIALIZE_TO_STR_ERR",id:-66200},{name:"EC_PB_PARSE_FROM_STR_ERR",id:-66201},{name:"EC_DATA_FORMAT_ERR",id:-66210},{name:"EC_JSON_FORMAT_ERR",id:-66211},{name:"EC_JSON_PLAY_MODE_FORMAT_ERR",id:-66212},{name:"EC_JSON_PLAY_MODE_PARISE_ERR",id:-66213},{name:"EC_INVALID_PARAMS_RECORE_ID",id:-66601},{name:"EC_HASHID_ERR",id:-66700},{name:"EC_HASHID_ENCODE_ERR",id:-66701},{name:"EC_HASHID_DECODE_ERR",id:-66702},{name:"EC_CONF_ROOM_ID_BUCKET_ERR",id:-66801},{name:"EC_SDK_SEND_FAIL",id:90001},{name:"EC_SDK_UNINIT",id:90002},{name:"EC_SDK_RES_TIMEOUT",id:90003},{name:"EC_SDK_NO_LOGIN",id:90004},{name:"EC_SDK_NO_CHECK_LOGIN",id:90005},{name:"EC_SDK_SOCKET_ERROR",id:90006},{name:"EC_SDK_SOCKET_CLOSE",id:90007},{name:"EC_SDK_NO_ROOM",id:90008}]},{name:"NetworkState",syntax:"proto3",values:[{name:"COMMON_OFFLINE",id:0},{name:"COMMON_ONLINE",id:1},{name:"RELAY_OFFLINE",id:2},{name:"RELAY_ONLINE",id:3}]},{name:"CreateRoomType",syntax:"proto3",values:[{name:"COMMON_CREATE",id:0},{name:"MATCH_CREATE",id:1}]},{name:"FrameSyncState",syntax:"proto3",values:[{name:"STOP",id:0},{name:"START",id:1}]},{name:"JoinRoomType",syntax:"proto3",values:[{name:"COMMON_JOIN",id:0},{name:"MATCH_JOIN",id:1}]},{name:"ChangeRoomOption",syntax:"proto3",values:[{name:"ROOM_NAME",id:0},{name:"OWNER",id:1},{name:"IS_VIEWED",id:2},{name:"IS_INVITED",id:3},{name:"IS_PRIVATE",id:4},{name:"CUSTOM_PROPERTIES",id:5},{name:"IS_FORBID_JOIN",id:6}]},{name:"MatchStatus",syntax:"proto3",values:[{name:"PENDING",id:0},{name:"MATCHING",id:1},{name:"SUCCESS",id:3},{name:"TIMEOUT",id:4}]},{name:"MatchType",syntax:"proto3",values:[{name:"PLAYER_SIMPLE",id:0},{name:"ROOM_SIMPLE",id:1},{name:"PLAYER_COMPLEX",id:2}]},{name:"GameSvrForwardType",syntax:"proto3",values:[{name:"E_GS_FORWARDTYPE_DEFAULT",id:0},{name:"E_GS_FORWARDTYPE_NOTIFY_CONNECTION",id:1},{name:"E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT",id:2},{name:"E_GS_FORWARDTYPE_NOTIFY_COM_EVENT",id:3},{name:"E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR",id:4}]}],services:[],isNamespace:!0}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"packageName",function(){return ne}),n.d(r,"ConnectionType",function(){return re}),n.d(r,"ServerSendClientBstWrap2Type",function(){return oe}),n.d(r,"ClientSendServerReqWrap2Cmd",function(){return ie}),n.d(r,"QAppProtoErrCode",function(){return se}),n.d(r,"NetworkState",function(){return ae}),n.d(r,"CreateRoomType",function(){return ce}),n.d(r,"FrameSyncState",function(){return _e}),n.d(r,"JoinRoomType",function(){return ue}),n.d(r,"ChangeRoomOption",function(){return le}),n.d(r,"MatchStatus",function(){return fe}),n.d(r,"MatchType",function(){return Ee}),n.d(r,"GameSvrForwardType",function(){return de}),n.d(r,"messages",function(){return he});var o,i,s={};n.r(s),n.d(s,"DebuggerLog",function(){return Ke}),n.d(s,"getSequenceStr",function(){return Ze}),n.d(s,"Base64",function(){return We}),n.d(s,"HmacSHA1",function(){return je}),n.d(s,"errCodeConvert",function(){return tt}),n.d(s,"getPlatform",function(){return nt}),n.d(s,"getChannel",function(){return rt}),n.d(s,"deviceId",function(){return et}),n.d(s,"asyncCallFunc",function(){return ot}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WX=1]="WX",e[e.QQ=2]="QQ",e[e.BD=3]="BD",e[e.OP=4]="OP",e[e.VV=5]="VV",e[e.WXMP=6]="WXMP",e[e.QQMP=7]="QQMP",e[e.COCOS_NATIVE=8]="COCOS_NATIVE"}(o||(o={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ANDROID=1]="ANDROID",e[e.IOS=2]="IOS"}(i||(i={}));const a={},c=e=>t=>{const n=e(t.url);return n.binaryType="arraybuffer",{onClose:e=>n.onclose=e,onOpen:e=>n.onopen=e,onError:e=>n.onerror=e,onMessage:e=>n.onmessage=e,close:()=>n.close(),send:({data:e,fail:t,success:r})=>{try{n.send(e),setTimeout(()=>r&&r(),0)}catch(e){setTimeout(()=>t&&t(),0)}},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},_=c(e=>new WebSocket(e)),u=e=>{const t=(e.method+"").toLowerCase()||"get",n=new XMLHttpRequest;let r="",o="";if("get"===t){o="?";const t=Object.keys(e.data||{});for(const n of t)o+=n+"="+e.data[n]+"&"}"post"===t&&(r=JSON.stringify(e.data||{})),n.open(t,e.url+o),n.onreadystatechange=(()=>{if(4===n.readyState)return 200===n.status?e.success&&e.success({data:JSON.parse(n.responseText)}):e.fail&&e.fail()}),n.send("post"===t&&r)},l=e=>null,f=e=>null,E=e=>null,d=e=>null,h={},p=e=>h[e],R=(e,t)=>h[e]=t,m=e=>delete h[e],y=({fail:e})=>e&&e("ERROR"),S=()=>({}),g=({fail:e})=>e&&e("ERROR"),C=({fail:e})=>e&&e("ERROR");function O(e,t){const n=a;return t[e]||n[e]}a.connectSocket=_,a.request=u,a.onHide=l,a.offHide=f,a.onShow=E,a.offShow=d,a.getStorageSync=p,a.setStorageSync=R,a.removeStorageSync=m,a.getUserInfo=y,a.getSystemInfoSync=S,a.getLocation=g,a.getNetworkType=C,a.createUDPSocket=null;let I={};function T(){if("undefined"==typeof wx)return!1;if("undefined"==typeof GameGlobal)return!1;if(!wx.onHide)return!1;if(!wx.offHide)return!1;if(!wx.onShow)return!1;if(!wx.offShow)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1}catch(e){return!1}return!0}T()&&(I=wx);const A={};A.connectSocket=O("connectSocket",I),A.request=O("request",I),A.onHide=O("onHide",I),A.offHide=O("offHide",I),A.onShow=O("onShow",I),A.offShow=O("offShow",I),A.getStorageSync=O("getStorageSync",I),A.setStorageSync=O("setStorageSync",I),A.removeStorageSync=O("removeStorageSync",I),A.getUserInfo=O("getUserInfo",I),A.getSystemInfoSync=O("getSystemInfoSync",I),A.getLocation=O("getLocation",I),A.getNetworkType=O("getNetworkType",I),A.createUDPSocket=O("createUDPSocket",I);let v={};function M(){if("undefined"==typeof qq)return!1;if(!qq.onHide)return!1;if(!qq.offHide)return!1;if(!qq.onShow)return!1;if(!qq.offShow)return!1;if(!qq.getSystemInfoSync)return!1;if(!qq.getStorageSync)return!1;if(!qq.setStorageSync)return!1;if(!qq.connectSocket)return!1;if(!qq.request)return!1;try{if(!qq.getSystemInfoSync())return!1}catch(e){return!1}return!0}M()&&(v=qq);const N={},P=O("connectSocket",v);N.connectSocket=(e=>{const t=P(e);let n=0;return{onClose:e=>{t.onClose(t=>{n=3,e&&e(t)})},onOpen:e=>{t.onOpen(t=>{n=1,e&&e(t)})},onError:e=>{t.onError(r=>{n=3,t.close(),e&&e(r)})},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:r})=>t.send({data:e,fail:n,success:r}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}}),N.request=O("request",v),N.onHide=O("onHide",v),N.offHide=O("offHide",v),N.onShow=O("onShow",v),N.offShow=O("offShow",v),N.getStorageSync=O("getStorageSync",v),N.setStorageSync=O("setStorageSync",v),N.removeStorageSync=O("removeStorageSync",v),N.getUserInfo=O("getUserInfo",v),N.getSystemInfoSync=O("getSystemInfoSync",v),N.getLocation=O("getLocation",v),N.getNetworkType=O("getNetworkType",v),N.createUDPSocket=O("createUDPSocket",v);let L={};function b(){if("undefined"==typeof swan)return!1;if(!swan.onHide)return!1;if(!swan.offHide)return!1;if(!swan.onShow)return!1;if(!swan.offShow)return!1;if(!swan.getSystemInfoSync)return!1;if(!swan.getStorageSync)return!1;if(!swan.setStorageSync)return!1;if(!swan.connectSocket)return!1;if(!swan.request)return!1;try{if(!swan.getSystemInfoSync())return!1}catch(e){return!1}return!0}b()&&(L=swan);const w={},D=O("connectSocket",L);w.connectSocket=(e=>{const t=D(e);let n=0;return{onClose:e=>{t.onClose(t=>{n=3,e&&e(t)})},onOpen:e=>{t.onOpen(t=>{n=1,e&&e(t)})},onError:e=>{t.onError(t=>{n=3,e&&e(t)})},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:r})=>t.send({data:e,fail:n,success:r}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}}),w.request=O("request",L),w.onHide=O("onHide",L),w.offHide=O("offHide",L),w.onShow=O("onShow",L),w.offShow=O("offShow",L),w.getStorageSync=O("getStorageSync",L),w.setStorageSync=O("setStorageSync",L),w.removeStorageSync=O("removeStorageSync",L),w.getUserInfo=O("getUserInfo",L),w.getSystemInfoSync=O("getSystemInfoSync",L),w.getLocation=O("getLocation",L),w.getNetworkType=O("getNetworkType",L),w.createUDPSocket=null;let F={};function Y(){if("undefined"==typeof qg)return!1;if(!qg.onHide)return!1;if(!qg.offHide)return!1;if(!qg.onShow)return!1;if(!qg.offShow)return!1;if(!qg.getSystemInfoSync)return!1;if(!qg.getProvider)return!1;if(!localStorage.getItem)return!1;if(!localStorage.setItem)return!1;if(!WebSocket)return!1;if(!XMLHttpRequest)return!1;if(!localStorage)return!1;try{if("OPPO"!==qg.getProvider().toLocaleUpperCase())return!1}catch(e){return!1}try{if(!qg.getSystemInfoSync())return!1}catch(e){return!1}return!0}Y()&&(F=qg);const U={};U.connectSocket=_,U.request=u,U.onHide=O("onHide",F),U.offHide=O("offHide",F),U.onShow=O("onShow",F),U.offShow=O("offShow",F),U.getStorageSync=(e=>{localStorage.getItem(e)}),U.setStorageSync=((e,t)=>{localStorage.setItem(e,t)}),U.removeStorageSync=(e=>{localStorage.removeItem(e)}),U.getUserInfo=y,U.getSystemInfoSync=O("getSystemInfoSync",F),U.getLocation=O("getLocation",F),U.getNetworkType=O("getNetworkType",F),U.createUDPSocket=null;let k={};function x(){if("undefined"==typeof qg)return!1;if(!qg.onHide)return!1;if(!qg.offHide)return!1;if(!qg.onShow)return!1;if(!qg.offShow)return!1;if(!qg.getSystemInfoSync)return!1;if(!qg.getProvider)return!1;if(!qg.getStorageSync)return!1;if(!qg.setStorageSync)return!1;if(!qg.createWebSocket)return!1;if(!qg.request)return!1;try{if("VIVO"!==qg.getProvider().toLocaleUpperCase())return!1}catch(e){return!1}try{if(!qg.getSystemInfoSync())return!1}catch(e){return!1}return!0}x()&&(k=qg);const B={connectSocket:e=>{const t=qg.createWebSocket({url:e.url});return{onClose:e=>t.onclose=e,onOpen:e=>t.onopen=e,onError:e=>t.onerror=e,onMessage:e=>t.onmessage=e,close:()=>t.close(),send:({data:e,fail:n,success:r})=>{try{t.send(e),setTimeout(()=>r&&r(),0)}catch(e){setTimeout(()=>n&&n(),0)}},get readyState(){return t.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},request:e=>(e.data="object"==typeof e.data?JSON.stringify(e.data):e.data,qg.request(e))};B.onHide=O("onHide",k),B.offHide=O("offHide",k),B.onShow=O("onShow",k),B.offShow=O("offShow",k),B.getStorageSync=(e=>qg.getStorageSync({key:e})),B.setStorageSync=((e,t)=>qg.setStorageSync({key:e,value:t})),B.removeStorageSync=(e=>qg.deleteStorageSync({key:e})),B.getUserInfo=y,B.getSystemInfoSync=O("getSystemInfoSync",k),B.getLocation=O("getLocation",k),B.getNetworkType=(e=>{qg.getNetworkType({success:t=>{e.success({networkType:t.type})},fail:()=>{e.fail()},complete:()=>{e.complete()}})}),B.createUDPSocket=null;let H={};function G(){if("undefined"==typeof wx)return!1;if("undefined"==typeof App)return!1;if("undefined"==typeof Page)return!1;if("function"!=typeof getApp)return!1;if(!wx.onAppHide)return!1;if(!wx.offAppHide)return!1;if(!wx.onAppShow)return!1;if(!wx.offAppShow)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1;if("qq"===wx.getSystemInfoSync().AppPlatform)return!1}catch(e){return!1}return!0}let q=l,V=f,Q=E,K=d;G()&&(H=wx,q=wx.onAppHide,V=wx.offAppHide,Q=wx.onAppShow,K=wx.offAppShow);const W={};W.connectSocket=O("connectSocket",H),W.request=O("request",H),W.onHide=q,W.offHide=V,W.onShow=Q,W.offShow=K,W.getStorageSync=O("getStorageSync",H),W.setStorageSync=O("setStorageSync",H),W.removeStorageSync=O("removeStorageSync",H),W.getUserInfo=O("getUserInfo",H),W.getSystemInfoSync=O("getSystemInfoSync",H),W.getLocation=O("getLocation",H),W.getNetworkType=O("getNetworkType",H),W.createUDPSocket=O("createUDPSocket",H);let j={};function J(){if("undefined"==typeof qq)return!1;if("undefined"==typeof App)return!1;if("undefined"==typeof Page)return!1;if("function"!=typeof getApp)return!1;if(!qq.onAppHide)return!1;if(!qq.offAppHide)return!1;if(!qq.onAppShow)return!1;if(!qq.offAppShow)return!1;if(!qq.getSystemInfoSync)return!1;if(!qq.getStorageSync)return!1;if(!qq.setStorageSync)return!1;if(!qq.connectSocket)return!1;if(!qq.request)return!1;try{if(!qq.getSystemInfoSync())return!1;if("qq"!==qq.getSystemInfoSync().AppPlatform)return!1}catch(e){return!1}return!0}let X=l,z=f,Z=E,$=d;J()&&(j=qq,X=qq.onAppHide,z=qq.offAppHide,Z=qq.onAppShow,$=qq.offAppShow);const ee={},te=O("connectSocket",j);ee.connectSocket=(e=>{const t=te(e);let n=0;return{onClose:e=>{t.onClose(t=>{n=3,e&&e(t)})},onOpen:e=>{t.onOpen(t=>{n=1,e&&e(t)})},onError:e=>{t.onError(r=>{n=3,t.close(),e&&e(r)})},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:r})=>t.send({data:e,fail:n,success:r}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}}),ee.request=O("request",j),ee.onHide=X,ee.offHide=z,ee.onShow=Z,ee.offShow=$,ee.getStorageSync=O("getStorageSync",j),ee.setStorageSync=O("setStorageSync",j),ee.removeStorageSync=O("removeStorageSync",j),ee.getUserInfo=O("getUserInfo",j),ee.getSystemInfoSync=O("getSystemInfoSync",j),ee.getLocation=O("getLocation",j),ee.getNetworkType=O("getNetworkType",j),ee.createUDPSocket=O("createUDPSocket",j);const ne="mgobexs";var re,oe,ie,se,ae,ce,_e,ue,le,fe,Ee,de;!function(e){e[e.COMMON=0]="COMMON",e[e.RELAY=1]="RELAY"}(re||(re={})),function(e){e[e.E_PUSH_TYPE_TEST=0]="E_PUSH_TYPE_TEST",e[e.E_PUSH_TYPE_RELAY=1]="E_PUSH_TYPE_RELAY",e[e.E_PUSH_TYPE_GAMESVR=2]="E_PUSH_TYPE_GAMESVR",e[e.E_PUSH_TYPE_JOIN_ROOM=100]="E_PUSH_TYPE_JOIN_ROOM",e[e.E_PUSH_TYPE_LEAVE_ROOM=101]="E_PUSH_TYPE_LEAVE_ROOM",e[e.E_PUSH_TYPE_DISMISS_ROOM=102]="E_PUSH_TYPE_DISMISS_ROOM",e[e.E_PUSH_TYPE_REMOVE_PLAYER=103]="E_PUSH_TYPE_REMOVE_PLAYER",e[e.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY=104]="E_PUSH_TYPE_MODIFY_ROOM_PROPERTY",e[e.E_PUSH_TYPE_NETWORK_STATE=105]="E_PUSH_TYPE_NETWORK_STATE",e[e.E_PUSH_TYPE_ROOM_CHAT=106]="E_PUSH_TYPE_ROOM_CHAT",e[e.E_PUSH_TYPE_PLAYER_STATE=107]="E_PUSH_TYPE_PLAYER_STATE",e[e.E_PUSH_TYPE_START_GAME=108]="E_PUSH_TYPE_START_GAME",e[e.E_PUSH_TYPE_STOP_GAME=109]="E_PUSH_TYPE_STOP_GAME",e[e.E_PUSH_TYPE_CREATE_ROOM=110]="E_PUSH_TYPE_CREATE_ROOM",e[e.E_PUSH_TYPE_DESTROY_ROOM=111]="E_PUSH_TYPE_DESTROY_ROOM",e[e.E_PUSH_TYPE_MATCH_SUCCESS=200]="E_PUSH_TYPE_MATCH_SUCCESS",e[e.E_PUSH_TYPE_MATCH_TIMEOUT=201]="E_PUSH_TYPE_MATCH_TIMEOUT",e[e.E_PUSH_TYPE_MATCH_CANCEL=202]="E_PUSH_TYPE_MATCH_CANCEL"}(oe||(oe={})),function(e){e[e.E_CMD_INVALID=0]="E_CMD_INVALID",e[e.E_CMD_HEART_BEAT_REQ=100]="E_CMD_HEART_BEAT_REQ",e[e.E_CMD_CHECK_LOGIN_REQ=101]="E_CMD_CHECK_LOGIN_REQ",e[e.E_CMD_LOGIN_TO_ROOM_REQ=102]="E_CMD_LOGIN_TO_ROOM_REQ",e[e.E_CMD_FORWARD_TO_RELAY_REQ=103]="E_CMD_FORWARD_TO_RELAY_REQ",e[e.E_CMD_LOGIN_REQ=1e3]="E_CMD_LOGIN_REQ",e[e.E_CMD_LOGOUT_REQ=1001]="E_CMD_LOGOUT_REQ",e[e.E_CMD_AUTH_REQ=1002]="E_CMD_AUTH_REQ",e[e.E_CMD_QUERY_BY_PLAYER_ID_REQ=1003]="E_CMD_QUERY_BY_PLAYER_ID_REQ",e[e.E_CMD_QUERY_BY_GAME_ID_REQ=1004]="E_CMD_QUERY_BY_GAME_ID_REQ",e[e.E_CMD_GET_ROOM_DETAIL_REQ=2001]="E_CMD_GET_ROOM_DETAIL_REQ",e[e.E_CMD_JOIN_ROOM_REQ=2002]="E_CMD_JOIN_ROOM_REQ",e[e.E_CMD_QUIT_ROOM_REQ=2003]="E_CMD_QUIT_ROOM_REQ",e[e.E_CMD_CREATE_ROOM_REQ=2004]="E_CMD_CREATE_ROOM_REQ",e[e.E_CMD_DESTORY_ROOM_REQ=2005]="E_CMD_DESTORY_ROOM_REQ",e[e.E_CMD_REMOVE_MEMBER_REQ=2006]="E_CMD_REMOVE_MEMBER_REQ",e[e.E_CMD_CHANGE_ROOM_PROPERTIS_REQ=2007]="E_CMD_CHANGE_ROOM_PROPERTIS_REQ",e[e.E_CMD_DISSMISS_ROOM_REQ=2008]="E_CMD_DISSMISS_ROOM_REQ",e[e.E_CMD_CHANGE_PLAYER_STATE_REQ=2009]="E_CMD_CHANGE_PLAYER_STATE_REQ",e[e.E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ=2010]="E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ",e[e.E_CMD_ROOM_CHAT_REQ=2011]="E_CMD_ROOM_CHAT_REQ",e[e.E_CMD_START_FRAME_SYNC_REQ=2012]="E_CMD_START_FRAME_SYNC_REQ",e[e.E_CMD_STOP_FRAME_SYNC_REQ=2013]="E_CMD_STOP_FRAME_SYNC_REQ",e[e.E_CMD_GET_ROOM_LIST_REQ=2014]="E_CMD_GET_ROOM_LIST_REQ",e[e.E_CMD_SVR_REMOVE_MEMBER_REQ=2015]="E_CMD_SVR_REMOVE_MEMBER_REQ",e[e.E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ=2016]="E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ",e[e.E_CMD_SVR_CHANGE_PLAYER_STATE_REQ=2017]="E_CMD_SVR_CHANGE_PLAYER_STATE_REQ",e[e.E_CMD_GET_ROOM_LIST_V2_REQ=2018]="E_CMD_GET_ROOM_LIST_V2_REQ",e[e.E_CMD_MATCH_ROOM_SIMPLE_REQ=3001]="E_CMD_MATCH_ROOM_SIMPLE_REQ",e[e.E_CMD_MATCH_USER_SIMPLE_REQ=3002]="E_CMD_MATCH_USER_SIMPLE_REQ",e[e.E_CMD_MATCH_CANCEL_MATCH_REQ=3003]="E_CMD_MATCH_CANCEL_MATCH_REQ",e[e.E_CMD_MATCH_ROOM_COMPLEX_REQ=3004]="E_CMD_MATCH_ROOM_COMPLEX_REQ",e[e.E_CMD_MATCH_PLAYER_COMPLEX_REQ=3005]="E_CMD_MATCH_PLAYER_COMPLEX_REQ",e[e.E_CMD_MATCH_GROUP_REQ=3006]="E_CMD_MATCH_GROUP_REQ",e[e.E_CMD_RELAY_SEND_FRAME_REQ=4e3]="E_CMD_RELAY_SEND_FRAME_REQ",e[e.E_CMD_RELAY_REQUEST_FRAME_REQ=4001]="E_CMD_RELAY_REQUEST_FRAME_REQ",e[e.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ=4002]="E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ",e[e.E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ=4003]="E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ",e[e.E_CMD_NOTIFY_JOIN_ROOM=5e3]="E_CMD_NOTIFY_JOIN_ROOM",e[e.E_CMD_NOTIFY_QUIT_ROOM=5001]="E_CMD_NOTIFY_QUIT_ROOM",e[e.E_CMD_NOTIFY_DESTORY_ROOM=5002]="E_CMD_NOTIFY_DESTORY_ROOM",e[e.E_CMD_NOTIFY_NET_STATE=5003]="E_CMD_NOTIFY_NET_STATE",e[e.E_CMD_NOTIFY_KICK_MEMBER=5004]="E_CMD_NOTIFY_KICK_MEMBER",e[e.E_CMD_GET_ADDR_BY_ROUTER_ID_REQ=6e3]="E_CMD_GET_ADDR_BY_ROUTER_ID_REQ"}(ie||(ie={})),function(e){e[e.EC_OK=0]="EC_OK",e[e.EC_REQ_BAD_PKG=1]="EC_REQ_BAD_PKG",e[e.EC_CMD_INVALID=2]="EC_CMD_INVALID",e[e.EC_PARAMS_INVALID=3]="EC_PARAMS_INVALID",e[e.EC_INNER_ERROR=4]="EC_INNER_ERROR",e[e.EC_TIME_OUT=5]="EC_TIME_OUT",e[e.EC_SERVER_BUSY=6]="EC_SERVER_BUSY",e[e.EC_NO_RIGHT=7]="EC_NO_RIGHT",e[e.EC_ACCESS_CMD_INVALID_ERR=200]="EC_ACCESS_CMD_INVALID_ERR",e[e.EC_ACCESS_CMD_GET_TOKEN_ERR=201]="EC_ACCESS_CMD_GET_TOKEN_ERR",e[e.EC_ACCESS_CMD_TOKEN_PRE_EXPIRE=202]="EC_ACCESS_CMD_TOKEN_PRE_EXPIRE",e[e.EC_ACCESS_CMD_INVALID_TOKEN=203]="EC_ACCESS_CMD_INVALID_TOKEN",e[e.EC_ACCESS_PUSH_SERIALIZE_ERR=204]="EC_ACCESS_PUSH_SERIALIZE_ERR",e[e.EC_ACCESS_LOGIN_BODY_PARSE_ERR=205]="EC_ACCESS_LOGIN_BODY_PARSE_ERR",e[e.EC_ACCESS_CONN_ERR=206]="EC_ACCESS_CONN_ERR",e[e.EC_ACCESS_GET_RS_IP_ERR=207]="EC_ACCESS_GET_RS_IP_ERR",e[e.EC_ACCESS_ADD_COMM_CONN_ERR=208]="EC_ACCESS_ADD_COMM_CONN_ERR",e[e.EC_ACCESS_ADD_HEART_CONN_ERR=209]="EC_ACCESS_ADD_HEART_CONN_ERR",e[e.EC_ACCESS_ADD_RELAY_CONN_ERR=210]="EC_ACCESS_ADD_RELAY_CONN_ERR",e[e.EC_ACCESS_HEART_BODY_PARSE_ERR=211]="EC_ACCESS_HEART_BODY_PARSE_ERR",e[e.EC_ACCESS_GET_COMM_CONNECT_ERR=212]="EC_ACCESS_GET_COMM_CONNECT_ERR",e[e.EC_ACCESS_GET_RELAY_CONNECT_ERR=213]="EC_ACCESS_GET_RELAY_CONNECT_ERR",e[e.EC_ACCESS_ACCESS_INFO_EMPTY=214]="EC_ACCESS_ACCESS_INFO_EMPTY",e[e.EC_ACCESS_PLAYER_DUPLICATE_LOGIN=215]="EC_ACCESS_PLAYER_DUPLICATE_LOGIN",e[e.EC_ACCESS_NOE_RELAY_OR_STATE_SVR=216]="EC_ACCESS_NOE_RELAY_OR_STATE_SVR",e[e.EC_PLAYER_GAME_NOT_EXIST=1e4]="EC_PLAYER_GAME_NOT_EXIST",e[e.EC_PLAYER_SECRET_KEY_FAIL=10001]="EC_PLAYER_SECRET_KEY_FAIL",e[e.EC_PLAYER_SIGN_ERR=10002]="EC_PLAYER_SIGN_ERR",e[e.EC_PLAYER_DUPLICATE_REQ=10003]="EC_PLAYER_DUPLICATE_REQ",e[e.EC_PLAYER_TIMESTAMP_INVALID=10004]="EC_PLAYER_TIMESTAMP_INVALID",e[e.EC_PLAYER_QUERY_PLAYER_FAIL=10005]="EC_PLAYER_QUERY_PLAYER_FAIL",e[e.EC_PLAYER_ADD_PLAYER_FAIL=10006]="EC_PLAYER_ADD_PLAYER_FAIL",e[e.EC_PLAYER_QUERY_GAME_FAIL=10007]="EC_PLAYER_QUERY_GAME_FAIL",e[e.EC_PLAYER_RECORD_NUM_ERR=10008]="EC_PLAYER_RECORD_NUM_ERR",e[e.EC_PLAYER_GET_TOKEN_FAIL=10009]="EC_PLAYER_GET_TOKEN_FAIL",e[e.EC_PLAYER_TOKEN_NOT_EXIST=10010]="EC_PLAYER_TOKEN_NOT_EXIST",e[e.EC_PLAYER_TOKEN_INVALID=10011]="EC_PLAYER_TOKEN_INVALID",e[e.EC_PLAYER_CLEAR_TOKEN_FAIL=10012]="EC_PLAYER_CLEAR_TOKEN_FAIL",e[e.EC_PLAYER_LOCK_FAIL=10013]="EC_PLAYER_LOCK_FAIL",e[e.EC_PLAYER_UNLOCK_FAIL=10014]="EC_PLAYER_UNLOCK_FAIL",e[e.EC_PLAYER_SAVE_TOKEN_FAIL=10015]="EC_PLAYER_SAVE_TOKEN_FAIL",e[e.EC_ROOM_CREATE_NO_PERMISSION=2e4]="EC_ROOM_CREATE_NO_PERMISSION",e[e.EC_ROOM_DESTORY_NO_PERMISSION=20001]="EC_ROOM_DESTORY_NO_PERMISSION",e[e.EC_ROOM_JOIN_NO_PERMISSION=20002]="EC_ROOM_JOIN_NO_PERMISSION",e[e.EC_ROOM_REMOVE_PLAYER_NO_PERMISSION=20003]="EC_ROOM_REMOVE_PLAYER_NO_PERMISSION",e[e.EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION=20004]="EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION",e[e.EC_ROOM_DISSMISS_NO_PERMISSION=20005]="EC_ROOM_DISSMISS_NO_PERMISSION",e[e.EC_ROOM_REMOVE_SELF_NO_PERMISSION=20006]="EC_ROOM_REMOVE_SELF_NO_PERMISSION",e[e.EC_ROOM_CHECK_LOGIN_SESSION_ERR=20007]="EC_ROOM_CHECK_LOGIN_SESSION_ERR",e[e.EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM=20008]="EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM",e[e.EC_ROOM_PLAYER_ALREADY_IN_ROOM=20010]="EC_ROOM_PLAYER_ALREADY_IN_ROOM",e[e.EC_ROOM_PLAYER_NOT_IN_ROOM=20011]="EC_ROOM_PLAYER_NOT_IN_ROOM",e[e.EC_ROOM_PLAYERS_EXCEED_LIMIT=20012]="EC_ROOM_PLAYERS_EXCEED_LIMIT",e[e.EC_ROOM_JOIN_NOT_ALLOW=20013]="EC_ROOM_JOIN_NOT_ALLOW",e[e.EC_ROOM_MAX_PLAYERS_INVALID=20014]="EC_ROOM_MAX_PLAYERS_INVALID",e[e.EC_ROOM_CREATE_FAIL=20015]="EC_ROOM_CREATE_FAIL",e[e.EC_ROOM_PLAYER_OFFLINE=20016]="EC_ROOM_PLAYER_OFFLINE",e[e.EC_ROOM_PARAM_PAGE_INVALID=20017]="EC_ROOM_PARAM_PAGE_INVALID",e[e.EC_ROOM_GET_PLAYER_INFO_ERR=20050]="EC_ROOM_GET_PLAYER_INFO_ERR",e[e.EC_ROOM_GET_ROOM_INFO_ERR=20051]="EC_ROOM_GET_ROOM_INFO_ERR",e[e.EC_ROOM_MODIFY_OWNER_ERR=20052]="EC_ROOM_MODIFY_OWNER_ERR",e[e.EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT=20053]="EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT",e[e.EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR=-20052]="EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR",e[e.EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR=-20053]="EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR",e[e.EC_ROOM_REDIS_UPDATE_ERR=-20054]="EC_ROOM_REDIS_UPDATE_ERR",e[e.EC_ROOM_REDIS_GET_LOCK_ERR=-20055]="EC_ROOM_REDIS_GET_LOCK_ERR",e[e.EC_ROOM_REDIS_CHECK_LOCK_ERR=-20056]="EC_ROOM_REDIS_CHECK_LOCK_ERR",e[e.EC_ROOM_REDIS_DEL_LOCK_ERR=-20057]="EC_ROOM_REDIS_DEL_LOCK_ERR",e[e.EC_ROOM_QUERY_PLAYER_ERR=20060]="EC_ROOM_QUERY_PLAYER_ERR",e[e.EC_ROOM_QUERY_GAME_ERR=20061]="EC_ROOM_QUERY_GAME_ERR",e[e.EC_ROOM_PLAYER_INFO_NOT_EXIST=20062]="EC_ROOM_PLAYER_INFO_NOT_EXIST",e[e.EC_ROOM_GAME_INFO_NOT_EXIST=20063]="EC_ROOM_GAME_INFO_NOT_EXIST",e[e.EC_ROOM_HISTORY_INFO_INSERT_ERR=-20064]="EC_ROOM_HISTORY_INFO_INSERT_ERR",e[e.EC_ROOM_REGION_INFO_NOT_EXIST=20065]="EC_ROOM_REGION_INFO_NOT_EXIST",e[e.EC_ROOM_QUERY_REGION_ERR=20066]="EC_ROOM_QUERY_REGION_ERR",e[e.EC_ROOM_MODIFY_PLAYER_BUSY=20070]="EC_ROOM_MODIFY_PLAYER_BUSY",e[e.EC_ROOM_INFO_UNEXIST=20080]="EC_ROOM_INFO_UNEXIST",e[e.EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR=20090]="EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR",e[e.EC_ROOM_INVALID_PARAMS_TEAM_ID=20100]="EC_ROOM_INVALID_PARAMS_TEAM_ID",e[e.EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED=20101]="EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED",e[e.EC_ROOM_ALLOCATE_SERVICE_FAIL=-20200]="EC_ROOM_ALLOCATE_SERVICE_FAIL",e[e.EC_MATCH_NO_ROOM=3e4]="EC_MATCH_NO_ROOM",e[e.EC_MATCH_TIMEOUT=30001]="EC_MATCH_TIMEOUT",e[e.EC_MATCH_LOGIC_ERR=30002]="EC_MATCH_LOGIC_ERR",e[e.EC_MATCH_ERR=30010]="EC_MATCH_ERR",e[e.EC_MATCH_PLAYER_IS_IN_MATCH=30011]="EC_MATCH_PLAYER_IS_IN_MATCH",e[e.EC_MATCH_PLAYER_NOT_IN_MATCH=30012]="EC_MATCH_PLAYER_NOT_IN_MATCH",e[e.EC_MATCH_GET_MATCH_INFO_ERR=30013]="EC_MATCH_GET_MATCH_INFO_ERR",e[e.EC_MATCH_UPDATE_MATCH_INFO_ERR=30014]="EC_MATCH_UPDATE_MATCH_INFO_ERR",e[e.EC_MATCH_CANCEL_FAILED=30015]="EC_MATCH_CANCEL_FAILED",e[e.EC_MATCH_GET_PLAYER_LIST_INFO_ERR=30016]="EC_MATCH_GET_PLAYER_LIST_INFO_ERR",e[e.EC_MATCH_CREATE_ROOM_ERR=30041]="EC_MATCH_CREATE_ROOM_ERR",e[e.EC_MATCH_JOIN_ROOM_ERR=30042]="EC_MATCH_JOIN_ROOM_ERR",e[e.EC_MATCH_INVALID_PARAMS=30043]="EC_MATCH_INVALID_PARAMS",e[e.EC_MATCH_GROUP_NUM_EXCEED_LIMIT=30044]="EC_MATCH_GROUP_NUM_EXCEED_LIMIT",e[e.EC_MATCH_PLAYER_ID_IS_REPEATED=30045]="EC_MATCH_PLAYER_ID_IS_REPEATED",e[e.EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM=30050]="EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM",e[e.EC_MATCH_QUERY_PLAYER_ERR=30100]="EC_MATCH_QUERY_PLAYER_ERR",e[e.EC_MATCH_PLAYER_INFO_NOT_EXIST=30101]="EC_MATCH_PLAYER_INFO_NOT_EXIST",e[e.EC_MATCH_QUERY_GAME_ERR=30102]="EC_MATCH_QUERY_GAME_ERR",e[e.EC_MATCH_GAME_INFO_NOT_EXIST=30103]="EC_MATCH_GAME_INFO_NOT_EXIST",e[e.EC_MATCH_QUERY_REGION_ERR=30104]="EC_MATCH_QUERY_REGION_ERR",e[e.EC_MATCH_REGION_INFO_NOT_EXIST=30105]="EC_MATCH_REGION_INFO_NOT_EXIST",e[e.EC_MATCH_TEAM_FAIL=30106]="EC_MATCH_TEAM_FAIL",e[e.EC_MATCH_PLAY_RULE_NOT_RUNNING=30107]="EC_MATCH_PLAY_RULE_NOT_RUNNING",e[e.EC_MATCH_PLAY_ATTR_NOT_FOUND=30108]="EC_MATCH_PLAY_ATTR_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_NOT_FOUND=30109]="EC_MATCH_PLAY_RULE_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND=30110]="EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_FUNC_ERR=30111]="EC_MATCH_PLAY_RULE_FUNC_ERR",e[e.EC_MATCH_GET_PLAYER_ATTR_FAIL=30112]="EC_MATCH_GET_PLAYER_ATTR_FAIL",e[e.EC_MATCH_GET_TEAM_ATTR_FAIL=30113]="EC_MATCH_GET_TEAM_ATTR_FAIL",e[e.EC_MATCH_INNER_LOGIC_ERR=-30150]="EC_MATCH_INNER_LOGIC_ERR",e[e.EC_MATCH_INNER_PARAMS_ERR=-30160]="EC_MATCH_INNER_PARAMS_ERR",e[e.EC_RELAY_ALREADY_EXISTS=4e4]="EC_RELAY_ALREADY_EXISTS",e[e.EC_RELAY_NOT_EXISTS=40001]="EC_RELAY_NOT_EXISTS",e[e.EC_RELAY_DATA_EXCEED_LIMITED=40002]="EC_RELAY_DATA_EXCEED_LIMITED",e[e.EC_RELAY_MEMBER_ALREADY_EXISTS=40003]="EC_RELAY_MEMBER_ALREADY_EXISTS",e[e.EC_RELAY_MEMBER_NOT_EXISTS=40004]="EC_RELAY_MEMBER_NOT_EXISTS",e[e.EC_RELAY_STATE_INVALID=40005]="EC_RELAY_STATE_INVALID",e[e.EC_RELAY_INVALID_FRAME_RATE=40006]="EC_RELAY_INVALID_FRAME_RATE",e[e.EC_RELAY_SET_FRAME_RATE_FORBIDDEN=40007]="EC_RELAY_SET_FRAME_RATE_FORBIDDEN",e[e.EC_RELAY_NO_MEMBERS=40008]="EC_RELAY_NO_MEMBERS",e[e.EC_RELAY_GAMESVR_SERVICE_NOT_OPEN=40009]="EC_RELAY_GAMESVR_SERVICE_NOT_OPEN",e[e.EC_RELAY_REQ_POD_FAIL=40010]="EC_RELAY_REQ_POD_FAIL",e[e.EC_RELAY_NO_AVAILABLE_POD=40011]="EC_RELAY_NO_AVAILABLE_POD",e[e.EC_RELAY_GET_FRAME_CACHE_FAIL=40012]="EC_RELAY_GET_FRAME_CACHE_FAIL",e[e.EC_RELAY_HKV_CACHE_ERROR=40015]="EC_RELAY_HKV_CACHE_ERROR",e[e.EC_RELAY_REDIS_CACHE_ERROR=40016]="EC_RELAY_REDIS_CACHE_ERROR",e[e.EC_RELAY_NOTIFY_RELAYWORKER_FAIL=40018]="EC_RELAY_NOTIFY_RELAYWORKER_FAIL",e[e.EC_RELAY_RESET_RELAY_ROOM_FAIL=40019]="EC_RELAY_RESET_RELAY_ROOM_FAIL",e[e.EC_RELAY_CLEAN_RELAY_ROOM_FAIL=40020]="EC_RELAY_CLEAN_RELAY_ROOM_FAIL",e[e.EC_RELAY_NO_PERMISSION=40100]="EC_RELAY_NO_PERMISSION",e[e.EC_RELAY_NOTIFY_GAMESVR_FAIL=40200]="EC_RELAY_NOTIFY_GAMESVR_FAIL",e[e.EC_RELAY_FORWARD_TO_GAMESVR_FAIL=40201]="EC_RELAY_FORWARD_TO_GAMESVR_FAIL",e[e.EC_RELAY_FORWARD_TO_CLIENT_FAIL=40202]="EC_RELAY_FORWARD_TO_CLIENT_FAIL",e[e.EC_INVALID_PARAMS=6e4]="EC_INVALID_PARAMS",e[e.EC_INVALID_PARAMS_PLAY_MODE_VERSION=60001]="EC_INVALID_PARAMS_PLAY_MODE_VERSION",e[e.EC_INVALID_PARAMS_PLAY_MODE_RULETYPE=60002]="EC_INVALID_PARAMS_PLAY_MODE_RULETYPE",e[e.EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION=60003]="EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION",e[e.EC_INVALID_PARAMS_PLAY_MODE_TEAM=60004]="EC_INVALID_PARAMS_PLAY_MODE_TEAM",e[e.EC_INVALID_PARAMS_MSGQ_ENCODE=60020]="EC_INVALID_PARAMS_MSGQ_ENCODE",e[e.EC_INVALID_PARAMS_MSGQ_DECODE=60021]="EC_INVALID_PARAMS_MSGQ_DECODE",e[e.EC_INVALID_PARAMS_GAME_ID=61e3]="EC_INVALID_PARAMS_GAME_ID",e[e.EC_INVALID_PARAMS_PLAYER_INFO=61001]="EC_INVALID_PARAMS_PLAYER_INFO",e[e.EC_INVALID_PARAMS_MAX_PLAYERS=61002]="EC_INVALID_PARAMS_MAX_PLAYERS",e[e.EC_INVALID_PARAMS_ROOM_TYPE=61003]="EC_INVALID_PARAMS_ROOM_TYPE",e[e.EC_INVALID_PARAMS_PLAYER_ID=61004]="EC_INVALID_PARAMS_PLAYER_ID",e[e.EC_INVALID_PARAMS_MATCH_TYPE=61005]="EC_INVALID_PARAMS_MATCH_TYPE",e[e.EC_INVALID_PARAMS_MATCH_CODE=61006]="EC_INVALID_PARAMS_MATCH_CODE",e[e.EC_INVALID_PARAMS_OPEN_ID=61007]="EC_INVALID_PARAMS_OPEN_ID",e[e.EC_INVALID_PARAMS_PLATFORM=61008]="EC_INVALID_PARAMS_PLATFORM",e[e.EC_INVALID_PARAMS_TIMESTAMP=61009]="EC_INVALID_PARAMS_TIMESTAMP",e[e.EC_INVALID_PARAMS_SIGN=61010]="EC_INVALID_PARAMS_SIGN",e[e.EC_INVALID_PARAMS_NONCE=61011]="EC_INVALID_PARAMS_NONCE",e[e.EC_INVALID_PARAMS_TOKEN=61012]="EC_INVALID_PARAMS_TOKEN",e[e.EC_INVALID_PARAMS_NETWORK_STATE=61013]="EC_INVALID_PARAMS_NETWORK_STATE",e[e.EC_INVALID_PARAMS_ROOM_NAME=61014]="EC_INVALID_PARAMS_ROOM_NAME",e[e.EC_INVALID_PARAMS_CREATE_ROOM_TYPE=61015]="EC_INVALID_PARAMS_CREATE_ROOM_TYPE",e[e.EC_INVALID_PARAMS_DEVICE_ID=61016]="EC_INVALID_PARAMS_DEVICE_ID",e[e.EC_INVALID_PARAMS_PAGE_NO=61017]="EC_INVALID_PARAMS_PAGE_NO",e[e.EC_INVALID_PARAMS_PAGE_SIZE=61018]="EC_INVALID_PARAMS_PAGE_SIZE",e[e.EC_INVALID_PARAMS_PLAYER_LIST=61019]="EC_INVALID_PARAMS_PLAYER_LIST",e[e.EC_INVALID_PARAMS_MESSAGE=61020]="EC_INVALID_PARAMS_MESSAGE",e[e.EC_INVALID_CHANGE_ROOM_OPTION=61021]="EC_INVALID_CHANGE_ROOM_OPTION",e[e.EC_MYSPP_SYSTEM_ERR=-1e3]="EC_MYSPP_SYSTEM_ERR",e[e.EC_REDIS_KEY_NOT_EXIST=-66e3]="EC_REDIS_KEY_NOT_EXIST",e[e.EC_REDIS_SET_OP_ERR=-66001]="EC_REDIS_SET_OP_ERR",e[e.EC_REDIS_GET_OP_ERR=-66002]="EC_REDIS_GET_OP_ERR",e[e.EC_REDIS_DEL_OP_ERR=-66003]="EC_REDIS_DEL_OP_ERR",e[e.EC_REDIS_EXPIRE_OP_ERR=-66004]="EC_REDIS_EXPIRE_OP_ERR",e[e.EC_REDIS_LOCK_OP_ERR=-66005]="EC_REDIS_LOCK_OP_ERR",e[e.EC_REDIS_LOCK_ALREADY_EXIST=-66006]="EC_REDIS_LOCK_ALREADY_EXIST",e[e.EC_REDIS_LIST_OP_ERR=-66020]="EC_REDIS_LIST_OP_ERR",e[e.EC_REDIS_LIST_POP_EMPTY=-66021]="EC_REDIS_LIST_POP_EMPTY",e[e.EC_REDIS_POOL_GET_INSTANCE_FAIL=-66022]="EC_REDIS_POOL_GET_INSTANCE_FAIL",e[e.EC_REDIS_SET_IS_EMPTY=-66023]="EC_REDIS_SET_IS_EMPTY",e[e.EC_REDIS_OP_INVALID_PARAMS=-66024]="EC_REDIS_OP_INVALID_PARAMS",e[e.EC_MYSQL_NO_ROW_FOUND=-66100]="EC_MYSQL_NO_ROW_FOUND",e[e.EC_MYSQL_MULTI_ROW_FOUND=-66101]="EC_MYSQL_MULTI_ROW_FOUND",e[e.EC_MYSQL_INSERT_FAIL=-66102]="EC_MYSQL_INSERT_FAIL",e[e.EC_MYSQL_DELETE_FAIL=-66103]="EC_MYSQL_DELETE_FAIL",e[e.EC_MYSQL_UPDATE_FAIL=-66104]="EC_MYSQL_UPDATE_FAIL",e[e.EC_MYSQL_QUERYS_FAIL=-66105]="EC_MYSQL_QUERYS_FAIL",e[e.EC_PB_SERIALIZE_TO_STR_ERR=-66200]="EC_PB_SERIALIZE_TO_STR_ERR",e[e.EC_PB_PARSE_FROM_STR_ERR=-66201]="EC_PB_PARSE_FROM_STR_ERR",e[e.EC_DATA_FORMAT_ERR=-66210]="EC_DATA_FORMAT_ERR",e[e.EC_JSON_FORMAT_ERR=-66211]="EC_JSON_FORMAT_ERR",e[e.EC_JSON_PLAY_MODE_FORMAT_ERR=-66212]="EC_JSON_PLAY_MODE_FORMAT_ERR",e[e.EC_JSON_PLAY_MODE_PARISE_ERR=-66213]="EC_JSON_PLAY_MODE_PARISE_ERR",e[e.EC_INVALID_PARAMS_RECORE_ID=-66601]="EC_INVALID_PARAMS_RECORE_ID",e[e.EC_HASHID_ERR=-66700]="EC_HASHID_ERR",e[e.EC_HASHID_ENCODE_ERR=-66701]="EC_HASHID_ENCODE_ERR",e[e.EC_HASHID_DECODE_ERR=-66702]="EC_HASHID_DECODE_ERR",e[e.EC_CONF_ROOM_ID_BUCKET_ERR=-66801]="EC_CONF_ROOM_ID_BUCKET_ERR",e[e.EC_SDK_SEND_FAIL=90001]="EC_SDK_SEND_FAIL",e[e.EC_SDK_UNINIT=90002]="EC_SDK_UNINIT",e[e.EC_SDK_RES_TIMEOUT=90003]="EC_SDK_RES_TIMEOUT",e[e.EC_SDK_NO_LOGIN=90004]="EC_SDK_NO_LOGIN",e[e.EC_SDK_NO_CHECK_LOGIN=90005]="EC_SDK_NO_CHECK_LOGIN",e[e.EC_SDK_SOCKET_ERROR=90006]="EC_SDK_SOCKET_ERROR",e[e.EC_SDK_SOCKET_CLOSE=90007]="EC_SDK_SOCKET_CLOSE",e[e.EC_SDK_NO_ROOM=90008]="EC_SDK_NO_ROOM"}(se||(se={})),function(e){e[e.COMMON_OFFLINE=0]="COMMON_OFFLINE",e[e.COMMON_ONLINE=1]="COMMON_ONLINE",e[e.RELAY_OFFLINE=2]="RELAY_OFFLINE",e[e.RELAY_ONLINE=3]="RELAY_ONLINE"}(ae||(ae={})),function(e){e[e.COMMON_CREATE=0]="COMMON_CREATE",e[e.MATCH_CREATE=1]="MATCH_CREATE"}(ce||(ce={})),function(e){e[e.STOP=0]="STOP",e[e.START=1]="START"}(_e||(_e={})),function(e){e[e.COMMON_JOIN=0]="COMMON_JOIN",e[e.MATCH_JOIN=1]="MATCH_JOIN"}(ue||(ue={})),function(e){e[e.ROOM_NAME=0]="ROOM_NAME",e[e.OWNER=1]="OWNER",e[e.IS_VIEWED=2]="IS_VIEWED",e[e.IS_INVITED=3]="IS_INVITED",e[e.IS_PRIVATE=4]="IS_PRIVATE",e[e.CUSTOM_PROPERTIES=5]="CUSTOM_PROPERTIES",e[e.IS_FORBID_JOIN=6]="IS_FORBID_JOIN"}(le||(le={})),function(e){e[e.PENDING=0]="PENDING",e[e.MATCHING=1]="MATCHING",e[e.SUCCESS=3]="SUCCESS",e[e.TIMEOUT=4]="TIMEOUT"}(fe||(fe={})),function(e){e[e.PLAYER_SIMPLE=0]="PLAYER_SIMPLE",e[e.ROOM_SIMPLE=1]="ROOM_SIMPLE",e[e.PLAYER_COMPLEX=2]="PLAYER_COMPLEX"}(Ee||(Ee={})),function(e){e[e.E_GS_FORWARDTYPE_DEFAULT=0]="E_GS_FORWARDTYPE_DEFAULT",e[e.E_GS_FORWARDTYPE_NOTIFY_CONNECTION=1]="E_GS_FORWARDTYPE_NOTIFY_CONNECTION",e[e.E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT=2]="E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT",e[e.E_GS_FORWARDTYPE_NOTIFY_COM_EVENT=3]="E_GS_FORWARDTYPE_NOTIFY_COM_EVENT",e[e.E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR=4]="E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR"}(de||(de={}));const he={ClientSendServerReqWrap1:void 0,ServerSendClientBstWrap1:void 0,ClientSendServerRspWrap1:void 0,ClientSendServerReqWrap2:void 0,ClientSendServerRspWrap2:void 0,HeartBeatReq:void 0,HeartBeatRsp:void 0,ServerSendClientBstWrap2:void 0,NOUSEServerSendClientBstRspWrap2:void 0,CheckLoginReq:void 0,CheckLoginRsp:void 0,PushBodyType:void 0,LoginReq:void 0,LoginRsp:void 0,SdkConfig:void 0,LogoutReq:void 0,LogoutRsp:void 0,StartFrameSyncReq:void 0,StartFrameSyncRsp:void 0,StopFrameSyncReq:void 0,StopFrameSyncRsp:void 0,FrameItem:void 0,SendFrameReq:void 0,SendFrameRsp:void 0,FrameExtInfo:void 0,Frame:void 0,RequestFrameReq:void 0,RequestFrameRsp:void 0,PlayerInfo:void 0,TeamInfo:void 0,RoomInfo:void 0,CreateRoomReq:void 0,CreateRoomRsp:void 0,JoinRoomReq:void 0,JoinRoomRsp:void 0,LeaveRoomReq:void 0,LeaveRoomRsp:void 0,DismissRoomReq:void 0,DismissRoomRsp:void 0,ChangeRoomReq:void 0,ChangeRoomRsp:void 0,SvrChangeRoomReq:void 0,SvrChangeRoomRsp:void 0,RemovePlayerReq:void 0,RemovePlayerRsp:void 0,SvrRemovePlayerReq:void 0,SvrRemovePlayerRsp:void 0,GetRoomByRoomIdReq:void 0,GetRoomByRoomIdRsp:void 0,SendToClientReq:void 0,SendToClientRsp:void 0,ChangeCustomPlayerStatusReq:void 0,ChangeCustomPlayerStatusRsp:void 0,SvrChangeCustomPlayerStatusReq:void 0,SvrChangeCustomPlayerStatusRsp:void 0,ChangePlayerNetworkStateReq:void 0,ChangePlayerNetworkStateRsp:void 0,GetRoomListReq:void 0,GetRoomListRsp:void 0,MatchRoomSimpleReq:void 0,MatchRoomSimpleRsp:void 0,MatchRoomComplexReq:void 0,MatchRoomComplexRsp:void 0,MatchPlayersSimpleReq:void 0,MatchPlayersSimpleRsp:void 0,MatchAttribute:void 0,MatchPlayerInfo:void 0,MatchGroupPlayerInfo:void 0,MatchGroupInfo:void 0,MatchTeamInfo:void 0,MatchPlayersReq:void 0,MatchPlayersRsp:void 0,MatchGroupReq:void 0,MatchGroupRsp:void 0,CancelPlayerMatchReq:void 0,CancelPlayerMatchRsp:void 0,CreateRoomBst:void 0,DestroyRoomBst:void 0,JoinRoomBst:void 0,LeaveRoomBst:void 0,RemovePlayerBst:void 0,DismissRoomBst:void 0,ChangeRoomBst:void 0,RecvFromClientBst:void 0,ChangeCustomPlayerStatusBst:void 0,ChangePlayerNetworkStateBst:void 0,MatchTimeoutBst:void 0,CancelMatchBst:void 0,MatchPlayersBst:void 0,StartFrameSyncBst:void 0,StopFrameSyncBst:void 0,RecvFrameBst:void 0,GameSvrCommunication:void 0,NotifyRelayConnectionReq:void 0,NotifyRoomEventReq:void 0,SendToGameSvrReq:void 0,SendToGameSvrRsp:void 0,RecvFromGameSvrBst:void 0,ClientRecvFromGameSvrRsp:void 0},pe=r.QAppProtoErrCode;var Re;!function(e){e.EC_SDK_SEND_FAIL="\u53d1\u9001\u5931\u8d25",e.EC_SDK_UNINIT="\u672a\u521d\u59cb\u5316",e.EC_SDK_RES_TIMEOUT="\u53d1\u9001\u8d85\u65f6",e.EC_SDK_NO_LOGIN="\u672a\u767b\u5f55",e.EC_SDK_NO_CHECK_LOGIN="CheckLogin\u5931\u8d25",e.EC_SDK_SOCKET_ERROR="Socket\u9519\u8bef",e.EC_SDK_SOCKET_CLOSE="Socket\u65ad\u5f00",e.EC_SDK_NO_ROOM="\u65e0\u623f\u95f4\u4fe1\u606f"}(Re||(Re={}));const me={};me[pe.EC_SDK_SEND_FAIL]=Re.EC_SDK_SEND_FAIL,me[pe.EC_SDK_UNINIT]=Re.EC_SDK_UNINIT,me[pe.EC_SDK_RES_TIMEOUT]=Re.EC_SDK_RES_TIMEOUT,me[pe.EC_SDK_NO_LOGIN]=Re.EC_SDK_NO_LOGIN,me[pe.EC_SDK_NO_CHECK_LOGIN]=Re.EC_SDK_NO_CHECK_LOGIN,me[pe.EC_SDK_SOCKET_ERROR]=Re.EC_SDK_SOCKET_ERROR,me[pe.EC_SDK_SOCKET_CLOSE]=Re.EC_SDK_SOCKET_CLOSE,me[pe.EC_SDK_NO_ROOM]=Re.EC_SDK_NO_ROOM;var ye,Se=pe;!function(e){let t,n,r,o,i;!function(e){e[e.ROOM_ALL=1]="ROOM_ALL",e[e.ROOM_OTHERS=2]="ROOM_OTHERS",e[e.ROOM_SOME=3]="ROOM_SOME"}(t=e.RecvType||(e.RecvType={})),function(e){e[e.ROOM_SIMPLE=1]="ROOM_SIMPLE",e[e.PLAYER_COMPLEX=2]="PLAYER_COMPLEX"}(n=e.MatchType||(e.MatchType={})),function(e){e[e.COMMON_CREATE=0]="COMMON_CREATE",e[e.MATCH_CREATE=1]="MATCH_CREATE"}(r=e.CreateRoomType||(e.CreateRoomType={})),function(e){e[e.COMMON_OFFLINE=0]="COMMON_OFFLINE",e[e.COMMON_ONLINE=1]="COMMON_ONLINE",e[e.RELAY_OFFLINE=2]="RELAY_OFFLINE",e[e.RELAY_ONLINE=3]="RELAY_ONLINE"}(o=e.NetworkState||(e.NetworkState={})),function(e){e[e.STOP=0]="STOP",e[e.START=1]="START"}(i=e.FrameSyncState||(e.FrameSyncState={}))}(ye||(ye={}));var ge={get CreateRoomType(){return r.CreateRoomType},get MatchType(){return r.MatchType},get NetworkState(){return r.NetworkState},get FrameSyncState(){return r.FrameSyncState},get RecvType(){return ye.RecvType}};const Ce=n(2),Oe=(e,t)=>void 0===t?null:t,Ie={pingTimeout:5e3,reconnectInterval:500,reconnectMaxTimes:15,resendInterval:1e3,resendTimeout:2e4,url:void 0,enableUDP:!1,isAutoRequestFrame:!1,cacertNativeUrl:""},Te=JSON.stringify(Ie,Oe),Ae={version:Ce.version,appName:void 0,cmd:"",seq:void 0,clientIp:void 0,serviceIp:void 0,business:void 0,authKey:void 0,authType:void 0,authIp:void 0,gameId:void 0,uid:void 0,playerId:void 0,body:void 0},ve=JSON.stringify(Ae,Oe),Me={gameId:void 0,openId:void 0,secretKey:void 0,createSignature:void 0},Ne=JSON.stringify(Me,Oe);var Pe,Le,be,we;!function(e){let t={};e.getInfo=(()=>t),e.setInfo=(e=>t=e)}(Pe||(Pe={})),function(e){let t;!function(e){e[e.INITED=1]="INITED",e[e.INITING=2]="INITING",e[e.UNINIT=3]="UNINIT"}(t=e.StatusType||(e.StatusType={}));let n=t.UNINIT;e.isInited=(()=>n===t.INITED),e.isIniting=(()=>n===t.INITING),e.isUnInit=(()=>n===t.UNINIT),e.setStatus=(e=>n=e)}(Le||(Le={})),function(e){let t;!function(e){e[e.LOGIN=1]="LOGIN",e[e.LOGINING=2]="LOGINING",e[e.LOGOUT=3]="LOGOUT",e[e.LOGOUTING=4]="LOGOUTING"}(t=e.StatusType||(e.StatusType={}));let n=t.LOGOUT,r=0,o="";e.isStatus=(e=>n===e),e.setStatus=(e=>{n=e,e===t.LOGIN&&(r=0)}),e.setErrCode=((e,t)=>{r=e,o=t}),e.getErrCode=(()=>r),e.getErrMsg=(()=>o)}(be||(be={})),function(e){let t;!function(e){e[e.CHECKING=1]="CHECKING",e[e.CHECKED=2]="CHECKED",e[e.OFFLINE=3]="OFFLINE"}(t=e.StatusType||(e.StatusType={}));let n=t.CHECKING;e.isChecked=(()=>n===t.CHECKED),e.isOffline=(()=>n===t.OFFLINE),e.setStatus=(e=>n=e);let r="";e.setRouteId=(e=>r=e),e.getRouteId=(()=>r)}(we||(we={}));const De=r.ClientSendServerReqWrap2Cmd,Fe=r.ServerSendClientBstWrap2Type;function Ye(){return!!("undefined"!=typeof cc&&"undefined"!=typeof WebSocket&&"undefined"!=typeof XMLHttpRequest&&cc.game&&"function"==typeof cc.game.on&&cc.game.EVENT_HIDE&&cc.game.EVENT_SHOW&&cc.sys&&cc.sys.isNative)}const Ue={};Ue.connectSocket=c(e=>new WebSocket(e,[],Ie.cacertNativeUrl)),Ue.request=u,Ue.onHide=(e=>cc.game.on(cc.game.EVENT_HIDE,e)),Ue.offHide=(e=>cc.game.off(cc.game.EVENT_HIDE,e)),Ue.onShow=(e=>cc.game.on(cc.game.EVENT_SHOW,e)),Ue.offShow=(e=>cc.game.off(cc.game.EVENT_SHOW,e)),Ue.getStorageSync=p,Ue.setStorageSync=R,Ue.removeStorageSync=m,Ue.getUserInfo=y,Ue.getSystemInfoSync=S,Ue.getLocation=g,Ue.getNetworkType=C,Ue.createUDPSocket=null;let ke=a,xe=o.UNKNOWN,Be=i.UNKNOWN;"undefined"!=typeof window&&(ke.root=window),M()?(ke=N,xe=o.QQ,ke.root=GameGlobal,Be=function(){if(!M())return i.UNKNOWN;const e=qq.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):J()?(ke=ee,xe=o.QQMP,ke.root={},Be=function(){if(!J())return i.UNKNOWN;const e=qq.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):T()?(ke=A,xe=o.WX,ke.root=GameGlobal,Be=function(){if(!T())return i.UNKNOWN;const e=wx.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):G()?(ke=W,xe=o.WXMP,ke.root={},Be=function(){if(!G())return i.UNKNOWN;const e=wx.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):b()?(ke=w,xe=o.BD,ke.root=GameGlobal,Be=function(){if(!b())return i.UNKNOWN;const e=swan.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):Y()?(ke=U,xe=o.OP,ke.root=window,Be=Y()?i.ANDROID:i.UNKNOWN):x()?(ke=B,xe=o.VV,ke.root=window,Be=x()?i.ANDROID:i.UNKNOWN):Ye()&&(ke=Ue,xe=o.COCOS_NATIVE,"undefined"!=typeof window?ke.root=window:ke.root={},Be=Ye()?cc.sys.os===cc.sys.OS_ANDROID?i.ANDROID:cc.sys.os===cc.sys.OS_IOS?i.IOS:i.UNKNOWN:i.UNKNOWN),ke.globalData={};class He{constructor(e=-1){this.id=e}}const Ge=(e,t,n)=>{clearTimeout(e.id),e.id=setTimeout(t,n)},qe=(...e)=>{e.forEach(e=>e&&clearTimeout(e.id))},Ve=n(2);class Qe{}Qe.enable=!1,Qe.exclude=[],Qe.callback=(e=>console.log(...e)),Qe.log=((...e)=>{if(!Qe.enable)return;if(Array.isArray(Qe.exclude)&&Qe.exclude.findIndex(t=>t===e[0])>=0)return;const t=[`DEBUGGER_v${Ve.version}_${Ve.sdkType}_${xe} `+Date.now()].concat(e);"function"==typeof Qe.callback&&Qe.callback(t)}),Object.defineProperty(Qe,"log",{enumerable:!1,configurable:!1,writable:!1,value:Qe.log});var Ke=Qe;const We=n(3),je=n(4),Je=n(7).default,Xe=new Je($e(),16);let ze=1;function Ze(){const e=Xe.encode(ze++);return ze>=Number.MAX_SAFE_INTEGER&&(ze=1),e}function $e(){let e=Date.now().toString(36);for(let t=0;t<6;t++)e+=Math.ceil(1e6*(Math.random()+1)).toString(36);return e}const et=new Je($e(),32).encode(Date.now()),tt=(e,t)=>(e<0&&(t=`\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef[${e}]`,e=Se.EC_INNER_ERROR),{errCode:e,errMsg:t});function nt(){return Be}function rt(){return xe}function ot(e){return(...t)=>setTimeout(()=>e&&e(...t),0)}function it(e){return e.next=e,e.prev=e,e}function st(e,t){e.prev=t.prev,e.next=t,t.prev.next=e,t.prev=e}function at(e){e.next.prev=e.prev,e.prev.next=e.next,e.next=null,e.prev=null}function ct(e){return e===e.next}function _t(e=new Uint8Array(0)){return{data:e}}const ut=30,lt=100,ft=200,Et=6e4,dt=81,ht=82,pt=83,Rt=84,mt=1,yt=2,St=32,gt=128,Ct=1400,Ot=100,It=24,Tt=20,At=2,vt=2,Mt=7e3,Nt=12e4,Pt=5,Lt=1;function bt(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function wt(e,t,n){return e[t++]=n,t}function Dt(e,t){return[e[t++],t]}function Ft(e,t,n){return e[t++]=255&n,e[t++]=n>>8&255,e[t++]=n>>16&255,e[t++]=n>>24&255,t}function Yt(e,t){return[e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,t]}const Ut=Math.min,kt=Math.max;function xt(e,t){return e-t}function Bt(e,t){return 0==t.length?0:e.output(t,e)}function Ht(e){let t=0,n=new Uint8Array(0);if(ct(e.rcv_queue))return n;if(function(e){let t=0;if(ct(e.rcv_queue))return-1;let n=e.rcv_queue.next;if(0==n.frg)return n.data.length;if(e.nrcv_que<n.frg+1)return-1;for(let n=e.rcv_queue.next;n!=e.rcv_queue;n=n.next){let e=n;if(t+=e.data.length,0==e.frg)break}return t}(e)<0)return n;e.nrcv_que>=e.rcv_wnd&&(t=1);for(let t=e.rcv_queue.next;t!==e.rcv_queue;){let r=t;t=t.next,n=bt(n,r.data);let o=r.frg;if(at(r),e.nrcv_que--,0==o)break}for(;!ct(e.rcv_buf);){let t=e.rcv_buf.next;if(!(t.sn==e.rcv_nxt&&e.nrcv_que<e.rcv_wnd))break;at(t),e.nrcv_buf--,st(t,e.rcv_queue),e.nrcv_que++,e.rcv_nxt++}return e.nrcv_que<e.rcv_wnd&&t&&(e.probe|=yt),n}function Gt(e,t){let n=0;if(0==e.rx_srtt)e.rx_srtt=t,e.rx_rttval=t/2;else{let n=t-e.rx_srtt;n<0&&(n=-n),e.rx_rttval=(3*e.rx_rttval+n)/4,e.rx_srtt=(7*e.rx_srtt+t)/8,e.rx_srtt<1&&(e.rx_srtt=1)}var r,o;n=e.rx_srtt+kt(e.interval,4*e.rx_rttval),e.rx_rto=(r=e.rx_minrto,o=Et,Ut(kt(r,n),o))}function qt(e){let t=e.snd_buf.next;t!=e.snd_buf?e.snd_una=t.sn:e.snd_una=e.snd_nxt}function Vt(e,t){if(!(xt(t,e.snd_una)<0||xt(t,e.snd_nxt)>=0))for(let n,r=e.snd_buf.next;r!=e.snd_buf;r=n){if(n=r.next,t==r.sn){at(r),e.nsnd_buf--;break}if(xt(t,r.sn)<0)break}}function Qt(e,t){for(let n,r=e.snd_buf.next;r!=e.snd_buf&&(n=r.next,xt(t,r.sn)>0);r=n)at(r),e.nsnd_buf--}function Kt(e,t,n){let r=e.ackcount+1;if(r>e.ackblock){let t,n;for(n=8;n<r;n<<=1);if(t=new Uint32Array(2*n),null!=e.acklist)for(let n=0;n<e.ackcount;n++)t[2*n+0]=e.acklist[2*n+0],t[2*n+1]=e.acklist[2*n+1];e.acklist=t,e.ackblock=n}let o=2*e.ackcount;e.acklist[o]=t,e.acklist[o+1]=n,e.ackcount++}function Wt(e,t){return[e.acklist[2*t+0],e.acklist[2*t+1]]}function jt(e,t){let n,r,o=t.sn,i=0;if(!(xt(o,e.rcv_nxt+e.rcv_wnd)>=0||xt(o,e.rcv_nxt)<0)){for(n=e.rcv_buf.prev;n!=e.rcv_buf;n=r){if(r=n.prev,n.sn==o){i=1;break}if(xt(o,n.sn)>0)break}var s,a;for(0==i&&(it(t),a=n,(s=t).prev=a,s.next=a.next,a.next.prev=s,a.next=s,e.nrcv_buf++);!ct(e.rcv_buf);){let t=e.rcv_buf.next;if(!(t.sn==e.rcv_nxt&&e.nrcv_que<e.rcv_wnd))break;at(t),e.nrcv_buf--,st(t,e.rcv_queue),e.nrcv_que++,e.rcv_nxt++}}}function Jt(e,t,n){var r,o,i;return r=e,o=t=wt(e,t=wt(e,t=Ft(e,t,n.conv),n.cmd),n.frg),i=n.wnd,r[o++]=255&i,r[o++]=i>>8&255,Ft(e,t=Ft(e,t=Ft(e,t=Ft(e,t=o,n.ts),n.sn),n.una),n.data.length)}function Xt(e){let t=e.current;const n=e.buffer;let r=0,o=0,i=0,s=_t();if(0==e.updated)return;s.conv=e.conv,s.cmd=ht,s.frg=0,s.wnd=function(e){return e.nrcv_que<e.rcv_wnd?e.rcv_wnd-e.nrcv_que:0}(e),s.una=e.rcv_nxt,s.sn=0,s.ts=0;let a=e.ackcount;for(let t=0;t<a;t++)r+It>e.mtu&&(Bt(e,n.slice(0,r)),r=0),[s.sn,s.ts]=Wt(e,t),r=Jt(n,r,s);e.ackcount=0,0==e.rmt_wnd?0==e.probe_wait?(e.probe_wait=Mt,e.ts_probe=e.current+e.probe_wait):xt(e.current,e.ts_probe)>=0&&(e.probe_wait<Mt&&(e.probe_wait=Mt),e.probe_wait+=e.probe_wait/2,e.probe_wait>Nt&&(e.probe_wait=Nt),e.ts_probe=e.current+e.probe_wait,e.probe|=mt):(e.ts_probe=0,e.probe_wait=0),e.probe&mt&&(s.cmd=pt,r+It>e.mtu&&(Bt(e,n.slice(0,r)),r=0),r=Jt(n,r,s)),e.probe&yt&&(s.cmd=Rt,r+It>e.mtu&&(Bt(e,n.slice(0,r)),r=0),r=Jt(n,r,s)),e.probe=0;let c=Ut(e.snd_wnd,e.rmt_wnd);for(0==e.nocwnd&&(c=Ut(e.cwnd,c));xt(e.snd_nxt,e.snd_una+c)<0&&!ct(e.snd_queue);){let n=e.snd_queue.next;at(n),st(n,e.snd_buf),e.nsnd_que--,e.nsnd_buf++,n.conv=e.conv,n.cmd=dt,n.wnd=s.wnd,n.ts=t,n.sn=e.snd_nxt++,n.una=e.rcv_nxt,n.resendts=t,n.rto=e.rx_rto,n.fastack=0,n.xmit=0}let _=e.fastresend>0?e.fastresend:4294967295,u=0==e.nodelay?e.rx_rto>>3:0;for(let a=e.snd_buf.next;a!=e.snd_buf;a=a.next){let c=0;0==a.xmit?(c=1,a.xmit++,a.rto=e.rx_rto,a.resendts=t+a.rto+u):xt(t,a.resendts)>=0?(c=1,a.xmit++,e.xmit++,0==e.nodelay?a.rto+=e.rx_rto:a.rto+=e.rx_rto/2,a.resendts=t+a.rto,i=1):a.fastack>=_&&(a.xmit<=e.fastlimit||e.fastlimit<=0)&&(c=1,a.xmit++,a.fastack=0,a.resendts=t+a.rto,o++),c&&(a.ts=t,a.wnd=s.wnd,a.una=e.rcv_nxt,r+(It+a.data.length)>e.mtu&&(Bt(e,n.slice(0,r)),r=0),r=Jt(n,r,a),a.data.length>0&&(n.set(a.data.slice(0,a.data.length),r),r+=a.data.length),a.xmit>=e.dead_link&&(e.state=-1))}if(r>0&&(Bt(e,n.slice(0,r)),r=0),o){let t=e.snd_nxt-e.snd_una;e.ssthresh=t/2,e.ssthresh<vt&&(e.ssthresh=vt),e.cwnd=e.ssthresh+_,e.incr=e.cwnd*e.mss}i&&(e.ssthresh=c/2,e.ssthresh<vt&&(e.ssthresh=vt),e.cwnd=1,e.incr=e.mss),e.cwnd<1&&(e.cwnd=1,e.incr=e.mss)}class zt{constructor(e,t){this._ts=Date.now(),this.updateAsync=(()=>{let e=!1;return()=>{e||(e=!0,zt.asyncer(()=>{this.update(),e=!1}))}})(),this.context=t,this._kcp=function(e){return{conv:e,snd_una:0,snd_nxt:0,rcv_nxt:0,ts_recent:0,ts_lastack:0,ts_probe:0,probe_wait:0,snd_wnd:St,rcv_wnd:gt,rmt_wnd:gt,cwnd:0,incr:0,probe:0,mtu:Ct,mss:Ct-It,stream:0,buffer:new Uint8Array(3*(Ct+It)),snd_queue:it(_t()),rcv_queue:it(_t()),snd_buf:it(_t()),rcv_buf:it(_t()),nrcv_buf:0,nsnd_buf:0,nrcv_que:0,nsnd_que:0,state:0,acklist:null,ackblock:0,ackcount:0,rx_srtt:0,rx_rttval:0,rx_rto:ft,rx_minrto:lt,current:0,interval:Ot,ts_flush:Ot,nodelay:0,updated:0,logmask:0,ssthresh:At,fastresend:0,fastlimit:Pt,nocwnd:0,xmit:0,dead_link:Tt,output:null}}(e)}input(e){let t=function(e,t){let n=e.snd_una,r=0,o=0,i=0,s=0,a=t.length;for(;;){let n,u,l,f,E,d,h,p;if(a<It)break;if([E,s]=Yt(t,s),E!=e.conv)return-1;if([h,s]=Dt(t,s),[p,s]=Dt(t,s),[d,s]=(_=s,[(c=t)[_++]|c[_++]<<8,_]),[n,s]=Yt(t,s),[u,s]=Yt(t,s),[f,s]=Yt(t,s),[l,s]=Yt(t,s),(a-=It)<l||l<0)return-2;if(h!=dt&&h!=ht&&h!=pt&&h!=Rt)return-3;if(e.rmt_wnd=d,Qt(e,f),qt(e),h==ht)xt(e.current,n)>=0&&Gt(e,xt(e.current,n)),Vt(e,u),qt(e),0==i?(i=1,r=u,o=n):xt(u,r)>0&&xt(n,o)>0&&(r=u,o=n);else if(h==dt){if(xt(u,e.rcv_nxt+e.rcv_wnd)<0&&(Kt(e,u,n),xt(u,e.rcv_nxt)>=0)){let r=_t();r.conv=E,r.cmd=h,r.frg=p,r.wnd=d,r.ts=n,r.sn=u,r.una=f,l>0&&(r.data=t.slice(s,s+l)),jt(e,r)}}else if(h==pt)e.probe|=yt;else if(h!=Rt)return-3;s+=l,a-=l}var c,_;if(0!=i&&function(e,t,n){if(!(xt(t,e.snd_una)<0||xt(t,e.snd_nxt)>=0))for(let r,o=e.snd_buf.next;o!=e.snd_buf&&(r=o.next,!(xt(t,o.sn)<0));o=r)t!=o.sn&&xt(n,o.ts)>=0&&o.fastack++}(e,r,o),xt(e.snd_una,n)>0&&e.cwnd<e.rmt_wnd){let t=e.mss;e.cwnd<e.ssthresh?(e.cwnd++,e.incr+=t):(e.incr<t&&(e.incr=t),e.incr+=t*t/e.incr+t/16,(e.cwnd+1)*t<=e.incr&&e.cwnd++),e.cwnd>e.rmt_wnd&&(e.cwnd=e.rmt_wnd,e.incr=e.rmt_wnd*t)}return 0}(this._kcp,e);for(;;){let e=Ht(this._kcp);if(0===e.length)break;this._onRecv&&this._onRecv(e,this.context)}return t}onOutput(e){this._kcp.output=((t,n)=>(e(t,this.context),t.length))}send(e){return function(e,t){let n=0,r=t.length;if(0!=e.stream){if(!ct(e.snd_queue)){let i=e.snd_queue.prev;if(i.data.length<e.mss){let s=e.mss-i.data.length,a=r<s?r:s,c=bt(i.data,t.slice(n,n+a));n+=a;let _=_t(c);st(_,e.snd_queue),_.frg=0,r-=a,at(o=i),it(o)}}if(r<=0)return 0}var o;let i;if((i=r<=e.mss?1:(r+e.mss-1)/e.mss)>=gt)return-2;0==i&&(i=1);for(let o=0;o<i;o++){let s=r>e.mss?e.mss:r,a=_t();r>0&&(a.data=t.slice(n,n+s),n+=s),a.frg=0==e.stream?i-o-1:0,it(a),st(a,e.snd_queue),e.nsnd_que++,r-=s}return 0}(this._kcp,e)}onRecv(e){this._onRecv=e}update(e=!1){let t=Date.now(),n=t-this._ts;return n>=4294967296&&(this._ts=t,n=0),e?(o=n,(r=this._kcp).current=o,0==r.updated&&(r.updated=1,r.ts_flush=r.current),r.ts_flush=r.current,r.ts_flush+=r.interval,xt(r.current,r.ts_flush)>=0&&(r.ts_flush=r.current+r.interval),void Xt(r)):function(e,t){e.current=t,0==e.updated&&(e.updated=1,e.ts_flush=e.current);let n=xt(e.current,e.ts_flush);(n>=1e4||n<-1e4)&&(e.ts_flush=e.current,n=0),n>=0&&(e.ts_flush+=e.interval,xt(e.current,e.ts_flush)>=0&&(e.ts_flush=e.current+e.interval),Xt(e))}(this._kcp,n);var r,o}nodelay(e,t,n,r){return function(e,t,n,r,o){return t>=0&&(e.nodelay=t,e.rx_minrto=t?ut:lt),n>=0&&(n>5e3?n=5e3:n<Lt&&(n=Lt),e.interval=n),r>=0&&(e.fastresend=r),o>=0&&(e.nocwnd=o),0}(this._kcp,e,t,n,r)}setWinSize(e,t){return r=e,o=t,(n=this._kcp)&&(r>0&&(n.snd_wnd=r),o>0&&(n.rcv_wnd=kt(o,gt))),0;var n,r,o}}zt.asyncer=(e=>new Promise(e=>e()).then(e));const Zt={get connectSocket(){let e=ke.connectSocket;return Ie.enableUDP&&ke.createUDPSocket&&(e=(e=>{let t,n=null,r=null,o=null,i=null,s=0;const a=e.url.toLowerCase().replace("wss://","").replace("ws://",""),c=a.split(":")[0],_=parseInt(a.split(":")[1]||"443",10),u=new zt(123,{address:c,port:_});u.nodelay(1,10,2,1),u.setWinSize(1024,1024);const l=ke.createUDPSocket(),f={get readyState(){return s},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,onClose:e=>r=e,onOpen:e=>o=e,onError:e=>i=e,onMessage:e=>n=e,close:e=>{l.close(),d(),e&&e.success&&e.success()},send:({data:e,fail:t,success:n})=>{u&&(0!==u.send(new Uint8Array(e))?ot(()=>t&&t())():ot(()=>n&&n())(),u.updateAsync())}};l.onClose(e=>{s=3,d(),ot(()=>r&&r(e))()}),l.onError(e=>{s=3,l.close(),ot(()=>i&&i(e))()}),l.onListening(e=>{Ke.log("UDP_onListening"),s=1,E(),ot(()=>o&&o(e))()}),l.onMessage(e=>{const t=e.message||("number"==typeof e.byteLength?e:void 0);u.input(new Uint8Array(t)),u.updateAsync()}),u.onOutput((e,t)=>{l.send({address:c,port:_,message:e.buffer||e})}),u.onRecv((e,t)=>{e.length>0&&n&&n({data:e.buffer})});const E=()=>{t=!0,requestAnimationFrame(()=>{t&&(u.update(),E())})},d=()=>{t=!1},h=l.bind();return Ke.log("UDP_bind",h),f})),e}},$t={connectSocket:ke.connectSocket},en={connect:"connect",connectClose:"connectClose",connectClosing:"connectClosing",connectError:"connectError",connecting:"connecting",message:"message",autoAuth:"autoAuth"},tn=Object.keys(en);var nn=class{constructor(e,t,n){this.isMsgBind=!1,this.forceClose=!1,this.init(n),this.id=e,this.enableUdp=t}init(e){this.url=e,this.eventCallbacks=[],this.eventOnceCallbacks=new Map,this.socketTask=null;const t=new He;let n=0;const r=()=>{Ke.log("SOCKET_OPEN",this.id,this.isConnect()),n=0,u(),qe(t)},o=e=>{Ke.log("SOCKET_CLOSE",e,this.id),_(),Ge(t,()=>s("close"),Ie.reconnectInterval),this.forceClose&&(n=0,this.forceClose=!1,qe(t))},i=e=>{Ke.log("SOCKET_ERROR",e,this.id,this.socketTask&&this.socketTask.readyState),c(en.connectError,{msg:"socket connectError",data:e}),Ge(t,()=>s("error"),Ie.reconnectInterval)},s=e=>{if(!this.url)throw new Error("socket.url = "+this.url);if(!this.isConnect()&&!this.isClose())return Ge(t,()=>s("open"),Ie.reconnectInterval);if(!this.isClose())return;if(Ke.log("SOCKET_TRY_OPEN",this.id,e,this.socketTask&&this.socketTask.readyState,n,Ie.reconnectMaxTimes),++n>Ie.reconnectMaxTimes)return n=0,void Ke.log("SOCKET_RECONNECT_TIMEOUT");const a="wss://"+this.url.replace("wss://","").replace("ws://","");qe(t),this.forceClose=!1,this.enableUdp?this.socketTask=Zt.connectSocket({url:a,fail:()=>console.error("connectSocket fail")}):this.socketTask=$t.connectSocket({url:a,fail:()=>console.error("connectSocket fail")}),this.socketTask.onOpen(r.bind(this)),this.socketTask.onClose(o.bind(this)),this.socketTask.onError(i.bind(this)),this.socketTask.onMessage((e=>{c(en.message,{msg:"socket message",data:e.data})}).bind(this))},a=e=>{Ke.log("SOCKET_CONNECT",this.id,e),!this.isConnect()&&n>0&&n<Ie.reconnectMaxTimes||(n=0,s(e+" connect"))},c=(e,t={})=>{t.tag=e,this.eventCallbacks.forEach(([n,r])=>{n!==e&&"*"!==n||r(t)});const n=this.eventOnceCallbacks.get(e);n&&(n(t),this.eventOnceCallbacks.delete(e))},_=()=>c(en.connectClose,{msg:"socket is closed"}),u=()=>c(en.connect,{msg:"socket is connected"});this.connect=a,this.connectNewSocket=(e=>{Ke.log("SOCKET_CONNECT_NEW",this.id,this.isClose()),this.url=e,n=0;const t=()=>{a("connectNewSocket")};this.close(t,t)}),this.send=((e,{fail:t,success:n})=>{if(!this.isConnect())return t({data:e}),void a("send");this.socketTask.send({data:e.buffer,fail:n=>{Ke.log("SOCKET_SEND_FAIL",this.id,n),t({data:e})},success:()=>{n({data:e})}})}),this.close=((e,t)=>{if(this.forceClose=!0,!this.socketTask)return e&&e(),_();this.socketTask.close({success:t=>{Ke.log("SOCKET_CLOSE_SUCCESS",this.id,t),this.socketTask=null,e&&e()},fail:e=>{Ke.log("SOCKET_CLOSE_ERROR",this.id,e),this.socketTask=null,t&&t()}})}),this.destory=(()=>{qe(t),!this.isClose()&&this.close(),this.eventCallbacks=[],this.isMsgBind=!1}),this.isConnect=(()=>this.socketTask&&this.socketTask.readyState===this.socketTask.OPEN),this.isConnecting=(()=>this.socketTask&&this.socketTask.readyState===this.socketTask.CONNECTING),this.isClose=(()=>!this.socketTask||this.socketTask&&this.socketTask.readyState===this.socketTask.CLOSED),this.isClosing=(()=>this.socketTask&&this.socketTask.readyState===this.socketTask.CLOSING),this.on=((e,t)=>{(tn.includes(e)||"*"===e)&&"function"==typeof t&&(this.eventCallbacks.push([e,t]),e===en.message&&(this.isMsgBind=!0))}),this.once=((e,t)=>{tn.includes(e)&&"function"==typeof t&&this.eventOnceCallbacks.set(e,t)}),this.emit=c}};const rn=[De.E_CMD_LOGIN_REQ,De.E_CMD_LOGOUT_REQ],on=[De.E_CMD_RELAY_SEND_FRAME_REQ,De.E_CMD_RELAY_REQUEST_FRAME_REQ,De.E_CMD_HEART_BEAT_REQ,De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ];var sn;!function(e){e[e.CLIENT_PRE=parseInt("0x2",16)]="CLIENT_PRE",e[e.CLIENT_END=parseInt("0x3",16)]="CLIENT_END",e[e.SERVER_PRE=parseInt("0x28",16)]="SERVER_PRE",e[e.SERVER_END=parseInt("0x29",16)]="SERVER_END"}(sn||(sn={}));class an{constructor(){this.queue=new Set,this.bdHandlers=new Set,this.socket=null}static startQueueLoop(){Ge(an.timer,()=>{const e=Date.now();return Array.from(an.sendQueue).forEach(([t,n])=>{if(e-n.time>Ie.resendTimeout){let e,t="";be.isStatus(be.StatusType.LOGIN)?e=Se.EC_SDK_RES_TIMEOUT:be.getErrCode()===Se.EC_OK?(e=Se.EC_SDK_NO_LOGIN,t="\u767b\u5f55\u5931\u8d25"):(e=be.getErrCode(),t="\u767b\u5f55\u5931\u8d25\uff0c"+be.getErrMsg()),n.sendFail(e,t)}else!n.isSocketSend&&e-n.time>=Ie.resendInterval&&n.resend()}),an.startQueueLoop()},Ie.resendInterval)}static stopQueueLoop(){qe(an.timer),Array.from(an.sendQueue).forEach(([e,t])=>{t.remove()}),an.sendQueue.clear()}bindSocket(e,t,n){return!(this.socket||!e||(this.socket=e,!this.socket.isMsgBind&&this.socket.on(en.message,(e=>{if(!e.data)return;const{body:r,pre:o,end:i}=this.unpackBody(new Uint8Array(e.data));o===sn.CLIENT_PRE&&i===sn.CLIENT_END&&t(r),o===sn.SERVER_PRE&&i===sn.SERVER_END&&n(r)}).bind(this)),0))}unbindSocket(){this.socket=null,this.clearQueue(),this.clearBdHandlers()}clearQueue(){Array.from(this.queue).forEach(e=>{this.deleteSeqQueue(e)})}clearBdHandlers(){Array.from(this.bdHandlers).forEach(e=>{an.broadcastHandlers.delete(e),this.bdHandlers.delete(e)})}deleteSeqQueue(e){an.sendQueue.delete(e),this.queue.delete(e)}addSeqQueue(e,t){an.sendQueue.set(e,t),this.queue.add(e)}setBroadcastHandler(e,t){an.broadcastHandlers.set(e,t),this.bdHandlers.add(e)}handleErrCode(e){return!1}send(e,t,n){const r=this.getReadyCode(n);return an.sendQueue.size>10&&Ke.log("SENDQUEUE_size",an.sendQueue.size),0!==r?this.handleSendFail(t,r):this.socket.send(e,{fail:e=>this.handleSendFail(t,e),success:()=>this.handleSendSuccess(t)}),t}buildData(e,t,n){const r=5+t.length+1,o=new Uint8Array(function(e,t){let n=[];for(;e>255;)n.push(255&e),e>>=8;for(0!==e&&n.push(e),n=n.slice(0,4);n.length<4;)n.push(0);return n.reverse()}(r)),i=new Uint8Array(r);return i.set(e),i.set(o,e.length),i.set(t,e.length+o.length),i.set(n,e.length+o.length+t.length),i}unpackBody(e){const t=e.slice(1,5),n=function(e){let t=0;const n=e.length;for(let r=n-1;r>=0;r--)t+=e[r]*Math.pow(2,8*(n-1-r));return t}(Array.from(t))-6;return{body:e.slice(5,5+n),pre:e[0],end:e[e.length-1]}}handleSendFail(e,t){const n=an.sendQueue.get(e);if(n)return Date.now()-n.time>Ie.resendTimeout?n.sendFail(be.getErrCode()||t):t===Se.EC_SDK_UNINIT?n.sendFail(t):t===Se.EC_SDK_NO_LOGIN?this.socket.emit(en.autoAuth,{}):t===Se.EC_SDK_NO_CHECK_LOGIN?this.socket.emit(en.autoAuth,{}):void 0}handleSendSuccess(e){an.sendQueue.has(e)&&an.sendQueue.get(e).sendSuccess()}getReadyCode(e){return Le.isInited()||e===De.E_CMD_LOGIN_REQ?this.socket&&this.socket.url?be.isStatus(be.StatusType.LOGIN)||rn.includes(e)?this.socket.id===r.ConnectionType.RELAY&&!we.isChecked()&&on.includes(e)?Se.EC_SDK_NO_CHECK_LOGIN:0:Se.EC_SDK_NO_LOGIN:Se.EC_SDK_SEND_FAIL:(console.error("MGOBE.Listener \u672a\u521d\u59cb\u5316"),Pe.setInfo({id:""}),be.setStatus(be.StatusType.LOGOUT),Se.EC_SDK_UNINIT)}}an.sendQueue=new Map,an.broadcastHandlers=new Map,an.timer=new He;var cn=an;let _n=n(8);class un{constructor(e){this.root=_n.newBuilder({}).import(e).build()}lookupType(e){let t=this.root;return e.split(".").forEach(e=>t=t[e]),t}static numberify(e){if(null==e)return e;if(e.constructor===_n.Long)return Number(e);let t=Object.prototype.toString.apply(e);return e.constructor===_n.ByteBuffer?e.buffer.slice(e.offset,e.offset+e.limit):("[object Object]"!==t&&"[object Array]"!==t||Object.keys(e).forEach(function(t){e[t]=un.numberify(e[t])}),e)}bufferify(e,t){let n=this.lookupType(e);return function(e){let r={};t.forEach(t=>e.hasOwnProperty(t)&&(r[t]=e[t]));let o=n.encode(r);return new Uint8Array(o.buffer.slice(o.offset,o.offset+o.limit))}}objectify(e){let t=this.lookupType(e);return function(e){let n=t.decode(e);return un.numberify(n)}}}function ln(e,t,n,r){return{objectify:function(o){let i=e.objectify(o);return r.forEach(function(e){void 0!==e.value&&i[t]!==e.value||(i[e.key]=e.IProto.objectify(i[n]))}),i},bufferify:function(o){let i=Object.assign({},o);return r.forEach(function(e){i[e.key]&&(i[n]=e.IProto.bufferify(i[e.key]),void 0!==e.value&&(i[t]=e.value),delete i[e.key])}),e.bufferify(i)}}}const fn={ClientSendServerReqWrap1:["version","appName","cmd","seq","clientIp","serviceIp","business","authKey","authType","authIp","gameId","uid","playerId","body"],ServerSendClientBstWrap1:["version","appName","cmd","seq","clientIp","serviceIp","business","authKey","authType","authIp","gameId","uid","playerId","body"],ClientSendServerRspWrap1:["seq","errCode","errMsg","body"],ClientSendServerReqWrap2:["cmd","body"],ClientSendServerRspWrap2:["body"],HeartBeatReq:["conType","routeId"],HeartBeatRsp:[],ServerSendClientBstWrap2:["type","msg"],NOUSEServerSendClientBstRspWrap2:[],CheckLoginReq:["token","routeId"],CheckLoginRsp:[],PushBodyType:["pushMsg"],LoginReq:["gameId","openId","platform","channel","nonce","timestamp","sign","deviceId","mac","imei"],LoginRsp:["token","playerId","expireTime","sdkConfig"],SdkConfig:["pingInterval","reportInterval","serverTime","enableUdp"],LogoutReq:[],LogoutRsp:[],StartFrameSyncReq:[],StartFrameSyncRsp:[],StopFrameSyncReq:[],StopFrameSyncRsp:[],FrameItem:["playerId","data","timestamp"],SendFrameReq:["roomId","item"],SendFrameRsp:[],FrameExtInfo:["seed"],Frame:["id","items","ext"],RequestFrameReq:["roomId","beginFrameId","endFrameId"],RequestFrameRsp:["frames"],PlayerInfo:["id","name","teamId","customPlayerStatus","customProfile","commonNetworkState","relayNetworkState","isRobot","matchAttributes"],TeamInfo:["id","name","minPlayers","maxPlayers"],RoomInfo:["id","name","type","createType","maxPlayers","owner","isPrivate","customProperties","playerList","teamList","frameSyncState","frameRate","routeId","createTime","startGameTime","isForbidJoin"],CreateRoomReq:["roomName","roomType","createType","maxPlayers","isPrivate","customProperties","playerInfo","region","owner","playerList","teamList"],CreateRoomRsp:["roomInfo"],JoinRoomReq:["roomId","teamId","joinType","playerInfo"],JoinRoomRsp:["roomInfo"],LeaveRoomReq:[],LeaveRoomRsp:["roomInfo"],DismissRoomReq:[],DismissRoomRsp:[],ChangeRoomReq:["roomName","owner","isPrivate","customProperties","isForbidJoin","changeRoomOptionList"],ChangeRoomRsp:["roomInfo"],SvrChangeRoomReq:["roomName","owner","isPrivate","customProperties","isForbidJoin","roomId","changeRoomOptionList"],SvrChangeRoomRsp:["roomInfo"],RemovePlayerReq:["removePlayerId"],RemovePlayerRsp:["roomInfo"],SvrRemovePlayerReq:["roomId","removePlayerId"],SvrRemovePlayerRsp:["roomInfo"],GetRoomByRoomIdReq:["roomId"],GetRoomByRoomIdRsp:["roomInfo"],SendToClientReq:["roomId","recvPlayerList","msg"],SendToClientRsp:[],ChangeCustomPlayerStatusReq:["customPlayerStatus"],ChangeCustomPlayerStatusRsp:["roomInfo"],SvrChangeCustomPlayerStatusReq:["customPlayerStatus"],SvrChangeCustomPlayerStatusRsp:["roomInfo"],ChangePlayerNetworkStateReq:["networkState"],ChangePlayerNetworkStateRsp:["roomInfo"],GetRoomListReq:["gameId","pageNo","pageSize","roomType","isDesc"],GetRoomListRsp:["gameId","roomList","total"],MatchRoomSimpleReq:["roomType","maxPlayers","playerInfo"],MatchRoomSimpleRsp:["roomInfo"],MatchRoomComplexReq:[],MatchRoomComplexRsp:[],MatchPlayersSimpleReq:[],MatchPlayersSimpleRsp:[],MatchAttribute:["name","value"],MatchPlayerInfo:["id","name","customPlayerStatus","customProfile","matchAttributes","matchStatus","teamId","region","teamLeader","sdkVersion","groupId"],MatchGroupPlayerInfo:["id","name","customPlayerStatus","customProfile","matchAttributes","matchStatus","teamId","region","teamLeader","sdkVersion","groupId"],MatchGroupInfo:["id","leader","playerIdList","playerInfoList","matchAttributes","region","sdkVersion","teamId"],MatchTeamInfo:["teamId","teamName","teamLeader","members","matchAttributes","memberSdkVersions","groupIds","groupSdkVersions"],MatchPlayersReq:["matchCode","playerInfo"],MatchPlayersRsp:["matchCode"],MatchGroupReq:["matchCode","playerInfoList"],MatchGroupRsp:["matchCode"],CancelPlayerMatchReq:["matchType"],CancelPlayerMatchRsp:[],CreateRoomBst:["roomInfo"],DestroyRoomBst:["roomInfo"],JoinRoomBst:["roomInfo","joinPlayerId"],LeaveRoomBst:["roomInfo","leavePlayerId"],RemovePlayerBst:["roomInfo","removePlayerId"],DismissRoomBst:["roomInfo"],ChangeRoomBst:["roomInfo"],RecvFromClientBst:["roomId","sendPlayerId","msg"],ChangeCustomPlayerStatusBst:["changePlayerId","customPlayerStatus","roomInfo"],ChangePlayerNetworkStateBst:["changePlayerId","networkState","roomInfo"],MatchTimeoutBst:["matchType","errCode"],CancelMatchBst:["matchCode","playerId"],MatchPlayersBst:["matchType","roomInfo"],StartFrameSyncBst:["roomInfo"],StopFrameSyncBst:["roomInfo"],RecvFrameBst:["frame"],GameSvrCommunication:["type","body"],NotifyRelayConnectionReq:["roomId","ip","port"],NotifyRoomEventReq:["cmd","msg"],SendToGameSvrReq:["roomId","playerId","data"],SendToGameSvrRsp:[],RecvFromGameSvrBst:["roomId","recvPlayerIdList","data"],ClientRecvFromGameSvrRsp:[]},En=n(13),dn=(()=>{let e;return()=>e||(e=new un(En))})();Object.keys(he).map(e=>he[e]=function(e,t,n){return{bufferify:e().bufferify(t,n),objectify:e().objectify(t)}}(dn,[ne,e].join("."),fn[e])),ln(he.ClientSendServerReqWrap2,"cmd","body",[{value:ie.E_CMD_LOGIN_REQ,key:"LoginReq",IProto:he.LoginReq},{value:ie.E_CMD_LOGOUT_REQ,key:"LogoutReq",IProto:he.LogoutReq},{value:ie.E_CMD_CHANGE_PLAYER_STATE_REQ,key:"ChangeCustomPlayerStatusReq",IProto:he.ChangeCustomPlayerStatusReq},{value:ie.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,key:"SendToGameSvrReq",IProto:he.SendToGameSvrReq},{value:ie.E_CMD_RELAY_SEND_FRAME_REQ,key:"SendFrameReq",IProto:he.SendFrameReq},{value:ie.E_CMD_ROOM_CHAT_REQ,key:"SendToClientReq",IProto:he.SendToClientReq},{value:ie.E_CMD_CHECK_LOGIN_REQ,key:"CheckLoginReq",IProto:he.CheckLoginReq},{value:ie.E_CMD_RELAY_REQUEST_FRAME_REQ,key:"RequestFrameReq",IProto:he.RequestFrameReq},{value:ie.E_CMD_START_FRAME_SYNC_REQ,key:"StartFrameSyncReq",IProto:he.StartFrameSyncReq},{value:ie.E_CMD_STOP_FRAME_SYNC_REQ,key:"StopFrameSyncReq",IProto:he.StopFrameSyncReq},{value:ie.E_CMD_CREATE_ROOM_REQ,key:"CreateRoomReq",IProto:he.CreateRoomReq},{value:ie.E_CMD_JOIN_ROOM_REQ,key:"JoinRoomReq",IProto:he.JoinRoomReq},{value:ie.E_CMD_QUIT_ROOM_REQ,key:"LeaveRoomReq",IProto:he.LeaveRoomReq},{value:ie.E_CMD_DISSMISS_ROOM_REQ,key:"DismissRoomReq",IProto:he.DismissRoomReq},{value:ie.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,key:"ChangeRoomReq",IProto:he.ChangeRoomReq},{value:ie.E_CMD_REMOVE_MEMBER_REQ,key:"RemovePlayerReq",IProto:he.RemovePlayerReq},{value:ie.E_CMD_GET_ROOM_DETAIL_REQ,key:"GetRoomByRoomIdReq",IProto:he.GetRoomByRoomIdReq},{value:ie.E_CMD_GET_ROOM_LIST_REQ,key:"GetRoomListReq",IProto:he.GetRoomListReq},{value:ie.E_CMD_GET_ROOM_LIST_V2_REQ,key:"GetRoomListReq",IProto:he.GetRoomListReq},{value:ie.E_CMD_HEART_BEAT_REQ,key:"HeartBeatReq",IProto:he.HeartBeatReq},{value:ie.E_CMD_MATCH_PLAYER_COMPLEX_REQ,key:"MatchPlayersReq",IProto:he.MatchPlayersReq},{value:ie.E_CMD_MATCH_ROOM_SIMPLE_REQ,key:"MatchRoomSimpleReq",IProto:he.MatchRoomSimpleReq},{value:ie.E_CMD_MATCH_CANCEL_MATCH_REQ,key:"CancelPlayerMatchReq",IProto:he.CancelPlayerMatchReq}]),he.ClientSendServerRspWrap2,ie.E_CMD_LOGIN_REQ,he.LoginRsp,ie.E_CMD_LOGOUT_REQ,he.LogoutRsp,ie.E_CMD_CHANGE_PLAYER_STATE_REQ,he.ChangeCustomPlayerStatusRsp,ie.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,he.SendToGameSvrRsp,ie.E_CMD_RELAY_SEND_FRAME_REQ,he.SendFrameRsp,ie.E_CMD_ROOM_CHAT_REQ,he.SendToClientRsp,ie.E_CMD_CHECK_LOGIN_REQ,he.CheckLoginRsp,ie.E_CMD_RELAY_REQUEST_FRAME_REQ,he.RequestFrameRsp,ie.E_CMD_START_FRAME_SYNC_REQ,he.StartFrameSyncRsp,ie.E_CMD_STOP_FRAME_SYNC_REQ,he.StopFrameSyncRsp,ie.E_CMD_CREATE_ROOM_REQ,he.CreateRoomRsp,ie.E_CMD_JOIN_ROOM_REQ,he.JoinRoomRsp,ie.E_CMD_QUIT_ROOM_REQ,he.LeaveRoomRsp,ie.E_CMD_DISSMISS_ROOM_REQ,he.DismissRoomRsp,ie.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,he.ChangeRoomRsp,ie.E_CMD_REMOVE_MEMBER_REQ,he.RemovePlayerRsp,ie.E_CMD_GET_ROOM_DETAIL_REQ,he.GetRoomByRoomIdRsp,ie.E_CMD_GET_ROOM_LIST_V2_REQ,he.GetRoomListRsp,ie.E_CMD_HEART_BEAT_REQ,he.HeartBeatRsp,ie.E_CMD_MATCH_PLAYER_COMPLEX_REQ,he.MatchPlayersRsp,ie.E_CMD_MATCH_ROOM_SIMPLE_REQ,he.MatchRoomSimpleRsp,ie.E_CMD_MATCH_CANCEL_MATCH_REQ,he.CancelPlayerMatchRsp;const hn=ln(he.ServerSendClientBstWrap2,"type","msg",[{value:oe.E_PUSH_TYPE_GAMESVR,key:"RecvFromGameSvrBst",IProto:he.RecvFromGameSvrBst},{value:oe.E_PUSH_TYPE_ROOM_CHAT,key:"RecvFromClientBst",IProto:he.RecvFromClientBst},{value:oe.E_PUSH_TYPE_START_GAME,key:"StartFrameSyncBst",IProto:he.StartFrameSyncBst},{value:oe.E_PUSH_TYPE_STOP_GAME,key:"StopFrameSyncBst",IProto:he.StopFrameSyncBst},{value:oe.E_PUSH_TYPE_RELAY,key:"RecvFrameBst",IProto:he.RecvFrameBst},{value:oe.E_PUSH_TYPE_JOIN_ROOM,key:"JoinRoomBst",IProto:he.JoinRoomBst},{value:oe.E_PUSH_TYPE_LEAVE_ROOM,key:"LeaveRoomBst",IProto:he.LeaveRoomBst},{value:oe.E_PUSH_TYPE_DISMISS_ROOM,key:"DismissRoomBst",IProto:he.DismissRoomBst},{value:oe.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,key:"ChangeRoomBst",IProto:he.ChangeRoomBst},{value:oe.E_PUSH_TYPE_REMOVE_PLAYER,key:"RemovePlayerBst",IProto:he.RemovePlayerBst},{value:oe.E_PUSH_TYPE_PLAYER_STATE,key:"ChangeCustomPlayerStatusBst",IProto:he.ChangeCustomPlayerStatusBst},{value:oe.E_PUSH_TYPE_NETWORK_STATE,key:"ChangePlayerNetworkStateBst",IProto:he.ChangePlayerNetworkStateBst},{value:oe.E_PUSH_TYPE_MATCH_TIMEOUT,key:"MatchTimeoutBst",IProto:he.MatchTimeoutBst},{value:oe.E_PUSH_TYPE_MATCH_SUCCESS,key:"MatchPlayersBst",IProto:he.MatchPlayersBst}]),{errCodeConvert:pn}=(ln(he.ClientSendServerReqWrap1,"cmd","body",[{value:void 0,key:"ClientSendServerReqWrap2",IProto:he.ClientSendServerReqWrap2}]),ln(he.ServerSendClientBstWrap1,"cmd","body",[{value:void 0,key:"ServerSendClientBstWrap2",IProto:hn}]),s),Rn=new Map,mn=new Map,yn=new Map,Sn=he.ClientSendServerReqWrap1,gn=he.ClientSendServerReqWrap2,Cn=he.ClientSendServerRspWrap1,On=he.ClientSendServerRspWrap2,In=he.ServerSendClientBstWrap1,Tn=he.ServerSendClientBstWrap2;var An;Rn.set(De.E_CMD_LOGIN_REQ,he.LoginReq),mn.set(De.E_CMD_LOGIN_REQ,he.LoginRsp),Rn.set(De.E_CMD_LOGOUT_REQ,he.LogoutReq),mn.set(De.E_CMD_LOGOUT_REQ,he.LogoutRsp),Rn.set(De.E_CMD_CHANGE_PLAYER_STATE_REQ,he.ChangeCustomPlayerStatusReq),mn.set(De.E_CMD_CHANGE_PLAYER_STATE_REQ,he.ChangeCustomPlayerStatusRsp),Rn.set(De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,he.SendToGameSvrReq),mn.set(De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,he.SendToGameSvrRsp),Rn.set(De.E_CMD_RELAY_SEND_FRAME_REQ,he.SendFrameReq),mn.set(De.E_CMD_RELAY_SEND_FRAME_REQ,he.SendFrameRsp),Rn.set(De.E_CMD_ROOM_CHAT_REQ,he.SendToClientReq),mn.set(De.E_CMD_ROOM_CHAT_REQ,he.SendToClientRsp),Rn.set(De.E_CMD_CHECK_LOGIN_REQ,he.CheckLoginReq),mn.set(De.E_CMD_CHECK_LOGIN_REQ,he.CheckLoginRsp),Rn.set(De.E_CMD_RELAY_REQUEST_FRAME_REQ,he.RequestFrameReq),mn.set(De.E_CMD_RELAY_REQUEST_FRAME_REQ,he.RequestFrameRsp),Rn.set(De.E_CMD_START_FRAME_SYNC_REQ,he.StartFrameSyncReq),mn.set(De.E_CMD_START_FRAME_SYNC_REQ,he.StartFrameSyncRsp),Rn.set(De.E_CMD_STOP_FRAME_SYNC_REQ,he.StopFrameSyncReq),mn.set(De.E_CMD_STOP_FRAME_SYNC_REQ,he.StopFrameSyncRsp),Rn.set(De.E_CMD_CREATE_ROOM_REQ,he.CreateRoomReq),mn.set(De.E_CMD_CREATE_ROOM_REQ,he.CreateRoomRsp),Rn.set(De.E_CMD_JOIN_ROOM_REQ,he.JoinRoomReq),mn.set(De.E_CMD_JOIN_ROOM_REQ,he.JoinRoomRsp),Rn.set(De.E_CMD_QUIT_ROOM_REQ,he.LeaveRoomReq),mn.set(De.E_CMD_QUIT_ROOM_REQ,he.LeaveRoomRsp),Rn.set(De.E_CMD_DISSMISS_ROOM_REQ,he.DismissRoomReq),mn.set(De.E_CMD_DISSMISS_ROOM_REQ,he.DismissRoomRsp),Rn.set(De.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,he.ChangeRoomReq),mn.set(De.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,he.ChangeRoomRsp),Rn.set(De.E_CMD_REMOVE_MEMBER_REQ,he.RemovePlayerReq),mn.set(De.E_CMD_REMOVE_MEMBER_REQ,he.RemovePlayerRsp),Rn.set(De.E_CMD_GET_ROOM_DETAIL_REQ,he.GetRoomByRoomIdReq),mn.set(De.E_CMD_GET_ROOM_DETAIL_REQ,he.GetRoomByRoomIdRsp),Rn.set(De.E_CMD_GET_ROOM_LIST_REQ,he.GetRoomListReq),mn.set(De.E_CMD_GET_ROOM_LIST_REQ,he.GetRoomListRsp),Rn.set(De.E_CMD_GET_ROOM_LIST_V2_REQ,he.GetRoomListReq),mn.set(De.E_CMD_GET_ROOM_LIST_V2_REQ,he.GetRoomListRsp),Rn.set(De.E_CMD_HEART_BEAT_REQ,he.HeartBeatReq),mn.set(De.E_CMD_HEART_BEAT_REQ,he.HeartBeatRsp),Rn.set(De.E_CMD_MATCH_PLAYER_COMPLEX_REQ,he.MatchPlayersReq),mn.set(De.E_CMD_MATCH_PLAYER_COMPLEX_REQ,he.MatchPlayersRsp),Rn.set(De.E_CMD_MATCH_GROUP_REQ,he.MatchGroupReq),mn.set(De.E_CMD_MATCH_GROUP_REQ,he.MatchGroupRsp),Rn.set(De.E_CMD_MATCH_ROOM_SIMPLE_REQ,he.MatchRoomSimpleReq),mn.set(De.E_CMD_MATCH_ROOM_SIMPLE_REQ,he.MatchRoomSimpleRsp),Rn.set(De.E_CMD_MATCH_CANCEL_MATCH_REQ,he.CancelPlayerMatchReq),mn.set(De.E_CMD_MATCH_CANCEL_MATCH_REQ,he.CancelPlayerMatchRsp),yn.set(Fe.E_PUSH_TYPE_GAMESVR,he.RecvFromGameSvrBst),yn.set(Fe.E_PUSH_TYPE_ROOM_CHAT,he.RecvFromClientBst),yn.set(Fe.E_PUSH_TYPE_START_GAME,he.StartFrameSyncBst),yn.set(Fe.E_PUSH_TYPE_STOP_GAME,he.StopFrameSyncBst),yn.set(Fe.E_PUSH_TYPE_RELAY,he.RecvFrameBst),yn.set(Fe.E_PUSH_TYPE_JOIN_ROOM,he.JoinRoomBst),yn.set(Fe.E_PUSH_TYPE_LEAVE_ROOM,he.LeaveRoomBst),yn.set(Fe.E_PUSH_TYPE_DISMISS_ROOM,he.DismissRoomBst),yn.set(Fe.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,he.ChangeRoomBst),yn.set(Fe.E_PUSH_TYPE_REMOVE_PLAYER,he.RemovePlayerBst),yn.set(Fe.E_PUSH_TYPE_PLAYER_STATE,he.ChangeCustomPlayerStatusBst),yn.set(Fe.E_PUSH_TYPE_NETWORK_STATE,he.ChangePlayerNetworkStateBst),yn.set(Fe.E_PUSH_TYPE_MATCH_TIMEOUT,he.MatchTimeoutBst),yn.set(Fe.E_PUSH_TYPE_MATCH_SUCCESS,he.MatchPlayersBst),yn.set(Fe.E_PUSH_TYPE_MATCH_CANCEL,he.CancelMatchBst),function(e){e.initSdk="e1",e.request="e2",e.ping="e3",e.recFrame="e4",e.frameRate="e5"}(An||(An={}));const vn={onPingTime:e=>null,onFitFrameTime:e=>null,onBstFrameRate:e=>null,onRenderFrameRate:e=>null};var Mn={get id(){return Pe.getInfo().id},get openId(){return Me.openId},get name(){return Pe.getInfo().name},get teamId(){return Pe.getInfo().teamId},get customPlayerStatus(){return Pe.getInfo().customPlayerStatus},get customProfile(){return Pe.getInfo().customProfile},get commonNetworkState(){return Pe.getInfo().commonNetworkState},get relayNetworkState(){return Pe.getInfo().relayNetworkState}};function Nn(e){return(1e6*Date.now()+Math.floor(1e6*Math.random())).toString(e)||""}function Pn(){wn.conf.getLocation&&ke.getLocation({type:wn.conf.locationType||"wgs84",success(e){ke.setStorageSync(wn.prefix+wn.lt,JSON.stringify(e))}})}function Ln(){wn.conf.getUserInfo&&ke.getUserInfo({withCredentials:!1,success(e){const t=e.userInfo;t.nickName=encodeURIComponent(t.nickName),ke.setStorageSync(wn.prefix+wn.ui,JSON.stringify(t))},fail(e){}})}function bn(e,t,n,r,o){(!t||void 0===t||0>=t)&&(t=(new Date).getTime());const i=[{type:2,data:{id:Nn(32),start:t,status:e,duration:n||0,events:r||[]}}],s=ke.getSystemInfoSync(),a={deviceId:function(){let e=ke.getStorageSync(wn.prefix+wn.u);return e||(e=Nn(36),ke.setStorageSync(wn.prefix+wn.u,e)),e}(),appkey:wn.conf.appKey,versionCode:wn.conf.version,initTime:t,channelID:wn.conf.channelId,sdkVersion:wn.sdkVersion,pixel:s.screenWidth+"*"+s.screenHeight+"*"+s.pixelRatio,language:s.language,model:encodeURIComponent(s.model),wxVersion:s.version,networkType:ke.getStorageSync(wn.prefix+wn.nt)||"4g",system:encodeURIComponent(s.system),platform:encodeURIComponent(s.platform),windowArea:s.windowWidth+"*"+s.windowHeight+"*"+s.pixelRatio,opid:wn.opid,unid:wn.unid,userInfo:wn.conf.getUserInfo&&ke.getStorageSync(wn.prefix+wn.ui)||"",location:wn.conf.getLocation&&ke.getStorageSync(wn.prefix+wn.lt)||"",msgs:i};ke.request({url:wn.serverUrl,data:a,method:"POST",success:()=>o&&o(!0),fail:()=>o&&o(!1)})}const wn={serverUrl:null,opid:null,unid:null,conf:{appKey:"MA0NCELB39H5S6",version:"1.0.0",channelId:"",getLocation:!1,getUserInfo:!1,isDebug:!1,locationType:void 0},prefix:"beacon_",sdkVersion:"weapp_v1.0.7",u:"u",ui:"ui",lt:"lt",nt:"nt",oik:"oik",uik:"uik",atl:0,ats:0,ptl:0,pts:0,init(){var e;wn.conf.appKey&&void 0!==wn.conf.appKey&&wn.conf.appKey.length>0&&wn.conf.version&&void 0!==wn.conf.version&&wn.conf.version.length>0&&(wn.serverUrl="https://"+(wn.conf.isDebug?"jrlts":"report")+".wxlagame.com/analytics/upload?tp=weapp",Pn(),Ln(),ke.getNetworkType({success(e){ke.setStorageSync(wn.prefix+wn.nt,e.networkType)}}),wn.opid=ke.getStorageSync(wn.prefix+wn.oik),wn.unid=ke.getStorageSync(wn.prefix+wn.uik),this.atl=(new Date).getTime(),(!(e=this.atl)||void 0===e||0>=e)&&(e=(new Date).getTime()),bn(1,e,0,[]))},onEvent(e,t,n){const r=(new Date).getTime();bn(4,r,0,[{count:1,start:r,name:e,params:t||{}}],n)},onEvents(e,t){const n=(new Date).getTime(),r=[];e.forEach(e=>{r.push({count:1,start:n,name:e.eventName,params:e.param||{}})}),r.length>0&&bn(4,n,0,r,t)},setAppKey(e){wn.conf.appKey=e},setChannelId(e){wn.conf.channelId=e},setOpenid(e){e&&e.length>0&&(wn.opid=e,ke.setStorageSync(wn.prefix+wn.oik,e))},setUnionid(e){e&&e.length>0&&(wn.unid=e,ke.setStorageSync(wn.prefix+wn.uik,e))},setGetLocation(e){wn.conf.getLocation=!0===e,!0===e&&Pn()},setGetUserInfo(e){wn.conf.getUserInfo=!0===e,!0===e&&Ln()}},Dn=n(2);let Fn=!1,Yn=[],Un=1e4;function kn(e){Fn&&xn({sdFt:e},An.recFrame)}function xn(e,t){e.sv=Dn.version||"",e.pi=Mn.id||"",e.gi=Me.gameId||"",e.sc=xe||0,Yn.push({eventName:t,param:e})}function Bn(e,t=!1,n){(t||Le.isInited())&&wn.onEvents(e,()=>null)}setInterval(()=>{Fn&&0!==Yn.length&&(Bn(Yn),Yn=[])},Un);const Hn={lastTime:0,frameRate:0,callback:e=>null,run:e=>{Hn.callback&&Hn.callback(e),"function"==typeof requestAnimationFrame&&requestAnimationFrame(Hn.run)}};Hn.callback=(e=>{if(0===Hn.lastTime)return void(Hn.lastTime=e);const t=e,n=t-Hn.lastTime,r=Math.round(1e3/(n+1e-6));Hn.frameRate=r,Hn.lastTime=t,vn.onRenderFrameRate&&vn.onRenderFrameRate(n)}),Hn.run(0);const Gn=Math.pow(2,12);function qn(e){let t=!1;return[Se.EC_ACCESS_CMD_GET_TOKEN_ERR,Se.EC_ACCESS_CMD_TOKEN_PRE_EXPIRE,Se.EC_ACCESS_CMD_INVALID_TOKEN,Se.EC_ACCESS_GET_COMM_CONNECT_ERR].includes(e)&&(t=!0),t}function Vn(e){let t=!1;return[Se.EC_ACCESS_GET_RELAY_CONNECT_ERR].includes(e)&&(t=!0),t}var Qn,Kn=class extends cn{constructor(e){super(),this.responses=e}sendRequest(e,t,n,r,o,i=""){if(!i){i=Ze();const s={time:Date.now(),isSocketSend:!1,cmd:t,response:e=>{n(!0,e,r),this.deleteSeqQueue(i)},resend:()=>this.sendRequest(e,t,n,r,o,i),sendSuccess(){this.isSocketSend=!0},sendFail:(e,t="")=>{n(!1,{RspWrap1:{seq:i,body:null,errCode:e,errMsg:`\u6d88\u606f\u53d1\u9001\u5931\u8d25\uff0c${t} [${e}]`},RspWrap2:null,body:null},r),this.deleteSeqQueue(i)},remove:()=>this.deleteSeqQueue(i)};this.addSeqQueue(i,s)}const s=function(e,t,n){const r=t.cmd,o=Rn.get(r);if(!o||!o.bufferify)throw new Error("\u627e\u4e0d\u5230\u8be5 cmd \u7f16\u7801\u65b9\u6cd5: "+r);const i=o.bufferify(n),s=gn.bufferify(Object.assign({},t,{body:i}));return Sn.bufferify(Object.assign({},e,{body:s}))}(Object.assign({},Ae,{cmd:o,seq:i,body:null}),{cmd:t,body:null},e);if(s.length>Gn){const e=cn.sendQueue.get(i);return setTimeout(()=>e&&e.sendFail(Se.EC_SDK_SEND_FAIL,"\u6570\u636e\u957f\u5ea6\u8d85\u9650"),0),i}const a=this.buildData(s);return this.send(a,i,t)}buildData(e){const t=new Uint8Array(1),n=new Uint8Array(1);return t[0]=sn.CLIENT_PRE,n[0]=sn.CLIENT_END,super.buildData(t,e,n)}handleMessage(e){let t=null;const n=function(e,t){const n=Cn.objectify(e),r=On.objectify(n.body),o=t(n.seq);if(!o)return null;let i=null;const s=mn.get(o);if(!s||!s.objectify)return console.error("\u627e\u4e0d\u5230\u8be5 cmd \u89e3\u7801\u65b9\u6cd5: "+o),{RspWrap1:n,RspWrap2:r,body:i};r.body&&(i=s.objectify(r.body));const{errCode:a,errMsg:c}=pn(n.errCode,n.errMsg);return n.errMsg=c,n.errCode=a,n.body=null,r.body=null,{RspWrap1:n,RspWrap2:r,body:i}}(e,e=>{if(t=cn.sendQueue.get(e))return t.cmd});var r;if(t&&(r={rqCmd:t.cmd,rqSq:n.RspWrap1.seq,rqCd:n.RspWrap1.errCode,time:Date.now()-t.time},Fn&&xn(r,An.request),t.cmd===De.E_CMD_HEART_BEAT_REQ||!this.handleErrCode(n.RspWrap1)))return t.response(n)}handleResponse(e){return this.handleMessage(e)}handleErrCode(e){return qn(e.errCode)?(this.handleTokenErr(),Ke.log("TOKEN_ERROR",e),!0):Vn(e.errCode)&&this.socket.id===r.ConnectionType.RELAY?(this.handleRelayConnectErr(),Ke.log("RELAY_CONNECT_ERROR",e),!0):(e.errCode!==Se.EC_OK&&this.responses.error({code:e.errCode,msg:e.errMsg,seq:e.seq}),!1)}handleSuccess(e,t){e===Se.EC_OK&&t()}handleTokenErr(){be.setStatus(be.StatusType.LOGOUT),this.socket.emit(en.autoAuth,{})}handleRelayConnectErr(){we.setStatus(we.StatusType.OFFLINE),this.socket.emit(en.autoAuth,{})}},Wn=class extends cn{constructor(){super()}buildData(e){const t=new Uint8Array(1),n=new Uint8Array(1);return t[0]=sn.SERVER_PRE,n[0]=sn.SERVER_END,super.buildData(t,e,n)}handleMessage(e){const t=function(e){const t=In.objectify(e),n=Tn.objectify(t.body);let r=null;const o=yn.get(n.type);return o&&o.objectify?(n.msg&&(r=o.objectify(n.msg)),t.body=null,n.msg=null,{BstWrap1:t,BstWrap2:n,body:r}):(console.error("\u627e\u4e0d\u5230\u8be5 cmd \u89e3\u7801\u65b9\u6cd5: "+n.type),{BstWrap1:t,BstWrap2:n,body:r})}(e),n=cn.broadcastHandlers.get(t.BstWrap2.type);n&&n(t.body,t.BstWrap1.seq)}handleBroadcast(e){return this.handleMessage(e)}};!function(e){e.comm="comm_cmd",e.relay="relay_cmd"}(Qn||(Qn={}));const jn=[r.ClientSendServerReqWrap2Cmd.E_CMD_CREATE_ROOM_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_JOIN_ROOM_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_QUIT_ROOM_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_DISSMISS_ROOM_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_REMOVE_MEMBER_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_CHANGE_PLAYER_STATE_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_START_FRAME_SYNC_REQ,r.ClientSendServerReqWrap2Cmd.E_CMD_STOP_FRAME_SYNC_REQ];class Jn{constructor(e){this.client=new Kn(e),this.server=new Wn,this.responses=e}static startQueueLoop(){Jn.checkLoginQueue=[],Jn.roomQueue=[],cn.startQueueLoop()}static stopQueueLoop(){Jn.checkLoginQueue=[],Jn.roomQueue=[],cn.stopQueueLoop()}bindSocket(e){const t=this.client.handleResponse.bind(this.client),n=this.server.handleBroadcast.bind(this.server);this.client.bindSocket(e,t,n),this.server.bindSocket(e,t,n)}unbindSocket(){this.client.unbindSocket(),this.server.unbindSocket()}setBroadcastHandler(e,t){this.server.setBroadcastHandler(e,t)}send(e,t,n,o){let i=Qn.comm;this.client.socket.id===r.ConnectionType.RELAY&&(i=Qn.relay);const s={body:e,subcmd:t,response:n,callback:o,requestCmd:i,running:!1};let a=null;return t===r.ClientSendServerReqWrap2Cmd.E_CMD_CHECK_LOGIN_REQ&&(a=Jn.checkLoginQueue,s.beforeRequest=(()=>{we.setStatus(we.StatusType.CHECKING)}),s.afterRequest=(e=>{Ke.log("CHECKLOGIN",e)})),jn.includes(t)&&(a=Jn.roomQueue),a?this.pushQueue(s,a):this.sendRequest(s)}pushQueue(e,t){const n=e.callback;return e.callback=((r,o,i,s)=>{n&&n(r,o,i,s),e.running=!1,t.shift(),this.sendQueue(t)}),t.push(e),this.sendQueue(t)}sendQueue(e){if(!Array.isArray(e)||0===e.length||e[0].running)return"NO_SEQ";const t=e[0];return this.sendRequest(t)}sendRequest(e){e.running=!0,e.beforeRequest&&e.beforeRequest();const t=this.client.sendRequest(e.body,e.subcmd,e.response,e.callback,e.requestCmd);return e.afterRequest&&e.afterRequest(t),t}}Jn.checkLoginQueue=[],Jn.roomQueue=[];var Xn=Jn,zn=class extends Xn{constructor(e){super(e),this.matchTimeoutBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_TIMEOUT,this.matchUsersBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_SUCCESS,this.cancelMatchBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_CANCEL,this.setBroadcastHandler(this.matchTimeoutBroadcastType,this.matchUsersTimeoutBroadcast.bind(this)),this.setBroadcastHandler(this.matchUsersBroadcastType,this.matchUsersBroadcast.bind(this)),this.setBroadcastHandler(this.cancelMatchBroadcastType,this.cancelMatchBroadcast.bind(this))}matchUsersComplex(e,t){const n=De.E_CMD_MATCH_PLAYER_COMPLEX_REQ,r=this.send(e,n,this.matchUsersComplexResponse.bind(this),t);return Ke.log("MATCH_USERS_COMPLEX_Para",e,r),r}matchGroup(e,t){const n=De.E_CMD_MATCH_GROUP_REQ,r=this.send(e,n,this.matchGroupResponse.bind(this),t);return Ke.log("MATCH_GROUP_Para",e,r),r}matchRoom(e,t){const n=De.E_CMD_MATCH_ROOM_SIMPLE_REQ,r=this.send(e,n,this.matchRoomResponse.bind(this),t);return Ke.log("MATCH_ROOM_Para",e,r),r}cancelMatch(e,t){const n=De.E_CMD_MATCH_CANCEL_MATCH_REQ,r=this.send(e,n,this.cancelMatchResponse.bind(this),t);return Ke.log("CANCEL_MATCH_Para",e,r),r}matchUsersComplexResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.matchPlayersRsp(o)}matchGroupResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.matchGroupRsp(o)}matchRoomResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.matchRoomSimpleRsp(o)}cancelMatchResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.cancelPlayerMatchRsp(o)}matchUsersTimeoutBroadcast(e,t){const n={data:e,seq:t};return this.responses.onMatchTimeout(n)}matchUsersBroadcast(e,t){const n={data:e,seq:t};return this.responses.onMatchPlayers(n)}cancelMatchBroadcast(e,t){const n={data:e,seq:t};return this.responses.onCancelMatch(n)}},Zn=class extends Xn{constructor(e){super(e),this.joinRoomBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_JOIN_ROOM,this.leaveRoomBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_LEAVE_ROOM,this.dismissRoomBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_DISMISS_ROOM,this.changeRoomBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,this.removeUserBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_REMOVE_PLAYER,this.changeUserStateBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_PLAYER_STATE,this.roomUserNetworkBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_NETWORK_STATE,this.testBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_TEST,this.setBroadcastHandler(this.joinRoomBroadcastType,this.onJoinRoom.bind(this)),this.setBroadcastHandler(this.leaveRoomBroadcastType,this.onLeaveRoom.bind(this)),this.setBroadcastHandler(this.dismissRoomBroadcastType,this.onDismissRoom.bind(this)),this.setBroadcastHandler(this.changeRoomBroadcastType,this.onChangeRoom.bind(this)),this.setBroadcastHandler(this.removeUserBroadcastType,this.onRemoveUser.bind(this)),this.setBroadcastHandler(this.changeUserStateBroadcastType,this.onChangeUserState.bind(this)),this.setBroadcastHandler(this.roomUserNetworkBroadcastType,this.onChangePlayerNetworkState.bind(this)),this.setBroadcastHandler(this.testBroadcastType,this.testBroadcast.bind(this))}createRoom(e,t){const n=De.E_CMD_CREATE_ROOM_REQ,r=this.send(e,n,this.createRoomResponse.bind(this),t);return Ke.log("CREATE_ROOM_Para",e,r),r}joinRoom(e,t){const n=De.E_CMD_JOIN_ROOM_REQ,r=this.send(e,n,this.joinRoomResponse.bind(this),t);return Ke.log("JOIN_ROOM_Para",e,r),r}leaveRoom(e,t){const n=De.E_CMD_QUIT_ROOM_REQ,r=this.send(e,n,this.leaveRoomResponse.bind(this),t);return Ke.log("LEAVE_ROOM_Para",e,r),r}dismissRoom(e,t){const n=De.E_CMD_DISSMISS_ROOM_REQ,r=this.send(e,n,this.dismissRoomResponse.bind(this),t);return Ke.log("DISMISS_ROOM_Para",e,r),r}changeRoom(e,t){const n=De.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,r=this.send(e,n,this.changeRoomResponse.bind(this),t);return Ke.log("CHANGE_ROOM_Para",e,r),r}removeUser(e,t){const n=De.E_CMD_REMOVE_MEMBER_REQ,r=this.send(e,n,this.removeUserResponse.bind(this),t);return Ke.log("REMOVE_USER_Para",e,r),r}getRoomByRoomId(e,t){const n=De.E_CMD_GET_ROOM_DETAIL_REQ,r=this.send(e,n,this.getRoomByRoomIdRsp().bind(this),t);return Ke.log("GET_ROOM_BY_ROOM_ID_Para",e,r),r}getRoomList(e,t){const n=De.E_CMD_GET_ROOM_LIST_V2_REQ,r=this.send(e,n,this.getRoomListResponse.bind(this),t);return Ke.log("GET_ROOM_LIST_Para",e,r),r}createRoomResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.createRoomRsp(o)}joinRoomResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.joinRoomRsp(o)}leaveRoomResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.leaveRoomRsp(o)}dismissRoomResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.dismissRoomRsp(o)}changeRoomResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.changeRoomRsp(o)}removeUserResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.removePlayerRsp(o)}getRoomByRoomIdRsp(){return(e,t,n)=>{const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};n&&n(o),this.responses.getRoomByRoomIdRsp(o)}}getRoomListResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.getRoomListRsp(o)}testBroadcast(e,t){const n={data:e,seq:t};Ke.log("test \u5e7f\u64ad",n)}onJoinRoom(e,t){const n={data:e,seq:t};return this.responses.onJoinRoom(n)}onLeaveRoom(e,t){const n={data:e,seq:t};return this.responses.onLeaveRoom(n)}onDismissRoom(e,t){const n={data:e,seq:t};return this.responses.onDismissRoom(n)}onChangeRoom(e,t){const n={data:e,seq:t};return this.responses.onChangeRoom(n)}onRemoveUser(e,t){const n={data:e,seq:t};return this.responses.onRemovePlayer(n)}onChangeUserState(e,t){const n={data:e,seq:t};return this.responses.onChangeCustomPlayerStatus(n)}onChangePlayerNetworkState(e,t){const n={data:e,seq:t};return this.responses.onChangePlayerNetworkState(n)}};const $n={lastFrameTime:0,deltaTime:0,trigger:()=>{const e=Date.now();0!==$n.lastFrameTime?($n.deltaTime=e-$n.lastFrameTime,vn.onBstFrameRate&&vn.onBstFrameRate($n.deltaTime),$n.lastFrameTime=e):$n.lastFrameTime=e},clear:()=>{$n.lastFrameTime=0}};var er=class{constructor(e){this.netUtil1=null,this.netUtil2=null,this.frameBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_RELAY,this.startGameBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_START_GAME,this.stopGameBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_STOP_GAME,this.sendMessageExtBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_GAMESVR,this.responses=e,this.netUtil1=new Xn(e),this.netUtil2=new Xn(e),this.netUtil1.setBroadcastHandler(this.startGameBroadcastType,this.onStartFrameSync.bind(this)),this.netUtil1.setBroadcastHandler(this.stopGameBroadcastType,this.onStopFrameSync.bind(this)),this.netUtil2.setBroadcastHandler(this.frameBroadcastType,this.onRecvFrame.bind(this)),this.netUtil2.setBroadcastHandler(this.sendMessageExtBroadcastType,this.onRecvFromGameSvr.bind(this))}setFrameRoom(e){Ke.log("SETFRAMEROOM",e);const t=this.getFrameRoom();this.roomInfo=e||{roomId:0,routeId:""};const n=t.routeId,r=this.roomInfo.routeId;return r?n!==r?(we.setStatus(we.StatusType.OFFLINE),this.autoCheckLogin()):n===r?this.autoCheckLogin():void 0:this.netUtil2.client.socket&&this.netUtil2.client.socket.close()}getFrameRoom(){return this.roomInfo||{id:0,routeId:""}}isRoomExist(){return!!this.roomInfo&&!!this.roomInfo.id}startFrameSync(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Se.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.startFrameSyncResponse(!1,e,t)}const n=De.E_CMD_START_FRAME_SYNC_REQ,r=this.netUtil1.send(e,n,this.startFrameSyncResponse.bind(this),t);return Ke.log("START_FRAMESYNC_Para",e,r),r}stopFrameSync(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Se.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.stopFrameSyncResponse(!1,e,t)}const n=De.E_CMD_STOP_FRAME_SYNC_REQ,r=this.netUtil1.send(e,n,this.stopFrameSyncResponse.bind(this),t);return Ke.log("STOP_FRAMESYNC_Para",e,r),r}sendFrame(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Se.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.sendFrameResponse(!1,e,t)}this.autoCheckLogin();const n=De.E_CMD_RELAY_SEND_FRAME_REQ,r=this.netUtil2.send(e,n,this.sendFrameResponse.bind(this),t);return Ke.log("SEND_FRAME_Para",e,r),r}requestFrame(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Se.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.requestFrameResponse(!1,e,t)}this.autoCheckLogin();const n=De.E_CMD_RELAY_REQUEST_FRAME_REQ,r=this.netUtil2.send(e,n,this.requestFrameResponse.bind(this),t);return Ke.log("REQUEST_FRAME_Para",e,r),r}checkLogin(e,t){if(!this.isRoomExist()){const t={RspWrap1:{seq:null,body:null,errCode:Se.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.checkLoginResponse(!1,t,e)}we.setStatus(we.StatusType.CHECKING);const n=De.E_CMD_CHECK_LOGIN_REQ,r={token:Ae.authKey,routeId:this.roomInfo.routeId},o=this.netUtil2.send(r,n,this.checkLoginResponse.bind(this),e);return Ke.log("CHECKLOGIN",o,t,r.routeId),we.setRouteId(r.routeId),o}sendMessageExt(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:Se.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.sendMessageExtResponse(!1,e,t)}this.autoCheckLogin();const n=De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,r=this.netUtil2.send(e,n,this.sendMessageExtResponse.bind(this),t);return Ke.log("SEND_TO_GAMESVR_Para",e,r),r}startFrameSyncResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.startFrameSyncRsp(o)}stopFrameSyncResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.stopFrameSyncRsp(o)}autoCheckLogin(){this.connect(),this.netUtil2.client.socket.isConnect()&&we.isOffline()&&this.netUtil2.client.socket.emit(en.autoAuth,{})}connect(){!this.netUtil2.client.socket.isConnect()&&this.roomInfo&&(this.netUtil2.client.socket.url=Ie.url+":"+(Ie.enableUDP?8585:5443),this.netUtil2.client.socket.connect("framesender connect"))}sendFrameResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.sendFrameRsp(o)}checkLoginResponse(e,t,n){we.setStatus(we.StatusType.OFFLINE);const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return o.code===Se.EC_OK&&we.setStatus(we.StatusType.CHECKED),Ke.log("RESPONSE_CheckLoginResponse",o),n&&n(o)}requestFrameResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.requestFrameRsp(o)}sendMessageExtResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.sendToGameSvrRsp(o)}onRecvFrame(e,t){const n={data:{frame:Object.assign({},e.frame,{roomId:this.getFrameRoom().id})},seq:t};var r;$n.trigger(),r=$n.deltaTime,Fn&&xn({frRt:Hn.frameRate,reFt:r},An.frameRate);for(const t of e.frame.items)t.playerId===Ae.playerId&&kn(Date.now()-t.timestamp);return this.responses.onRecvFrame(n)}onStartFrameSync(e,t){const n={data:Object.assign({},e),seq:t};return $n.clear(),this.responses.onStartFrameSync(n)}onStopFrameSync(e,t){const n={data:Object.assign({},e),seq:t};return this.netUtil2&&this.netUtil2.client.clearQueue(),$n.clear(),this.responses.onStopFrameSync(n)}onRecvFromGameSvr(e,t){let n={};try{n=JSON.parse(e.data)}catch(t){n=e.data}const r={data:Object.assign({},e,{data:n},{roomId:e.roomId}),seq:t};return this.responses.onRecvFromGameSvr(r)}},tr=class extends Xn{constructor(e){super(e),this.messageBroadcastType=r.ServerSendClientBstWrap2Type.E_PUSH_TYPE_ROOM_CHAT,this.setBroadcastHandler(this.messageBroadcastType,this.onRecvFromClient.bind(this))}sendMessage(e,t){const n=De.E_CMD_ROOM_CHAT_REQ,r=this.send(e,n,this.sendMessageResponse.bind(this),t);return Ke.log("SEND_MESSAGE_Para",e,r),r}sendMessageResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.sendToClientRsp(o)}onRecvFromClient(e,t){const n={data:e,seq:t};return this.responses.onRecvFromClient(n)}},nr=class extends Xn{constructor(e){super(e)}login(e,t,n,r){const o=De.E_CMD_LOGIN_REQ;let i,s,a;Array.from(this.client.queue).forEach(e=>{const t=cn.sendQueue.get(e);t&&t.cmd===o&&this.client.deleteSeqQueue(e)}),n?(i=n.timestamp,s=n.nonce,a=n.sign):(i=Math.floor(Date.now()/1e3),s=Math.floor(Math.random()*(Math.pow(2,32)-1)),a=function(e,t,n,r,o){const i=[["game_id",t],["open_id",n],["nonce",o],["timestamp",r]].sort().map(e=>e.join("=")).join("&"),s=je(i,e||"");return{sign:We.stringify(s)}}(t,e.gameId,e.openId,i,s).sign);const c=nt(),_=rt(),u=et,l={gameId:e.gameId,openId:e.openId,sign:a,timestamp:i,nonce:s,platform:c,channel:_,deviceId:u,mac:void 0,imei:void 0};be.setStatus(be.StatusType.LOGINING);const f=this.send(l,o,this.loginResponse.bind(this),r);return Ke.log("LOGIN_Para",l,f),be.setErrCode(0,""),f}logout(e,t){const n=De.E_CMD_LOGOUT_REQ,r=this.send(e,n,this.logoutResponse.bind(this),t);return Ke.log("LOGOUT_Para",e,r),be.setStatus(be.StatusType.LOGOUTING),r}changeUserState(e,t){const n=De.E_CMD_CHANGE_PLAYER_STATE_REQ,r=this.send(e,n,this.changeUserStateResponse.bind(this),t);return Ke.log("CHANGE_USER_STATE_Para",e,r),r}loginResponse(e,t,n){e||be.setStatus(be.StatusType.LOGOUT);const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};this.client.handleSuccess(o.code,()=>{Ae.authKey=t.body.token,Ae.playerId=t.body.playerId,be.setStatus(be.StatusType.LOGIN),!Pe.getInfo().id&&Pe.setInfo({id:o.data.playerId})}),be.setErrCode(o.code,o.msg),n&&n(o),Ke.log("RESPONSE_LoginResponse",o)}logoutResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq};return Ke.log("RESPONSE_LogoutResponse",o),this.client.handleSuccess(o.code,()=>{Ae.authKey=void 0,Ae.playerId=void 0,be.setStatus(be.StatusType.LOGOUT),Pe.setInfo({id:void 0})}),n&&n(o)}changeUserStateResponse(e,t,n){const r=t.RspWrap1,o={code:r.errCode,msg:r.errMsg,seq:r.seq,data:t.body};return n&&n(o),this.responses.changeCustomPlayerStatusRsp(o)}},rr=class extends Xn{constructor(e,t,n){super(e),this.pingTimer=new He,this.pongTimer=new He,this.currentSeq="",this.retry=2,this.id=t,this.frameSender=n}get timeout(){return this.id===r.ConnectionType.RELAY&&Ie.enableUDP?Ie.pingTimeout/2:Ie.pingTimeout}unbindSocket(){this.stop(),super.unbindSocket()}ping(e){if(qe(this.pingTimer),!Ae.authKey)return;const t=Date.now(),n=this.frameSender&&this.frameSender.roomInfo&&this.frameSender.roomInfo.routeId?this.frameSender.roomInfo.routeId:"",r={conType:this.id,routeId:n},o=this.send(r,De.E_CMD_HEART_BEAT_REQ,(e,n)=>this.handlePong(e,n,t),e);this.currentSeq=o,Ke.log("PING",this.id,o),Ge(this.pongTimer,()=>this.handlePongTimeout(o),this.timeout)}stop(){qe(this.pingTimer,this.pongTimer)}handlePong(e,t,n){if(Ke.log("Pong",this.id,t.RspWrap1,"send",e),qe(this.pongTimer),!e)return this.handlePongTimeout(t.RspWrap1.seq);this.retry=2,this.client.clearQueue();const o=t.RspWrap1.errCode;var i;return this.id===r.ConnectionType.RELAY&&o===Se.EC_OK&&(i={time:Date.now()-n},Fn&&(vn.onPingTime&&vn.onPingTime(i.time),xn(i,An.ping))),qn(o)?(be.setStatus(be.StatusType.LOGOUT),this.client.socket.emit(en.autoAuth,{})):Vn(o)&&this.client.socket.id===r.ConnectionType.RELAY?(we.setStatus(we.StatusType.OFFLINE),this.client.socket.emit(en.autoAuth,{})):void Ge(this.pingTimer,this.ping.bind(this),this.timeout)}handlePongTimeout(e){if(this.client.deleteSeqQueue(e),this.retry--,e===this.currentSeq&&this.client.socket){if(this.id===r.ConnectionType.RELAY&&Ie.enableUDP){if(this.retry>=0)return Ge(this.pingTimer,this.ping.bind(this),this.timeout);this.retry=2}this.client.socket.connectNewSocket(this.client.socket.url),this.client.clearQueue(),Ke.log("Pong_Timeout",this.id)}}};const or=(e,t)=>n=>{"error"!==n&&Ke.log(n,e);const r=Array.from(t.values());for(const t of r)t&&t[n]&&t[n].call(t,e)};class ir{constructor(){this.context=null,ir.instance=this,this.context=new Set}static bindResponses(e){ir.instance.context.add(e)}static unbindResponses(e){ir.instance.context.delete(e)}static clearResponses(){ir.instance.context.clear()}onNetwork(e){or(e,ir.instance.context)("onNetwork")}createRoomRsp(e){or(e,ir.instance.context)("createRoomRsp")}joinRoomRsp(e){or(e,ir.instance.context)("joinRoomRsp")}onJoinRoom(e){or(e,ir.instance.context)("onJoinRoom")}leaveRoomRsp(e){or(e,ir.instance.context)("leaveRoomRsp")}onLeaveRoom(e){or(e,ir.instance.context)("onLeaveRoom")}dismissRoomRsp(e){or(e,ir.instance.context)("dismissRoomRsp")}onDismissRoom(e){or(e,ir.instance.context)("onDismissRoom")}changeRoomRsp(e){or(e,ir.instance.context)("changeRoomRsp")}onChangeRoom(e){or(e,ir.instance.context)("onChangeRoom")}removePlayerRsp(e){or(e,ir.instance.context)("removePlayerRsp")}onRemovePlayer(e){or(e,ir.instance.context)("onRemovePlayer")}getRoomByRoomIdRsp(e){or(e,ir.instance.context)("getRoomByRoomIdRsp")}getRoomListRsp(e){or(e,ir.instance.context)("getRoomListRsp")}matchPlayersSimpleRsp(e){or(e,ir.instance.context)("matchPlayersSimpleRsp")}matchPlayersRsp(e){or(e,ir.instance.context)("matchPlayersRsp")}matchGroupRsp(e){or(e,ir.instance.context)("matchGroupRsp")}matchRoomSimpleRsp(e){or(e,ir.instance.context)("matchRoomSimpleRsp")}onMatchTimeout(e){or(e,ir.instance.context)("onMatchTimeout")}onMatchPlayers(e){or(e,ir.instance.context)("onMatchPlayers")}cancelPlayerMatchRsp(e){or(e,ir.instance.context)("cancelPlayerMatchRsp")}onCancelMatch(e){or(e,ir.instance.context)("onCancelMatch")}startFrameSyncRsp(e){or(e,ir.instance.context)("startFrameSyncRsp")}stopFrameSyncRsp(e){or(e,ir.instance.context)("stopFrameSyncRsp")}sendFrameRsp(e){or(e,ir.instance.context)("sendFrameRsp")}sendToClientRsp(e){or(e,ir.instance.context)("sendToClientRsp")}onRecvFromClient(e){or(e,ir.instance.context)("onRecvFromClient")}onRecvFromGameSvr(e){or(e,ir.instance.context)("onRecvFromGameSvr")}onChangePlayerNetworkState(e){or(e,ir.instance.context)("onChangePlayerNetworkState")}onRecvFrame(e){or(e,ir.instance.context)("onRecvFrame")}requestFrameRsp(e){or(e,ir.instance.context)("requestFrameRsp")}sendToGameSvrRsp(e){or(e,ir.instance.context)("sendToGameSvrRsp")}changeCustomPlayerStatusRsp(e){or(e,ir.instance.context)("changeCustomPlayerStatusRsp")}onChangeCustomPlayerStatus(e){or(e,ir.instance.context)("onChangeCustomPlayerStatus")}onStartFrameSync(e){or(e,ir.instance.context)("onStartFrameSync")}onStopFrameSync(e){or(e,ir.instance.context)("onStopFrameSync")}error(e){or(e,ir.instance.context)("error")}}let sr;ir.instance=null;let ar,cr=null,_r=null,ur=null,lr=null,fr=null,Er=null,dr=null;function hr(){mr.instance.clearResponses(),sr&&sr.destory(),ar&&ar.destory(),((...e)=>{e.forEach(e=>e&&e.unbindSocket())})(ur,lr,fr,Er,dr.netUtil1,dr.netUtil2,cr,_r),ke.offHide(mr.instance.onHide),ke.offShow(mr.instance.onShow),Le.setStatus(Le.StatusType.UNINIT),be.setStatus(be.StatusType.LOGOUT)}const pr={login(e){const t=Object.assign({},Me),n=t=>{e&&e(t),pr.loginRsp(t)};return Me.createSignature?ur&&Me.createSignature(e=>ur.login(t,void 0,e,n)):ur&&ur.login(t,Me.secretKey,null,n)},loginRsp(e){if(Le.isIniting()){if(e.code!==Se.EC_OK)return Rr(!1,{code:e.code});let t=5e3,n=1e4,r=!1,o=0;return e.data.sdkConfig&&(e.data.sdkConfig.pingInterval&&(t=e.data.sdkConfig.pingInterval),e.data.sdkConfig.reportInterval&&(n=e.data.sdkConfig.reportInterval),e.data.sdkConfig.serverTime&&(o=e.data.sdkConfig.serverTime),e.data.sdkConfig.enableUdp&&(r=e.data.sdkConfig.enableUdp)),function(e,t,n,r){Ke.log("EventUploader","validate"),function(e,t,n=1e4){Un=n,wn.init(),wn.setOpenid(e||""),Fn=!0}(e,0,n);const o={eventName:An.initSdk,param:{}},i={};i.sv=Dn.version||"",i.pi=t||"",i.gi=Me.gameId||"",i.sc=xe||0,o.param=i,Bn([o],!0)}(Me.openId,Ae.playerId,n),Ie.pingTimeout=t,Ie.enableUDP=!!r,Rr(!0,{code:Se.EC_OK,data:{serverTime:o}}),cr.ping()}e.code===Se.EC_OK&&cr.ping()},logout:()=>ur&&ur.logout({},pr.logoutRsp),logoutRsp(e){e.code===Se.EC_OK&&cr.stop()}};function Rr(e,t){if(Le.isIniting()){e&&Le.setStatus(Le.StatusType.INITED),!e&&Le.setStatus(Le.StatusType.UNINIT);let n=Le.isInited()?Se.EC_OK:Se.EC_SDK_UNINIT;!e&&t&&t.code!==Se.EC_OK&&(n=t.code);const r={default:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u6b63\u786e\u914d\u7f6e\uff0c\u4ee5\u53ca\u7f51\u7edc\u662f\u5426\u987a\u7545\u3002",[Se.EC_ACCESS_PLAYER_DUPLICATE_LOGIN]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7528\u6237\u5df2\u5728\u5176\u4ed6\u5ba2\u6237\u7aef\u767b\u5f55\u3002",[Se.EC_INVALID_PARAMS_TIMESTAMP]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u8bf7\u68c0\u67e5\u672c\u5730\u65f6\u95f4\u662f\u5426\u6b63\u5e38\u3002",[Se.EC_INVALID_PARAMS_SIGN]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7b7e\u540d\u6821\u9a8c\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u521d\u59cb\u5316\u53c2\u6570\u662f\u5426\u6b63\u786e\u3002",[Se.EC_INVALID_PARAMS_GAME_ID]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u8bf7\u68c0\u67e5 gameId \u662f\u5426\u6b63\u786e\u3002",[Se.EC_SDK_SEND_FAIL]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u6d88\u606f\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u662f\u5426\u6b63\u5e38\u3002",[Se.EC_SDK_RES_TIMEOUT]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u6d88\u606f\u54cd\u5e94\u8d85\u65f6\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5\u3002",[Se.EC_SDK_SOCKET_ERROR]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7f51\u7edc\u5f02\u5e38\u3002"+(t.errMsg||""),[Se.EC_SDK_SOCKET_CLOSE]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7f51\u7edc\u5df2\u65ad\u5f00\u3002"},o=Le.isInited()?"\u521d\u59cb\u5316\u6210\u529f":r[n]||r.default,i=t.data&&t.data.serverTime||void 0;mr.instance.initRsp&&mr.instance.initRsp({code:n,msg:o,seq:null,data:{serverTime:i}})}}class mr{constructor(e,t){if(this.ErrCode=mr.ErrCode,this.ENUM=mr.ENUM,mr.instance instanceof mr)return mr.instance;mr.instance=this,!e.openId&&(e.openId=""),e.openId=e.openId+"",Object.assign(Me,e),Object.assign(Ie,t,{pingTimeout:Ie.pingTimeout}),Ae.gameId=Me.gameId,Ke.log("CONSTRUCTOR",e,t)}bindResponses(e){ir.bindResponses(e)}unbindResponses(e){ir.unbindResponses(e)}clearResponses(){ir.clearResponses()}onHide(){be.setStatus(be.StatusType.LOGOUT),we.setStatus(we.StatusType.OFFLINE),cr&&cr.stop(),_r&&_r.stop(),_r.client.socket.id===r.ConnectionType.RELAY&&Ie.enableUDP&&_r.client.socket.close(),Ke.log("SDK_onHide")}onShow(){cr&&cr.stop(),_r&&_r.stop(),cr&&cr.client.socket.url&&cr.ping(),_r&&_r.client.socket.url&&_r.ping(),Ke.log("SDK_onShow",cr.client.socket.url,_r.client.socket.url)}getSocket(e){return e===r.ConnectionType.COMMON?sr:e===r.ConnectionType.RELAY?ar:void 0}init(e){this.initRsp=(t=>{e(t)}),function(){var e,t;Le.isUnInit()&&(ur&&hr(),Le.setStatus(Le.StatusType.INITING),ur=new nr(mr.responses),fr=new zn(mr.responses),Er=new tr(mr.responses),lr=new Zn(mr.responses),dr=new er(mr.responses),sr=new nn(r.ConnectionType.COMMON,!1),ar=new nn(r.ConnectionType.RELAY,!0),cr=new rr(mr.responses,r.ConnectionType.COMMON,null),_r=new rr(mr.responses,r.ConnectionType.RELAY,dr),e=[cr,ur,lr,fr,Er,dr.netUtil1],t=[_r,dr.netUtil2],e.forEach(e=>e.bindSocket(sr)),t.forEach(e=>e.bindSocket(ar)),Xn.stopQueueLoop(),Xn.startQueueLoop(),sr.url=Ie.url,sr.on(en.connect,()=>{be.isStatus(be.StatusType.LOGINING)||pr.login(),sr.url&&mr.responses.onNetwork({code:Se.EC_OK,data:{type:sr.id}})}),ar.on(en.connect,()=>{dr.checkLogin(null,"connect "+!!ar.isConnect()),ar.url&&mr.responses.onNetwork({code:Se.EC_OK,data:{type:ar.id}}),_r.ping()}),sr.on(en.connectClose,()=>{Rr(!1,{code:Se.EC_SDK_SOCKET_CLOSE}),Le.isInited()&&(be.setStatus(be.StatusType.LOGOUT),sr.url&&mr.responses.onNetwork({code:Se.EC_SDK_SOCKET_CLOSE,msg:"Socket\u65ad\u5f00",seq:null}))}),ar.on(en.connectClose,()=>{Le.isInited()&&(we.setStatus(we.StatusType.OFFLINE),ar.url&&mr.responses.onNetwork({code:Se.EC_SDK_SOCKET_CLOSE,msg:"Socket\u65ad\u5f00",seq:null}),_r.stop())}),sr.on(en.connectError,e=>{Rr(!1,{code:Se.EC_SDK_SOCKET_ERROR,errMsg:JSON.stringify(e)}),Le.isInited()&&sr.url&&mr.responses.onNetwork({code:Se.EC_SDK_SOCKET_ERROR,msg:"Socket\u9519\u8bef",seq:null})}),ar.on(en.connectError,e=>{Le.isInited()&&ar.url&&mr.responses.onNetwork({code:Se.EC_SDK_SOCKET_ERROR,msg:"Socket\u9519\u8bef",seq:null})}),sr.on(en.autoAuth,()=>{Le.isInited()&&setTimeout(()=>{const e=be.isStatus(be.StatusType.LOGOUT);sr.url&&e&&pr.login()},1e3)}),ar.on(en.autoAuth,()=>{Le.isInited()&&ar.url&&setTimeout(()=>{be.isStatus(be.StatusType.LOGOUT)&&pr.login();const e=dr.roomInfo||{routeId:""};(we.isOffline()||we.getRouteId()!==e.routeId)&&dr.checkLogin(e=>{e.code===Se.EC_OK&&_r.ping()},"autoAuth")},1e3)}),sr.connect("init sdk"),ke.onHide(mr.instance.onHide),ke.onShow(mr.instance.onShow))}()}initRsp(e){return null}unInit(){Le.isUnInit()||(Xn.stopQueueLoop(),cr&&cr.stop(),_r&&_r.stop(),be.setStatus(be.StatusType.LOGOUT),we.setStatus(we.StatusType.OFFLINE),Pe.setInfo({id:void 0}),hr(),Object.assign(Me,JSON.parse(Ne)),Object.assign(Ie,JSON.parse(Te)),Object.assign(Ae,JSON.parse(ve)),mr.instance=null)}isInited(){return Le.isInited()}changeCustomPlayerStatus(e,t,n){const r=Object.assign({},e);return ur.changeUserState(r,n)}createRoom(e,t){return this.createTeamRoom(Object.assign({},e,{teamNumber:1}),t)}createTeamRoom(e,t){"object"!=typeof e&&(e={});const n=[];let r=(e=JSON.parse(JSON.stringify(e))).maxPlayers||0,o=e.teamNumber||0;if(r%o!=0){const e="";return t&&t({seq:e,code:Se.EC_PARAMS_INVALID,msg:"\u53c2\u6570\u9519\u8bef\uff0c\u6700\u5927\u73a9\u5bb6\u6570\u65e0\u6cd5\u88ab\u961f\u4f0d\u6570\u91cf\u6574\u9664",data:null}),e}const i=Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:Ae.playerId},e.playerInfo);if(delete e.teamNumber,!("number"==typeof r&&"number"==typeof o&&r>=o&&o>=1)){const e="";return t&&t({seq:"",code:Se.EC_PARAMS_INVALID,msg:"\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u6700\u5927\u73a9\u5bb6\u6570\u91cf\u548c\u961f\u4f0d\u6570\u91cf",data:null}),e}{r=Math.floor(r),o=Math.floor(o);const e=Math.floor(r/o);for(let t=0;t<o;t++){const s={id:t+"",maxPlayers:e,minPlayers:1,name:""};!i.teamId&&(i.teamId=s.id),t===o-1&&(s.maxPlayers=r-(o-1)*e),n.push(s)}}const s=Object.assign({region:void 0,owner:void 0,playerList:void 0},e,{teamList:n,createType:ge.CreateRoomType.COMMON_CREATE,playerInfo:i});return lr.createRoom(s,t)}joinRoom(e,t,n){const o=Object.assign({},e,{teamId:"0",joinType:r.JoinRoomType.COMMON_JOIN,roomId:t,playerInfo:Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:Ae.playerId},e.playerInfo)});return lr.joinRoom(o,n)}joinTeamRoom(e,t,n){const o=Object.assign({},e,{joinType:r.JoinRoomType.COMMON_JOIN,roomId:t,playerInfo:Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:Ae.playerId},e.playerInfo)});return lr.joinRoom(o,n)}leaveRoom(e){return lr.leaveRoom({},e)}dismissRoom(e,t,n){return lr.dismissRoom({},n)}changeRoom(e,t,n){const o={changeRoomOptionList:[]};if(e.hasOwnProperty("roomName")&&o.changeRoomOptionList.push(r.ChangeRoomOption.ROOM_NAME),e.hasOwnProperty("owner")&&o.changeRoomOptionList.push(r.ChangeRoomOption.OWNER),e.hasOwnProperty("isPrivate")&&o.changeRoomOptionList.push(r.ChangeRoomOption.IS_PRIVATE),e.hasOwnProperty("customProperties")&&o.changeRoomOptionList.push(r.ChangeRoomOption.CUSTOM_PROPERTIES),e.hasOwnProperty("isForbidJoin")&&o.changeRoomOptionList.push(r.ChangeRoomOption.IS_FORBID_JOIN),0!==o.changeRoomOptionList.length)return lr.changeRoom(Object.assign({},o,e),n);{const e={code:r.QAppProtoErrCode.EC_OK,msg:"\u672a\u4fee\u6539\u623f\u95f4\u4fe1\u606f",seq:"",data:t};n&&n(e)}}removePlayer(e,t){const n=Object.assign({},e);return lr.removeUser(n,t)}getRoomByRoomId(e,t){const n=Object.assign({},e);return lr.getRoomByRoomId(n,t)}getRoomList(e,t){const n=Object.assign({roomType:"",isDesc:!1},e,{gameId:Me.gameId});return lr.getRoomList(n,t)}matchPlayers(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({matchStatus:void 0,id:Ae.playerId,teamId:"",region:"",teamLeader:"",sdkVersion:void 0,groupId:void 0},e.playerInfo)});return fr.matchUsersComplex(n,t)}matchGroup(e,t){const n=e.playerInfoList.map(e=>Object.assign({matchStatus:void 0,teamId:"",region:"",teamLeader:"",sdkVersion:void 0,groupId:void 0},e)),r={matchCode:e.matchCode,playerInfoList:n};return fr.matchGroup(r,t)}matchRoom(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:Ae.playerId},e.playerInfo)});return fr.matchRoom(n,t)}cancelMatch(e,t){const n=Object.assign({},e);return fr.cancelMatch(n,t)}setFrameRoom(e){return!(!e||!Array.isArray(e.playerList)||e.playerList.findIndex(e=>e.id===Ae.playerId)<0||(dr.setFrameRoom(e),0))}startFrameSync(e){const t=dr.roomInfo;function n(t){e&&e(t),mr.responses.startFrameSyncRsp(t)}if(!t)return Ke.log("STARTFRAMESYNC","fail at roomInfo === null"),n({code:mr.ErrCode.EC_SDK_NO_ROOM,msg:"\u65e0\u623f\u95f4\u4fe1\u606f",seq:null});Ke.log("STARTFRAMESYNC",dr.roomInfo),Ke.log("STARTFRAMESYNC","socket2 isConnect",ar.isConnect(),ar.socketTask),dr.checkLogin(r=>{if(r.code===Se.EC_OK){Ke.log("STARTFRAMESYNC","start");const n={roomId:t.id,gameId:Me.gameId};return dr.startFrameSync(n,e)}return Ke.log("STARTFRAMESYNC","fail at CheckLogin, seq=",r.seq,", code=",r.code,t),n({code:mr.ErrCode.EC_SDK_NO_CHECK_LOGIN,msg:"CheckLogin\u5931\u8d25\u3002"+JSON.stringify(r),seq:null})},"sdk startFrame")}stopFrameSync(e){const t={roomId:(dr.roomInfo||{id:void 0}).id,gameId:Me.gameId};dr.stopFrameSync(t,t=>e&&e(t))}sendFrame(e,t){const n={roomId:(dr.roomInfo||{id:void 0}).id,item:{playerId:Ae.playerId,data:JSON.stringify(e.data),timestamp:Date.now()}};return dr.sendFrame(n,t)}requestFrame(e,t){const n=dr.roomInfo||{id:void 0},r=Object.assign({},e,{roomId:n.id});return dr.requestFrame(r,t)}sendToClient(e,t,n){if(0===e.recvPlayerList.length)return void(n&&n({code:this.ErrCode.EC_OK,data:null,seq:"",msg:""}));const r=Object.assign({},e,{roomId:t});return Er.sendMessage(r,n)}sendToGameSvr(e,t,n){const r=Object.assign({},e,{playerId:Ae.playerId,roomId:t,data:JSON.stringify(e.data)});return dr.sendMessageExt(r,n)}}mr.instance=null,mr.responses=new ir,mr.ErrCode=Se,mr.ENUM=ge;class yr{constructor(e,t){this.frameIdFill=0,this.frameIdSent=0,this.autoReqFrameErrTimes=0,this.lastFrameTime=0,this.beginFrameId=-1,this.endFrameId=-1,this.fillCache={},this.timer=new Sr(e),this.callback=t}reset(e=0){this.timer.init(),this.frameIdSent=e,this.frameIdFill=e,this.lastFrameTime=0}push(e,t){const n=e.data.frame.id;1===n&&this.reset(),this.timer.push(n,Date.now());const r=this.frameIdSent,o=this.frameIdFill;return this.frameIdFill=n,Ie.isAutoRequestFrame?n<=r+1?this.send(e):(this.fillCache[n]={endFrameId:n,data:[e.data.frame]},void(n>o+1&&this.fill(o+1,n-1,t))):this.send(e)}retryFill(e){this.beginFrameId===this.endFrameId&&this.beginFrameId<0||(this.autoReqFrameErrTimes=0,this.fill(this.beginFrameId,this.endFrameId,e))}send(e){const t=e.data.frame.id;if(t<=this.frameIdSent)return;e.data.frame.time=this.timer.time(t),this.frameIdSent=t,this.callback(e),!this.lastFrameTime&&(this.lastFrameTime=e.data.frame.time);const n=e.data.frame.time-this.lastFrameTime;0!==n&&vn.onFitFrameTime(n),Math.abs(n)>300&&!e.data.frame.isReplay&&(this.reset(t),this.timer.push(t,Date.now())),this.lastFrameTime=e.data.frame.time}fillSend(e){if(e<=this.frameIdSent+1&&this.fillCache[e]){const t=this.fillCache[e];delete this.fillCache[e],t.data.forEach(e=>this.send({data:{frame:e},seq:""})),this.fillSend(t.endFrameId+1)}}fill(e,t,n){n.isInRoom()&&n.requestFrame({beginFrameId:e,endFrameId:t},o=>{if(this.beginFrameId=e,this.endFrameId=t,o.code!==r.QAppProtoErrCode.EC_OK){if(this.autoReqFrameErrTimes++,this.autoReqFrameErrTimes<=5)return this.fill(e,t,n);n.onAutoRequestFrameError&&n.onAutoRequestFrameError({data:o,seq:""})}else this.beginFrameId=-1,this.endFrameId=-1,this.autoReqFrameErrTimes=0,this.fillCache[e]={endFrameId:t,data:o.data.frames.map(e=>Object.assign({},e,{roomId:n.roomInfo.id,isReplay:!0}))},this.fillSend(e)})}}class Sr{constructor(e){this._a1=e,this.init()}init(){this.n=0,this.S_xi=0,this.S_yi=0,this.S_xiyi=0,this.S_xixi=0}push(e,t){this.n++,this.S_xi+=e,this.S_yi+=t,this.S_xiyi+=e*t,this.S_xixi+=e*e}a0(e){return void 0===e&&(e=this.a1()),this.S_yi/this.n-this.a1()*this.S_xi/this.n}a1(){return(this.n*this.S_xiyi-this.S_xi*this.S_yi)/(this.n*this.S_xixi-this.S_xi*this.S_xi)}ap(){const e=this.a1();return{a0:this.a0(e),a1:e}}time(e){if(0===this.n)return 0;const t=this.n>=2?this.ap():{a0:this.S_yi-this.S_xi*this._a1,a1:this._a1};return Math.round(t.a0+e*t.a1)}}class gr{constructor(e){this.frameBroadcastFrameId=0,this.room=e,this.frameBroadcast=new yr(this.room.roomInfo.frameRate?Math.floor(1e3/this.room.roomInfo.frameRate):66,e=>{e&&e.data&&e.data.frame&&e.data.frame.items&&e.data.frame.items.forEach(e=>e.data="object"==typeof e.data?e.data:JSON.parse(e.data)),this.matchFrameBstAndInvoke("onRecvFrame",e)})}onNetwork(e){this.room.onUpdate&&this.room.onUpdate(this.room)}onJoinRoom(e){this.saveAndInvoke("onJoinRoom",e)}onLeaveRoom(e){this.saveAndInvoke("onLeaveRoom",e)}onDismissRoom(e){this.matchRoomInfoAndInvoke("onDismissRoom",e,()=>this.room.roomInfo={})}onChangeRoom(e){this.saveAndInvoke("onChangeRoom",e)}onRemovePlayer(e){this.saveAndInvoke("onRemovePlayer",e)}onRecvFromClient(e){this.matchIDAndInvoke("onRecvFromClient",e)}onRecvFromGameSvr(e){this.matchIDAndInvoke("onRecvFromGameSvr",e,null)}onMatchPlayers(e){this.room.roomUtil.setRoomInfo(e.data.roomInfo),e.data.roomInfo&&e.data.roomInfo.playerList&&e.data.roomInfo.playerList.find(e=>vr.isMe(e.id))&&this.room.roomUtil.activeFrame();const t=e.data.matchType;Cr.once(t,{code:r.QAppProtoErrCode.EC_OK,msg:"",seq:"",data:e.data})}onMatchTimeout(e){const t=e.data.matchType,n=e.data.errCode||r.QAppProtoErrCode.EC_MATCH_TIMEOUT,{errCode:o,errMsg:i}=tt(n,"");Cr.once(t,{code:o,msg:i,seq:"",data:{}})}onChangePlayerNetworkState(e){this.saveAndInvoke("onChangePlayerNetworkState",e)}onChangeCustomPlayerStatus(e){this.saveAndInvoke("onChangeCustomPlayerStatus",e)}onStartFrameSync(e){this.saveAndInvoke("onStartFrameSync",e)}onStopFrameSync(e){this.frameBroadcast.reset(),this.saveAndInvoke("onStopFrameSync",e)}onRecvFrame(e){this.room.roomInfo.frameSyncState!==r.FrameSyncState.STOP&&this.frameBroadcast.push(e,this.room)}frameBroadcastFrameIdReset(e=0){return this.frameBroadcast.reset(e)}matchRoomInfo(e){return this.room.roomInfo.id===e.data.roomInfo.id}matchID(e){return this.room.roomInfo.id===e.data.roomId}invoke(e,t){this.room[e]&&this.room[e].call(this.room,t)}saveAndInvoke(e,t){this.matchRoomInfo(t)&&(this.room.roomUtil.setRoomInfo(t.data.roomInfo),this.invoke(e,t))}matchFrameBstAndInvoke(e,t,n){this.matchID({data:t.data.frame,seq:""})&&(n&&n(t),this.invoke(e,t))}matchIDAndInvoke(e,t,n){this.matchID(t)&&(n&&n(t),this.invoke(e,t))}matchRoomInfoAndInvoke(e,t,n){this.matchRoomInfo(t)&&(n&&n(t),this.invoke(e,t))}}const Cr=new class{constructor(){this.callbacks={}}push(e,t){!this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t)}once(e,t){(this.callbacks[e]||[]).forEach(e=>e&&e(t)),this.removeCallbacksByTag(e)}removeCallbacksByTag(e){e&&this.callbacks[e]&&delete this.callbacks[e]}},Or=new class{onMatchPlayers(e){const t={data:{roomInfo:e.data.roomInfo,errCode:Se.EC_OK},seq:e.seq};Ar.onMatch&&Ar.onMatch(t)}onMatchTimeout(e){const t={data:{roomInfo:null,errCode:e.data.errCode},seq:e.seq};Ar.onMatch&&Ar.onMatch(t)}onCancelMatch(e){const t={data:{matchCode:e.data.matchCode,playerId:e.data.playerId},seq:e.seq};Ar.onCancelMatch&&Ar.onCancelMatch(t)}};class Ir{constructor(e){this.room=e}setRoomInfo(e){!e&&(e={});const t=JSON.parse(JSON.stringify(this.room.roomInfo||{}));this.room.roomInfo=JSON.parse(JSON.stringify(e||{})),this.room.roomInfo.playerList=this.room.roomInfo.playerList||[],this.room.isInRoom()&&Pe.setInfo(this.room.roomInfo.playerList.find(e=>e.id===Ae.playerId)),t.id===this.room.roomInfo.id&&this.room.roomInfo.id&&this.room.isInRoom()&&t.startGameTime===this.room.roomInfo.startGameTime||this.room.roomBroadcast&&this.room.roomBroadcast.frameBroadcastFrameIdReset(),this.room.roomInfo&&Array.isArray(this.room.roomInfo.playerList)&&this.room.roomInfo.playerList.find(e=>vr.isMe(e.id))&&this.activeFrame(),this.room.onUpdate&&this.room.onUpdate(this.room)}saveRoomInfo(e){e.code===r.QAppProtoErrCode.EC_OK&&this.setRoomInfo(e.data?e.data.roomInfo:null)}setParam(e){this.room.roomInfo.id&&(e.roomId=this.room.roomInfo.id)}addRoomParam(){return{roomId:this.room.roomInfo.id||""}}initBroadcast(){this.room.roomBroadcast||(this.room.roomBroadcast=new gr(this.room))}activeFrame(){return mr.instance.setFrameRoom(this.room.roomInfo)}}class Tr{}class Ar extends Tr{constructor(e){super(),this.roomUtil=new Ir(this),this.roomUtil.setRoomInfo(e||null)}static getRoomList(e,t){mr.instance.getRoomList(e,ot(t))}static getRoomByRoomId(e,t){mr.instance.getRoomByRoomId(e,ot(t))}static getMyRoom(e){mr.instance.getRoomByRoomId({roomId:""},ot(e))}isInRoom(){return!!this.roomInfo.playerList.find(e=>e.id===Ae.playerId)}initRoom(e){this.roomUtil.setRoomInfo(e);let t=e;t&&t.id&&t.routeId&&Array.isArray(t.playerList)&&t.playerList.find(e=>e.id&&vr.isMe(e.id))&&this.roomUtil.activeFrame()}onUpdate(e){}get networkState(){let e=!1,t=!1;const n=mr.instance.getSocket(r.ConnectionType.COMMON),o=mr.instance.getSocket(r.ConnectionType.RELAY);return{COMMON:e=!(!n||!n.isConnect()),RELAY:t=!(!o||!o.isConnect())}}createRoom(e,t){mr.instance.createRoom(e,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}createTeamRoom(e,t){mr.instance.createTeamRoom(e,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}joinRoom(e,t){mr.instance.joinRoom(Object.assign({},e),this.roomInfo.id,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}joinTeamRoom(e,t){mr.instance.joinTeamRoom(Object.assign({},e),this.roomInfo.id,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}leaveRoom(e,t){this.roomUtil.setParam(e),mr.instance.leaveRoom(ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}dismissRoom(e,t){mr.instance.dismissRoom(e,this.roomInfo.id,ot(e=>{e.code===r.QAppProtoErrCode.EC_OK&&this.roomUtil.setRoomInfo(null),t&&t(e)}))}changeRoom(e,t){mr.instance.changeRoom(e,this.roomInfo,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}changeCustomPlayerStatus(e,t){mr.instance.changeCustomPlayerStatus(Object.assign({},e),this.roomInfo.id,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}removePlayer(e,t){mr.instance.removePlayer(e,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}getRoomDetail(e){mr.instance.getRoomByRoomId(Object.assign({},this.roomUtil.addRoomParam()),ot(t=>{this.roomUtil.saveRoomInfo(t),e&&e(t)}))}matchPlayers(e,t){let n=t;Ke.log("typeof_Room.onMatch",typeof Ar.onMatch),"function"!=typeof Ar.onMatch&&(Cr.push(r.MatchType.PLAYER_COMPLEX,t),n=(e=>{if(e.code!==r.QAppProtoErrCode.EC_OK)return e.data=null,Cr.once(r.MatchType.PLAYER_COMPLEX,e)})),mr.instance.matchPlayers(e,ot(n))}matchGroup(e,t){mr.instance.matchGroup(e,ot(t))}matchRoom(e,t){mr.instance.matchRoom(e,ot(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}cancelPlayerMatch(e,t){let n=t;e.matchType===ge.MatchType.PLAYER_COMPLEX&&(n=(n=>{n.code===Se.EC_OK&&Cr.removeCallbacksByTag(e.matchType),t&&t(n)})),mr.instance.cancelMatch(e,ot(n))}startFrameSync(e,t){this.roomUtil.activeFrame(),mr.instance.startFrameSync(ot(t))}stopFrameSync(e,t){this.roomUtil.activeFrame(),mr.instance.stopFrameSync(ot(t))}sendFrame(e,t){this.roomUtil.activeFrame(),mr.instance.sendFrame(e,ot(t))}requestFrame(e,t){this.roomUtil.activeFrame(),mr.instance.requestFrame(e,ot(e=>{e&&e.data&&e.data.frames&&e.data.frames.forEach(e=>{e.items.forEach(e=>{e.data="object"==typeof e.data?e.data:JSON.parse(e.data)})}),t&&t(e)}))}retryAutoRequestFrame(){this.roomBroadcast.frameBroadcast.retryFill(this)}sendToClient(e,t){let n=e.recvPlayerList||[];e.recvType===ge.RecvType.ROOM_ALL?n=this.roomInfo.playerList.map(e=>e.id):e.recvType===ge.RecvType.ROOM_OTHERS&&(n=this.roomInfo.playerList.filter(e=>e.id!==Ae.playerId).map(e=>e.id));const r={recvType:void 0,recvPlayerList:n,msg:e.msg};mr.instance.sendToClient(r,this.roomInfo.id,ot(t))}sendToGameSvr(e,t){mr.instance.sendToGameSvr(e,this.roomInfo.id,ot(t))}}class vr{static isMe(e){return Ae.playerId===e}static get isInited(){return mr.instance.isInited()}static init(e,t,n){mr.instance=new mr(e,t),mr.instance.init(ot(n)),mr.instance.bindResponses(Or)}static add(e){e.roomUtil.initBroadcast(),mr.instance.bindResponses(e.roomBroadcast)}static remove(e){mr.instance.unbindResponses(e.roomBroadcast)}static clear(){mr.instance.clearResponses()}}let Mr=0;const Nr=Math.pow(2,32)-1;var Pr={init(e){Mr=e},random(){const e=(1103515245*Mr+123456789)%Nr;return Mr=e,e/Nr}};class Lr{}Lr.Listener=null,Lr.Room=null,Lr.ENUM=null,Lr.ErrCode=null,Lr.RandomUtil=null,Lr.DebuggerLog=null,Lr.Player=null,Lr.StatCallbacks=null,Lr.Listener=vr,Lr.Room=Ar,Lr.ENUM=ge,Lr.ErrCode=Se,Lr.RandomUtil=Pr,Lr.DebuggerLog=Ke,Lr.Player=Mn,Lr.StatCallbacks=vn,(ke.root||{}).MGOBE=Lr,Lr.types=ge,t.default=Lr}]).default})},{}],AppFacade:[function(e,t,n){"use strict";cc._RF.push(t,"9bd88dxjkxI86h2WuaC9sGd","AppFacade");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./model/UserProxy"),i=e("./controller/UserCommand"),s=e("./model/RoomProxy"),a=e("./controller/GameCommand"),c=function(e){function t(){return e.call(this)||this}return r(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.startup=function(){},t.prototype.initializeFacade=function(){e.prototype.initializeFacade.call(this)},t.prototype.initializeModel=function(){e.prototype.initializeModel.call(this),this.registerProxy(new o.default),this.registerProxy(new s.default)},t.prototype.initializeController=function(){e.prototype.initializeController.call(this),(new i.default).register(),(new a.default).register()},t.prototype.initializeView=function(){e.prototype.initializeView.call(this)},t.STARTUP="startup",t}(puremvc.Facade);n.default=c,cc._RF.pop()},{"./controller/GameCommand":"GameCommand","./controller/UserCommand":"UserCommand","./model/RoomProxy":"RoomProxy","./model/UserProxy":"UserProxy"}],Constants:[function(e,t,n){"use strict";cc._RF.push(t,"da307vdKUpNKaGAi0Er7i68","Constants"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.SHOW_LOADING="SHOW_LOADING",e.HIDE_LOADING="HIDE_LOADING",e.SHOW_TIPS="SHOW_TIPS"}(n.WorldNotification||(n.WorldNotification={})),function(e){e.AUTHORIZE="AUTHORIZE",e.AUTHORIZE_SUCC="AUTHORIZE_SUCC",e.AUTHORIZE_FAIL="AUTHORIZE_FAIL"}(n.UserNotification||(n.UserNotification={})),function(e){e.ROOM_CREATE_SUCC="ROOM_CREATE_SUCC",e.ROOM_CREATE_FAIL="ROOM_CREATE_FAIL",e.ROOM_JOIN_SUCC="ROOM_JOIN_SUCC",e.ROOM_JOIN_FAIL="ROOM_JOIN_FAIL",e.ROOM_LEAVE_SUCC="ROOM_LEAVE_SUCC",e.ROOM_LEAVE_FAIL="ROOM_LEAVE_FAIL",e.ROOM_RETURN_CHECK="ROOM_RETURN_CHECK",e.ROOM_RETURN_NOT_CHECK="ROOM_RETURN_NOT_CHECK",e.ROOM_RETURN_AGREE="ROOM_RETURN_AGREE",e.ROOM_RETURN_DISAGREE="ROOM_RETURN_DISAGREE",e.ROOM_UPDATE="ROOM_UPDATE"}(n.RoomNotification||(n.RoomNotification={})),n.GameNotification||(n.GameNotification={}),function(e){e.TEAM2="team2",e.MATCH2="match2",e.MACHINE2="machine2",e.TEAM4="team4",e.MATCH4="match4",e.MACHINE4="machine4"}(n.GameType||(n.GameType={})),function(e){e.WELCOME="welcome",e.MENU="menu",e.ROOM="room",e.GAME="game"}(n.Scene||(n.Scene={})),n.Config={WXCloudEnvID:"dev-620e72",MGOBEGameId:"obg-fqdy9jzs",MGOBESecretKey:"edb151a57fbbbd59f1c81399d8a5773aa40aee21",MGOBEHost:"fqdy9jzs.wxlagame.com",reconnectMaxTimes:5,reconnectInterval:1e3,resendInterval:1e3,resendTimeout:1e4,isDebug:!1},cc._RF.pop()},{}],DevPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"a5040h52i1JMaYtUjbxzhfn","DevPlatform");var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.getOpenID=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,"user dev"]})})},e.prototype.authorize=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2]})})},e.prototype.getUserInfo=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,{avatarUrl:"https://blog.shiyicode.com/image/avatar.png",nickName:"\u75af\u900dsadsada",gender:1,language:"zh_CN",city:"\u6d77\u6dc0",province:"\u5317\u4eac",country:"\u4e2d\u56fd"}]})})},e.prototype.shareAppMessage=function(e,t,n){return r(this,void 0,void 0,function(){return o(this,function(e){return console.log("share app message:",n),[2]})})},e.prototype.getLaunchOption=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2]})})},e.prototype.getLaunchOptionOnShow=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2]})})},e}();n.default=i,cc._RF.pop()},{}],GameCommand:[function(e,t,n){"use strict";cc._RF.push(t,"80b90EpSv5L06ZDCniOkP5C","GameCommand");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.register=function(){},t.prototype.execute=function(e){e.getBody().gameType;e.getName()},t.NAME="GameCommand",t}(puremvc.SimpleCommand);n.default=o,cc._RF.pop()},{}],GameVO:[function(e,t,n){"use strict";cc._RF.push(t,"d3828kjzjdAdKkv2ZcPczAu","GameVO"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(){}}();n.GameVO=r;var o=function(){return function(){}}();n.PlayerVO=o;var i=function(){return function(){}}();n.ChessBoardVO=i;var s=function(){return function(){}}();n.Position=s,cc._RF.pop()},{}],GameViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"9ca47wjz0RGKb0IiseSCFys","GameViewMediator");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(n){return e.call(this,t.NAME,n)||this}return r(t,e),t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.onRegister=function(){this.viewComponent},t.prototype.onRemove=function(){},t.NAME="GameViewMediator",t}(puremvc.Mediator);n.default=o,cc._RF.pop()},{}],GameView:[function(e,t,n){"use strict";cc._RF.push(t,"2867boT5cdFs5cDOWF1DHry","GameView");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../AppFacade"),s=e("../GameViewMediator"),a=cc._decorator,c=a.ccclass,_=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){i.default.getInstance().registerMediator(new s.default(this))},t.prototype.onDestroy=function(){i.default.getInstance().removeMediator(s.default.NAME)},t.prototype.update=function(e){},t=o([c],t)}(cc.Component));n.default=_,cc._RF.pop()},{"../../AppFacade":"AppFacade","../GameViewMediator":"GameViewMediator"}],IPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"17710N0H3FDNI01GLjbmctM","IPlatform"),Object.defineProperty(n,"__esModule",{value:!0});var r,o=e("./WXPlatform"),i=e("./DevPlatform");n.Platform=function(){if(null!=r)return r;switch(cc.sys.platform){case cc.sys.WECHAT_GAME:r=new o.default;break;default:r=new i.default}return r},cc._RF.pop()},{"./DevPlatform":"DevPlatform","./WXPlatform":"WXPlatform"}],MenuViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"11836H8iipECLNDx7ro0OY0","MenuViewMediator");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Constants"),i=e("../model/UserProxy"),s=e("../model/RoomProxy"),a=function(e){function t(n){return e.call(this,t.NAME,n)||this}return r(t,e),t.prototype.listNotificationInterests=function(){return[o.RoomNotification.ROOM_CREATE_SUCC,o.RoomNotification.ROOM_CREATE_FAIL,o.RoomNotification.ROOM_JOIN_SUCC,o.RoomNotification.ROOM_JOIN_FAIL,o.RoomNotification.ROOM_RETURN_CHECK,o.RoomNotification.ROOM_RETURN_NOT_CHECK]},t.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case o.RoomNotification.ROOM_CREATE_SUCC:cc.director.loadScene(o.Scene.ROOM);break;case o.RoomNotification.ROOM_CREATE_FAIL:break;case o.RoomNotification.ROOM_JOIN_SUCC:cc.director.loadScene(o.Scene.ROOM);break;case o.RoomNotification.ROOM_JOIN_FAIL:break;case o.RoomNotification.ROOM_RETURN_CHECK:console.log("room return check"),cc.director.loadScene(o.Scene.ROOM);break;case o.RoomNotification.ROOM_RETURN_NOT_CHECK:this.actionByLaunchQuery();break;case o.RoomNotification.ROOM_RETURN_AGREE:case o.RoomNotification.ROOM_RETURN_DISAGREE:}},t.prototype.onRegister=function(){var e=this.facade.retrieveProxy(s.default.NAME);this.initView(),this.initCallback(),e.returnRoom()},t.prototype.onRemove=function(){},t.prototype.initCallback=function(){var e=this.facade.retrieveProxy(s.default.NAME),t=this.facade.retrieveProxy(i.default.NAME),n=this.viewComponent;n.mode2ButtonClick=function(e,r){console.log("mode2 button click"),n.setModeType(4),t.setModeType(4)},n.mode4ButtonClick=function(e,r){console.log("mode4 button click"),n.setModeType(2),t.setModeType(2)},n.team2ButtonClick=function(t,n){console.log("team2 button click"),e.createRoom(o.GameType.TEAM2)},n.team4ButtonClick=function(t,n){console.log("team4 button click"),e.createRoom(o.GameType.TEAM4)},n.match2ButtonClick=function(e,t){console.log("match2 button click")}},t.prototype.initView=function(){var e=this.viewComponent,t=this.facade.retrieveProxy(i.default.NAME);e.setModeType(t.getModeType());var n=t.getUserInfo();e.setUserInfo(n.avatarUrl,n.nickName)},t.prototype.actionByLaunchQuery=function(){var e=this.facade.retrieveProxy(i.default.NAME),t=e.getLaunch();if(e.setLaunch({}),console.log("loadByLaunchQuery",t),t&&t.query&&t.scene&&(1007==t.scene||1008==t.scene))switch(t.query.type){case o.GameType.TEAM2:this.facade.retrieveProxy(s.default.NAME).joinRoom(t.query.roomId)}},t.NAME="MenuViewMediator",t}(puremvc.Mediator);n.default=a,cc._RF.pop()},{"../Constants":"Constants","../model/RoomProxy":"RoomProxy","../model/UserProxy":"UserProxy"}],MenuView:[function(e,t,n){"use strict";cc._RF.push(t,"a412dCXcExGoIv2Dq6SbnKc","MenuView");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../AppFacade"),s=e("../MenuViewMediator"),a=e("../../util/Util"),c=cc._decorator,_=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerNode=null,t.mode2Node=null,t.mode4Node=null,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){i.default.getInstance().registerMediator(new s.default(this))},t.prototype.onDestroy=function(){i.default.getInstance().removeMediator(s.default.NAME)},t.prototype.setModeType=function(e){2==e?(this.mode2Node.active=!0,this.mode4Node.active=!1):(this.mode2Node.active=!1,this.mode4Node.active=!0)},t.prototype.setUserInfo=function(e,t){if(e){var n=this.playerNode.getChildByName("mask").getChildByName("head"),r=n.getComponent(cc.Sprite);n.active=!0,cc.loader.load({url:e,type:"jpg"},function(e,t){console.log("\u52a0\u8f7d\u5934\u50cf",e),null==e&&(r.spriteFrame=new cc.SpriteFrame(t))})}t&&(t=a.default.cutstr(t,5),this.playerNode.getChildByName("name").getComponent(cc.Label).string=t)},t.prototype.mode2ButtonClick=function(e,t){},t.prototype.mode4ButtonClick=function(e,t){},t.prototype.team2ButtonClick=function(e,t){},t.prototype.team4ButtonClick=function(e,t){},t.prototype.match2ButtonClick=function(e,t){},t.prototype.machine2ButtonClick=function(e,t){},o([u(cc.Node)],t.prototype,"playerNode",void 0),o([u(cc.Node)],t.prototype,"mode2Node",void 0),o([u(cc.Node)],t.prototype,"mode4Node",void 0),t=o([_],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../AppFacade":"AppFacade","../../util/Util":"Util","../MenuViewMediator":"MenuViewMediator"}],MgobeService:[function(e,t,n){"use strict";cc._RF.push(t,"1e661LPs0JJcZmGTTesr646","MgobeService"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Constants");e("../../library/mgobe/MGOBE.js");var o=function(){function e(){}return e.getMyRoom=function(e){var t=this;MGOBE.Room.getMyRoom(function(n){console.log("\u83b7\u53d6\u5f53\u524d\u623f\u95f4\u4fe1\u606f",n),n.code===MGOBE.ErrCode.EC_OK&&(t.room.roomInfo=n.data.roomInfo),e&&e(n)})},e.initRoom=function(e,t){var n={roomId:e};MGOBE.Room.getRoomByRoomId(n,function(e){t&&t(e)})},e.joinRoom=function(e,t,n){var r=this;this.initRoom(e,function(o){console.log("\u83b7\u53d6\u623f\u95f4\u4fe1\u606f",e,o),o.code===MGOBE.ErrCode.EC_OK&&(console.log("\u83b7\u53d6\u623f\u95f4\u4fe1\u606f, \u66f4\u65b0\u6210\u529f",e),r.room.initRoom(o.data.roomInfo));var i={playerInfo:{name:t.nickName,customPlayerStatus:t.isReady?1:0,customProfile:t.avatarUrl}};r.room.joinRoom(i,function(e){n&&n(e)})})},e.createRoom=function(e,t,n,r){var o={roomName:"\u623f\u95f4\u540d",maxPlayers:t,roomType:n,isPrivate:!1,customProperties:"WAIT",playerInfo:{name:e.nickName,customPlayerStatus:e.isReady?1:0,customProfile:e.avatarUrl}};this.room.createRoom(o,function(e){r&&r(e)})},e.leaveRoom=function(e){this.room.leaveRoom({},function(t){e&&e(t)})},e.changeCustomPlayerStatus=function(e,t){var n={customPlayerStatus:e};this.room.changeCustomPlayerStatus(n,function(e){t&&t(e)})},e.isInited=function(){return!!MGOBE.Player&&!!MGOBE.Player.id},e.initMgobeSDK=function(e,t,n,o,i,s){var a=this;if(this.isInited())return s&&s({code:MGOBE.ErrCode.EC_OK});var c={gameId:t,secretKey:n,openId:e},_={url:o,reconnectInterval:r.Config.reconnectInterval,reconnectMaxTimes:r.Config.reconnectMaxTimes,resendInterval:r.Config.resendInterval,resendTimeout:r.Config.resendTimeout,isAutoRequestFrame:!0,cacertNativeUrl:i};MGOBE.DebuggerLog.enable=r.Config.isDebug,MGOBE.Listener.init(c,_,function(e){e.code===MGOBE.ErrCode.EC_OK?(console.log("\u521d\u59cb\u5316\u6210\u529f"),a.room=new MGOBE.Room,MGOBE.Listener.add(a.room),a.setBroadcastCallbacks(null,{})):console.log("\u521d\u59cb\u5316\u5931\u8d25",e.code),s&&s({code:e.code})})},e.setCallbacks=function(){},e.setBroadcastCallbacks=function(e,t){var n=this;if(this.room){var r=function(e){return function(t){console.log(e,"->",t)}},o={onUpdate:function(){return r("onUpdate")},onJoinRoom:function(){return r("onJoinRoom")},onLeaveRoom:function(){return r("onLeaveRoom")},onChangeRoom:function(){return r("onChangeRoom")},onDismissRoom:function(){return r("onDismissRoom")},onStartFrameSync:function(){return r("onStartFrameSync")},onStopFrameSync:function(){return r("onStopFrameSync")},onRecvFrame:function(e){r("onRecvFrame")},onChangeCustomPlayerStatus:function(){return r("onChangeCustomPlayerStatus")},onRemovePlayer:function(){return r("onRemovePlayer")},onRecvFromClient:function(){return r("onRecvFromClient")},onRecvFromGameSvr:function(){return r("onRecvFromGameSvr")},onAutoRequestFrameError:function(){return r("onAutoRequestFrameError")}};Object.keys(o).forEach(function(r){var i=t[r]?t[r].bind(e):o[r];n.room[r]=i})}},e.room=null,e}();n.default=o,cc._RF.pop()},{"../../Constants":"Constants","../../library/mgobe/MGOBE.js":1}],PopupView:[function(e,t,n){"use strict";cc._RF.push(t,"6704dlSDhRMJYOXjwusSjDq","PopupView");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,a=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingNode=null,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.loadingNode.active=!1},t.prototype.showLoading=function(){this.loadingNode.active=!0},t.prototype.hideLoading=function(){this.loadingNode.active=!1},t.prototype.update=function(e){this.loadingNode.active&&this.rotateLoadingFrame()},t.prototype.rotateLoadingFrame=function(){this.loadingNode.getChildByName("load_icon").angle-=5},o([a(cc.Node)],t.prototype,"loadingNode",void 0),t=o([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],RoomProxy:[function(e,t,n){"use strict";cc._RF.push(t,"ed6bdqJX9hAjYCHi7krJftG","RoomProxy");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./vo/RoomVO"),i=e("../Constants"),s=e("../util/Util"),a=e("./UserProxy");e("../library/mgobe/MGOBE.js");var c=e("../services/mgobe/MgobeService"),_=(MGOBE.Room,MGOBE.Listener,MGOBE.ErrCode,MGOBE.ENUM,MGOBE.DebuggerLog,function(e){function t(){var n=e.call(this,t.NAME)||this;return n.room=null,n.room=new o.RoomVO,n}return r(t,e),t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.returnRoom=function(){var e=this;c.default.getMyRoom(function(t){t.code===MGOBE.ErrCode.EC_OK?(console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u4e2d",t),e.setRoom(t.data.roomInfo),e.listenRoom(),e.facade.sendNotification(i.RoomNotification.ROOM_RETURN_CHECK)):(console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u4e2d"),e.facade.sendNotification(i.RoomNotification.ROOM_RETURN_NOT_CHECK))})},t.prototype.joinRoom=function(e){var t=this;console.log("\u52a0\u5165\u623f\u95f4");var n=this.facade.retrieveProxy(a.default.NAME).getUserInfo(),r=new o.PlayerVO;r.avatarUrl=n.avatarUrl,r.nickName=n.nickName,r.isReady=!1,c.default.joinRoom(e,r,function(e){e.code===MGOBE.ErrCode.EC_OK?(console.log("\u52a0\u5165\u623f\u95f4\u6210\u529f",e),t.setRoom(e.data.roomInfo),t.listenRoom(),t.facade.sendNotification(i.RoomNotification.ROOM_JOIN_SUCC)):(console.log("\u52a0\u5165\u623f\u95f4\u5931\u8d25",e),t.facade.sendNotification(i.RoomNotification.ROOM_JOIN_FAIL))})},t.prototype.createRoom=function(e){var t=this;console.log("\u521b\u5efa\u623f\u95f4");var n=this.facade.retrieveProxy(a.default.NAME).getUserInfo(),r=new o.PlayerVO;r.avatarUrl=n.avatarUrl,r.nickName=n.nickName,r.isReady=!1,c.default.createRoom(r,s.default.getPlayerCntByType(e),e,function(e){e.code===MGOBE.ErrCode.EC_OK?(console.log("\u521b\u5efa\u623f\u95f4\u6210\u529f",e),t.setRoom(e.data.roomInfo),t.listenRoom(),t.facade.sendNotification(i.RoomNotification.ROOM_CREATE_SUCC)):(console.log("\u521b\u5efa\u623f\u95f4\u5931\u8d25",e),t.facade.sendNotification(i.RoomNotification.ROOM_CREATE_FAIL))})},t.prototype.leaveRoom=function(){var e=this;c.default.leaveRoom(function(t){t.code===MGOBE.ErrCode.EC_OK||t.code===MGOBE.ErrCode.EC_ROOM_PLAYER_NOT_IN_ROOM?e.facade.sendNotification(i.RoomNotification.ROOM_LEAVE_SUCC):e.facade.sendNotification(i.RoomNotification.ROOM_LEAVE_FAIL)})},t.prototype.setReadyStatus=function(e){c.default.changeCustomPlayerStatus(e?1:0,function(e){e.code===MGOBE.ErrCode.EC_OK||console.log("\u5f39\u7a97\uff0c\u63d0\u9192\u7528\u6237\u91cd\u8bd5")})},t.prototype.getRoom=function(){return this.room},t.prototype.setRoom=function(e){var t=this.facade.retrieveProxy(a.default.NAME);this.room.gameType=e.type,this.room.roomId=e.id;for(var n=0,r=e.playerList,o=0;o<r.length;o++)if(r[o].id==t.getPlayerId()){n=o;break}for(o=0;o<r.length;o++){var i=(o+n)%r.length;this.room.playersInfo[o].playerID=r[i].id,this.room.playersInfo[o].avatarUrl=r[i].customProfile,this.room.playersInfo[o].nickName=r[i].name,this.room.playersInfo[o].isReady=1==r[i].customPlayerStatus}},t.prototype.listenRoom=function(){var e=this;console.log("\u542f\u52a8room\u76d1\u542c"),c.default.room.onUpdate=function(t){console.log("\u4e8b\u4ef6\u56de\u8c03onUpdate",t.roomInfo),e.setRoom(t.roomInfo),t.roomInfo.playerList.find(function(e){return 1!==e.customPlayerStatus}),e.facade.sendNotification(i.RoomNotification.ROOM_UPDATE)},c.default.room.onJoinRoom=function(e){},c.default.room.onLeaveRoom=function(e){}},t.prototype.removeListenRoom=function(){console.log("\u5173\u95edroom\u76d1\u542c"),c.default.room.onUpdate=null},t.NAME="RoomProxy",t.instance=null,t}(puremvc.Proxy));n.default=_,cc._RF.pop()},{"../Constants":"Constants","../library/mgobe/MGOBE.js":1,"../services/mgobe/MgobeService":"MgobeService","../util/Util":"Util","./UserProxy":"UserProxy","./vo/RoomVO":"RoomVO"}],RoomVO:[function(e,t,n){"use strict";cc._RF.push(t,"d31e5kfDXlJpJd2aFOOEbna","RoomVO"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(){this.playersInfo=[];for(var e=0;e<4;e++)this.playersInfo.push(new o)}}();n.RoomVO=r;var o=function(){return function(){}}();n.PlayerVO=o,cc._RF.pop()},{}],RoomViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"3030aNz+05P3rUQGjqfUkle","RoomViewMediator");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Constants"),i=e("../model/RoomProxy"),s=e("../services/platform/IPlatform"),a=function(e){function t(n){return e.call(this,t.NAME,n)||this}return r(t,e),t.prototype.listNotificationInterests=function(){return[o.RoomNotification.ROOM_UPDATE,o.RoomNotification.ROOM_LEAVE_SUCC,o.RoomNotification.ROOM_LEAVE_FAIL]},t.prototype.handleNotification=function(e){var t=this.facade.retrieveProxy(i.default.NAME),n=this.viewComponent;e.getBody();switch(e.getName()){case o.RoomNotification.ROOM_UPDATE:console.log("notify ====== room_update");var r=t.getRoom();n.updateRoom(r);break;case o.RoomNotification.ROOM_LEAVE_SUCC:cc.director.loadScene(o.Scene.MENU);break;case o.RoomNotification.ROOM_LEAVE_FAIL:}},t.prototype.onRegister=function(){this.facade.retrieveProxy(i.default.NAME).listenRoom(),this.initView(),this.initCallback()},t.prototype.onRemove=function(){this.facade.retrieveProxy(i.default.NAME).removeListenRoom()},t.prototype.initCallback=function(){var e=this.viewComponent,t=this.facade.retrieveProxy(i.default.NAME);e.readyButtonClick=function(e,n){console.log("ready button click"),t.setReadyStatus(!0)},e.cancelButtonClick=function(e,n){console.log("cancel button click"),t.setReadyStatus(!1)},e.leaveButtonClick=function(e,n){console.log("leave button click"),t.leaveRoom()},e.inviteButtonClick=function(e,n){console.log("invite button click");var r=t.getRoom();console.log("\u597d\u53cb\u7ec4\u961f\u9080\u8bf7","type="+r.gameType+"&roomId="+r.roomId),s.Platform().shareAppMessage("\u623f\u5df2\u5f00\u597d\uff0c\u5c31\u5dee\u4f60\u4e86\uff01","","type="+r.gameType+"&roomId="+r.roomId)}},t.prototype.initView=function(){var e=this.viewComponent,t=this.facade.retrieveProxy(i.default.NAME).getRoom();console.log("init view",t),e.updateRoom(t)},t.NAME="RoomViewMediator",t}(puremvc.Mediator);n.default=a,cc._RF.pop()},{"../Constants":"Constants","../model/RoomProxy":"RoomProxy","../services/platform/IPlatform":"IPlatform"}],RoomView:[function(e,t,n){"use strict";cc._RF.push(t,"f88b57zTsVCUZrvdSsIN7Vf","RoomView");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../AppFacade"),s=e("../RoomViewMediator"),a=e("../../util/Util"),c=cc._decorator,_=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playersNode=null,t.barNode=null,t.readyButton=null,t.cancelButton=null,t}return r(t,e),t.prototype.start=function(){i.default.getInstance().registerMediator(new s.default(this))},t.prototype.onDestroy=function(){i.default.getInstance().removeMediator(s.default.NAME)},t.prototype.update=function(e){},t.prototype.updateRoom=function(e){var t=[],n=a.default.getPlayerCntByType(e.gameType);if(2==n)t.push(this.playersNode.getChildByName("player0")),t.push(this.playersNode.getChildByName("player2")),this.playersNode.getChildByName("player1").active=!1,this.playersNode.getChildByName("player3").active=!1;else for(var r=0;r<4;r++){var o=this.playersNode.getChildByName("player"+r.toString());t.push(o)}for(r=0;r<n;r++)this.setPlayerInfo(t[r],e.playersInfo[r].avatarUrl,e.playersInfo[r].nickName,e.playersInfo[r].isReady);void 0!=e.playersInfo[0].isReady&&(this.readyButton.node.active=!e.playersInfo[0].isReady,this.cancelButton.node.active=e.playersInfo[0].isReady)},t.prototype.setPlayerInfo=function(e,t,n,r){if(t){var o=e.getChildByName("mask").getChildByName("head"),i=o.getComponent(cc.Sprite);cc.loader.load({url:t,type:"jpg"},function(e,t){console.log("\u52a0\u8f7d\u5934\u50cf",e),null==e&&(i.spriteFrame=new cc.SpriteFrame(t))}),o.active=!0}n&&(n=a.default.cutstr(n,5),e.getChildByName("name").getComponent(cc.Label).string=n);void 0!=r&&(e.getChildByName("ready_tag").active=r)},t.prototype.readyButtonClick=function(e,t){},t.prototype.cancelButtonClick=function(e,t){},t.prototype.inviteButtonClick=function(e,t){},t.prototype.leaveButtonClick=function(e,t){},t.prototype.chatButtonClick=function(e,t){},o([u(cc.Node)],t.prototype,"playersNode",void 0),o([u(cc.Node)],t.prototype,"barNode",void 0),o([u(cc.Button)],t.prototype,"readyButton",void 0),o([u(cc.Button)],t.prototype,"cancelButton",void 0),t=o([_],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../AppFacade":"AppFacade","../../util/Util":"Util","../RoomViewMediator":"RoomViewMediator"}],Start:[function(e,t,n){"use strict";cc._RF.push(t,"4a325iyUG9K9LyYe710XiAb","Start");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,a=(i.property,e("./AppFacade")),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){a.default.getInstance().startup()},t=o([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./AppFacade":"AppFacade"}],UserCommand:[function(e,t,n){"use strict";cc._RF.push(t,"a2eeb3+f7dEmoETuYbm6Zy+","UserCommand");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Constants"),i=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.register=function(){this.facade.registerCommand(o.UserNotification.AUTHORIZE,t)},t.prototype.execute=function(e){e.getBody();e.getName()},t.NAME="UserCommand",t}(puremvc.SimpleCommand);n.default=i,cc._RF.pop()},{"../Constants":"Constants"}],UserProxy:[function(e,t,n){"use strict";cc._RF.push(t,"2c087vE7fxBJ6jTcleAgUMg","UserProxy");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./vo/UserVO"),i=function(e){function t(){var n=e.call(this,t.NAME)||this;return n.user=null,n.launch=null,n.user=new o.UserVO,n}return r(t,e),t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.setOpenId=function(e){this.user.openId=e},t.prototype.getOpenId=function(){return this.user.openId},t.prototype.setPlayerId=function(e){this.user.playerId=e},t.prototype.getPlayerId=function(){return this.user.playerId},t.prototype.setUserInfo=function(e){console.log("update user info",e),this.user.avatarUrl=e.avatarUrl,this.user.nickName=e.nickName,this.user.city=e.city,this.user.country=e.country,this.user.gender=e.gender,this.user.province=e.province},t.prototype.getUserInfo=function(){return{avatarUrl:this.user.avatarUrl,nickName:this.user.nickName}},t.prototype.setModeType=function(e){this.user.modeType=e},t.prototype.getModeType=function(){return this.user.modeType},t.prototype.hasAuthorize=function(){return null!=this.user.openId},t.prototype.setLaunch=function(e){this.launch=e},t.prototype.getLaunch=function(){if(this.launch)return{query:this.launch.query,scene:this.launch.scene}},t.NAME="UserProxy",t.instance=null,t}(puremvc.Proxy);n.default=i,cc._RF.pop()},{"./vo/UserVO":"UserVO"}],UserVO:[function(e,t,n){"use strict";cc._RF.push(t,"2eb05NNoZhCdZKCbyPpqgrZ","UserVO"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(){this.modeType=2}}();n.UserVO=r,cc._RF.pop()},{}],Util:[function(e,t,n){"use strict";cc._RF.push(t,"2c091hmZBNGxYOoU8JSvA6c","Util"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Constants"),o=function(){function e(){}return e.cutstr=function(e,t){for(var n=0,r=new String,o=e.length,i=0;i<o;i++){var s=e.charAt(i);if(n++,escape(s).length>4&&n++,r=r.concat(s),n>=t)return r=r.concat("...")}if(n<t)return e},e.getPlayerCntByType=function(e){return e==r.GameType.MACHINE2||e==r.GameType.MATCH2||e==r.GameType.TEAM2?2:4},e.loadScene=function(e){cc.director.preloadScene(e,function(){cc.log("Next scene preloaded:",e)}),cc.director.loadScene(e)},e}();n.default=o,cc._RF.pop()},{"../Constants":"Constants"}],WXPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"59c55SEb7ZNk6laeRYJ7tLA","WXPlatform");var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../library/wechat/wxApi"),s=function(){function e(){}return e.prototype.getOpenID=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:console.log("get openId"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,i.wxApi.callFunction("login")];case 2:return e=n.sent(),console.log("call login succ",e),[2,e.result.openid];case 3:return t=n.sent(),console.log("call login fail",t),[3,4];case 4:return[2]}})})},e.prototype.authorize=function(){return r(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,4]),[4,i.wxApi.authorize("scope.userInfo")];case 1:return r.sent(),console.log("authorize already"),[3,4];case 2:return r.sent(),console.log("authorize wait"),e=window.innerWidth/2-125,t=window.innerHeight/1.2,n=wx.createUserInfoButton({type:"text",text:"\u5fae\u4fe1\u767b\u9646",image:"",style:{left:e,top:t,width:250,height:43,lineHeight:43,backgroundColor:"#FC3768",color:"#ffffff",textAlign:"center",fontSize:18,borderRadius:4}}),[4,new Promise(function(e){n.onTap(function(t){console.log("authorize finish:",t),t.userInfo&&(n.destroy(),e())})})];case 3:return r.sent(),[3,4];case 4:return[2]}})})},e.prototype.getUserInfo=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,i.wxApi.getUserInfo(!1,"zh_CN")];case 1:return[2,e.sent().userInfo]}})})},e.prototype.shareAppMessage=function(e,t,n){return r(this,void 0,void 0,function(){return o(this,function(r){return wx.shareAppMessage({title:e,imageUrl:t,query:n}),[2]})})},e.prototype.getLaunchOption=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){return(e=wx.getLaunchOptionsSync())&&e.query?[2,{query:e.query,scene:e.scene}]:[2]})})},e.prototype.getLaunchOptionOnShow=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,i.wxApi.onShow()];case 1:return(e=t.sent())&&e.query?[2,{query:e.query,scene:e.scene}]:[2]}})})},e.prototype.showLoading=function(e){return void 0===e&&(e=""),r(this,void 0,void 0,function(){return o(this,function(t){return wx.showLoading({title:e,mask:!0}),[2]})})},e.prototype.hideLoading=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return wx.hideLoading({}),[2]})})},e.prototype.showToast=function(e,t){return void 0===t&&(t=1e3),r(this,void 0,void 0,function(){return o(this,function(n){return wx.showToast({title:e,icon:"none",duration:t}),[2]})})},e.prototype.hideToast=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return wx.hideToast({}),[2]})})},e}();n.default=s,cc._RF.pop()},{"../../library/wechat/wxApi":"wxApi"}],WelcomeViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"adccctWljBJtY+ZGVmHgZJB","WelcomeViewMediator");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../Constants"),a=e("../model/UserProxy"),c=e("../services/platform/IPlatform"),_=e("../services/mgobe/MgobeService"),u=function(e){function t(n){return e.call(this,t.NAME,n)||this}return r(t,e),t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.onRegister=function(){this.initialization(),this.registerOnShow()},t.prototype.onRemove=function(){},t.prototype.initialization=function(){return o(this,void 0,void 0,function(){var e,t,n,r=this;return i(this,function(o){switch(o.label){case 0:return e=this.facade.retrieveProxy(a.default.NAME),[4,c.Platform().getOpenID()];case 1:return t=o.sent(),e.setOpenId(t),[4,c.Platform().authorize()];case 2:return o.sent(),this.viewComponent.popupLayer.getComponent("PopupView").showLoading(),e.getUserInfo().avatarUrl?[3,4]:[4,c.Platform().getUserInfo()];case 3:n=o.sent(),e.setUserInfo(n),o.label=4;case 4:return _.default.initMgobeSDK(e.getOpenId(),s.Config.MGOBEGameId,s.Config.MGOBESecretKey,s.Config.MGOBEHost,"",function(t){t.code===MGOBE.ErrCode.EC_OK?(e.setPlayerId(MGOBE.Player.id),r.loadLaunchOption(),cc.director.loadScene(s.Scene.MENU)):console.log("initialization fail")}),[2]}})})},t.prototype.loadLaunchOption=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return e=this.facade.retrieveProxy(a.default.NAME),[4,c.Platform().getLaunchOption()];case 1:return(t=n.sent())&&e.setLaunch(t),[2]}})})},t.prototype.registerOnShow=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return e=this.facade.retrieveProxy(a.default.NAME),[4,c.Platform().getLaunchOptionOnShow()];case 1:return t=n.sent(),console.log("onShow",t),e.setLaunch(t),[2]}})})},t.NAME="WelcomeViewMediator",t}(puremvc.Mediator);n.default=u,cc._RF.pop()},{"../Constants":"Constants","../model/UserProxy":"UserProxy","../services/mgobe/MgobeService":"MgobeService","../services/platform/IPlatform":"IPlatform"}],WelcomeView:[function(e,t,n){"use strict";cc._RF.push(t,"e8f31Ef7w1IZr7rEQ1PVtqD","WelcomeView");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../AppFacade"),s=e("../WelcomeViewMediator"),a=cc._decorator,c=a.ccclass,_=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popupLayer=null,t}return r(t,e),t.prototype.start=function(){i.default.getInstance().registerMediator(new s.default(this))},t.prototype.onDestroy=function(){i.default.getInstance().removeMediator(s.default.NAME)},t.prototype.update=function(e){},o([_(cc.Node)],t.prototype,"popupLayer",void 0),t=o([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../AppFacade":"AppFacade","../WelcomeViewMediator":"WelcomeViewMediator"}],wxApi:[function(e,t,n){"use strict";cc._RF.push(t,"7a96eQ70IBDtrSyAUngGjty","wxApi");var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Constants"),s=function(){function e(){}return e.login=function(){return r(this,void 0,Promise,function(){return o(this,function(e){return[2,new Promise(function(e,t){wx.login({success:function(t){e(t)},fail:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.apply(void 0,e)},complete:function(){}})})]})})},e.callFunction=function(e){return r(this,void 0,Promise,function(){return o(this,function(t){return wx.cloud.init({env:i.Config.WXCloudEnvID}),[2,new Promise(function(t,n){wx.cloud.callFunction({name:e,success:function(e){t(e)},fail:function(){n()},complete:function(){}})})]})})},e.checkSession=function(){return r(this,void 0,Promise,function(){return o(this,function(e){return[2,new Promise(function(e,t){console.log("wx checksession"),wx.checkSession({success:function(){e()},fail:function(){t()},complete:function(){}})})]})})},e.authorize=function(e){return r(this,void 0,Promise,function(){return o(this,function(t){return[2,new Promise(function(t,n){wx.authorize({scope:e,success:function(e){t(e)},fail:function(e){n(e)}})})]})})},e.getUserInfo=function(e,t){return r(this,void 0,Promise,function(){return o(this,function(n){return[2,new Promise(function(n,r){wx.getUserInfo({withCredentials:e,lang:t,success:function(e){n(e)},fail:function(e){r(e)}})})]})})},e.getSetting=function(){return r(this,void 0,Promise,function(){return o(this,function(e){return[2,new Promise(function(e,t){wx.getSetting({success:function(t){e(t)},fail:function(){t()}})})]})})},e.authSettingOfUserInfo=function(){return r(this,void 0,Promise,function(){var t=this;return o(this,function(n){return[2,new Promise(function(n,i){return r(t,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.getSetting()];case 1:return(t=r.sent()).authSetting&&t.authSetting["scope.userInfo"]?n(!0):n(!1),[3,3];case 2:return r.sent(),n(!1),[3,3];case 3:return[2]}})})})]})})},e.onShow=function(){return r(this,void 0,Promise,function(){var e=this;return o(this,function(t){return[2,new Promise(function(t,n){return r(e,void 0,void 0,function(){return o(this,function(e){return wx.onShow(function(e){t(e)}),[2]})})})]})})},e.getUserGameLabel=function(){},e}();n.wxApi=s,cc._RF.pop()},{"../../Constants":"Constants"}]},{},["AppFacade","Constants","Start","GameCommand","UserCommand","wxApi","RoomProxy","UserProxy","GameVO","RoomVO","UserVO","MgobeService","DevPlatform","IPlatform","WXPlatform","Util","GameViewMediator","MenuViewMediator","RoomViewMediator","WelcomeViewMediator","GameView","MenuView","PopupView","RoomView","WelcomeView"]);