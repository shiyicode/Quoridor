window.__require=function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}}var _=n[s]={exports:{}};t[s][0].call(_.exports,function(e){return r(t[s][1][e]||e)},_,_.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){!function(e,o){"object"==typeof n&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof n?n.MGOBE=o():o()}(0,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){var o;e.exports=o=o||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},r=o.lib={},i=r.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,r=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<r;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(i=0;i<r;i+=4)t[o+i>>>2]=n[i>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,o=[],r=function(t){t=t;var n=987654321,o=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&o)<<16)+(t=18e3*(65535&t)+(t>>16)&o)&o;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var a=r(4294967296*(n||e.random()));n=987654071*a(),o.push(4294967296*a()|0)}return new s.init(o,t)}}),a=o.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new s.init(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],r=0;r<n;r++){var i=t[r>>>2]>>>24-r%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new s.init(n,t)}},_=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=_.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,r=n.sigBytes,i=this.blockSize,a=r/(4*i),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*i,l=e.min(4*c,r);if(c){for(var _=0;_<c;_+=i)this._doProcessBlock(o,_);var u=o.splice(0,c);n.sigBytes-=l}return new s.init(u,l)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(r.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math)},function(e,t){},function(e){e.exports={sdkType:1,version:"1.2.8"}},function(e,t,n){var o,r,i;e.exports=(o=n(0),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var r=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)r.push(o.charAt(s>>>6*(3-a)&63));var c=o.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var r=0;r<n.length;r++)o[n.charCodeAt(r)]=r}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var o=[],r=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,c=n[e.charCodeAt(s)]>>>6-s%4*2;o[r>>>2]|=(a|c)<<24-r%4*8,r++}return i.create(o,r)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(e,t,n){var o;e.exports=(o=n(0),n(5),n(6),o.HmacSHA1)},function(e,t,n){var o,r,i,s,a,c,l,_;e.exports=(i=(r=o=n(0)).lib,s=i.WordArray,a=i.Hasher,c=r.algo,l=[],_=c.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],i=n[2],s=n[3],a=n[4],c=0;c<80;c++){if(c<16)l[c]=0|e[t+c];else{var _=l[c-3]^l[c-8]^l[c-14]^l[c-16];l[c]=_<<1|_>>>31}var u=(o<<5|o>>>27)+a+l[c];u+=c<20?1518500249+(r&i|~r&s):c<40?1859775393+(r^i^s):c<60?(r&i|r&s|i&s)-1894007588:(r^i^s)-899497514,a=s,s=i,i=r<<30|r>>>2,r=o,o=u}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(_),r.HmacSHA1=a._createHmacHelper(_),o.SHA1)},function(e,t,n){var o,r,i,s;e.exports=(r=(o=n(0)).lib.Base,i=o.enc,s=i.Utf8,void(o.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),i=this._iKey=t.clone(),a=r.words,c=i.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;r.sigBytes=i.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){var o,r;void 0===(r="function"==typeof(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r,i,s="";this.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},this.parseInt=function(e,t){return/^(-|\+)?([0-9]+|Infinity)$/.test(e)?parseInt(e,t):NaN},this.seps="cfhistuCFHISTU",this.minLength=0<parseInt(n,10)?n:0,this.salt="string"==typeof t?t:"","string"==typeof o&&(this.alphabet=o);for(var a=0;a!==this.alphabet.length;a++)-1===s.indexOf(this.alphabet.charAt(a))&&(s+=this.alphabet.charAt(a));if(this.alphabet=s,this.alphabet.length<16)throw"error: alphabet must contain at least X unique characters".replace("X",16);if(-1!==this.alphabet.search(" "))throw"error: alphabet cannot contain spaces";for(var c=0;c!==this.seps.length;c++){var l=this.alphabet.indexOf(this.seps.charAt(c));-1===l?this.seps=this.seps.substr(0,c)+" "+this.seps.substr(c+1):this.alphabet=this.alphabet.substr(0,l)+" "+this.alphabet.substr(l+1)}this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this._shuffle(this.seps,this.salt),(!this.seps.length||3.5<this.alphabet.length/this.seps.length)&&(r=Math.ceil(this.alphabet.length/3.5))>this.seps.length&&(i=r-this.seps.length,this.seps+=this.alphabet.substr(0,i),this.alphabet=this.alphabet.substr(i)),this.alphabet=this._shuffle(this.alphabet,this.salt);var _=Math.ceil(this.alphabet.length/12);this.alphabet.length<3?(this.guards=this.seps.substr(0,_),this.seps=this.seps.substr(_)):(this.guards=this.alphabet.substr(0,_),this.alphabet=this.alphabet.substr(_))}var t;return(t=[{key:"encode",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return"";if(t[0]&&t[0].constructor===Array&&!(t=t[0]).length)return"";for(var o=0;o!==t.length;o++)if(t[o]=this.parseInt(t[o],10),!(0<=t[o]))return"";return this._encode(t)}},{key:"decode",value:function(e){return e&&e.length&&"string"==typeof e?this._decode(e,this.alphabet):[]}},{key:"encodeHex",value:function(e){if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(var t=e.match(/[\w\W]{1,12}/g),n=0;n!==t.length;n++)t[n]=parseInt("1"+t[n],16);return this.encode.apply(this,t)}},{key:"decodeHex",value:function(e){for(var t=[],n=this.decode(e),o=0;o!==n.length;o++)t+=n[o].toString(16).substr(1);return t}},{key:"_encode",value:function(e){for(var t,n=this.alphabet,o=0,r=0;r!==e.length;r++)o+=e[r]%(r+100);for(var i=t=n.charAt(o%n.length),s=0;s!==e.length;s++){var a=e[s],c=i+this.salt+n;n=this._shuffle(n,c.substr(0,n.length));var l=this._toAlphabet(a,n);if(t+=l,s+1<e.length){var _=(a%=l.charCodeAt(0)+s)%this.seps.length;t+=this.seps.charAt(_)}}if(t.length<this.minLength){var u=(o+t[0].charCodeAt(0))%this.guards.length,f=this.guards[u];(t=f+t).length<this.minLength&&(u=(o+t[2].charCodeAt(0))%this.guards.length,t+=f=this.guards[u])}for(var h=parseInt(n.length/2,10);t.length<this.minLength;){var d=(t=(n=this._shuffle(n,n)).substr(h)+t+n.substr(0,h)).length-this.minLength;0<d&&(t=t.substr(d/2,this.minLength))}return t}},{key:"_decode",value:function(e,t){var n=[],o=0,r=new RegExp("[".concat(this.escapeRegExp(this.guards),"]"),"g"),i=e.replace(r," "),s=i.split(" ");if(3!==s.length&&2!==s.length||(o=1),void 0!==(i=s[o])[0]){var a=i[0];i=i.substr(1),r=new RegExp("[".concat(this.escapeRegExp(this.seps),"]"),"g"),s=(i=i.replace(r," ")).split(" ");for(var c=0;c!==s.length;c++){var l=s[c],_=a+this.salt+t;t=this._shuffle(t,_.substr(0,t.length)),n.push(this._fromAlphabet(l,t))}this.encode(n)!==e&&(n=[])}return n}},{key:"_shuffle",value:function(e,t){var n;if(!t.length)return e;for(var o=(e=e.split("")).length-1,r=0,i=0,s=0;0<o;o--,r++){r%=t.length,i+=n=t.charCodeAt(r);var a=e[s=(n+r+i)%o];e[s]=e[o],e[o]=a}return e.join("")}},{key:"_toAlphabet",value:function(e,t){for(var n="";n=t.charAt(e%t.length)+n,e=parseInt(e/t.length,10););return n}},{key:"_fromAlphabet",value:function(e,t){return e.split("").map(function(e){return t.indexOf(e)}).reduce(function(e,n){return e*t.length+n},0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t),e}();e.default=t})?o.apply(t,[t]):o)||(e.exports=r)},function(e,t,n){(function(o){var r,i,s;i=[n(10)],void 0===(s="function"==typeof(r=function(e,t){"use strict";var r,i={};return i.ByteBuffer=e,i.Long=e.Long||null,i.VERSION="5.0.3",i.WIRE_TYPES={},i.WIRE_TYPES.VARINT=0,i.WIRE_TYPES.BITS64=1,i.WIRE_TYPES.LDELIM=2,i.WIRE_TYPES.STARTGROUP=3,i.WIRE_TYPES.ENDGROUP=4,i.WIRE_TYPES.BITS32=5,i.PACKABLE_WIRE_TYPES=[i.WIRE_TYPES.VARINT,i.WIRE_TYPES.BITS64,i.WIRE_TYPES.BITS32],i.TYPES={int32:{name:"int32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},uint64:{name:"uint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.UZERO:void 0},sint64:{name:"sint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},bool:{name:"bool",wireType:i.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:i.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:i.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.ZERO:void 0},float:{name:"float",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:i.WIRE_TYPES.STARTGROUP,defaultValue:null}},i.MAP_KEY_TYPES=[i.TYPES.int32,i.TYPES.sint32,i.TYPES.sfixed32,i.TYPES.uint32,i.TYPES.fixed32,i.TYPES.int64,i.TYPES.sint64,i.TYPES.sfixed64,i.TYPES.uint64,i.TYPES.fixed64,i.TYPES.bool,i.TYPES.string,i.TYPES.bytes],i.ID_MIN=1,i.ID_MAX=536870911,i.convertFieldsToCamelCase=!1,i.populateAccessors=!0,i.populateDefaults=!0,i.Util=((r={}).IS_NODE=!("object"!=typeof o||o+""!="[object process]"||o.browser),r.XHR=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,n=0;n<e.length;n++){try{t=e[n]()}catch(e){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},r.fetch=function(e,t){if(t&&"function"!=typeof t&&(t=null),r.IS_NODE){var o=n(12);if(t)o.readFile(e,function(e,n){t(e?null:""+n)});else try{return o.readFileSync(e)}catch(e){return null}}else{var i=r.XHR();if(i.open("GET",e,!!t),i.setRequestHeader("Accept","text/plain"),"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/plain"),!t)return i.send(null),200==i.status||0==i.status&&"string"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&"string"==typeof i.responseText?t(i.responseText):t(null))},4==i.readyState)return;i.send(null)}},r.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},r),i.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,FQTYPEREF:/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},i.DotProto=function(e,t){var n={},o=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},r=o.prototype;r._readString=function(){var e='"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;e.lastIndex=this.index-1;var n=e.exec(this.source);if(!n)throw Error("unterminated string");return this.index=e.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,n[1]},r.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var e,n,o;do{for(e=!1;t.WHITESPACE.test(o=this.source.charAt(this.index));)if("\n"===o&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(o=this.source.charAt(this.index)))return"/";do{if("\n"===o&&++this.line,++this.index===this.source.length)return null;n=o,o=this.source.charAt(this.index)}while("*"!==n||"/"!==o);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;var r=this.index;if(t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(r++)))for(;r<this.source.length&&!t.DELIM.test(this.source.charAt(r));)++r;var i=this.source.substring(this.index,this.index=r);return'"'!==i&&"'"!==i||(this._stringOpen=i),i},r.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},r.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},r.omit=function(e){return this.peek()===e&&(this.next(),!0)},r.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},n.Tokenizer=o;var i=function(e){this.tn=new o(e),this.proto3=!1},s=i.prototype;function a(e,n){var o=-1,r=1;if("-"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))o=parseInt(e);else if(t.NUMBER_HEX.test(e))o=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(r<0?"-":"")+e);o=parseInt(e.substring(1),8)}if(o=r*o|0,!n&&o<0)throw Error("illegal id value: "+(r<0?"-":"")+e);return o}function c(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return n*(1/0);if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(n<0?"-":"")+e)}function l(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}return s.parse=function(){var e,n,o={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},r=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!r||null!==o.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),o.package=e;break;case"import":if(!r)throw Error("unexpected 'import'");("public"===(e=this.tn.peek())||(n="weak"===e))&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n||o.imports.push(e);break;case"syntax":if(!r)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(o.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(o,null),r=!1;break;case"enum":this._parseEnum(o),r=!1;break;case"option":this._parseOption(o);break;case"service":this._parseService(o);break;case"extend":this._parseExtend(o);break;default:throw Error("unexpected '"+e+"'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete o.name,o},i.parse=function(e){return new i(e).parse()},s._readString=function(){var e,t,n="";do{if("'"!==(t=this.tn.next())&&'"'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return n},s._readValue=function(e){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return c(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},s._parseOption=function(e,n){var o=this.tn.next(),r=!1;if("("===o&&(r=!0,o=this.tn.next()),!t.TYPEREF.test(o))throw Error("illegal option name: "+o);var i=o;r&&(this.tn.skip(")"),i="("+i+")",o=this.tn.peek(),t.FQTYPEREF.test(o)&&(i+=o,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,i),n||this.tn.skip(";")},s._parseOptionValue=function(e,n){var o=this.tn.peek();if("{"!==o)l(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(o=this.tn.next());){if(!t.NAME.test(o))throw Error("illegal option name: "+n+"."+o);this.tn.omit(":")?l(e.options,n+"."+o,this._readValue(!0)):this._parseOptionValue(e,n+"."+o)}},s._parseService=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal service name at line "+this.tn.line+": "+n);var o={name:n,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(o);else{if("rpc"!==n)throw Error("illegal service token: "+n);this._parseServiceRPC(o)}this.tn.omit(";"),e.services.push(o)},s._parseServiceRPC=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal rpc service method name: "+n);var o=n,r={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(r.request_stream=!0,n=this.tn.next()),!t.TYPEREF.test(n))throw Error("illegal rpc service request type: "+n);if(r.request=n,this.tn.skip(")"),"returns"!==(n=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+n);if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(r.response_stream=!0,n=this.tn.next()),r.response=n,this.tn.skip(")"),"{"===(n=this.tn.peek())){for(this.tn.next();"}"!==(n=this.tn.next());){if("option"!==n)throw Error("illegal rpc service token: "+n);this._parseOption(r)}this.tn.omit(";")}else this.tn.skip(";");void 0===e.rpc&&(e.rpc={}),e.rpc[o]=r},s._parseMessage=function(e,n){var o=!!n,r=this.tn.next(),i={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(r))throw Error("illegal "+(o?"group":"message")+" name: "+r);for(i.name=r,o&&(this.tn.skip("="),n.id=a(this.tn.next()),i.isGroup=!0),"["===(r=this.tn.peek())&&n&&this._parseFieldOptions(n),this.tn.skip("{");"}"!==(r=this.tn.next());)if(t.RULE.test(r))this._parseMessageField(i,r);else if("oneof"===r)this._parseMessageOneOf(i);else if("enum"===r)this._parseEnum(i);else if("message"===r)this._parseMessage(i);else if("option"===r)this._parseOption(i);else if("service"===r)this._parseService(i);else if("extensions"===r)i.hasOwnProperty("extensions")?i.extensions=i.extensions.concat(this._parseExtensionRanges()):i.extensions=this._parseExtensionRanges();else if("reserved"===r)this._parseIgnored();else if("extend"===r)this._parseExtend(i);else{if(!t.TYPEREF.test(r))throw Error("illegal message token: "+r);if(!this.proto3)throw Error("illegal field rule: "+r);this._parseMessageField(i,"optional",r)}return this.tn.omit(";"),e.messages.push(i),i},s._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},s._parseMessageField=function(e,n,o){if(!t.RULE.test(n))throw Error("illegal message field rule: "+n);var r,i={rule:n,type:"",name:"",options:{},id:0};if("map"===n){if(o)throw Error("illegal type: "+o);if(this.tn.skip("<"),r=this.tn.next(),!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(i.keytype=r,this.tn.skip(","),r=this.tn.next(),!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("illegal message field: "+r);if(i.type=r,this.tn.skip(">"),r=this.tn.next(),!t.NAME.test(r))throw Error("illegal message field name: "+r);i.name=r,this.tn.skip("="),i.id=a(this.tn.next()),"["===(r=this.tn.peek())&&this._parseFieldOptions(i),this.tn.skip(";")}else if("group"===(o=void 0!==o?o:this.tn.next())){var s=this._parseMessage(e,i);if(!/^[A-Z]/.test(s.name))throw Error("illegal group name: "+s.name);i.type=s.name,i.name=s.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error("illegal message field type: "+o);if(i.type=o,r=this.tn.next(),!t.NAME.test(r))throw Error("illegal message field name: "+r);i.name=r,this.tn.skip("="),i.id=a(this.tn.next()),"["===(r=this.tn.peek())&&this._parseFieldOptions(i),this.tn.skip(";")}return e.fields.push(i),i},s._parseMessageOneOf=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal oneof name: "+n);var o,r=n,i=[];for(this.tn.skip("{");"}"!==(n=this.tn.next());)(o=this._parseMessageField(e,"optional",n)).oneof=r,i.push(o.id);this.tn.omit(";"),e.oneofs[r]=i},s._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},s._parseEnum=function(e){var n={name:"",values:[],options:{}},o=this.tn.next();if(!t.NAME.test(o))throw Error("illegal name: "+o);for(n.name=o,this.tn.skip("{");"}"!==(o=this.tn.next());)if("option"===o)this._parseOption(n);else{if(!t.NAME.test(o))throw Error("illegal name: "+o);this.tn.skip("=");var r={name:o,id:a(this.tn.next(),!0)};"["===(o=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),n.values.push(r)}this.tn.omit(";"),e.enums.push(n)},s._parseExtensionRanges=function(){var t,n,o,r=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":o=e.ID_MIN;break;case"max":o=e.ID_MAX;break;default:o=c(t)}if(n.push(o),2===n.length)break;if("to"!==this.tn.peek()){n.push(o);break}this.tn.next()}r.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),r},s._parseExtend=function(e){var n=this.tn.next();if(!t.TYPEREF.test(n))throw Error("illegal extend reference: "+n);var o={ref:n,fields:[]};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if(t.RULE.test(n))this._parseMessageField(o,n);else{if(!t.TYPEREF.test(n))throw Error("illegal extend token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(o,"optional",n)}return this.tn.omit(";"),e.messages.push(o),o},s.toString=function(){return"Parser at line "+this.tn.line},n.Parser=i,n}(i,i.Lang),i.Reflect=function(t){var n={},o=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},r=o.prototype;r.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+"."+e;return e},r.toString=function(e){return(e?this.className+" ":"")+this.fqn()},r.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},n.T=o;var i=function(e,t,n,r,i){o.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=r||{},this.syntax=i||"proto2"},s=i.prototype=Object.create(o.prototype);s.getChildren=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],n=0,o=this.children.length;n<o;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},s.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof _.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof _.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},s.getChild=function(e){for(var t="number"==typeof e?"id":"name",n=0,o=this.children.length;n<o;++n)if(this.children[n][t]===e)return this.children[n];return null},s.resolve=function(e,t){var o,r="string"==typeof e?e.split("."):e,i=this,s=0;if(""===r[s]){for(;null!==i.parent;)i=i.parent;s++}do{do{if(!(i instanceof n.Namespace)){i=null;break}if(!(o=i.getChild(r[s]))||!(o instanceof n.T)||t&&!(o instanceof n.Namespace)){i=null;break}i=o,s++}while(s<r.length);if(null!=i)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=i);return i},s.qn=function(e){var t=[],o=e;do{t.unshift(o.name),o=o.parent}while(null!==o);for(var r=1;r<=t.length;r++){var i=t.slice(t.length-r);if(e===this.resolve(i,e instanceof n.Namespace))return i.join(".")}return e.fqn()},s.build=function(){for(var e,t={},n=this.children,o=0,r=n.length;o<r;++o)(e=n[o])instanceof i&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},s.buildOpt=function(){for(var e={},t=Object.keys(this.options),n=0,o=t.length;n<o;++n){var r=t[n],i=this.options[t[n]];e[r]=i}return e},s.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},n.Namespace=i;var a=function(e,n,o,r,i){if(this.type=e,this.resolvedType=n,this.isMapKey=o,this.syntax=r,this.name=i,o&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)},c=a.prototype;function l(e,n){if(e&&"number"==typeof e.low&&"number"==typeof e.high&&"boolean"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if("string"==typeof e)return t.Long.fromString(e,n||!1,10);if("number"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error("not convertible to Long")}a.defaultFieldValue=function(n){if("string"==typeof n&&(n=t.TYPES[n]),void 0===n.defaultValue)throw Error("default value for type "+n.name+" is not supported");return n==t.TYPES.bytes?new e(0):n.defaultValue},c.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},c.verifyValue=function(n){var o=this;function r(e,t){throw Error("Illegal value for "+o.toString(!0)+" of type "+o.type.name+": "+e+" ("+t+")")}switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&r(typeof n,"not an integer"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&r(typeof n,"not an integer"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return l(n,!1)}catch(e){r(typeof n,e.message)}else r(typeof n,"requires Long.js");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return l(n,!0)}catch(e){r(typeof n,e.message)}else r(typeof n,"requires Long.js");case t.TYPES.bool:return"boolean"!=typeof n&&r(typeof n,"not a boolean"),n;case t.TYPES.float:case t.TYPES.double:return"number"!=typeof n&&r(typeof n,"not a number"),n;case t.TYPES.string:return"string"==typeof n||n&&n instanceof String||r(typeof n,"not a string"),""+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n,"base64");case t.TYPES.enum:var i=this.resolvedType.getChildren(t.Reflect.Enum.Value);for(a=0;a<i.length;a++){if(i[a].name==n)return i[a].id;if(i[a].id==n)return i[a].id}if("proto3"===this.syntax)return("number"!=typeof n||n==n&&n%1!=0)&&r(typeof n,"not an integer"),(n>4294967295||n<0)&&r(typeof n,"not in range for uint32"),n;r(n,"not a valid enum value");case t.TYPES.group:case t.TYPES.message:if(n&&"object"==typeof n||r(typeof n,"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){var s={};for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);n=s}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},c.calculateLength=function(n,o){if(null===o)return 0;var r;switch(this.type){case t.TYPES.int32:return o<0?e.calculateVarint64(o):e.calculateVarint32(o);case t.TYPES.uint32:return e.calculateVarint32(o);case t.TYPES.sint32:return e.calculateVarint32(e.zigZagEncode32(o));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return e.calculateVarint64(o);case t.TYPES.sint64:return e.calculateVarint64(e.zigZagEncode64(o));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return e.calculateVarint32(o);case t.TYPES.double:return 8;case t.TYPES.string:return r=e.calculateUTF8Bytes(o),e.calculateVarint32(r)+r;case t.TYPES.bytes:if(o.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+o.remaining()+" bytes remaining");return e.calculateVarint32(o.remaining())+o.remaining();case t.TYPES.message:return r=this.resolvedType.calculate(o),e.calculateVarint32(r)+r;case t.TYPES.group:return(r=this.resolvedType.calculate(o))+e.calculateVarint32(n<<3|t.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+o+" (unknown type)")},c.encodeValue=function(n,o,r){if(null===o)return r;switch(this.type){case t.TYPES.int32:o<0?r.writeVarint64(o):r.writeVarint32(o);break;case t.TYPES.uint32:r.writeVarint32(o);break;case t.TYPES.sint32:r.writeVarint32ZigZag(o);break;case t.TYPES.fixed32:r.writeUint32(o);break;case t.TYPES.sfixed32:r.writeInt32(o);break;case t.TYPES.int64:case t.TYPES.uint64:r.writeVarint64(o);break;case t.TYPES.sint64:r.writeVarint64ZigZag(o);break;case t.TYPES.fixed64:r.writeUint64(o);break;case t.TYPES.sfixed64:r.writeInt64(o);break;case t.TYPES.bool:"string"==typeof o?r.writeVarint32("false"===o.toLowerCase()?0:!!o):r.writeVarint32(o?1:0);break;case t.TYPES.enum:r.writeVarint32(o);break;case t.TYPES.float:r.writeFloat32(o);break;case t.TYPES.double:r.writeFloat64(o);break;case t.TYPES.string:r.writeVString(o);break;case t.TYPES.bytes:if(o.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+o.remaining()+" bytes remaining");var i=o.offset;r.writeVarint32(o.remaining()),r.append(o),o.offset=i;break;case t.TYPES.message:var s=(new e).LE();this.resolvedType.encode(o,s),r.writeVarint32(s.offset),r.append(s.flip());break;case t.TYPES.group:this.resolvedType.encode(o,r),r.writeVarint32(n<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+o+" (unknown type)")}return r},c.decode=function(e,n,o){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var r,i;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(i=e.readVarint32(),e.remaining()<i)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+i+" required but got only "+e.remaining());return(r=e.clone()).limit=r.offset+i,e.offset+=i,r;case t.TYPES.message:return i=e.readVarint32(),this.resolvedType.decode(e,i);case t.TYPES.group:return this.resolvedType.decode(e,-1,o)}throw Error("[INTERNAL] Illegal decode type")},c.valueFromString=function(n){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(n));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(n);case t.TYPES.bool:return"true"===n;case t.TYPES.string:return this.verifyValue(n);case t.TYPES.bytes:return e.fromBinary(n)}},c.valueToString=function(e){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===t.TYPES.bytes?e.toString("binary"):e.toString()},n.Element=a;var _=function(e,t,n,o,r,s){i.call(this,e,t,n,o,s),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!r,this._fields=null,this._fieldsById=null,this._fieldsByName=null},u=_.prototype=Object.create(i.prototype);function f(e,n){var o=n.readVarint32(),r=7&o,i=o>>>3;switch(r){case t.WIRE_TYPES.VARINT:do{o=n.readUint8()}while(128==(128&o));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:o=n.readVarint32(),n.offset+=o;break;case t.WIRE_TYPES.STARTGROUP:f(i,n);break;case t.WIRE_TYPES.ENDGROUP:if(i===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+i+" ("+e+" expected)");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+r)}return!0}u.build=function(n){if(this.clazz&&!n)return this.clazz;var o=function(t,n){var o=n.getChildren(t.Reflect.Message.Field),r=n.getChildren(t.Reflect.Message.OneOf),i=function(s,a){t.Builder.Message.call(this);for(var c=0,l=r.length;c<l;++c)this[r[c].name]=null;for(c=0,l=o.length;c<l;++c){var _=o[c];this[_.name]=_.repeated?[]:_.map?new t.Map(_):null,!_.required&&"proto3"!==n.syntax||null===_.defaultValue||(this[_.name]=_.defaultValue)}var u;if(arguments.length>0)if(1!==arguments.length||null===s||"object"!=typeof s||!("function"!=typeof s.encode||s instanceof i)||Array.isArray(s)||s instanceof t.Map||e.isByteBuffer(s)||s instanceof ArrayBuffer||t.Long&&s instanceof t.Long)for(c=0,l=arguments.length;c<l;++c)void 0!==(u=arguments[c])&&this.$set(o[c].name,u);else this.$set(s)},s=i.prototype=Object.create(t.Builder.Message.prototype);s.add=function(e,o,r){var i=n._fieldsByName[e];if(!r){if(!i)throw Error(this+"#"+e+" is undefined");if(!(i instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+i.toString(!0));if(!i.repeated)throw Error(this+"#"+e+" is not a repeated field");o=i.verifyValue(o,!0)}return null===this[e]&&(this[e]=[]),this[e].push(o),this},s.$add=s.add,s.set=function(e,o,r){if(e&&"object"==typeof e){for(var i in r=o,e)e.hasOwnProperty(i)&&void 0!==(o=e[i])&&void 0===n._oneofsByName[i]&&this.$set(i,o,r);return this}var s=n._fieldsByName[e];if(r)this[e]=o;else{if(!s)throw Error(this+"#"+e+" is not a field: undefined");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));this[s.name]=o=s.verifyValue(o)}if(s&&s.oneof){var a=this[s.oneof.name];null!==o?(null!==a&&a!==s.name&&(this[a]=null),this[s.oneof.name]=s.name):a===e&&(this[s.oneof.name]=null)}return this},s.$set=s.set,s.get=function(e,o){if(o)return this[e];var r=n._fieldsByName[e];if(!(r&&r instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: undefined");if(!(r instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+r.toString(!0));return this[r.name]},s.$get=s.get;for(var a=0;a<o.length;a++){var c=o[a];c instanceof t.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var o=e.originalName.replace(/([A-Z])/g,function(e){return"_"+e}),r=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},i=function(){return this[e.name]};null===n.getChild("set"+t)&&(s["set"+t]=r),null===n.getChild("set_"+o)&&(s["set_"+o]=r),null===n.getChild("get"+t)&&(s["get"+t]=i),null===n.getChild("get_"+o)&&(s["get_"+o]=i)}(c)}function l(n,o,r,i){if(null===n||"object"!=typeof n){if(i&&i instanceof t.Reflect.Enum){var s=t.Reflect.Enum.getName(i.object,n);if(null!==s)return s}return n}if(e.isByteBuffer(n))return o?n.toBase64():n.toBuffer();if(t.Long.isLong(n))return r?n.toString():t.Long.fromValue(n);var a;if(Array.isArray(n))return a=[],n.forEach(function(e,t){a[t]=l(e,o,r,i)}),a;if(a={},n instanceof t.Map){for(var c=n.entries(),_=c.next();!_.done;_=c.next())a[n.keyElem.valueToString(_.value[0])]=l(_.value[1],o,r,n.valueElem.resolvedType);return a}var u=n.$type,f=void 0;for(var h in n)n.hasOwnProperty(h)&&(u&&(f=u.getChild(h))?a[h]=l(n[h],o,r,f.resolvedType):a[h]=l(n[h],o,r));return a}return s.encode=function(t,o){"boolean"==typeof t&&(o=t,t=void 0);var r=!1;t||(t=new e,r=!0);var i=t.littleEndian;try{return n.encode(this,t.LE(),o),(r?t.flip():t).LE(i)}catch(e){throw t.LE(i),e}},i.encode=function(e,t,n){return new i(e).encode(t,n)},s.calculate=function(){return n.calculate(this)},s.encodeDelimited=function(t,o){var r=!1;t||(t=new e,r=!0);var i=(new e).LE();return n.encode(this,i,o).flip(),t.writeVarint32(i.remaining()),t.append(i),r?t.flip():t},s.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},s.toArrayBuffer=s.encodeAB,s.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},s.toBuffer=s.encodeNB,s.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},s.toBase64=s.encode64,s.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},s.toHex=s.encodeHex,s.toRaw=function(e,t){return l(this,!!e,!!t,this.$type)},s.encodeJSON=function(){return JSON.stringify(l(this,!0,!0,this.$type))},i.decode=function(t,o,r){"string"==typeof o&&(r=o,o=-1),"string"==typeof t?t=e.wrap(t,r||"base64"):e.isByteBuffer(t)||(t=e.wrap(t));var i=t.littleEndian;try{var s=n.decode(t.LE(),o);return t.LE(i),s}catch(e){throw t.LE(i),e}},i.decodeDelimited=function(t,o){if("string"==typeof t?t=e.wrap(t,o||"base64"):e.isByteBuffer(t)||(t=e.wrap(t)),t.remaining()<1)return null;var r=t.offset,i=t.readVarint32();if(t.remaining()<i)return t.offset=r,null;try{var s=n.decode(t.slice(t.offset,t.offset+i).LE());return t.offset+=i,s}catch(e){throw t.offset+=i,e}},i.decode64=function(e){return i.decode(e,"base64")},i.decodeHex=function(e){return i.decode(e,"hex")},i.decodeJSON=function(e){return new i(JSON.parse(e))},s.toString=function(){return n.toString()},Object.defineProperty&&(Object.defineProperty(i,"$options",{value:n.buildOpt()}),Object.defineProperty(s,"$options",{value:i.$options}),Object.defineProperty(i,"$type",{value:n}),Object.defineProperty(s,"$type",{value:n})),i}(t,this);this._fields=[],this._fieldsById={},this._fieldsByName={},this._oneofsByName={};for(var r,i=0,s=this.children.length;i<s;i++)if((r=this.children[i])instanceof p||r instanceof _||r instanceof y){if(o.hasOwnProperty(r.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+r.toString(!0)+" cannot override static property '"+r.name+"'");o[r.name]=r.build()}else if(r instanceof _.Field)r.build(),this._fields.push(r),this._fieldsById[r.id]=r,this._fieldsByName[r.name]=r;else if(r instanceof _.OneOf)this._oneofsByName[r.name]=r;else if(!(r instanceof _.OneOf||r instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[i].toString(!0));return this.clazz=o},u.encode=function(e,t,n){for(var o,r,i=null,s=0,a=this._fields.length;s<a;++s)r=e[(o=this._fields[s]).name],o.required&&null===r?null===i&&(i=o):o.encode(n?r:o.verifyValue(r),t,e);if(null!==i){var c=Error("Missing at least one required field for "+this.toString(!0)+": "+i);throw c.encoded=t,c}return t},u.calculate=function(e){for(var t,n,o=0,r=0,i=this._fields.length;r<i;++r){if(n=e[(t=this._fields[r]).name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);o+=t.calculate(n,e)}return o},u.decode=function(e,n,o){"number"!=typeof n&&(n=-1);for(var r,i,s,a,c=e.offset,l=new this.clazz;e.offset<c+n||-1===n&&e.remaining()>0;){if(s=(r=e.readVarint32())>>>3,(i=7&r)===t.WIRE_TYPES.ENDGROUP){if(s!==o)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+s+" ("+(o?o+" expected":"not a group")+")");break}if(a=this._fieldsById[s]){if(a.repeated&&!a.options.packed)l[a.name].push(a.decode(i,e));else if(a.map){var _=a.decode(i,e);l[a.name].set(_[0],_[1])}else if(l[a.name]=a.decode(i,e),a.oneof){var u=l[a.oneof.name];null!==u&&u!==a.name&&(l[u]=null),l[a.oneof.name]=a.name}}else switch(i){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:var h=e.readVarint32();e.offset+=h;break;case t.WIRE_TYPES.STARTGROUP:for(;f(s,e););break;default:throw Error("Illegal wire type for unknown field "+s+" in "+this.toString(!0)+"#decode: "+i)}}for(var d=0,E=this._fields.length;d<E;++d)if(null===l[(a=this._fields[d]).name])if("proto3"===this.syntax)l[a.name]=a.defaultValue;else{if(a.required){var p=Error("Missing at least one required field for "+this.toString(!0)+": "+a.name);throw p.decoded=l,p}t.populateDefaults&&null!==a.defaultValue&&(l[a.name]=a.defaultValue)}return l},n.Message=_;var h=function(e,n,r,i,s,a,c,l,u,f){o.call(this,e,n,a),this.className="Message.Field",this.required="required"===r,this.repeated="repeated"===r,this.map="map"===r,this.keyType=i||null,this.type=s,this.resolvedType=null,this.id=c,this.options=l||{},this.defaultValue=null,this.oneof=u||null,this.syntax=f||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof _.ExtensionField||(this.name=t.Util.toCamelCase(this.name))},d=h.prototype=Object.create(o.prototype);d.build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},d.verifyValue=function(e,n){n=n||!1;var o,r=this;function i(e,t){throw Error("Illegal value for "+r.toString(!0)+" of type "+r.type.name+": "+e+" ("+t+")")}if(null===e)return this.required&&i(typeof e,"required"),"proto3"===this.syntax&&this.type!==t.TYPES.message&&i(typeof e,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){Array.isArray(e)||(e=[e]);var s=[];for(o=0;o<e.length;o++)s.push(this.element.verifyValue(e[o]));return s}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||i(typeof e,"expected ProtoBuf.Map or raw object for map field"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&i(typeof e,"no array expected"),this.element.verifyValue(e))},d.hasWirePresence=function(e,n){if("proto3"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},d.encode=function(n,o,r){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return o;try{var i;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){o.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),o.ensureCapacity(o.offset+=1);var s=o.offset;for(i=0;i<n.length;i++)this.element.encodeValue(this.id,n[i],o);var a=o.offset-s,c=e.calculateVarint32(a);if(c>1){var l=o.slice(s,o.offset);s+=c-1,o.offset=s,o.append(l)}o.writeVarint32(a,s-c)}else for(i=0;i<n.length;i++)o.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n[i],o);else this.map?n.forEach(function(n,r,i){var s=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);o.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),o.writeVarint32(s),o.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,r,o),o.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,n,o)},this):this.hasWirePresence(n,r)&&(o.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n,o))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return o},d.calculate=function(n,o){if(n=this.verifyValue(n),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return 0;var r=0;try{var i,s;if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(r+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),s=0,i=0;i<n.length;i++)s+=this.element.calculateLength(this.id,n[i]);r+=e.calculateVarint32(s),r+=s}else for(i=0;i<n.length;i++)r+=e.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,n[i]);else this.map?n.forEach(function(n,o,i){var s=e.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,o)+e.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);r+=e.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r+=e.calculateVarint32(s),r+=s},this):this.hasWirePresence(n,o)&&(r+=e.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,n))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return r},d.decode=function(e,n,o){var r,i;if(!(!this.map&&e==this.type.wireType||!o&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!o){i=n.readVarint32(),i=n.offset+i;for(var s=[];n.offset<i;)s.push(this.decode(this.type.wireType,n,!0));return s}if(this.map){var c=a.defaultFieldValue(this.keyType);if(r=a.defaultFieldValue(this.type),i=n.readVarint32(),n.remaining()<i)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+i+" required but got only "+n.remaining());var l=n.clone();for(l.limit=l.offset+i,n.offset+=i;l.remaining()>0;){var _=l.readVarint32();e=7&_;var u=_>>>3;if(1===u)c=this.keyElement.decode(l,e,u);else{if(2!==u)throw Error("Unexpected tag in map field key/value submessage");r=this.element.decode(l,e,u)}}return[c,r]}return this.element.decode(n,e,this.id)},n.Message.Field=h;var E=function(e,t,n,o,r,i,s){h.call(this,e,t,n,null,o,r,i,s),this.extension};E.prototype=Object.create(h.prototype),n.Message.ExtensionField=E,n.Message.OneOf=function(e,t,n){o.call(this,e,t,n),this.fields=[]};var p=function(e,t,n,o,r){i.call(this,e,t,n,o,r),this.className="Enum",this.object=null};p.getName=function(e,t){for(var n,o=Object.keys(e),r=0;r<o.length;++r)if(e[n=o[r]]===t)return n;return null},(p.prototype=Object.create(i.prototype)).build=function(e){if(this.object&&!e)return this.object;for(var n=new t.Builder.Enum,o=this.getChildren(p.Value),r=0,i=o.length;r<i;++r)n[o[r].name]=o[r].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},n.Enum=p;var R=function(e,t,n,r){o.call(this,e,t,n),this.className="Enum.Value",this.id=r};R.prototype=Object.create(o.prototype),n.Enum.Value=R;var m=function(e,t,n,r){o.call(this,e,t,n),this.field=r};m.prototype=Object.create(o.prototype),n.Extension=m;var y=function(e,t,n,o){i.call(this,e,t,n,o),this.className="Service",this.clazz=null};(y.prototype=Object.create(i.prototype)).build=function(n){return this.clazz&&!n?this.clazz:this.clazz=function(t,n){for(var o=function(e){t.Builder.Service.call(this),this.rpcImpl=e||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},r=o.prototype=Object.create(t.Builder.Service.prototype),i=n.getChildren(t.Reflect.Service.RPCMethod),s=0;s<i.length;s++)!function(t){r[t.name]=function(o,r){try{try{o=t.resolvedRequestType.clazz.decode(e.wrap(o))}catch(e){if(!(e instanceof TypeError))throw e}if(null===o||"object"!=typeof o)throw Error("Illegal arguments");o instanceof t.resolvedRequestType.clazz||(o=new t.resolvedRequestType.clazz(o)),this.rpcImpl(t.fqn(),o,function(e,o){if(e)r(e);else{null===o&&(o="");try{o=t.resolvedResponseType.clazz.decode(o)}catch(e){}o&&o instanceof t.resolvedResponseType.clazz?r(null,o):r(Error("Illegal response type received in service method "+n.name+"#"+t.name))}})}catch(e){setTimeout(r.bind(this,e),0)}},o[t.name]=function(e,n,r){new o(e)[t.name](n,r)},Object.defineProperty&&(Object.defineProperty(o[t.name],"$options",{value:t.buildOpt()}),Object.defineProperty(r[t.name],"$options",{value:o[t.name].$options}))}(i[s]);return Object.defineProperty&&(Object.defineProperty(o,"$options",{value:n.buildOpt()}),Object.defineProperty(r,"$options",{value:o.$options}),Object.defineProperty(o,"$type",{value:n}),Object.defineProperty(r,"$type",{value:n})),o}(t,this)},n.Service=y;var g=function(e,t,n,r){o.call(this,e,t,n),this.className="Service.Method",this.options=r||{}};(g.prototype=Object.create(o.prototype)).buildOpt=s.buildOpt,n.Service.Method=g;var S=function(e,t,n,o,r,i,s,a){g.call(this,e,t,n,a),this.className="Service.RPCMethod",this.requestName=o,this.responseName=r,this.requestStream=i,this.responseStream=s,this.resolvedRequestType=null,this.resolvedResponseType=null};return S.prototype=Object.create(g.prototype),n.Service.RPCMethod=S,n}(i),i.Builder=function(e,t,o){var r=function(e){this.ns=new o.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},i=r.prototype;return r.isMessage=function(e){return"string"==typeof e.name&&void 0===e.values&&void 0===e.rpc},r.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},r.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},r.isService=function(e){return!("string"!=typeof e.name||"object"!=typeof e.rpc||!e.rpc)},r.isExtend=function(e){return"string"==typeof e.ref},i.reset=function(){return this.ptr=this.ns,this},i.define=function(e){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach(function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new o.Namespace(this,this.ptr,e)),this.ptr=t},this),this},i.create=function(t){if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(var n=[t];n.length>0;){if(t=n.pop(),!Array.isArray(t))throw Error("not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var i=t.shift();if(r.isMessage(i)){var s=new o.Message(this,this.ptr,i.name,i.options,i.isGroup,i.syntax),a={};i.oneofs&&Object.keys(i.oneofs).forEach(function(e){s.addChild(a[e]=new o.Message.OneOf(this,s,e))},this),i.fields&&i.fields.forEach(function(e){if(null!==s.getChild(0|e.id))throw Error("duplicate or invalid field id in "+s.name+": "+e.id);if(e.options&&"object"!=typeof e.options)throw Error("illegal field options in "+s.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=a[e.oneof]))throw Error("illegal oneof in "+s.name+"#"+e.name+": "+e.oneof);e=new o.Message.Field(this,s,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,i.syntax),t&&t.fields.push(e),s.addChild(e)},this);var c=[];if(i.enums&&i.enums.forEach(function(e){c.push(e)}),i.messages&&i.messages.forEach(function(e){c.push(e)}),i.services&&i.services.forEach(function(e){c.push(e)}),i.extensions&&("number"==typeof i.extensions[0]?s.extensions=[i.extensions]:s.extensions=i.extensions),this.ptr.addChild(s),c.length>0){n.push(t),t=c,c=null,this.ptr=s,s=null;continue}c=null}else if(r.isEnum(i))s=new o.Enum(this,this.ptr,i.name,i.options,i.syntax),i.values.forEach(function(e){s.addChild(new o.Enum.Value(this,s,e.name,e.id))},this),this.ptr.addChild(s);else if(r.isService(i))s=new o.Service(this,this.ptr,i.name,i.options),Object.keys(i.rpc).forEach(function(e){var t=i.rpc[e];s.addChild(new o.Service.RPCMethod(this,s,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))},this),this.ptr.addChild(s);else{if(!r.isExtend(i))throw Error("not a valid definition: "+JSON.stringify(i));if(s=this.ptr.resolve(i.ref,!0))i.fields.forEach(function(t){if(null!==s.getChild(0|t.id))throw Error("duplicate extended field id in "+s.name+": "+t.id);if(s.extensions){var n=!1;if(s.extensions.forEach(function(e){t.id>=e[0]&&t.id<=e[1]&&(n=!0)}),!n)throw Error("illegal extended field id in "+s.name+": "+t.id+" (not within valid ranges)")}var r=t.name;this.options.convertFieldsToCamelCase&&(r=e.Util.toCamelCase(r));var i=new o.Message.ExtensionField(this,s,t.rule,t.type,this.ptr.fqn()+"."+r,t.id,t.options),a=new o.Extension(this,this.ptr,t.name,i);i.extension=a,this.ptr.addChild(a),s.addChild(i)},this);else if(!/\.?google\.protobuf\./.test(i.ref))throw Error("extended message "+i.ref+" is not defined")}i=null,s=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},i.import=function(t,o){var r="/";if("string"==typeof o){if(e.Util.IS_NODE&&(o=n(1).resolve(o)),!0===this.files[o])return this.reset();this.files[o]=!0}else if("object"==typeof o){var i,s=o.root;if(e.Util.IS_NODE&&(s=n(1).resolve(s)),(s.indexOf("\\")>=0||o.file.indexOf("\\")>=0)&&(r="\\"),i=e.Util.IS_NODE?n(1).join(s,o.file):s+r+o.file,!0===this.files[i])return this.reset();this.files[i]=!0}if(t.imports&&t.imports.length>0){var a,c=!1;"object"==typeof o?(this.importRoot=o.root,c=!0,a=this.importRoot,o=o.file,(a.indexOf("\\")>=0||o.indexOf("\\")>=0)&&(r="\\")):"string"==typeof o?this.importRoot?a=this.importRoot:o.indexOf("/")>=0?""===(a=o.replace(/\/[^\/]*$/,""))&&(a="/"):o.indexOf("\\")>=0?(a=o.replace(/\\[^\\]*$/,""),r="\\"):a=".":a=null;for(var l=0;l<t.imports.length;l++)if("string"==typeof t.imports[l]){if(!a)throw Error("cannot determine import root");var _=t.imports[l];if("google/protobuf/descriptor.proto"===_)continue;if(_=e.Util.IS_NODE?n(1).join(a,_):a+r+_,!0===this.files[_])continue;/\.proto$/i.test(_)&&!e.DotProto&&(_=_.replace(/\.proto$/,".json"));var u=e.Util.fetch(_);if(null===u)throw Error("failed to import '"+_+"' in '"+o+"': file not found");/\.json$/i.test(_)?this.import(JSON.parse(u+""),_):this.import(e.DotProto.Parser.parse(u),_)}else o?/\.(\w+)$/.test(o)?this.import(t.imports[l],o.replace(/^(.+)\.(\w+)$/,function(e,t,n){return t+"_import"+l+"."+n})):this.import(t.imports[l],o+"_import"+l):this.import(t.imports[l]);c&&(this.importRoot=null)}t.package&&this.define(t.package),t.syntax&&function e(t){t.messages&&t.messages.forEach(function(n){n.syntax=t.syntax,e(n)}),t.enums&&t.enums.forEach(function(e){e.syntax=t.syntax})}(t);var f=this.ptr;return t.options&&Object.keys(t.options).forEach(function(e){f.options[e]=t.options[e]}),t.messages&&(this.create(t.messages),this.ptr=f),t.enums&&(this.create(t.enums),this.ptr=f),t.services&&(this.create(t.services),this.ptr=f),t.extends&&this.create(t.extends),this.reset()},i.resolveAll=function(){var n;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof o.Namespace)this.ptr.children.forEach(function(e){this.ptr=e,this.resolveAll()},this);else if(this.ptr instanceof o.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(n=(this.ptr instanceof o.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=n,n instanceof o.Enum){if(this.ptr.type=e.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==n.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(n instanceof o.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=n.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}"proto3"===this.ptr.syntax&&this.ptr.repeated&&void 0===this.ptr.options.packed&&-1!==e.PACKABLE_WIRE_TYPES.indexOf(this.ptr.type.wireType)&&(this.ptr.options.packed=!0)}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((n=this.ptr.parent.resolve(this.ptr.requestName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=n,!((n=this.ptr.parent.resolve(this.ptr.responseName,!0))&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=n}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},i.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(var t="string"==typeof e?e.split("."):e,n=this.result,o=0;o<t.length;o++){if(!n[t[o]]){n=null;break}n=n[t[o]]}return n},i.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},i.toString=function(){return"Builder"},r.Message=function(){},r.Enum=function(){},r.Service=function(){},r}(i,i.Lang,i.Reflect),i.Map=function(e,t){var n=function(e,n){if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(var o=Object.keys(n),r=0;r<o.length;r++){var i=this.keyElem.valueFromString(o[r]),s=this.valueElem.verifyValue(n[o[r]]);this.map[this.keyElem.valueToString(i)]={key:i,value:s}}},o=n.prototype;function r(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}return o.clear=function(){this.map={}},o.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},o.entries=function(){for(var e,t=[],n=Object.keys(this.map),o=0;o<n.length;o++)t.push([(e=this.map[n[o]]).key,e.value]);return r(t)},o.keys=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].key);return r(e)},o.values=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].value);return r(e)},o.forEach=function(e,t){for(var n,o=Object.keys(this.map),r=0;r<o.length;r++)e.call(t,(n=this.map[o[r]]).value,n.key,this)},o.set=function(e,t){var n=this.keyElem.verifyValue(e),o=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:o},this},o.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));if(t in this.map)return this.map[t].value},o.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},n}(0,i.Reflect),i.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),i.loadJson(i.DotProto.Parser.parse(e),t,n)},i.protoFromString=i.loadProto,i.loadProtoFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(o){if(null!==o)try{t(null,i.loadProto(o,n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var o=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===o?null:i.loadProto(o,n,e)},i.protoFromFile=i.loadProtoFile,i.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=i.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=i.populateAccessors),new i.Builder(e)},i.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=i.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},i.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(o){if(null!==o)try{t(null,i.loadJson(JSON.parse(o),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var o=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===o?null:i.loadJson(JSON.parse(o),n,e)},i})?r.apply(t,i):r)||(e.exports=s)}).call(this,n(9))},function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,l=[],_=!1,u=-1;function f(){_&&c&&(_=!1,c.length?l=c.concat(l):u=-1,l.length&&h())}function h(){if(!_){var e=a(f);_=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,_=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function E(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||_||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=E,r.addListener=E,r.once=E,r.off=E,r.removeListener=E,r.removeAllListeners=E,r.emit=E,r.prependListener=E,r.prependOnceListener=E,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){var o,r,i;r=[n(11)],void 0===(i="function"==typeof(o=function(e){"use strict";var t=function(e,n,r){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===n&&(n=t.DEFAULT_ENDIAN),void 0===r&&(r=t.DEFAULT_NOASSERT),!r){if((e|=0)<0)throw RangeError("Illegal capacity");n=!!n,r=!!r}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=n,this.noAssert=r};t.VERSION="5.0.1",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var n=t.prototype;n.__isByteBuffer__,Object.defineProperty(n,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var o=new ArrayBuffer(0),r=String.fromCharCode;function i(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function s(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+r.apply(String,e);e.length+arguments.length>1024&&(t.push(r.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function a(e,t,n,o,r){var i,s,a=8*r-o-1,c=(1<<a)-1,l=c>>1,_=-7,u=n?r-1:0,f=n?-1:1,h=e[t+u];for(u+=f,i=h&(1<<-_)-1,h>>=-_,_+=a;_>0;i=256*i+e[t+u],u+=f,_-=8);for(s=i&(1<<-_)-1,i>>=-_,_+=o;_>0;s=256*s+e[t+u],u+=f,_-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,o),i-=l}return(h?-1:1)*s*Math.pow(2,i-o)}function c(e,t,n,o,r,i){var s,a,c,l=8*i-r-1,_=(1<<l)-1,u=_>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,d=o?1:-1,E=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=_):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+u>=1?f/c:f*Math.pow(2,1-u))*c>=2&&(s++,c/=2),s+u>=_?(a=0,s=_):s+u>=1?(a=(t*c-1)*Math.pow(2,r),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;e[n+h]=255&a,h+=d,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;e[n+h]=255&s,h+=d,s/=256,l-=8);e[n+h-d]|=128*E}t.accessor=function(){return Uint8Array},t.allocate=function(e,n,o){return new t(e,n,o)},t.concat=function(e,n,o,r){"boolean"!=typeof n&&"string"==typeof n||(r=o,o=n,n=void 0);for(var i,s=0,a=0,c=e.length;a<c;++a)t.isByteBuffer(e[a])||(e[a]=t.wrap(e[a],n)),(i=e[a].limit-e[a].offset)>0&&(s+=i);if(0===s)return new t(0,o,r);var l,_=new t(s,o,r);for(a=0;a<c;)(i=(l=e[a++]).limit-l.offset)<=0||(_.view.set(l.view.subarray(l.offset,l.limit),_.offset),_.offset+=i);return _.limit=_.offset,_.offset=0,_},t.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},t.type=function(){return ArrayBuffer},t.wrap=function(e,o,r,i){if("string"!=typeof o&&(i=r,r=o,o=void 0),"string"==typeof e)switch(void 0===o&&(o="utf8"),o){case"base64":return t.fromBase64(e,r);case"hex":return t.fromHex(e,r);case"binary":return t.fromBinary(e,r);case"utf8":return t.fromUTF8(e,r);case"debug":return t.fromDebug(e,r);default:throw Error("Unsupported encoding: "+o)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var s;if(t.isByteBuffer(e))return(s=n.clone.call(e)).markedOffset=-1,s;if(e instanceof Uint8Array)s=new t(0,r,i),e.length>0&&(s.buffer=e.buffer,s.offset=e.byteOffset,s.limit=e.byteOffset+e.byteLength,s.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)s=new t(0,r,i),e.byteLength>0&&(s.buffer=e,s.offset=0,s.limit=e.byteLength,s.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");(s=new t(e.length,r,i)).limit=e.length;for(var a=0;a<e.length;++a)s.view[a]=e[a]}return s},n.writeBitSet=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var o,r=t,i=e.length,s=i>>3,a=0;for(t+=this.writeVarint32(i,t);s--;)o=1&!!e[a++]|(1&!!e[a++])<<1|(1&!!e[a++])<<2|(1&!!e[a++])<<3|(1&!!e[a++])<<4|(1&!!e[a++])<<5|(1&!!e[a++])<<6|(1&!!e[a++])<<7,this.writeByte(o,t++);if(a<i){var c=0;for(o=0;a<i;)o|=(1&!!e[a++])<<c++;this.writeByte(o,t++)}return n?(this.offset=t,this):t-r},n.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var n,o=this.readVarint32(e),r=o.value,i=r>>3,s=0,a=[];for(e+=o.length;i--;)n=this.readByte(e++),a[s++]=!!(1&n),a[s++]=!!(2&n),a[s++]=!!(4&n),a[s++]=!!(8&n),a[s++]=!!(16&n),a[s++]=!!(32&n),a[s++]=!!(64&n),a[s++]=!!(128&n);if(s<r){var c=0;for(n=this.readByte(e++);s<r;)a[s++]=!!(n>>c++&1)}return t&&(this.offset=e),a},n.readBytes=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var o=this.slice(t,t+e);return n&&(this.offset+=e),o},n.writeBytes=n.append,n.writeInt8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeByte=n.writeInt8,n.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return 128==(128&n)&&(n=-(255-n+1)),t&&(this.offset+=1),n},n.readByte=n.readInt8,n.writeUint8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeUInt8=n.writeUint8,n.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return t&&(this.offset+=1),n},n.readUInt8=n.readUint8,n.writeInt16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeShort=n.writeInt16,n.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),32768==(32768&n)&&(n=-(65535-n+1)),t&&(this.offset+=2),n},n.readShort=n.readInt16,n.writeUint16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeUInt16=n.writeUint16,n.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),t&&(this.offset+=2),n},n.readUInt16=n.readUint16,n.writeInt32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeInt=n.writeInt32,n.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),n|=0,t&&(this.offset+=4),n},n.readInt=n.readInt32,n.writeUint32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeUInt32=n.writeUint32,n.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),t&&(this.offset+=4),n},n.readUInt32=n.readUint32,e&&(n.writeInt64=function(t,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var r=this.buffer.byteLength;n>r&&this.resize((r*=2)>n?r:n),n-=8;var i=t.low,s=t.high;return this.littleEndian?(this.view[n+3]=i>>>24&255,this.view[n+2]=i>>>16&255,this.view[n+1]=i>>>8&255,this.view[n]=255&i,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=i>>>24&255,this.view[n+1]=i>>>16&255,this.view[n+2]=i>>>8&255,this.view[n+3]=255&i),o&&(this.offset+=8),this},n.writeLong=n.writeInt64,n.readInt64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var o=0,r=0;this.littleEndian?(o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0,t+=4,r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0):(r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0,t+=4,o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0);var i=new e(o,r,!1);return n&&(this.offset+=8),i},n.readLong=n.readInt64,n.writeUint64=function(t,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var r=this.buffer.byteLength;n>r&&this.resize((r*=2)>n?r:n),n-=8;var i=t.low,s=t.high;return this.littleEndian?(this.view[n+3]=i>>>24&255,this.view[n+2]=i>>>16&255,this.view[n+1]=i>>>8&255,this.view[n]=255&i,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=i>>>24&255,this.view[n+1]=i>>>16&255,this.view[n+2]=i>>>8&255,this.view[n+3]=255&i),o&&(this.offset+=8),this},n.writeUInt64=n.writeUint64,n.readUint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var o=0,r=0;this.littleEndian?(o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0,t+=4,r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0):(r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0,t+=4,o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0);var i=new e(o,r,!0);return n&&(this.offset+=8),i},n.readUInt64=n.readUint64),n.writeFloat32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,c(this.view,e,t,this.littleEndian,23,4),n&&(this.offset+=4),this},n.writeFloat=n.writeFloat32,n.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=a(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),n},n.readFloat=n.readFloat32,n.writeFloat64=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=8,c(this.view,e,t,this.littleEndian,52,8),n&&(this.offset+=8),this},n.writeDouble=n.writeFloat64,n.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=a(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),n},n.readDouble=n.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},n.writeVarint32=function(e,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var r,i=t.calculateVarint32(e);n+=i;var s=this.buffer.byteLength;for(n>s&&this.resize((s*=2)>n?s:n),n-=i,e>>>=0;e>=128;)r=127&e|128,this.view[n++]=r,e>>>=7;return this.view[n++]=e,o?(this.offset=n,this):i},n.writeVarint32ZigZag=function(e,n){return this.writeVarint32(t.zigZagEncode32(e),n)},n.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,o=0,r=0;do{if(!this.noAssert&&e>this.limit){var i=Error("Truncated");throw i.truncated=!0,i}n=this.view[e++],o<5&&(r|=(127&n)<<7*o),++o}while(0!=(128&n));return r|=0,t?(this.offset=e,r):{value:r,length:o}},n.readVarint32ZigZag=function(e){var n=this.readVarint32(e);return"object"==typeof n?n.value=t.zigZagDecode32(n.value):n=t.zigZagDecode32(n),n},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,o=t.shiftRightUnsigned(28).toInt()>>>0,r=t.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==o?n<16384?n<128?1:2:n<1<<21?3:4:o<16384?o<128?5:6:o<1<<21?7:8:r<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},n.writeVarint64=function(n,o){var r=void 0===o;if(r&&(o=this.offset),!this.noAssert){if("number"==typeof n)n=e.fromNumber(n);else if("string"==typeof n)n=e.fromString(n);else if(!(n&&n instanceof e))throw TypeError("Illegal value: "+n+" (not an integer or Long)");if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}"number"==typeof n?n=e.fromNumber(n,!1):"string"==typeof n?n=e.fromString(n,!1):!1!==n.unsigned&&(n=n.toSigned());var i=t.calculateVarint64(n),s=n.toInt()>>>0,a=n.shiftRightUnsigned(28).toInt()>>>0,c=n.shiftRightUnsigned(56).toInt()>>>0;o+=i;var l=this.buffer.byteLength;switch(o>l&&this.resize((l*=2)>o?l:o),o-=i,i){case 10:this.view[o+9]=c>>>7&1;case 9:this.view[o+8]=9!==i?128|c:127&c;case 8:this.view[o+7]=8!==i?a>>>21|128:a>>>21&127;case 7:this.view[o+6]=7!==i?a>>>14|128:a>>>14&127;case 6:this.view[o+5]=6!==i?a>>>7|128:a>>>7&127;case 5:this.view[o+4]=5!==i?128|a:127&a;case 4:this.view[o+3]=4!==i?s>>>21|128:s>>>21&127;case 3:this.view[o+2]=3!==i?s>>>14|128:s>>>14&127;case 2:this.view[o+1]=2!==i?s>>>7|128:s>>>7&127;case 1:this.view[o]=1!==i?128|s:127&s}return r?(this.offset+=i,this):i},n.writeVarint64ZigZag=function(e,n){return this.writeVarint64(t.zigZagEncode64(e),n)},n.readVarint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var o=t,r=0,i=0,s=0,a=0;if(r=127&(a=this.view[t++]),128&a&&(r|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(r|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(r|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(i=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(s=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[t++]))<<7,128&a||this.noAssert&&void 0===a))))))))))throw Error("Buffer overrun");var c=e.fromBits(r|i<<28,i>>>4|s<<24,!1);return n?(this.offset=t,c):{value:c,length:t-o}},n.readVarint64ZigZag=function(n){var o=this.readVarint64(n);return o&&o.value instanceof e?o.value=t.zigZagDecode64(o.value):o=t.zigZagDecode64(o),o}),n.writeCString=function(e,t){var n=void 0===t;n&&(t=this.offset);var o,r=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(o=0;o<r;++o)if(0===e.charCodeAt(o))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}r=_.calculateUTF16asUTF8(i(e))[1],t+=r+1;var s=this.buffer.byteLength;return t>s&&this.resize((s*=2)>t?s:t),t-=r+1,_.encodeUTF16toUTF8(i(e),function(e){this.view[t++]=e}.bind(this)),this.view[t++]=0,n?(this.offset=t,this):r},n.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,o=e,r=-1;return _.decodeUTF8toUTF16(function(){if(0===r)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(r=this.view[e++])?null:r}.bind(this),n=s(),!0),t?(this.offset=e,n()):{string:n(),length:e-o}},n.writeIString=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var o,r=t;o=_.calculateUTF16asUTF8(i(e),this.noAssert)[1],t+=4+o;var s=this.buffer.byteLength;if(t>s&&this.resize((s*=2)>t?s:t),t-=4+o,this.littleEndian?(this.view[t+3]=o>>>24&255,this.view[t+2]=o>>>16&255,this.view[t+1]=o>>>8&255,this.view[t]=255&o):(this.view[t]=o>>>24&255,this.view[t+1]=o>>>16&255,this.view[t+2]=o>>>8&255,this.view[t+3]=255&o),t+=4,_.encodeUTF16toUTF8(i(e),function(e){this.view[t++]=e}.bind(this)),t!==r+4+o)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+o));return n?(this.offset=t,this):t-r},n.readIString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var o=e,r=this.readUint32(e),i=this.readUTF8String(r,t.METRICS_BYTES,e+=4);return e+=i.length,n?(this.offset=e,i.string):{string:i.string,length:e-o}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",n.writeUTF8String=function(e,t){var n,o=void 0===t;if(o&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r=t;n=_.calculateUTF16asUTF8(i(e))[1],t+=n;var s=this.buffer.byteLength;return t>s&&this.resize((s*=2)>t?s:t),t-=n,_.encodeUTF16toUTF8(i(e),function(e){this.view[t++]=e}.bind(this)),o?(this.offset=t,this):t-r},n.writeString=n.writeUTF8String,t.calculateUTF8Chars=function(e){return _.calculateUTF16asUTF8(i(e))[0]},t.calculateUTF8Bytes=function(e){return _.calculateUTF16asUTF8(i(e))[1]},t.calculateString=t.calculateUTF8Bytes,n.readUTF8String=function(e,n,o){"number"==typeof n&&(o=n,n=void 0);var r=void 0===o;if(r&&(o=this.offset),void 0===n&&(n=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}var i,a=0,c=o;if(n===t.METRICS_CHARS){if(i=s(),_.decodeUTF8(function(){return a<e&&o<this.limit?this.view[o++]:null}.bind(this),function(e){++a,_.UTF8toUTF16(e,i)}),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return r?(this.offset=o,i()):{string:i(),length:o-c}}if(n===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+"+e+") <= "+this.buffer.byteLength)}var l=o+e;if(_.decodeUTF8toUTF16(function(){return o<l?this.view[o++]:null}.bind(this),i=s(),this.noAssert),o!==l)throw RangeError("Illegal range: Truncated data, "+o+" == "+l);return r?(this.offset=o,i()):{string:i(),length:o-c}}throw TypeError("Unsupported metrics: "+n)},n.readString=n.readUTF8String,n.writeVString=function(e,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var r,s,a=n;r=_.calculateUTF16asUTF8(i(e),this.noAssert)[1],s=t.calculateVarint32(r),n+=s+r;var c=this.buffer.byteLength;if(n>c&&this.resize((c*=2)>n?c:n),n-=s+r,n+=this.writeVarint32(r,n),_.encodeUTF16toUTF8(i(e),function(e){this.view[n++]=e}.bind(this)),n!==a+r+s)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+r+s));return o?(this.offset=n,this):n-a},n.readVString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var o=e,r=this.readVarint32(e),i=this.readUTF8String(r.value,t.METRICS_BYTES,e+=r.length);return e+=i.length,n?(this.offset=e,i.string):{string:i.string,length:e-o}},n.append=function(e,n,o){"number"!=typeof n&&"string"==typeof n||(o=n,n=void 0);var r=void 0===o;if(r&&(o=this.offset),!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var i=e.limit-e.offset;if(i<=0)return this;o+=i;var s=this.buffer.byteLength;return o>s&&this.resize((s*=2)>o?s:o),o-=i,this.view.set(e.view.subarray(e.offset,e.limit),o),e.offset+=i,r&&(this.offset+=i),this},n.appendTo=function(e,t){return e.append(this,t),this},n.assert=function(e){return this.noAssert=!e,this},n.capacity=function(){return this.buffer.byteLength},n.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},n.clone=function(e){var n=new t(0,this.littleEndian,this.noAssert);return e?(n.buffer=new ArrayBuffer(this.buffer.byteLength),n.view=new Uint8Array(n.buffer)):(n.buffer=this.buffer,n.view=this.view),n.offset=this.offset,n.markedOffset=this.markedOffset,n.limit=this.limit,n},n.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var n=t-e;if(0===n)return this.buffer=o,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var r=new ArrayBuffer(n),i=new Uint8Array(r);return i.set(this.view.subarray(e,t)),this.buffer=r,this.view=i,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},n.copy=function(e,n){if(void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(e===n)return new t(0,this.littleEndian,this.noAssert);var o=n-e,r=new t(o,this.littleEndian,this.noAssert);return r.offset=0,r.limit=o,r.markedOffset>=0&&(r.markedOffset-=e),this.copyTo(r,0,e,n),r},n.copyTo=function(e,n,o,r){var i,s;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(n=(s=void 0===n)?e.offset:0|n,o=(i=void 0===o)?this.offset:0|o,r=void 0===r?this.limit:0|r,n<0||n>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+n+" <= "+e.buffer.byteLength);if(o<0||r>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+o+" <= "+this.buffer.byteLength);var a=r-o;return 0===a?e:(e.ensureCapacity(n+a),e.view.set(this.view.subarray(o,r),n),i&&(this.offset+=a),s&&(e.offset+=a),this)},n.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},n.fill=function(e,t,n){var o=void 0===t;if(o&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;t<n;)this.view[t++]=e;return o&&(this.offset=t),this},n.flip=function(){return this.limit=this.offset,this.offset=0,this},n.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},n.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},n.LE=function(e){return this.littleEndian=void 0===e||!!e,this},n.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},n.prepend=function(e,n,o){"number"!=typeof n&&"string"==typeof n||(o=n,n=void 0);var r=void 0===o;if(r&&(o=this.offset),!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var i=e.limit-e.offset;if(i<=0)return this;var s=i-o;if(s>0){var a=new ArrayBuffer(this.buffer.byteLength+s),c=new Uint8Array(a);c.set(this.view.subarray(o,this.buffer.byteLength),i),this.buffer=a,this.view=c,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,o+=s}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),o-i),e.offset=e.limit,r&&(this.offset-=i),this},n.prependTo=function(e,t){return e.prepend(this,t),this},n.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},n.remaining=function(){return this.limit-this.offset},n.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},n.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),n=new Uint8Array(t);n.set(this.view),this.buffer=t,this.view=n}return this},n.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(this.view.subarray(e,t)),this)},n.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},n.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},n.toBuffer=function(e){var t=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return o;var r=new ArrayBuffer(n-t);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(t,n),0),r},n.toArrayBuffer=n.toBuffer,n.toString=function(e,t,n){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(n=t=e="utf8"),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var l=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],o=0,r=t.length;o<r;++o)n[t[o]]=o;return e.encode=function(e,n){for(var o,r;null!==(o=e());)n(t[o>>2&63]),r=(3&o)<<4,null!==(o=e())?(n(t[63&((r|=o>>4&15)|o>>4&15)]),r=(15&o)<<2,null!==(o=e())?(n(t[63&(r|o>>6&3)]),n(t[63&o])):(n(t[63&r]),n(61))):(n(t[63&r]),n(61),n(61))},e.decode=function(e,t){var o,r,i;function s(e){throw Error("Illegal character code: "+e)}for(;null!==(o=e());)if(void 0===(r=n[o])&&s(o),null!==(o=e())&&(void 0===(i=n[o])&&s(o),t(r<<2>>>0|(48&i)>>4),null!==(o=e()))){if(void 0===(r=n[o])){if(61===o)break;s(o)}if(t((15&i)<<4>>>0|(60&r)>>2),null!==(o=e())){if(void 0===(i=n[o])){if(61===o)break;s(o)}t((3&r)<<6>>>0|i)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();n.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var n;return l.encode(function(){return e<t?this.view[e++]:null}.bind(this),n=s()),n()},t.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var o=new t(e.length/4*3,n),r=0;return l.decode(i(e),function(e){o.view[r++]=e}),o.limit=r,o},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},n.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],o=[];e<t;)n.push(this.view[e++]),n.length>=1024&&(o.push(String.fromCharCode.apply(String,n)),n=[]);return o.join("")+String.fromCharCode.apply(String,n)},t.fromBinary=function(e,n){if("string"!=typeof e)throw TypeError("str");for(var o,r=0,i=e.length,s=new t(i,n);r<i;){if((o=e.charCodeAt(r))>255)throw RangeError("illegal char code: "+o);s.view[r++]=o}return s.limit=i,s},n.toDebug=function(e){for(var t,n=-1,o=this.buffer.byteLength,r="",i="",s="";n<o;){if(-1!==n&&(r+=(t=this.view[n])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(i+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16==0&&n!==o){for(;r.length<51;)r+=" ";s+=r+i+"\n",r=i=""}n===this.offset&&n===this.limit?r+=n===this.markedOffset?"!":"|":n===this.offset?r+=n===this.markedOffset?"[":"<":n===this.limit?r+=n===this.markedOffset?"]":">":r+=n===this.markedOffset?"'":e||0!==n&&n!==o?" ":""}if(e&&" "!==r){for(;r.length<51;)r+=" ";s+=r+i+"\n"}return e?s:r},t.fromDebug=function(e,n,o){for(var r,i,s=e.length,a=new t((s+1)/3|0,n,o),c=0,l=0,_=!1,u=!1,f=!1,h=!1,d=!1;c<s;){switch(r=e.charAt(c++)){case"!":if(!o){if(u||f||h){d=!0;break}u=f=h=!0}a.offset=a.markedOffset=a.limit=l,_=!1;break;case"|":if(!o){if(u||h){d=!0;break}u=h=!0}a.offset=a.limit=l,_=!1;break;case"[":if(!o){if(u||f){d=!0;break}u=f=!0}a.offset=a.markedOffset=l,_=!1;break;case"<":if(!o){if(u){d=!0;break}u=!0}a.offset=l,_=!1;break;case"]":if(!o){if(h||f){d=!0;break}h=f=!0}a.limit=a.markedOffset=l,_=!1;break;case">":if(!o){if(h){d=!0;break}h=!0}a.limit=l,_=!1;break;case"'":if(!o){if(f){d=!0;break}f=!0}a.markedOffset=l,_=!1;break;case" ":_=!1;break;default:if(!o&&_){d=!0;break}if(i=parseInt(r+e.charAt(c++),16),!o&&(isNaN(i)||i<0||i>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[l++]=i,_=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+c)}if(!o){if(!u||!h)throw TypeError("Illegal str: Missing offset or limit");if(l<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+l+" < "+s)}return a},n.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,o=new Array(t-e);e<t;)(n=this.view[e++])<16?o.push("0",n.toString(16)):o.push(n.toString(16));return o.join("")},t.fromHex=function(e,n,o){if(!o){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var r,i=e.length,s=new t(i/2|0,n),a=0,c=0;a<i;a+=2){if(r=parseInt(e.substring(a,a+2),16),!o&&(!isFinite(r)||r<0||r>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[c++]=r}return s.limit=c,s};var _=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(n>>6&31|192),t(63&n|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},decodeUTF8:function(e,t){for(var n,o,r,i,s=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(o=e())&&s([n,o]),t((31&n)<<6|63&o);else if(224==(240&n))(null===(o=e())||null===(r=e()))&&s([n,o,r]),t((15&n)<<12|(63&o)<<6|63&r);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(o=e())||null===(r=e())||null===(i=e()))&&s([n,o,r,i]),t((7&n)<<18|(63&o)<<12|(63&r)<<6|63&i)}},UTF16toUTF8:function(e,t){for(var n,o=null;null!==(n=null!==o?o:e());)n>=55296&&n<=57343&&null!==(o=e())&&o>=56320&&o<=57343?(t(1024*(n-55296)+o-56320+65536),o=null):t(n);null!==o&&t(o)},UTF8toUTF16:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,n)})},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,n)})},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,o=0;return e.UTF16toUTF8(t,function(e){++n,o+=e<128?1:e<2048?2:e<65536?3:4}),[n,o]}};return e}();return n.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;try{_.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),n=s())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return n()},t.fromUTF8=function(e,n,o){if(!o&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var r=new t(_.calculateUTF16asUTF8(i(e),!0)[1],n,o),s=0;return _.encodeUTF16toUTF8(i(e),function(e){r.view[s++]=e}),r.limit=s,r},t})?o.apply(t,r):o)||(e.exports=i)},function(e,t,n){var o,r;void 0===(r="function"==typeof(o=function(){"use strict";function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},o={};function r(e,t){var r,i,a;return t?(a=0<=(e>>>=0)&&e<256)&&(i=o[e])?i:(r=s(e,(0|e)<0?-1:0,!0),a&&(o[e]=r),r):(a=-128<=(e|=0)&&e<128)&&(i=n[e])?i:(r=s(e,e<0?-1:0,!1),a&&(n[e]=r),r)}function i(e,t){if(isNaN(e)||!isFinite(e))return t?E:d;if(t){if(e<0)return E;if(e>=u)return g}else{if(e<=-f)return S;if(e+1>=f)return y}return e<0?i(-e,t).neg():s(e%_|0,e/_|0,t)}function s(t,n,o){return new e(t,n,o)}e.fromInt=r,e.fromNumber=i,e.fromBits=s;var a=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return d;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return c(e.substring(1),t,n).neg();for(var r=i(a(n,8)),s=d,l=0;l<e.length;l+=8){var _=Math.min(8,e.length-l),u=parseInt(e.substring(l,l+_),n);if(_<8){var f=i(a(n,_));s=s.mul(f).add(i(u))}else s=(s=s.mul(r)).add(i(u))}return s.unsigned=t,s}function l(t){return t instanceof e?t:"number"==typeof t?i(t):"string"==typeof t?c(t):s(t.low,t.high,t.unsigned)}e.fromString=c,e.fromValue=l;var _=4294967296,u=_*_,f=u/2,h=r(1<<24),d=r(0);e.ZERO=d;var E=r(0,!0);e.UZERO=E;var p=r(1);e.ONE=p;var R=r(1,!0);e.UONE=R;var m=r(-1);e.NEG_ONE=m;var y=s(-1,2147483647,!1);e.MAX_VALUE=y;var g=s(-1,-1,!0);e.MAX_UNSIGNED_VALUE=g;var S=s(0,-2147483648,!1);e.MIN_VALUE=S;var C=e.prototype;return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=i(e),n=this.div(t),o=n.mul(t).sub(this);return n.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=i(a(e,6),this.unsigned),s=this,c="";;){var l=s.div(r),_=(s.sub(l.mul(r)).toInt()>>>0).toString(e);if((s=l).isZero())return _+c;for(;_.length<6;)_="0"+_;c=""+_+c}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return t(e)||(e=l(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.compare=function(e){if(t(e)||(e=l(e)),this.eq(e))return 0;var n=this.isNegative(),o=e.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(p)},C.neg=C.negate,C.add=function(e){t(e)||(e=l(e));var n=this.high>>>16,o=65535&this.high,r=this.low>>>16,i=65535&this.low,a=e.high>>>16,c=65535&e.high,_=e.low>>>16,u=0,f=0,h=0,d=0;return h+=(d+=i+(65535&e.low))>>>16,f+=(h+=r+_)>>>16,u+=(f+=o+c)>>>16,u+=n+a,s((h&=65535)<<16|(d&=65535),(u&=65535)<<16|(f&=65535),this.unsigned)},C.subtract=function(e){return t(e)||(e=l(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return d;if(t(e)||(e=l(e)),e.isZero())return d;if(this.eq(S))return e.isOdd()?S:d;if(e.eq(S))return this.isOdd()?S:d;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(h)&&e.lt(h))return i(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,r=this.low>>>16,a=65535&this.low,c=e.high>>>16,_=65535&e.high,u=e.low>>>16,f=65535&e.low,E=0,p=0,R=0,m=0;return R+=(m+=a*f)>>>16,p+=(R+=r*f)>>>16,R&=65535,p+=(R+=a*u)>>>16,E+=(p+=o*f)>>>16,p&=65535,E+=(p+=r*u)>>>16,p&=65535,E+=(p+=a*_)>>>16,E+=n*f+o*u+r*_+a*c,s((R&=65535)<<16|(m&=65535),(E&=65535)<<16|(p&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(t(e)||(e=l(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?E:d;var n,o,r;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return E;if(e.gt(this.shru(1)))return R;r=E}else{if(this.eq(S))return e.eq(p)||e.eq(m)?S:e.eq(S)?p:(n=this.shr(1).div(e).shl(1)).eq(d)?e.isNegative()?p:m:(o=this.sub(e.mul(n)),r=n.add(o.div(e)));if(e.eq(S))return this.unsigned?E:d;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=d}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:a(2,s-48),_=i(n),u=_.mul(e);u.isNegative()||u.gt(o);)u=(_=i(n-=c,this.unsigned)).mul(e);_.isZero()&&(_=p),r=r.add(_),o=o.sub(u)}return r},C.div=C.divide,C.modulo=function(e){return t(e)||(e=l(e)),this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.not=function(){return s(~this.low,~this.high,this.unsigned)},C.and=function(e){return t(e)||(e=l(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return t(e)||(e=l(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return t(e)||(e=l(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;return e<32?s(this.low>>>e|n<<32-e,n>>>e,this.unsigned):s(32===e?n:n>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e})?o.apply(t,[]):o)||(e.exports=r)},function(e,t){},function(e){e.exports={package:"mgobexs",syntax:"proto3",messages:[{name:"ClientSendServerReqWrap1",syntax:"proto3",fields:[{name:"version",type:"string",id:1},{name:"appName",type:"string",id:2},{name:"cmd",type:"string",id:3},{name:"seq",type:"string",id:4},{name:"clientIp",type:"string",id:5},{name:"serviceIp",type:"string",id:6},{name:"business",type:"string",id:7},{name:"authKey",type:"string",id:8},{name:"authType",type:"uint32",id:9},{name:"authIp",type:"string",id:10},{name:"gameId",type:"string",id:11},{name:"uid",type:"uint64",id:12},{name:"playerId",type:"string",id:13},{name:"body",type:"bytes",id:14}]},{name:"ServerSendClientBstWrap1",syntax:"proto3",fields:[{name:"version",type:"string",id:1},{name:"appName",type:"string",id:2},{name:"cmd",type:"string",id:3},{name:"seq",type:"string",id:4},{name:"clientIp",type:"string",id:5},{name:"serviceIp",type:"string",id:6},{name:"business",type:"string",id:7},{name:"authKey",type:"string",id:8},{name:"authType",type:"uint32",id:9},{name:"authIp",type:"string",id:10},{name:"gameId",type:"string",id:11},{name:"uid",type:"uint64",id:12},{name:"playerId",type:"string",id:13},{name:"body",type:"bytes",id:14}]},{name:"ClientSendServerRspWrap1",syntax:"proto3",fields:[{name:"seq",type:"string",id:1},{name:"errCode",type:"int32",id:2},{name:"errMsg",type:"string",id:3},{name:"body",type:"bytes",id:4}]},{name:"ClientSendServerReqWrap2",syntax:"proto3",fields:[{name:"cmd",type:"ClientSendServerReqWrap2Cmd",id:1},{name:"body",type:"bytes",id:2}]},{name:"ClientSendServerRspWrap2",syntax:"proto3",fields:[{name:"body",type:"bytes",id:1}]},{name:"HeartBeatReq",syntax:"proto3",fields:[{name:"conType",type:"ConnectionType",id:1},{name:"routeId",type:"string",id:2}]},{name:"HeartBeatRsp",syntax:"proto3",fields:[]},{name:"ServerSendClientBstWrap2",syntax:"proto3",fields:[{name:"type",type:"ServerSendClientBstWrap2Type",id:1},{name:"msg",type:"bytes",id:2}]},{name:"NOUSEServerSendClientBstRspWrap2",syntax:"proto3",fields:[]},{name:"CheckLoginReq",syntax:"proto3",fields:[{name:"token",type:"string",id:1},{name:"routeId",type:"string",id:2}]},{name:"CheckLoginRsp",syntax:"proto3",fields:[]},{name:"PushBodyType",syntax:"proto3",fields:[{name:"pushMsg",type:"string",id:1}]},{name:"LoginReq",syntax:"proto3",fields:[{name:"gameId",type:"string",id:1},{name:"openId",type:"string",id:2},{name:"platform",type:"uint64",id:3},{name:"channel",type:"uint64",id:4},{name:"nonce",type:"uint64",id:5},{name:"timestamp",type:"uint64",id:6},{name:"sign",type:"string",id:7},{name:"deviceId",type:"string",id:8},{name:"mac",type:"string",id:9},{name:"imei",type:"string",id:10}]},{name:"LoginRsp",syntax:"proto3",fields:[{name:"token",type:"string",id:1},{name:"playerId",type:"string",id:2},{name:"expireTime",type:"uint64",id:3},{name:"sdkConfig",type:"SdkConfig",id:4}]},{name:"SdkConfig",syntax:"proto3",fields:[{name:"pingInterval",type:"uint32",id:1},{name:"reportInterval",type:"uint32",id:2},{name:"serverTime",type:"uint64",id:3},{name:"enableUdp",type:"bool",id:4}]},{name:"LogoutReq",syntax:"proto3",fields:[]},{name:"LogoutRsp",syntax:"proto3",fields:[]},{name:"StartFrameSyncReq",syntax:"proto3",fields:[]},{name:"StartFrameSyncRsp",syntax:"proto3",fields:[]},{name:"StopFrameSyncReq",syntax:"proto3",fields:[]},{name:"StopFrameSyncRsp",syntax:"proto3",fields:[]},{name:"FrameItem",syntax:"proto3",fields:[{name:"playerId",type:"string",id:1},{name:"data",type:"string",id:2},{name:"timestamp",type:"uint64",id:3}]},{name:"SendFrameReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"item",type:"FrameItem",id:2}]},{name:"SendFrameRsp",syntax:"proto3",fields:[]},{name:"FrameExtInfo",syntax:"proto3",fields:[{name:"seed",type:"uint64",id:1}]},{name:"Frame",syntax:"proto3",fields:[{name:"id",type:"uint64",id:1},{rule:"repeated",name:"items",type:"FrameItem",id:2},{name:"ext",type:"FrameExtInfo",id:3}]},{name:"RequestFrameReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"beginFrameId",type:"uint64",id:2},{name:"endFrameId",type:"uint64",id:3}]},{name:"RequestFrameRsp",syntax:"proto3",fields:[{rule:"repeated",name:"frames",type:"Frame",id:1}]},{name:"PlayerInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"teamId",type:"string",id:3},{name:"customPlayerStatus",type:"uint64",id:4},{name:"customProfile",type:"string",id:5},{name:"commonNetworkState",type:"NetworkState",id:6},{name:"relayNetworkState",type:"NetworkState",id:7},{name:"isRobot",type:"bool",id:8},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:9}]},{name:"TeamInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"minPlayers",type:"uint32",id:3},{name:"maxPlayers",type:"uint32",id:4}]},{name:"RoomInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"type",type:"string",id:3},{name:"createType",type:"CreateRoomType",id:4},{name:"maxPlayers",type:"uint64",id:5},{name:"owner",type:"string",id:6},{name:"isPrivate",type:"bool",id:9},{name:"customProperties",type:"string",id:10},{rule:"repeated",name:"playerList",type:"PlayerInfo",id:11},{rule:"repeated",name:"teamList",type:"TeamInfo",id:13},{name:"frameSyncState",type:"FrameSyncState",id:14},{name:"frameRate",type:"uint32",id:15},{name:"routeId",type:"string",id:16},{name:"createTime",type:"uint64",id:17},{name:"startGameTime",type:"uint64",id:18},{name:"isForbidJoin",type:"bool",id:19}]},{name:"CreateRoomReq",syntax:"proto3",fields:[{name:"roomName",type:"string",id:1},{name:"roomType",type:"string",id:2},{name:"createType",type:"CreateRoomType",id:3},{name:"maxPlayers",type:"uint64",id:4},{name:"isPrivate",type:"bool",id:7},{name:"customProperties",type:"string",id:8},{name:"playerInfo",type:"PlayerInfo",id:9},{name:"region",type:"string",id:11},{name:"owner",type:"string",id:12},{rule:"repeated",name:"playerList",type:"PlayerInfo",id:13},{rule:"repeated",name:"teamList",type:"TeamInfo",id:14}]},{name:"CreateRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"JoinRoomReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"teamId",type:"string",id:2},{name:"joinType",type:"JoinRoomType",id:3},{name:"playerInfo",type:"PlayerInfo",id:4}]},{name:"JoinRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"LeaveRoomReq",syntax:"proto3",fields:[]},{name:"LeaveRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"DismissRoomReq",syntax:"proto3",fields:[]},{name:"DismissRoomRsp",syntax:"proto3",fields:[]},{name:"ChangeRoomReq",syntax:"proto3",fields:[{name:"roomName",type:"string",id:1},{name:"owner",type:"string",id:2},{name:"isPrivate",type:"bool",id:5},{name:"customProperties",type:"string",id:6},{name:"isForbidJoin",type:"bool",id:7},{rule:"repeated",name:"changeRoomOptionList",type:"ChangeRoomOption",id:8}]},{name:"ChangeRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:4}]},{name:"SvrChangeRoomReq",syntax:"proto3",fields:[{name:"roomName",type:"string",id:1},{name:"owner",type:"string",id:2},{name:"isPrivate",type:"bool",id:5},{name:"customProperties",type:"string",id:6},{name:"isForbidJoin",type:"bool",id:7},{name:"roomId",type:"string",id:8},{rule:"repeated",name:"changeRoomOptionList",type:"ChangeRoomOption",id:9}]},{name:"SvrChangeRoomRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:4}]},{name:"RemovePlayerReq",syntax:"proto3",fields:[{name:"removePlayerId",type:"string",id:3}]},{name:"RemovePlayerRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"SvrRemovePlayerReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"removePlayerId",type:"string",id:3}]},{name:"SvrRemovePlayerRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"GetRoomByRoomIdReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1}]},{name:"GetRoomByRoomIdRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"SendToClientReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{rule:"repeated",name:"recvPlayerList",type:"string",id:2},{name:"msg",type:"string",id:3}]},{name:"SendToClientRsp",syntax:"proto3",fields:[]},{name:"ChangeCustomPlayerStatusReq",syntax:"proto3",fields:[{name:"customPlayerStatus",type:"uint64",id:1}]},{name:"ChangeCustomPlayerStatusRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"SvrChangeCustomPlayerStatusReq",syntax:"proto3",fields:[{name:"customPlayerStatus",type:"uint64",id:1}]},{name:"SvrChangeCustomPlayerStatusRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"ChangePlayerNetworkStateReq",syntax:"proto3",fields:[{name:"networkState",type:"NetworkState",id:1}]},{name:"ChangePlayerNetworkStateRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"GetRoomListReq",syntax:"proto3",fields:[{name:"gameId",type:"string",id:1},{name:"pageNo",type:"uint32",id:2},{name:"pageSize",type:"uint32",id:3},{name:"roomType",type:"string",id:4},{name:"isDesc",type:"bool",id:5}]},{name:"GetRoomListRsp",syntax:"proto3",fields:[{name:"gameId",type:"string",id:1},{rule:"repeated",name:"roomList",type:"RoomInfo",id:2},{name:"total",type:"uint64",id:3}]},{name:"MatchRoomSimpleReq",syntax:"proto3",fields:[{name:"roomType",type:"string",id:1},{name:"maxPlayers",type:"uint64",id:2},{name:"playerInfo",type:"PlayerInfo",id:3}]},{name:"MatchRoomSimpleRsp",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"MatchRoomComplexReq",syntax:"proto3",fields:[]},{name:"MatchRoomComplexRsp",syntax:"proto3",fields:[]},{name:"MatchPlayersSimpleReq",syntax:"proto3",fields:[]},{name:"MatchPlayersSimpleRsp",syntax:"proto3",fields:[]},{name:"MatchAttribute",syntax:"proto3",fields:[{name:"name",type:"string",id:1},{name:"value",type:"int32",id:2}]},{name:"MatchPlayerInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"customPlayerStatus",type:"uint64",id:3},{name:"customProfile",type:"string",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{name:"matchStatus",type:"MatchStatus",id:6},{name:"teamId",type:"string",id:7},{name:"region",type:"string",id:8},{name:"teamLeader",type:"string",id:9},{name:"sdkVersion",type:"string",id:10},{name:"groupId",type:"string",id:11}]},{name:"MatchGroupPlayerInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"name",type:"string",id:2},{name:"customPlayerStatus",type:"uint64",id:3},{name:"customProfile",type:"string",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{name:"matchStatus",type:"MatchStatus",id:6},{name:"teamId",type:"string",id:7},{name:"region",type:"string",id:8},{name:"teamLeader",type:"string",id:9},{name:"sdkVersion",type:"string",id:10},{name:"groupId",type:"string",id:11}]},{name:"MatchGroupInfo",syntax:"proto3",fields:[{name:"id",type:"string",id:1},{name:"leader",type:"string",id:2},{rule:"repeated",name:"playerIdList",type:"string",id:3},{rule:"repeated",name:"playerInfoList",type:"MatchPlayerInfo",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{name:"region",type:"string",id:6},{name:"sdkVersion",type:"string",id:7},{name:"teamId",type:"string",id:8}]},{name:"MatchTeamInfo",syntax:"proto3",fields:[{name:"teamId",type:"string",id:1},{name:"teamName",type:"string",id:2},{name:"teamLeader",type:"string",id:3},{rule:"repeated",name:"members",type:"string",id:4},{rule:"repeated",name:"matchAttributes",type:"MatchAttribute",id:5},{rule:"repeated",name:"memberSdkVersions",type:"string",id:6},{rule:"repeated",name:"groupIds",type:"string",id:7},{rule:"repeated",name:"groupSdkVersions",type:"string",id:8}]},{name:"MatchPlayersReq",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:2},{name:"playerInfo",type:"MatchPlayerInfo",id:3}]},{name:"MatchPlayersRsp",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1}]},{name:"MatchGroupReq",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1},{rule:"repeated",name:"playerInfoList",type:"MatchGroupPlayerInfo",id:2}]},{name:"MatchGroupRsp",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1}]},{name:"CancelPlayerMatchReq",syntax:"proto3",fields:[{name:"matchType",type:"MatchType",id:3}]},{name:"CancelPlayerMatchRsp",syntax:"proto3",fields:[]},{name:"CreateRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"DestroyRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"JoinRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1},{name:"joinPlayerId",type:"string",id:2}]},{name:"LeaveRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1},{name:"leavePlayerId",type:"string",id:2}]},{name:"RemovePlayerBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1},{name:"removePlayerId",type:"string",id:2}]},{name:"DismissRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"ChangeRoomBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"RecvFromClientBst",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"sendPlayerId",type:"string",id:2},{name:"msg",type:"string",id:3}]},{name:"ChangeCustomPlayerStatusBst",syntax:"proto3",fields:[{name:"changePlayerId",type:"string",id:1},{name:"customPlayerStatus",type:"uint64",id:2},{name:"roomInfo",type:"RoomInfo",id:3}]},{name:"ChangePlayerNetworkStateBst",syntax:"proto3",fields:[{name:"changePlayerId",type:"string",id:1},{name:"networkState",type:"NetworkState",id:2},{name:"roomInfo",type:"RoomInfo",id:3}]},{name:"MatchTimeoutBst",syntax:"proto3",fields:[{name:"matchType",type:"MatchType",id:1},{name:"errCode",type:"int32",id:2}]},{name:"CancelMatchBst",syntax:"proto3",fields:[{name:"matchCode",type:"string",id:1},{name:"playerId",type:"string",id:2}]},{name:"MatchPlayersBst",syntax:"proto3",fields:[{name:"matchType",type:"MatchType",id:1},{name:"roomInfo",type:"RoomInfo",id:2}]},{name:"StartFrameSyncBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"StopFrameSyncBst",syntax:"proto3",fields:[{name:"roomInfo",type:"RoomInfo",id:1}]},{name:"RecvFrameBst",syntax:"proto3",fields:[{name:"frame",type:"Frame",id:1}]},{name:"GameSvrCommunication",syntax:"proto3",fields:[{name:"type",type:"GameSvrForwardType",id:1},{name:"body",type:"bytes",id:2}]},{name:"NotifyRelayConnectionReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"ip",type:"string",id:2},{name:"port",type:"uint32",id:3}]},{name:"NotifyRoomEventReq",syntax:"proto3",fields:[{name:"cmd",type:"ServerSendClientBstWrap2Type",id:1},{name:"msg",type:"bytes",id:2}]},{name:"SendToGameSvrReq",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{name:"playerId",type:"string",id:2},{name:"data",type:"string",id:3}]},{name:"SendToGameSvrRsp",syntax:"proto3",fields:[]},{name:"RecvFromGameSvrBst",syntax:"proto3",fields:[{name:"roomId",type:"string",id:1},{rule:"repeated",name:"recvPlayerIdList",type:"string",id:2},{name:"data",type:"string",id:3}]},{name:"ClientRecvFromGameSvrRsp",syntax:"proto3",fields:[]}],enums:[{name:"ConnectionType",syntax:"proto3",values:[{name:"COMMON",id:0},{name:"RELAY",id:1}]},{name:"ServerSendClientBstWrap2Type",syntax:"proto3",values:[{name:"E_PUSH_TYPE_TEST",id:0},{name:"E_PUSH_TYPE_RELAY",id:1},{name:"E_PUSH_TYPE_GAMESVR",id:2},{name:"E_PUSH_TYPE_JOIN_ROOM",id:100},{name:"E_PUSH_TYPE_LEAVE_ROOM",id:101},{name:"E_PUSH_TYPE_DISMISS_ROOM",id:102},{name:"E_PUSH_TYPE_REMOVE_PLAYER",id:103},{name:"E_PUSH_TYPE_MODIFY_ROOM_PROPERTY",id:104},{name:"E_PUSH_TYPE_NETWORK_STATE",id:105},{name:"E_PUSH_TYPE_ROOM_CHAT",id:106},{name:"E_PUSH_TYPE_PLAYER_STATE",id:107},{name:"E_PUSH_TYPE_START_GAME",id:108},{name:"E_PUSH_TYPE_STOP_GAME",id:109},{name:"E_PUSH_TYPE_CREATE_ROOM",id:110},{name:"E_PUSH_TYPE_DESTROY_ROOM",id:111},{name:"E_PUSH_TYPE_MATCH_SUCCESS",id:200},{name:"E_PUSH_TYPE_MATCH_TIMEOUT",id:201},{name:"E_PUSH_TYPE_MATCH_CANCEL",id:202}]},{name:"ClientSendServerReqWrap2Cmd",syntax:"proto3",values:[{name:"E_CMD_INVALID",id:0},{name:"E_CMD_HEART_BEAT_REQ",id:100},{name:"E_CMD_CHECK_LOGIN_REQ",id:101},{name:"E_CMD_LOGIN_TO_ROOM_REQ",id:102},{name:"E_CMD_FORWARD_TO_RELAY_REQ",id:103},{name:"E_CMD_LOGIN_REQ",id:1e3},{name:"E_CMD_LOGOUT_REQ",id:1001},{name:"E_CMD_AUTH_REQ",id:1002},{name:"E_CMD_QUERY_BY_PLAYER_ID_REQ",id:1003},{name:"E_CMD_QUERY_BY_GAME_ID_REQ",id:1004},{name:"E_CMD_GET_ROOM_DETAIL_REQ",id:2001},{name:"E_CMD_JOIN_ROOM_REQ",id:2002},{name:"E_CMD_QUIT_ROOM_REQ",id:2003},{name:"E_CMD_CREATE_ROOM_REQ",id:2004},{name:"E_CMD_DESTORY_ROOM_REQ",id:2005},{name:"E_CMD_REMOVE_MEMBER_REQ",id:2006},{name:"E_CMD_CHANGE_ROOM_PROPERTIS_REQ",id:2007},{name:"E_CMD_DISSMISS_ROOM_REQ",id:2008},{name:"E_CMD_CHANGE_PLAYER_STATE_REQ",id:2009},{name:"E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ",id:2010},{name:"E_CMD_ROOM_CHAT_REQ",id:2011},{name:"E_CMD_START_FRAME_SYNC_REQ",id:2012},{name:"E_CMD_STOP_FRAME_SYNC_REQ",id:2013},{name:"E_CMD_GET_ROOM_LIST_REQ",id:2014},{name:"E_CMD_SVR_REMOVE_MEMBER_REQ",id:2015},{name:"E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ",id:2016},{name:"E_CMD_SVR_CHANGE_PLAYER_STATE_REQ",id:2017},{name:"E_CMD_GET_ROOM_LIST_V2_REQ",id:2018},{name:"E_CMD_MATCH_ROOM_SIMPLE_REQ",id:3001},{name:"E_CMD_MATCH_USER_SIMPLE_REQ",id:3002},{name:"E_CMD_MATCH_CANCEL_MATCH_REQ",id:3003},{name:"E_CMD_MATCH_ROOM_COMPLEX_REQ",id:3004},{name:"E_CMD_MATCH_PLAYER_COMPLEX_REQ",id:3005},{name:"E_CMD_MATCH_GROUP_REQ",id:3006},{name:"E_CMD_RELAY_SEND_FRAME_REQ",id:4e3},{name:"E_CMD_RELAY_REQUEST_FRAME_REQ",id:4001},{name:"E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ",id:4002},{name:"E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ",id:4003},{name:"E_CMD_NOTIFY_JOIN_ROOM",id:5e3},{name:"E_CMD_NOTIFY_QUIT_ROOM",id:5001},{name:"E_CMD_NOTIFY_DESTORY_ROOM",id:5002},{name:"E_CMD_NOTIFY_NET_STATE",id:5003},{name:"E_CMD_NOTIFY_KICK_MEMBER",id:5004},{name:"E_CMD_GET_ADDR_BY_ROUTER_ID_REQ",id:6e3}]},{name:"QAppProtoErrCode",syntax:"proto3",values:[{name:"EC_OK",id:0},{name:"EC_REQ_BAD_PKG",id:1},{name:"EC_CMD_INVALID",id:2},{name:"EC_PARAMS_INVALID",id:3},{name:"EC_INNER_ERROR",id:4},{name:"EC_TIME_OUT",id:5},{name:"EC_SERVER_BUSY",id:6},{name:"EC_NO_RIGHT",id:7},{name:"EC_ACCESS_CMD_INVALID_ERR",id:200},{name:"EC_ACCESS_CMD_GET_TOKEN_ERR",id:201},{name:"EC_ACCESS_CMD_TOKEN_PRE_EXPIRE",id:202},{name:"EC_ACCESS_CMD_INVALID_TOKEN",id:203},{name:"EC_ACCESS_PUSH_SERIALIZE_ERR",id:204},{name:"EC_ACCESS_LOGIN_BODY_PARSE_ERR",id:205},{name:"EC_ACCESS_CONN_ERR",id:206},{name:"EC_ACCESS_GET_RS_IP_ERR",id:207},{name:"EC_ACCESS_ADD_COMM_CONN_ERR",id:208},{name:"EC_ACCESS_ADD_HEART_CONN_ERR",id:209},{name:"EC_ACCESS_ADD_RELAY_CONN_ERR",id:210},{name:"EC_ACCESS_HEART_BODY_PARSE_ERR",id:211},{name:"EC_ACCESS_GET_COMM_CONNECT_ERR",id:212},{name:"EC_ACCESS_GET_RELAY_CONNECT_ERR",id:213},{name:"EC_ACCESS_ACCESS_INFO_EMPTY",id:214},{name:"EC_ACCESS_PLAYER_DUPLICATE_LOGIN",id:215},{name:"EC_ACCESS_NOE_RELAY_OR_STATE_SVR",id:216},{name:"EC_PLAYER_GAME_NOT_EXIST",id:1e4},{name:"EC_PLAYER_SECRET_KEY_FAIL",id:10001},{name:"EC_PLAYER_SIGN_ERR",id:10002},{name:"EC_PLAYER_DUPLICATE_REQ",id:10003},{name:"EC_PLAYER_TIMESTAMP_INVALID",id:10004},{name:"EC_PLAYER_QUERY_PLAYER_FAIL",id:10005},{name:"EC_PLAYER_ADD_PLAYER_FAIL",id:10006},{name:"EC_PLAYER_QUERY_GAME_FAIL",id:10007},{name:"EC_PLAYER_RECORD_NUM_ERR",id:10008},{name:"EC_PLAYER_GET_TOKEN_FAIL",id:10009},{name:"EC_PLAYER_TOKEN_NOT_EXIST",id:10010},{name:"EC_PLAYER_TOKEN_INVALID",id:10011},{name:"EC_PLAYER_CLEAR_TOKEN_FAIL",id:10012},{name:"EC_PLAYER_LOCK_FAIL",id:10013},{name:"EC_PLAYER_UNLOCK_FAIL",id:10014},{name:"EC_PLAYER_SAVE_TOKEN_FAIL",id:10015},{name:"EC_ROOM_CREATE_NO_PERMISSION",id:2e4},{name:"EC_ROOM_DESTORY_NO_PERMISSION",id:20001},{name:"EC_ROOM_JOIN_NO_PERMISSION",id:20002},{name:"EC_ROOM_REMOVE_PLAYER_NO_PERMISSION",id:20003},{name:"EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION",id:20004},{name:"EC_ROOM_DISSMISS_NO_PERMISSION",id:20005},{name:"EC_ROOM_REMOVE_SELF_NO_PERMISSION",id:20006},{name:"EC_ROOM_CHECK_LOGIN_SESSION_ERR",id:20007},{name:"EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM",id:20008},{name:"EC_ROOM_PLAYER_ALREADY_IN_ROOM",id:20010},{name:"EC_ROOM_PLAYER_NOT_IN_ROOM",id:20011},{name:"EC_ROOM_PLAYERS_EXCEED_LIMIT",id:20012},{name:"EC_ROOM_JOIN_NOT_ALLOW",id:20013},{name:"EC_ROOM_MAX_PLAYERS_INVALID",id:20014},{name:"EC_ROOM_CREATE_FAIL",id:20015},{name:"EC_ROOM_PLAYER_OFFLINE",id:20016},{name:"EC_ROOM_PARAM_PAGE_INVALID",id:20017},{name:"EC_ROOM_GET_PLAYER_INFO_ERR",id:20050},{name:"EC_ROOM_GET_ROOM_INFO_ERR",id:20051},{name:"EC_ROOM_MODIFY_OWNER_ERR",id:20052},{name:"EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT",id:20053},{name:"EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR",id:-20052},{name:"EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR",id:-20053},{name:"EC_ROOM_REDIS_UPDATE_ERR",id:-20054},{name:"EC_ROOM_REDIS_GET_LOCK_ERR",id:-20055},{name:"EC_ROOM_REDIS_CHECK_LOCK_ERR",id:-20056},{name:"EC_ROOM_REDIS_DEL_LOCK_ERR",id:-20057},{name:"EC_ROOM_QUERY_PLAYER_ERR",id:20060},{name:"EC_ROOM_QUERY_GAME_ERR",id:20061},{name:"EC_ROOM_PLAYER_INFO_NOT_EXIST",id:20062},{name:"EC_ROOM_GAME_INFO_NOT_EXIST",id:20063},{name:"EC_ROOM_HISTORY_INFO_INSERT_ERR",id:-20064},{name:"EC_ROOM_REGION_INFO_NOT_EXIST",id:20065},{name:"EC_ROOM_QUERY_REGION_ERR",id:20066},{name:"EC_ROOM_MODIFY_PLAYER_BUSY",id:20070},{name:"EC_ROOM_INFO_UNEXIST",id:20080},{name:"EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR",id:20090},{name:"EC_ROOM_INVALID_PARAMS_TEAM_ID",id:20100},{name:"EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED",id:20101},{name:"EC_ROOM_ALLOCATE_SERVICE_FAIL",id:-20200},{name:"EC_MATCH_NO_ROOM",id:3e4},{name:"EC_MATCH_TIMEOUT",id:30001},{name:"EC_MATCH_LOGIC_ERR",id:30002},{name:"EC_MATCH_ERR",id:30010},{name:"EC_MATCH_PLAYER_IS_IN_MATCH",id:30011},{name:"EC_MATCH_PLAYER_NOT_IN_MATCH",id:30012},{name:"EC_MATCH_GET_MATCH_INFO_ERR",id:30013},{name:"EC_MATCH_UPDATE_MATCH_INFO_ERR",id:30014},{name:"EC_MATCH_CANCEL_FAILED",id:30015},{name:"EC_MATCH_GET_PLAYER_LIST_INFO_ERR",id:30016},{name:"EC_MATCH_CREATE_ROOM_ERR",id:30041},{name:"EC_MATCH_JOIN_ROOM_ERR",id:30042},{name:"EC_MATCH_INVALID_PARAMS",id:30043},{name:"EC_MATCH_GROUP_NUM_EXCEED_LIMIT",id:30044},{name:"EC_MATCH_PLAYER_ID_IS_REPEATED",id:30045},{name:"EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM",id:30050},{name:"EC_MATCH_QUERY_PLAYER_ERR",id:30100},{name:"EC_MATCH_PLAYER_INFO_NOT_EXIST",id:30101},{name:"EC_MATCH_QUERY_GAME_ERR",id:30102},{name:"EC_MATCH_GAME_INFO_NOT_EXIST",id:30103},{name:"EC_MATCH_QUERY_REGION_ERR",id:30104},{name:"EC_MATCH_REGION_INFO_NOT_EXIST",id:30105},{name:"EC_MATCH_TEAM_FAIL",id:30106},{name:"EC_MATCH_PLAY_RULE_NOT_RUNNING",id:30107},{name:"EC_MATCH_PLAY_ATTR_NOT_FOUND",id:30108},{name:"EC_MATCH_PLAY_RULE_NOT_FOUND",id:30109},{name:"EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND",id:30110},{name:"EC_MATCH_PLAY_RULE_FUNC_ERR",id:30111},{name:"EC_MATCH_GET_PLAYER_ATTR_FAIL",id:30112},{name:"EC_MATCH_GET_TEAM_ATTR_FAIL",id:30113},{name:"EC_MATCH_INNER_LOGIC_ERR",id:-30150},{name:"EC_MATCH_INNER_PARAMS_ERR",id:-30160},{name:"EC_RELAY_ALREADY_EXISTS",id:4e4},{name:"EC_RELAY_NOT_EXISTS",id:40001},{name:"EC_RELAY_DATA_EXCEED_LIMITED",id:40002},{name:"EC_RELAY_MEMBER_ALREADY_EXISTS",id:40003},{name:"EC_RELAY_MEMBER_NOT_EXISTS",id:40004},{name:"EC_RELAY_STATE_INVALID",id:40005},{name:"EC_RELAY_INVALID_FRAME_RATE",id:40006},{name:"EC_RELAY_SET_FRAME_RATE_FORBIDDEN",id:40007},{name:"EC_RELAY_NO_MEMBERS",id:40008},{name:"EC_RELAY_GAMESVR_SERVICE_NOT_OPEN",id:40009},{name:"EC_RELAY_REQ_POD_FAIL",id:40010},{name:"EC_RELAY_NO_AVAILABLE_POD",id:40011},{name:"EC_RELAY_GET_FRAME_CACHE_FAIL",id:40012},{name:"EC_RELAY_HKV_CACHE_ERROR",id:40015},{name:"EC_RELAY_REDIS_CACHE_ERROR",id:40016},{name:"EC_RELAY_NOTIFY_RELAYWORKER_FAIL",id:40018},{name:"EC_RELAY_RESET_RELAY_ROOM_FAIL",id:40019},{name:"EC_RELAY_CLEAN_RELAY_ROOM_FAIL",id:40020},{name:"EC_RELAY_NO_PERMISSION",id:40100},{name:"EC_RELAY_NOTIFY_GAMESVR_FAIL",id:40200},{name:"EC_RELAY_FORWARD_TO_GAMESVR_FAIL",id:40201},{name:"EC_RELAY_FORWARD_TO_CLIENT_FAIL",id:40202},{name:"EC_INVALID_PARAMS",id:6e4},{name:"EC_INVALID_PARAMS_PLAY_MODE_VERSION",id:60001},{name:"EC_INVALID_PARAMS_PLAY_MODE_RULETYPE",id:60002},{name:"EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION",id:60003},{name:"EC_INVALID_PARAMS_PLAY_MODE_TEAM",id:60004},{name:"EC_INVALID_PARAMS_MSGQ_ENCODE",id:60020},{name:"EC_INVALID_PARAMS_MSGQ_DECODE",id:60021},{name:"EC_INVALID_PARAMS_GAME_ID",id:61e3},{name:"EC_INVALID_PARAMS_PLAYER_INFO",id:61001},{name:"EC_INVALID_PARAMS_MAX_PLAYERS",id:61002},{name:"EC_INVALID_PARAMS_ROOM_TYPE",id:61003},{name:"EC_INVALID_PARAMS_PLAYER_ID",id:61004},{name:"EC_INVALID_PARAMS_MATCH_TYPE",id:61005},{name:"EC_INVALID_PARAMS_MATCH_CODE",id:61006},{name:"EC_INVALID_PARAMS_OPEN_ID",id:61007},{name:"EC_INVALID_PARAMS_PLATFORM",id:61008},{name:"EC_INVALID_PARAMS_TIMESTAMP",id:61009},{name:"EC_INVALID_PARAMS_SIGN",id:61010},{name:"EC_INVALID_PARAMS_NONCE",id:61011},{name:"EC_INVALID_PARAMS_TOKEN",id:61012},{name:"EC_INVALID_PARAMS_NETWORK_STATE",id:61013},{name:"EC_INVALID_PARAMS_ROOM_NAME",id:61014},{name:"EC_INVALID_PARAMS_CREATE_ROOM_TYPE",id:61015},{name:"EC_INVALID_PARAMS_DEVICE_ID",id:61016},{name:"EC_INVALID_PARAMS_PAGE_NO",id:61017},{name:"EC_INVALID_PARAMS_PAGE_SIZE",id:61018},{name:"EC_INVALID_PARAMS_PLAYER_LIST",id:61019},{name:"EC_INVALID_PARAMS_MESSAGE",id:61020},{name:"EC_INVALID_CHANGE_ROOM_OPTION",id:61021},{name:"EC_MYSPP_SYSTEM_ERR",id:-1e3},{name:"EC_REDIS_KEY_NOT_EXIST",id:-66e3},{name:"EC_REDIS_SET_OP_ERR",id:-66001},{name:"EC_REDIS_GET_OP_ERR",id:-66002},{name:"EC_REDIS_DEL_OP_ERR",id:-66003},{name:"EC_REDIS_EXPIRE_OP_ERR",id:-66004},{name:"EC_REDIS_LOCK_OP_ERR",id:-66005},{name:"EC_REDIS_LOCK_ALREADY_EXIST",id:-66006},{name:"EC_REDIS_LIST_OP_ERR",id:-66020},{name:"EC_REDIS_LIST_POP_EMPTY",id:-66021},{name:"EC_REDIS_POOL_GET_INSTANCE_FAIL",id:-66022},{name:"EC_REDIS_SET_IS_EMPTY",id:-66023},{name:"EC_REDIS_OP_INVALID_PARAMS",id:-66024},{name:"EC_MYSQL_NO_ROW_FOUND",id:-66100},{name:"EC_MYSQL_MULTI_ROW_FOUND",id:-66101},{name:"EC_MYSQL_INSERT_FAIL",id:-66102},{name:"EC_MYSQL_DELETE_FAIL",id:-66103},{name:"EC_MYSQL_UPDATE_FAIL",id:-66104},{name:"EC_MYSQL_QUERYS_FAIL",id:-66105},{name:"EC_PB_SERIALIZE_TO_STR_ERR",id:-66200},{name:"EC_PB_PARSE_FROM_STR_ERR",id:-66201},{name:"EC_DATA_FORMAT_ERR",id:-66210},{name:"EC_JSON_FORMAT_ERR",id:-66211},{name:"EC_JSON_PLAY_MODE_FORMAT_ERR",id:-66212},{name:"EC_JSON_PLAY_MODE_PARISE_ERR",id:-66213},{name:"EC_INVALID_PARAMS_RECORE_ID",id:-66601},{name:"EC_HASHID_ERR",id:-66700},{name:"EC_HASHID_ENCODE_ERR",id:-66701},{name:"EC_HASHID_DECODE_ERR",id:-66702},{name:"EC_CONF_ROOM_ID_BUCKET_ERR",id:-66801},{name:"EC_SDK_SEND_FAIL",id:90001},{name:"EC_SDK_UNINIT",id:90002},{name:"EC_SDK_RES_TIMEOUT",id:90003},{name:"EC_SDK_NO_LOGIN",id:90004},{name:"EC_SDK_NO_CHECK_LOGIN",id:90005},{name:"EC_SDK_SOCKET_ERROR",id:90006},{name:"EC_SDK_SOCKET_CLOSE",id:90007},{name:"EC_SDK_NO_ROOM",id:90008}]},{name:"NetworkState",syntax:"proto3",values:[{name:"COMMON_OFFLINE",id:0},{name:"COMMON_ONLINE",id:1},{name:"RELAY_OFFLINE",id:2},{name:"RELAY_ONLINE",id:3}]},{name:"CreateRoomType",syntax:"proto3",values:[{name:"COMMON_CREATE",id:0},{name:"MATCH_CREATE",id:1}]},{name:"FrameSyncState",syntax:"proto3",values:[{name:"STOP",id:0},{name:"START",id:1}]},{name:"JoinRoomType",syntax:"proto3",values:[{name:"COMMON_JOIN",id:0},{name:"MATCH_JOIN",id:1}]},{name:"ChangeRoomOption",syntax:"proto3",values:[{name:"ROOM_NAME",id:0},{name:"OWNER",id:1},{name:"IS_VIEWED",id:2},{name:"IS_INVITED",id:3},{name:"IS_PRIVATE",id:4},{name:"CUSTOM_PROPERTIES",id:5},{name:"IS_FORBID_JOIN",id:6}]},{name:"MatchStatus",syntax:"proto3",values:[{name:"PENDING",id:0},{name:"MATCHING",id:1},{name:"SUCCESS",id:3},{name:"TIMEOUT",id:4}]},{name:"MatchType",syntax:"proto3",values:[{name:"PLAYER_SIMPLE",id:0},{name:"ROOM_SIMPLE",id:1},{name:"PLAYER_COMPLEX",id:2}]},{name:"GameSvrForwardType",syntax:"proto3",values:[{name:"E_GS_FORWARDTYPE_DEFAULT",id:0},{name:"E_GS_FORWARDTYPE_NOTIFY_CONNECTION",id:1},{name:"E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT",id:2},{name:"E_GS_FORWARDTYPE_NOTIFY_COM_EVENT",id:3},{name:"E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR",id:4}]}],services:[],isNamespace:!0}},function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"packageName",function(){return ne}),n.d(o,"ConnectionType",function(){return oe}),n.d(o,"ServerSendClientBstWrap2Type",function(){return re}),n.d(o,"ClientSendServerReqWrap2Cmd",function(){return ie}),n.d(o,"QAppProtoErrCode",function(){return se}),n.d(o,"NetworkState",function(){return ae}),n.d(o,"CreateRoomType",function(){return ce}),n.d(o,"FrameSyncState",function(){return le}),n.d(o,"JoinRoomType",function(){return _e}),n.d(o,"ChangeRoomOption",function(){return ue}),n.d(o,"MatchStatus",function(){return fe}),n.d(o,"MatchType",function(){return he}),n.d(o,"GameSvrForwardType",function(){return de}),n.d(o,"messages",function(){return Ee});var r,i,s={};n.r(s),n.d(s,"DebuggerLog",function(){return We}),n.d(s,"getSequenceStr",function(){return Ze}),n.d(s,"Base64",function(){return Ke}),n.d(s,"HmacSHA1",function(){return je}),n.d(s,"errCodeConvert",function(){return tt}),n.d(s,"getPlatform",function(){return nt}),n.d(s,"getChannel",function(){return ot}),n.d(s,"deviceId",function(){return et}),n.d(s,"asyncCallFunc",function(){return rt}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WX=1]="WX",e[e.QQ=2]="QQ",e[e.BD=3]="BD",e[e.OP=4]="OP",e[e.VV=5]="VV",e[e.WXMP=6]="WXMP",e[e.QQMP=7]="QQMP",e[e.COCOS_NATIVE=8]="COCOS_NATIVE"}(r||(r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ANDROID=1]="ANDROID",e[e.IOS=2]="IOS"}(i||(i={}));const a={},c=e=>t=>{const n=e(t.url);return n.binaryType="arraybuffer",{onClose:e=>n.onclose=e,onOpen:e=>n.onopen=e,onError:e=>n.onerror=e,onMessage:e=>n.onmessage=e,close:()=>n.close(),send:({data:e,fail:t,success:o})=>{try{n.send(e),setTimeout(()=>o&&o(),0)}catch(e){setTimeout(()=>t&&t(),0)}},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},l=c(e=>new WebSocket(e)),_=e=>{const t=(e.method+"").toLowerCase()||"get",n=new XMLHttpRequest;let o="",r="";if("get"===t){r="?";const t=Object.keys(e.data||{});for(const n of t)r+=n+"="+e.data[n]+"&"}"post"===t&&(o=JSON.stringify(e.data||{})),n.open(t,e.url+r),n.onreadystatechange=(()=>{if(4===n.readyState)return 200===n.status?e.success&&e.success({data:JSON.parse(n.responseText)}):e.fail&&e.fail()}),n.send("post"===t&&o)},u=e=>null,f=e=>null,h=e=>null,d=e=>null,E={},p=e=>E[e],R=(e,t)=>E[e]=t,m=e=>delete E[e],y=({fail:e})=>e&&e("ERROR"),g=()=>({}),S=({fail:e})=>e&&e("ERROR"),C=({fail:e})=>e&&e("ERROR");function O(e,t){const n=a;return t[e]||n[e]}a.connectSocket=l,a.request=_,a.onHide=u,a.offHide=f,a.onShow=h,a.offShow=d,a.getStorageSync=p,a.setStorageSync=R,a.removeStorageSync=m,a.getUserInfo=y,a.getSystemInfoSync=g,a.getLocation=S,a.getNetworkType=C,a.createUDPSocket=null;let I={};function T(){if("undefined"==typeof wx)return!1;if("undefined"==typeof GameGlobal)return!1;if(!wx.onHide)return!1;if(!wx.offHide)return!1;if(!wx.onShow)return!1;if(!wx.offShow)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1}catch(e){return!1}return!0}T()&&(I=wx);const v={};v.connectSocket=O("connectSocket",I),v.request=O("request",I),v.onHide=O("onHide",I),v.offHide=O("offHide",I),v.onShow=O("onShow",I),v.offShow=O("offShow",I),v.getStorageSync=O("getStorageSync",I),v.setStorageSync=O("setStorageSync",I),v.removeStorageSync=O("removeStorageSync",I),v.getUserInfo=O("getUserInfo",I),v.getSystemInfoSync=O("getSystemInfoSync",I),v.getLocation=O("getLocation",I),v.getNetworkType=O("getNetworkType",I),v.createUDPSocket=O("createUDPSocket",I);let A={};function M(){if("undefined"==typeof qq)return!1;if(!qq.onHide)return!1;if(!qq.offHide)return!1;if(!qq.onShow)return!1;if(!qq.offShow)return!1;if(!qq.getSystemInfoSync)return!1;if(!qq.getStorageSync)return!1;if(!qq.setStorageSync)return!1;if(!qq.connectSocket)return!1;if(!qq.request)return!1;try{if(!qq.getSystemInfoSync())return!1}catch(e){return!1}return!0}M()&&(A=qq);const N={},P=O("connectSocket",A);N.connectSocket=(e=>{const t=P(e);let n=0;return{onClose:e=>{t.onClose(t=>{n=3,e&&e(t)})},onOpen:e=>{t.onOpen(t=>{n=1,e&&e(t)})},onError:e=>{t.onError(o=>{n=3,t.close(),e&&e(o)})},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:o})=>t.send({data:e,fail:n,success:o}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}}),N.request=O("request",A),N.onHide=O("onHide",A),N.offHide=O("offHide",A),N.onShow=O("onShow",A),N.offShow=O("offShow",A),N.getStorageSync=O("getStorageSync",A),N.setStorageSync=O("setStorageSync",A),N.removeStorageSync=O("removeStorageSync",A),N.getUserInfo=O("getUserInfo",A),N.getSystemInfoSync=O("getSystemInfoSync",A),N.getLocation=O("getLocation",A),N.getNetworkType=O("getNetworkType",A),N.createUDPSocket=O("createUDPSocket",A);let L={};function w(){if("undefined"==typeof swan)return!1;if(!swan.onHide)return!1;if(!swan.offHide)return!1;if(!swan.onShow)return!1;if(!swan.offShow)return!1;if(!swan.getSystemInfoSync)return!1;if(!swan.getStorageSync)return!1;if(!swan.setStorageSync)return!1;if(!swan.connectSocket)return!1;if(!swan.request)return!1;try{if(!swan.getSystemInfoSync())return!1}catch(e){return!1}return!0}w()&&(L=swan);const b={},D=O("connectSocket",L);b.connectSocket=(e=>{const t=D(e);let n=0;return{onClose:e=>{t.onClose(t=>{n=3,e&&e(t)})},onOpen:e=>{t.onOpen(t=>{n=1,e&&e(t)})},onError:e=>{t.onError(t=>{n=3,e&&e(t)})},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:o})=>t.send({data:e,fail:n,success:o}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}}),b.request=O("request",L),b.onHide=O("onHide",L),b.offHide=O("offHide",L),b.onShow=O("onShow",L),b.offShow=O("offShow",L),b.getStorageSync=O("getStorageSync",L),b.setStorageSync=O("setStorageSync",L),b.removeStorageSync=O("removeStorageSync",L),b.getUserInfo=O("getUserInfo",L),b.getSystemInfoSync=O("getSystemInfoSync",L),b.getLocation=O("getLocation",L),b.getNetworkType=O("getNetworkType",L),b.createUDPSocket=null;let F={};function Y(){if("undefined"==typeof qg)return!1;if(!qg.onHide)return!1;if(!qg.offHide)return!1;if(!qg.onShow)return!1;if(!qg.offShow)return!1;if(!qg.getSystemInfoSync)return!1;if(!qg.getProvider)return!1;if(!localStorage.getItem)return!1;if(!localStorage.setItem)return!1;if(!WebSocket)return!1;if(!XMLHttpRequest)return!1;if(!localStorage)return!1;try{if("OPPO"!==qg.getProvider().toLocaleUpperCase())return!1}catch(e){return!1}try{if(!qg.getSystemInfoSync())return!1}catch(e){return!1}return!0}Y()&&(F=qg);const U={};U.connectSocket=l,U.request=_,U.onHide=O("onHide",F),U.offHide=O("offHide",F),U.onShow=O("onShow",F),U.offShow=O("offShow",F),U.getStorageSync=(e=>{localStorage.getItem(e)}),U.setStorageSync=((e,t)=>{localStorage.setItem(e,t)}),U.removeStorageSync=(e=>{localStorage.removeItem(e)}),U.getUserInfo=y,U.getSystemInfoSync=O("getSystemInfoSync",F),U.getLocation=O("getLocation",F),U.getNetworkType=O("getNetworkType",F),U.createUDPSocket=null;let k={};function x(){if("undefined"==typeof qg)return!1;if(!qg.onHide)return!1;if(!qg.offHide)return!1;if(!qg.onShow)return!1;if(!qg.offShow)return!1;if(!qg.getSystemInfoSync)return!1;if(!qg.getProvider)return!1;if(!qg.getStorageSync)return!1;if(!qg.setStorageSync)return!1;if(!qg.createWebSocket)return!1;if(!qg.request)return!1;try{if("VIVO"!==qg.getProvider().toLocaleUpperCase())return!1}catch(e){return!1}try{if(!qg.getSystemInfoSync())return!1}catch(e){return!1}return!0}x()&&(k=qg);const B={connectSocket:e=>{const t=qg.createWebSocket({url:e.url});return{onClose:e=>t.onclose=e,onOpen:e=>t.onopen=e,onError:e=>t.onerror=e,onMessage:e=>t.onmessage=e,close:()=>t.close(),send:({data:e,fail:n,success:o})=>{try{t.send(e),setTimeout(()=>o&&o(),0)}catch(e){setTimeout(()=>n&&n(),0)}},get readyState(){return t.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}},request:e=>(e.data="object"==typeof e.data?JSON.stringify(e.data):e.data,qg.request(e))};B.onHide=O("onHide",k),B.offHide=O("offHide",k),B.onShow=O("onShow",k),B.offShow=O("offShow",k),B.getStorageSync=(e=>qg.getStorageSync({key:e})),B.setStorageSync=((e,t)=>qg.setStorageSync({key:e,value:t})),B.removeStorageSync=(e=>qg.deleteStorageSync({key:e})),B.getUserInfo=y,B.getSystemInfoSync=O("getSystemInfoSync",k),B.getLocation=O("getLocation",k),B.getNetworkType=(e=>{qg.getNetworkType({success:t=>{e.success({networkType:t.type})},fail:()=>{e.fail()},complete:()=>{e.complete()}})}),B.createUDPSocket=null;let H={};function G(){if("undefined"==typeof wx)return!1;if("undefined"==typeof App)return!1;if("undefined"==typeof Page)return!1;if("function"!=typeof getApp)return!1;if(!wx.onAppHide)return!1;if(!wx.offAppHide)return!1;if(!wx.onAppShow)return!1;if(!wx.offAppShow)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1;if("qq"===wx.getSystemInfoSync().AppPlatform)return!1}catch(e){return!1}return!0}let q=u,V=f,Q=h,W=d;G()&&(H=wx,q=wx.onAppHide,V=wx.offAppHide,Q=wx.onAppShow,W=wx.offAppShow);const K={};K.connectSocket=O("connectSocket",H),K.request=O("request",H),K.onHide=q,K.offHide=V,K.onShow=Q,K.offShow=W,K.getStorageSync=O("getStorageSync",H),K.setStorageSync=O("setStorageSync",H),K.removeStorageSync=O("removeStorageSync",H),K.getUserInfo=O("getUserInfo",H),K.getSystemInfoSync=O("getSystemInfoSync",H),K.getLocation=O("getLocation",H),K.getNetworkType=O("getNetworkType",H),K.createUDPSocket=O("createUDPSocket",H);let j={};function J(){if("undefined"==typeof qq)return!1;if("undefined"==typeof App)return!1;if("undefined"==typeof Page)return!1;if("function"!=typeof getApp)return!1;if(!qq.onAppHide)return!1;if(!qq.offAppHide)return!1;if(!qq.onAppShow)return!1;if(!qq.offAppShow)return!1;if(!qq.getSystemInfoSync)return!1;if(!qq.getStorageSync)return!1;if(!qq.setStorageSync)return!1;if(!qq.connectSocket)return!1;if(!qq.request)return!1;try{if(!qq.getSystemInfoSync())return!1;if("qq"!==qq.getSystemInfoSync().AppPlatform)return!1}catch(e){return!1}return!0}let X=u,z=f,Z=h,$=d;J()&&(j=qq,X=qq.onAppHide,z=qq.offAppHide,Z=qq.onAppShow,$=qq.offAppShow);const ee={},te=O("connectSocket",j);ee.connectSocket=(e=>{const t=te(e);let n=0;return{onClose:e=>{t.onClose(t=>{n=3,e&&e(t)})},onOpen:e=>{t.onOpen(t=>{n=1,e&&e(t)})},onError:e=>{t.onError(o=>{n=3,t.close(),e&&e(o)})},onMessage:e=>t.onMessage(e),close:()=>{n=3,t.close()},send:({data:e,fail:n,success:o})=>t.send({data:e,fail:n,success:o}),get readyState(){return n},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}}),ee.request=O("request",j),ee.onHide=X,ee.offHide=z,ee.onShow=Z,ee.offShow=$,ee.getStorageSync=O("getStorageSync",j),ee.setStorageSync=O("setStorageSync",j),ee.removeStorageSync=O("removeStorageSync",j),ee.getUserInfo=O("getUserInfo",j),ee.getSystemInfoSync=O("getSystemInfoSync",j),ee.getLocation=O("getLocation",j),ee.getNetworkType=O("getNetworkType",j),ee.createUDPSocket=O("createUDPSocket",j);const ne="mgobexs";var oe,re,ie,se,ae,ce,le,_e,ue,fe,he,de;!function(e){e[e.COMMON=0]="COMMON",e[e.RELAY=1]="RELAY"}(oe||(oe={})),function(e){e[e.E_PUSH_TYPE_TEST=0]="E_PUSH_TYPE_TEST",e[e.E_PUSH_TYPE_RELAY=1]="E_PUSH_TYPE_RELAY",e[e.E_PUSH_TYPE_GAMESVR=2]="E_PUSH_TYPE_GAMESVR",e[e.E_PUSH_TYPE_JOIN_ROOM=100]="E_PUSH_TYPE_JOIN_ROOM",e[e.E_PUSH_TYPE_LEAVE_ROOM=101]="E_PUSH_TYPE_LEAVE_ROOM",e[e.E_PUSH_TYPE_DISMISS_ROOM=102]="E_PUSH_TYPE_DISMISS_ROOM",e[e.E_PUSH_TYPE_REMOVE_PLAYER=103]="E_PUSH_TYPE_REMOVE_PLAYER",e[e.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY=104]="E_PUSH_TYPE_MODIFY_ROOM_PROPERTY",e[e.E_PUSH_TYPE_NETWORK_STATE=105]="E_PUSH_TYPE_NETWORK_STATE",e[e.E_PUSH_TYPE_ROOM_CHAT=106]="E_PUSH_TYPE_ROOM_CHAT",e[e.E_PUSH_TYPE_PLAYER_STATE=107]="E_PUSH_TYPE_PLAYER_STATE",e[e.E_PUSH_TYPE_START_GAME=108]="E_PUSH_TYPE_START_GAME",e[e.E_PUSH_TYPE_STOP_GAME=109]="E_PUSH_TYPE_STOP_GAME",e[e.E_PUSH_TYPE_CREATE_ROOM=110]="E_PUSH_TYPE_CREATE_ROOM",e[e.E_PUSH_TYPE_DESTROY_ROOM=111]="E_PUSH_TYPE_DESTROY_ROOM",e[e.E_PUSH_TYPE_MATCH_SUCCESS=200]="E_PUSH_TYPE_MATCH_SUCCESS",e[e.E_PUSH_TYPE_MATCH_TIMEOUT=201]="E_PUSH_TYPE_MATCH_TIMEOUT",e[e.E_PUSH_TYPE_MATCH_CANCEL=202]="E_PUSH_TYPE_MATCH_CANCEL"}(re||(re={})),function(e){e[e.E_CMD_INVALID=0]="E_CMD_INVALID",e[e.E_CMD_HEART_BEAT_REQ=100]="E_CMD_HEART_BEAT_REQ",e[e.E_CMD_CHECK_LOGIN_REQ=101]="E_CMD_CHECK_LOGIN_REQ",e[e.E_CMD_LOGIN_TO_ROOM_REQ=102]="E_CMD_LOGIN_TO_ROOM_REQ",e[e.E_CMD_FORWARD_TO_RELAY_REQ=103]="E_CMD_FORWARD_TO_RELAY_REQ",e[e.E_CMD_LOGIN_REQ=1e3]="E_CMD_LOGIN_REQ",e[e.E_CMD_LOGOUT_REQ=1001]="E_CMD_LOGOUT_REQ",e[e.E_CMD_AUTH_REQ=1002]="E_CMD_AUTH_REQ",e[e.E_CMD_QUERY_BY_PLAYER_ID_REQ=1003]="E_CMD_QUERY_BY_PLAYER_ID_REQ",e[e.E_CMD_QUERY_BY_GAME_ID_REQ=1004]="E_CMD_QUERY_BY_GAME_ID_REQ",e[e.E_CMD_GET_ROOM_DETAIL_REQ=2001]="E_CMD_GET_ROOM_DETAIL_REQ",e[e.E_CMD_JOIN_ROOM_REQ=2002]="E_CMD_JOIN_ROOM_REQ",e[e.E_CMD_QUIT_ROOM_REQ=2003]="E_CMD_QUIT_ROOM_REQ",e[e.E_CMD_CREATE_ROOM_REQ=2004]="E_CMD_CREATE_ROOM_REQ",e[e.E_CMD_DESTORY_ROOM_REQ=2005]="E_CMD_DESTORY_ROOM_REQ",e[e.E_CMD_REMOVE_MEMBER_REQ=2006]="E_CMD_REMOVE_MEMBER_REQ",e[e.E_CMD_CHANGE_ROOM_PROPERTIS_REQ=2007]="E_CMD_CHANGE_ROOM_PROPERTIS_REQ",e[e.E_CMD_DISSMISS_ROOM_REQ=2008]="E_CMD_DISSMISS_ROOM_REQ",e[e.E_CMD_CHANGE_PLAYER_STATE_REQ=2009]="E_CMD_CHANGE_PLAYER_STATE_REQ",e[e.E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ=2010]="E_CMD_CHANGE_PLAYER_NETWORK_STATE_REQ",e[e.E_CMD_ROOM_CHAT_REQ=2011]="E_CMD_ROOM_CHAT_REQ",e[e.E_CMD_START_FRAME_SYNC_REQ=2012]="E_CMD_START_FRAME_SYNC_REQ",e[e.E_CMD_STOP_FRAME_SYNC_REQ=2013]="E_CMD_STOP_FRAME_SYNC_REQ",e[e.E_CMD_GET_ROOM_LIST_REQ=2014]="E_CMD_GET_ROOM_LIST_REQ",e[e.E_CMD_SVR_REMOVE_MEMBER_REQ=2015]="E_CMD_SVR_REMOVE_MEMBER_REQ",e[e.E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ=2016]="E_CMD_SVR_CHANGE_ROOM_PROPERTIS_REQ",e[e.E_CMD_SVR_CHANGE_PLAYER_STATE_REQ=2017]="E_CMD_SVR_CHANGE_PLAYER_STATE_REQ",e[e.E_CMD_GET_ROOM_LIST_V2_REQ=2018]="E_CMD_GET_ROOM_LIST_V2_REQ",e[e.E_CMD_MATCH_ROOM_SIMPLE_REQ=3001]="E_CMD_MATCH_ROOM_SIMPLE_REQ",e[e.E_CMD_MATCH_USER_SIMPLE_REQ=3002]="E_CMD_MATCH_USER_SIMPLE_REQ",e[e.E_CMD_MATCH_CANCEL_MATCH_REQ=3003]="E_CMD_MATCH_CANCEL_MATCH_REQ",e[e.E_CMD_MATCH_ROOM_COMPLEX_REQ=3004]="E_CMD_MATCH_ROOM_COMPLEX_REQ",e[e.E_CMD_MATCH_PLAYER_COMPLEX_REQ=3005]="E_CMD_MATCH_PLAYER_COMPLEX_REQ",e[e.E_CMD_MATCH_GROUP_REQ=3006]="E_CMD_MATCH_GROUP_REQ",e[e.E_CMD_RELAY_SEND_FRAME_REQ=4e3]="E_CMD_RELAY_SEND_FRAME_REQ",e[e.E_CMD_RELAY_REQUEST_FRAME_REQ=4001]="E_CMD_RELAY_REQUEST_FRAME_REQ",e[e.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ=4002]="E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ",e[e.E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ=4003]="E_CMD_RELAY_CLIENT_RECV_FROM_GAMESVR_REQ",e[e.E_CMD_NOTIFY_JOIN_ROOM=5e3]="E_CMD_NOTIFY_JOIN_ROOM",e[e.E_CMD_NOTIFY_QUIT_ROOM=5001]="E_CMD_NOTIFY_QUIT_ROOM",e[e.E_CMD_NOTIFY_DESTORY_ROOM=5002]="E_CMD_NOTIFY_DESTORY_ROOM",e[e.E_CMD_NOTIFY_NET_STATE=5003]="E_CMD_NOTIFY_NET_STATE",e[e.E_CMD_NOTIFY_KICK_MEMBER=5004]="E_CMD_NOTIFY_KICK_MEMBER",e[e.E_CMD_GET_ADDR_BY_ROUTER_ID_REQ=6e3]="E_CMD_GET_ADDR_BY_ROUTER_ID_REQ"}(ie||(ie={})),function(e){e[e.EC_OK=0]="EC_OK",e[e.EC_REQ_BAD_PKG=1]="EC_REQ_BAD_PKG",e[e.EC_CMD_INVALID=2]="EC_CMD_INVALID",e[e.EC_PARAMS_INVALID=3]="EC_PARAMS_INVALID",e[e.EC_INNER_ERROR=4]="EC_INNER_ERROR",e[e.EC_TIME_OUT=5]="EC_TIME_OUT",e[e.EC_SERVER_BUSY=6]="EC_SERVER_BUSY",e[e.EC_NO_RIGHT=7]="EC_NO_RIGHT",e[e.EC_ACCESS_CMD_INVALID_ERR=200]="EC_ACCESS_CMD_INVALID_ERR",e[e.EC_ACCESS_CMD_GET_TOKEN_ERR=201]="EC_ACCESS_CMD_GET_TOKEN_ERR",e[e.EC_ACCESS_CMD_TOKEN_PRE_EXPIRE=202]="EC_ACCESS_CMD_TOKEN_PRE_EXPIRE",e[e.EC_ACCESS_CMD_INVALID_TOKEN=203]="EC_ACCESS_CMD_INVALID_TOKEN",e[e.EC_ACCESS_PUSH_SERIALIZE_ERR=204]="EC_ACCESS_PUSH_SERIALIZE_ERR",e[e.EC_ACCESS_LOGIN_BODY_PARSE_ERR=205]="EC_ACCESS_LOGIN_BODY_PARSE_ERR",e[e.EC_ACCESS_CONN_ERR=206]="EC_ACCESS_CONN_ERR",e[e.EC_ACCESS_GET_RS_IP_ERR=207]="EC_ACCESS_GET_RS_IP_ERR",e[e.EC_ACCESS_ADD_COMM_CONN_ERR=208]="EC_ACCESS_ADD_COMM_CONN_ERR",e[e.EC_ACCESS_ADD_HEART_CONN_ERR=209]="EC_ACCESS_ADD_HEART_CONN_ERR",e[e.EC_ACCESS_ADD_RELAY_CONN_ERR=210]="EC_ACCESS_ADD_RELAY_CONN_ERR",e[e.EC_ACCESS_HEART_BODY_PARSE_ERR=211]="EC_ACCESS_HEART_BODY_PARSE_ERR",e[e.EC_ACCESS_GET_COMM_CONNECT_ERR=212]="EC_ACCESS_GET_COMM_CONNECT_ERR",e[e.EC_ACCESS_GET_RELAY_CONNECT_ERR=213]="EC_ACCESS_GET_RELAY_CONNECT_ERR",e[e.EC_ACCESS_ACCESS_INFO_EMPTY=214]="EC_ACCESS_ACCESS_INFO_EMPTY",e[e.EC_ACCESS_PLAYER_DUPLICATE_LOGIN=215]="EC_ACCESS_PLAYER_DUPLICATE_LOGIN",e[e.EC_ACCESS_NOE_RELAY_OR_STATE_SVR=216]="EC_ACCESS_NOE_RELAY_OR_STATE_SVR",e[e.EC_PLAYER_GAME_NOT_EXIST=1e4]="EC_PLAYER_GAME_NOT_EXIST",e[e.EC_PLAYER_SECRET_KEY_FAIL=10001]="EC_PLAYER_SECRET_KEY_FAIL",e[e.EC_PLAYER_SIGN_ERR=10002]="EC_PLAYER_SIGN_ERR",e[e.EC_PLAYER_DUPLICATE_REQ=10003]="EC_PLAYER_DUPLICATE_REQ",e[e.EC_PLAYER_TIMESTAMP_INVALID=10004]="EC_PLAYER_TIMESTAMP_INVALID",e[e.EC_PLAYER_QUERY_PLAYER_FAIL=10005]="EC_PLAYER_QUERY_PLAYER_FAIL",e[e.EC_PLAYER_ADD_PLAYER_FAIL=10006]="EC_PLAYER_ADD_PLAYER_FAIL",e[e.EC_PLAYER_QUERY_GAME_FAIL=10007]="EC_PLAYER_QUERY_GAME_FAIL",e[e.EC_PLAYER_RECORD_NUM_ERR=10008]="EC_PLAYER_RECORD_NUM_ERR",e[e.EC_PLAYER_GET_TOKEN_FAIL=10009]="EC_PLAYER_GET_TOKEN_FAIL",e[e.EC_PLAYER_TOKEN_NOT_EXIST=10010]="EC_PLAYER_TOKEN_NOT_EXIST",e[e.EC_PLAYER_TOKEN_INVALID=10011]="EC_PLAYER_TOKEN_INVALID",e[e.EC_PLAYER_CLEAR_TOKEN_FAIL=10012]="EC_PLAYER_CLEAR_TOKEN_FAIL",e[e.EC_PLAYER_LOCK_FAIL=10013]="EC_PLAYER_LOCK_FAIL",e[e.EC_PLAYER_UNLOCK_FAIL=10014]="EC_PLAYER_UNLOCK_FAIL",e[e.EC_PLAYER_SAVE_TOKEN_FAIL=10015]="EC_PLAYER_SAVE_TOKEN_FAIL",e[e.EC_ROOM_CREATE_NO_PERMISSION=2e4]="EC_ROOM_CREATE_NO_PERMISSION",e[e.EC_ROOM_DESTORY_NO_PERMISSION=20001]="EC_ROOM_DESTORY_NO_PERMISSION",e[e.EC_ROOM_JOIN_NO_PERMISSION=20002]="EC_ROOM_JOIN_NO_PERMISSION",e[e.EC_ROOM_REMOVE_PLAYER_NO_PERMISSION=20003]="EC_ROOM_REMOVE_PLAYER_NO_PERMISSION",e[e.EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION=20004]="EC_ROOM_MODIFY_PROPERTIES_NO_PEMISSION",e[e.EC_ROOM_DISSMISS_NO_PERMISSION=20005]="EC_ROOM_DISSMISS_NO_PERMISSION",e[e.EC_ROOM_REMOVE_SELF_NO_PERMISSION=20006]="EC_ROOM_REMOVE_SELF_NO_PERMISSION",e[e.EC_ROOM_CHECK_LOGIN_SESSION_ERR=20007]="EC_ROOM_CHECK_LOGIN_SESSION_ERR",e[e.EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM=20008]="EC_ROOM_REMOVE_PLAYER_NOT_IN_ROOM",e[e.EC_ROOM_PLAYER_ALREADY_IN_ROOM=20010]="EC_ROOM_PLAYER_ALREADY_IN_ROOM",e[e.EC_ROOM_PLAYER_NOT_IN_ROOM=20011]="EC_ROOM_PLAYER_NOT_IN_ROOM",e[e.EC_ROOM_PLAYERS_EXCEED_LIMIT=20012]="EC_ROOM_PLAYERS_EXCEED_LIMIT",e[e.EC_ROOM_JOIN_NOT_ALLOW=20013]="EC_ROOM_JOIN_NOT_ALLOW",e[e.EC_ROOM_MAX_PLAYERS_INVALID=20014]="EC_ROOM_MAX_PLAYERS_INVALID",e[e.EC_ROOM_CREATE_FAIL=20015]="EC_ROOM_CREATE_FAIL",e[e.EC_ROOM_PLAYER_OFFLINE=20016]="EC_ROOM_PLAYER_OFFLINE",e[e.EC_ROOM_PARAM_PAGE_INVALID=20017]="EC_ROOM_PARAM_PAGE_INVALID",e[e.EC_ROOM_GET_PLAYER_INFO_ERR=20050]="EC_ROOM_GET_PLAYER_INFO_ERR",e[e.EC_ROOM_GET_ROOM_INFO_ERR=20051]="EC_ROOM_GET_ROOM_INFO_ERR",e[e.EC_ROOM_MODIFY_OWNER_ERR=20052]="EC_ROOM_MODIFY_OWNER_ERR",e[e.EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT=20053]="EC_ROOM_MAX_ROOM_NUMBER_EXCEED_LIMIT",e[e.EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR=-20052]="EC_ROOM_REMOVE_REDIS_PLAYER_ROOM_MATCH_ERR",e[e.EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR=-20053]="EC_ROOM_REMOVE_REDIS_ROOM_INFO_ERR",e[e.EC_ROOM_REDIS_UPDATE_ERR=-20054]="EC_ROOM_REDIS_UPDATE_ERR",e[e.EC_ROOM_REDIS_GET_LOCK_ERR=-20055]="EC_ROOM_REDIS_GET_LOCK_ERR",e[e.EC_ROOM_REDIS_CHECK_LOCK_ERR=-20056]="EC_ROOM_REDIS_CHECK_LOCK_ERR",e[e.EC_ROOM_REDIS_DEL_LOCK_ERR=-20057]="EC_ROOM_REDIS_DEL_LOCK_ERR",e[e.EC_ROOM_QUERY_PLAYER_ERR=20060]="EC_ROOM_QUERY_PLAYER_ERR",e[e.EC_ROOM_QUERY_GAME_ERR=20061]="EC_ROOM_QUERY_GAME_ERR",e[e.EC_ROOM_PLAYER_INFO_NOT_EXIST=20062]="EC_ROOM_PLAYER_INFO_NOT_EXIST",e[e.EC_ROOM_GAME_INFO_NOT_EXIST=20063]="EC_ROOM_GAME_INFO_NOT_EXIST",e[e.EC_ROOM_HISTORY_INFO_INSERT_ERR=-20064]="EC_ROOM_HISTORY_INFO_INSERT_ERR",e[e.EC_ROOM_REGION_INFO_NOT_EXIST=20065]="EC_ROOM_REGION_INFO_NOT_EXIST",e[e.EC_ROOM_QUERY_REGION_ERR=20066]="EC_ROOM_QUERY_REGION_ERR",e[e.EC_ROOM_MODIFY_PLAYER_BUSY=20070]="EC_ROOM_MODIFY_PLAYER_BUSY",e[e.EC_ROOM_INFO_UNEXIST=20080]="EC_ROOM_INFO_UNEXIST",e[e.EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR=20090]="EC_ROOM_ALLOCATE_RELAYSVR_IP_PORT_ERR",e[e.EC_ROOM_INVALID_PARAMS_TEAM_ID=20100]="EC_ROOM_INVALID_PARAMS_TEAM_ID",e[e.EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED=20101]="EC_ROOM_TEAM_MEMBER_LIMIT_EXCEED",e[e.EC_ROOM_ALLOCATE_SERVICE_FAIL=-20200]="EC_ROOM_ALLOCATE_SERVICE_FAIL",e[e.EC_MATCH_NO_ROOM=3e4]="EC_MATCH_NO_ROOM",e[e.EC_MATCH_TIMEOUT=30001]="EC_MATCH_TIMEOUT",e[e.EC_MATCH_LOGIC_ERR=30002]="EC_MATCH_LOGIC_ERR",e[e.EC_MATCH_ERR=30010]="EC_MATCH_ERR",e[e.EC_MATCH_PLAYER_IS_IN_MATCH=30011]="EC_MATCH_PLAYER_IS_IN_MATCH",e[e.EC_MATCH_PLAYER_NOT_IN_MATCH=30012]="EC_MATCH_PLAYER_NOT_IN_MATCH",e[e.EC_MATCH_GET_MATCH_INFO_ERR=30013]="EC_MATCH_GET_MATCH_INFO_ERR",e[e.EC_MATCH_UPDATE_MATCH_INFO_ERR=30014]="EC_MATCH_UPDATE_MATCH_INFO_ERR",e[e.EC_MATCH_CANCEL_FAILED=30015]="EC_MATCH_CANCEL_FAILED",e[e.EC_MATCH_GET_PLAYER_LIST_INFO_ERR=30016]="EC_MATCH_GET_PLAYER_LIST_INFO_ERR",e[e.EC_MATCH_CREATE_ROOM_ERR=30041]="EC_MATCH_CREATE_ROOM_ERR",e[e.EC_MATCH_JOIN_ROOM_ERR=30042]="EC_MATCH_JOIN_ROOM_ERR",e[e.EC_MATCH_INVALID_PARAMS=30043]="EC_MATCH_INVALID_PARAMS",e[e.EC_MATCH_GROUP_NUM_EXCEED_LIMIT=30044]="EC_MATCH_GROUP_NUM_EXCEED_LIMIT",e[e.EC_MATCH_PLAYER_ID_IS_REPEATED=30045]="EC_MATCH_PLAYER_ID_IS_REPEATED",e[e.EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM=30050]="EC_MATCH_CREATE_ROOM_PLAYER_ALREADY_IN_ROOM",e[e.EC_MATCH_QUERY_PLAYER_ERR=30100]="EC_MATCH_QUERY_PLAYER_ERR",e[e.EC_MATCH_PLAYER_INFO_NOT_EXIST=30101]="EC_MATCH_PLAYER_INFO_NOT_EXIST",e[e.EC_MATCH_QUERY_GAME_ERR=30102]="EC_MATCH_QUERY_GAME_ERR",e[e.EC_MATCH_GAME_INFO_NOT_EXIST=30103]="EC_MATCH_GAME_INFO_NOT_EXIST",e[e.EC_MATCH_QUERY_REGION_ERR=30104]="EC_MATCH_QUERY_REGION_ERR",e[e.EC_MATCH_REGION_INFO_NOT_EXIST=30105]="EC_MATCH_REGION_INFO_NOT_EXIST",e[e.EC_MATCH_TEAM_FAIL=30106]="EC_MATCH_TEAM_FAIL",e[e.EC_MATCH_PLAY_RULE_NOT_RUNNING=30107]="EC_MATCH_PLAY_RULE_NOT_RUNNING",e[e.EC_MATCH_PLAY_ATTR_NOT_FOUND=30108]="EC_MATCH_PLAY_ATTR_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_NOT_FOUND=30109]="EC_MATCH_PLAY_RULE_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND=30110]="EC_MATCH_PLAY_RULE_ATTR_SEGMENT_NOT_FOUND",e[e.EC_MATCH_PLAY_RULE_FUNC_ERR=30111]="EC_MATCH_PLAY_RULE_FUNC_ERR",e[e.EC_MATCH_GET_PLAYER_ATTR_FAIL=30112]="EC_MATCH_GET_PLAYER_ATTR_FAIL",e[e.EC_MATCH_GET_TEAM_ATTR_FAIL=30113]="EC_MATCH_GET_TEAM_ATTR_FAIL",e[e.EC_MATCH_INNER_LOGIC_ERR=-30150]="EC_MATCH_INNER_LOGIC_ERR",e[e.EC_MATCH_INNER_PARAMS_ERR=-30160]="EC_MATCH_INNER_PARAMS_ERR",e[e.EC_RELAY_ALREADY_EXISTS=4e4]="EC_RELAY_ALREADY_EXISTS",e[e.EC_RELAY_NOT_EXISTS=40001]="EC_RELAY_NOT_EXISTS",e[e.EC_RELAY_DATA_EXCEED_LIMITED=40002]="EC_RELAY_DATA_EXCEED_LIMITED",e[e.EC_RELAY_MEMBER_ALREADY_EXISTS=40003]="EC_RELAY_MEMBER_ALREADY_EXISTS",e[e.EC_RELAY_MEMBER_NOT_EXISTS=40004]="EC_RELAY_MEMBER_NOT_EXISTS",e[e.EC_RELAY_STATE_INVALID=40005]="EC_RELAY_STATE_INVALID",e[e.EC_RELAY_INVALID_FRAME_RATE=40006]="EC_RELAY_INVALID_FRAME_RATE",e[e.EC_RELAY_SET_FRAME_RATE_FORBIDDEN=40007]="EC_RELAY_SET_FRAME_RATE_FORBIDDEN",e[e.EC_RELAY_NO_MEMBERS=40008]="EC_RELAY_NO_MEMBERS",e[e.EC_RELAY_GAMESVR_SERVICE_NOT_OPEN=40009]="EC_RELAY_GAMESVR_SERVICE_NOT_OPEN",e[e.EC_RELAY_REQ_POD_FAIL=40010]="EC_RELAY_REQ_POD_FAIL",e[e.EC_RELAY_NO_AVAILABLE_POD=40011]="EC_RELAY_NO_AVAILABLE_POD",e[e.EC_RELAY_GET_FRAME_CACHE_FAIL=40012]="EC_RELAY_GET_FRAME_CACHE_FAIL",e[e.EC_RELAY_HKV_CACHE_ERROR=40015]="EC_RELAY_HKV_CACHE_ERROR",e[e.EC_RELAY_REDIS_CACHE_ERROR=40016]="EC_RELAY_REDIS_CACHE_ERROR",e[e.EC_RELAY_NOTIFY_RELAYWORKER_FAIL=40018]="EC_RELAY_NOTIFY_RELAYWORKER_FAIL",e[e.EC_RELAY_RESET_RELAY_ROOM_FAIL=40019]="EC_RELAY_RESET_RELAY_ROOM_FAIL",e[e.EC_RELAY_CLEAN_RELAY_ROOM_FAIL=40020]="EC_RELAY_CLEAN_RELAY_ROOM_FAIL",e[e.EC_RELAY_NO_PERMISSION=40100]="EC_RELAY_NO_PERMISSION",e[e.EC_RELAY_NOTIFY_GAMESVR_FAIL=40200]="EC_RELAY_NOTIFY_GAMESVR_FAIL",e[e.EC_RELAY_FORWARD_TO_GAMESVR_FAIL=40201]="EC_RELAY_FORWARD_TO_GAMESVR_FAIL",e[e.EC_RELAY_FORWARD_TO_CLIENT_FAIL=40202]="EC_RELAY_FORWARD_TO_CLIENT_FAIL",e[e.EC_INVALID_PARAMS=6e4]="EC_INVALID_PARAMS",e[e.EC_INVALID_PARAMS_PLAY_MODE_VERSION=60001]="EC_INVALID_PARAMS_PLAY_MODE_VERSION",e[e.EC_INVALID_PARAMS_PLAY_MODE_RULETYPE=60002]="EC_INVALID_PARAMS_PLAY_MODE_RULETYPE",e[e.EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION=60003]="EC_INVALID_PARAMS_PLAY_MODE_EXPRESSION",e[e.EC_INVALID_PARAMS_PLAY_MODE_TEAM=60004]="EC_INVALID_PARAMS_PLAY_MODE_TEAM",e[e.EC_INVALID_PARAMS_MSGQ_ENCODE=60020]="EC_INVALID_PARAMS_MSGQ_ENCODE",e[e.EC_INVALID_PARAMS_MSGQ_DECODE=60021]="EC_INVALID_PARAMS_MSGQ_DECODE",e[e.EC_INVALID_PARAMS_GAME_ID=61e3]="EC_INVALID_PARAMS_GAME_ID",e[e.EC_INVALID_PARAMS_PLAYER_INFO=61001]="EC_INVALID_PARAMS_PLAYER_INFO",e[e.EC_INVALID_PARAMS_MAX_PLAYERS=61002]="EC_INVALID_PARAMS_MAX_PLAYERS",e[e.EC_INVALID_PARAMS_ROOM_TYPE=61003]="EC_INVALID_PARAMS_ROOM_TYPE",e[e.EC_INVALID_PARAMS_PLAYER_ID=61004]="EC_INVALID_PARAMS_PLAYER_ID",e[e.EC_INVALID_PARAMS_MATCH_TYPE=61005]="EC_INVALID_PARAMS_MATCH_TYPE",e[e.EC_INVALID_PARAMS_MATCH_CODE=61006]="EC_INVALID_PARAMS_MATCH_CODE",e[e.EC_INVALID_PARAMS_OPEN_ID=61007]="EC_INVALID_PARAMS_OPEN_ID",e[e.EC_INVALID_PARAMS_PLATFORM=61008]="EC_INVALID_PARAMS_PLATFORM",e[e.EC_INVALID_PARAMS_TIMESTAMP=61009]="EC_INVALID_PARAMS_TIMESTAMP",e[e.EC_INVALID_PARAMS_SIGN=61010]="EC_INVALID_PARAMS_SIGN",e[e.EC_INVALID_PARAMS_NONCE=61011]="EC_INVALID_PARAMS_NONCE",e[e.EC_INVALID_PARAMS_TOKEN=61012]="EC_INVALID_PARAMS_TOKEN",e[e.EC_INVALID_PARAMS_NETWORK_STATE=61013]="EC_INVALID_PARAMS_NETWORK_STATE",e[e.EC_INVALID_PARAMS_ROOM_NAME=61014]="EC_INVALID_PARAMS_ROOM_NAME",e[e.EC_INVALID_PARAMS_CREATE_ROOM_TYPE=61015]="EC_INVALID_PARAMS_CREATE_ROOM_TYPE",e[e.EC_INVALID_PARAMS_DEVICE_ID=61016]="EC_INVALID_PARAMS_DEVICE_ID",e[e.EC_INVALID_PARAMS_PAGE_NO=61017]="EC_INVALID_PARAMS_PAGE_NO",e[e.EC_INVALID_PARAMS_PAGE_SIZE=61018]="EC_INVALID_PARAMS_PAGE_SIZE",e[e.EC_INVALID_PARAMS_PLAYER_LIST=61019]="EC_INVALID_PARAMS_PLAYER_LIST",e[e.EC_INVALID_PARAMS_MESSAGE=61020]="EC_INVALID_PARAMS_MESSAGE",e[e.EC_INVALID_CHANGE_ROOM_OPTION=61021]="EC_INVALID_CHANGE_ROOM_OPTION",e[e.EC_MYSPP_SYSTEM_ERR=-1e3]="EC_MYSPP_SYSTEM_ERR",e[e.EC_REDIS_KEY_NOT_EXIST=-66e3]="EC_REDIS_KEY_NOT_EXIST",e[e.EC_REDIS_SET_OP_ERR=-66001]="EC_REDIS_SET_OP_ERR",e[e.EC_REDIS_GET_OP_ERR=-66002]="EC_REDIS_GET_OP_ERR",e[e.EC_REDIS_DEL_OP_ERR=-66003]="EC_REDIS_DEL_OP_ERR",e[e.EC_REDIS_EXPIRE_OP_ERR=-66004]="EC_REDIS_EXPIRE_OP_ERR",e[e.EC_REDIS_LOCK_OP_ERR=-66005]="EC_REDIS_LOCK_OP_ERR",e[e.EC_REDIS_LOCK_ALREADY_EXIST=-66006]="EC_REDIS_LOCK_ALREADY_EXIST",e[e.EC_REDIS_LIST_OP_ERR=-66020]="EC_REDIS_LIST_OP_ERR",e[e.EC_REDIS_LIST_POP_EMPTY=-66021]="EC_REDIS_LIST_POP_EMPTY",e[e.EC_REDIS_POOL_GET_INSTANCE_FAIL=-66022]="EC_REDIS_POOL_GET_INSTANCE_FAIL",e[e.EC_REDIS_SET_IS_EMPTY=-66023]="EC_REDIS_SET_IS_EMPTY",e[e.EC_REDIS_OP_INVALID_PARAMS=-66024]="EC_REDIS_OP_INVALID_PARAMS",e[e.EC_MYSQL_NO_ROW_FOUND=-66100]="EC_MYSQL_NO_ROW_FOUND",e[e.EC_MYSQL_MULTI_ROW_FOUND=-66101]="EC_MYSQL_MULTI_ROW_FOUND",e[e.EC_MYSQL_INSERT_FAIL=-66102]="EC_MYSQL_INSERT_FAIL",e[e.EC_MYSQL_DELETE_FAIL=-66103]="EC_MYSQL_DELETE_FAIL",e[e.EC_MYSQL_UPDATE_FAIL=-66104]="EC_MYSQL_UPDATE_FAIL",e[e.EC_MYSQL_QUERYS_FAIL=-66105]="EC_MYSQL_QUERYS_FAIL",e[e.EC_PB_SERIALIZE_TO_STR_ERR=-66200]="EC_PB_SERIALIZE_TO_STR_ERR",e[e.EC_PB_PARSE_FROM_STR_ERR=-66201]="EC_PB_PARSE_FROM_STR_ERR",e[e.EC_DATA_FORMAT_ERR=-66210]="EC_DATA_FORMAT_ERR",e[e.EC_JSON_FORMAT_ERR=-66211]="EC_JSON_FORMAT_ERR",e[e.EC_JSON_PLAY_MODE_FORMAT_ERR=-66212]="EC_JSON_PLAY_MODE_FORMAT_ERR",e[e.EC_JSON_PLAY_MODE_PARISE_ERR=-66213]="EC_JSON_PLAY_MODE_PARISE_ERR",e[e.EC_INVALID_PARAMS_RECORE_ID=-66601]="EC_INVALID_PARAMS_RECORE_ID",e[e.EC_HASHID_ERR=-66700]="EC_HASHID_ERR",e[e.EC_HASHID_ENCODE_ERR=-66701]="EC_HASHID_ENCODE_ERR",e[e.EC_HASHID_DECODE_ERR=-66702]="EC_HASHID_DECODE_ERR",e[e.EC_CONF_ROOM_ID_BUCKET_ERR=-66801]="EC_CONF_ROOM_ID_BUCKET_ERR",e[e.EC_SDK_SEND_FAIL=90001]="EC_SDK_SEND_FAIL",e[e.EC_SDK_UNINIT=90002]="EC_SDK_UNINIT",e[e.EC_SDK_RES_TIMEOUT=90003]="EC_SDK_RES_TIMEOUT",e[e.EC_SDK_NO_LOGIN=90004]="EC_SDK_NO_LOGIN",e[e.EC_SDK_NO_CHECK_LOGIN=90005]="EC_SDK_NO_CHECK_LOGIN",e[e.EC_SDK_SOCKET_ERROR=90006]="EC_SDK_SOCKET_ERROR",e[e.EC_SDK_SOCKET_CLOSE=90007]="EC_SDK_SOCKET_CLOSE",e[e.EC_SDK_NO_ROOM=90008]="EC_SDK_NO_ROOM"}(se||(se={})),function(e){e[e.COMMON_OFFLINE=0]="COMMON_OFFLINE",e[e.COMMON_ONLINE=1]="COMMON_ONLINE",e[e.RELAY_OFFLINE=2]="RELAY_OFFLINE",e[e.RELAY_ONLINE=3]="RELAY_ONLINE"}(ae||(ae={})),function(e){e[e.COMMON_CREATE=0]="COMMON_CREATE",e[e.MATCH_CREATE=1]="MATCH_CREATE"}(ce||(ce={})),function(e){e[e.STOP=0]="STOP",e[e.START=1]="START"}(le||(le={})),function(e){e[e.COMMON_JOIN=0]="COMMON_JOIN",e[e.MATCH_JOIN=1]="MATCH_JOIN"}(_e||(_e={})),function(e){e[e.ROOM_NAME=0]="ROOM_NAME",e[e.OWNER=1]="OWNER",e[e.IS_VIEWED=2]="IS_VIEWED",e[e.IS_INVITED=3]="IS_INVITED",e[e.IS_PRIVATE=4]="IS_PRIVATE",e[e.CUSTOM_PROPERTIES=5]="CUSTOM_PROPERTIES",e[e.IS_FORBID_JOIN=6]="IS_FORBID_JOIN"}(ue||(ue={})),function(e){e[e.PENDING=0]="PENDING",e[e.MATCHING=1]="MATCHING",e[e.SUCCESS=3]="SUCCESS",e[e.TIMEOUT=4]="TIMEOUT"}(fe||(fe={})),function(e){e[e.PLAYER_SIMPLE=0]="PLAYER_SIMPLE",e[e.ROOM_SIMPLE=1]="ROOM_SIMPLE",e[e.PLAYER_COMPLEX=2]="PLAYER_COMPLEX"}(he||(he={})),function(e){e[e.E_GS_FORWARDTYPE_DEFAULT=0]="E_GS_FORWARDTYPE_DEFAULT",e[e.E_GS_FORWARDTYPE_NOTIFY_CONNECTION=1]="E_GS_FORWARDTYPE_NOTIFY_CONNECTION",e[e.E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT=2]="E_GS_FORWARDTYPE_NOTIFY_ROOM_EVENT",e[e.E_GS_FORWARDTYPE_NOTIFY_COM_EVENT=3]="E_GS_FORWARDTYPE_NOTIFY_COM_EVENT",e[e.E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR=4]="E_GS_FORWARDTYPE_CLIENT_SENDTO_GAMESVR"}(de||(de={}));const Ee={ClientSendServerReqWrap1:void 0,ServerSendClientBstWrap1:void 0,ClientSendServerRspWrap1:void 0,ClientSendServerReqWrap2:void 0,ClientSendServerRspWrap2:void 0,HeartBeatReq:void 0,HeartBeatRsp:void 0,ServerSendClientBstWrap2:void 0,NOUSEServerSendClientBstRspWrap2:void 0,CheckLoginReq:void 0,CheckLoginRsp:void 0,PushBodyType:void 0,LoginReq:void 0,LoginRsp:void 0,SdkConfig:void 0,LogoutReq:void 0,LogoutRsp:void 0,StartFrameSyncReq:void 0,StartFrameSyncRsp:void 0,StopFrameSyncReq:void 0,StopFrameSyncRsp:void 0,FrameItem:void 0,SendFrameReq:void 0,SendFrameRsp:void 0,FrameExtInfo:void 0,Frame:void 0,RequestFrameReq:void 0,RequestFrameRsp:void 0,PlayerInfo:void 0,TeamInfo:void 0,RoomInfo:void 0,CreateRoomReq:void 0,CreateRoomRsp:void 0,JoinRoomReq:void 0,JoinRoomRsp:void 0,LeaveRoomReq:void 0,LeaveRoomRsp:void 0,DismissRoomReq:void 0,DismissRoomRsp:void 0,ChangeRoomReq:void 0,ChangeRoomRsp:void 0,SvrChangeRoomReq:void 0,SvrChangeRoomRsp:void 0,RemovePlayerReq:void 0,RemovePlayerRsp:void 0,SvrRemovePlayerReq:void 0,SvrRemovePlayerRsp:void 0,GetRoomByRoomIdReq:void 0,GetRoomByRoomIdRsp:void 0,SendToClientReq:void 0,SendToClientRsp:void 0,ChangeCustomPlayerStatusReq:void 0,ChangeCustomPlayerStatusRsp:void 0,SvrChangeCustomPlayerStatusReq:void 0,SvrChangeCustomPlayerStatusRsp:void 0,ChangePlayerNetworkStateReq:void 0,ChangePlayerNetworkStateRsp:void 0,GetRoomListReq:void 0,GetRoomListRsp:void 0,MatchRoomSimpleReq:void 0,MatchRoomSimpleRsp:void 0,MatchRoomComplexReq:void 0,MatchRoomComplexRsp:void 0,MatchPlayersSimpleReq:void 0,MatchPlayersSimpleRsp:void 0,MatchAttribute:void 0,MatchPlayerInfo:void 0,MatchGroupPlayerInfo:void 0,MatchGroupInfo:void 0,MatchTeamInfo:void 0,MatchPlayersReq:void 0,MatchPlayersRsp:void 0,MatchGroupReq:void 0,MatchGroupRsp:void 0,CancelPlayerMatchReq:void 0,CancelPlayerMatchRsp:void 0,CreateRoomBst:void 0,DestroyRoomBst:void 0,JoinRoomBst:void 0,LeaveRoomBst:void 0,RemovePlayerBst:void 0,DismissRoomBst:void 0,ChangeRoomBst:void 0,RecvFromClientBst:void 0,ChangeCustomPlayerStatusBst:void 0,ChangePlayerNetworkStateBst:void 0,MatchTimeoutBst:void 0,CancelMatchBst:void 0,MatchPlayersBst:void 0,StartFrameSyncBst:void 0,StopFrameSyncBst:void 0,RecvFrameBst:void 0,GameSvrCommunication:void 0,NotifyRelayConnectionReq:void 0,NotifyRoomEventReq:void 0,SendToGameSvrReq:void 0,SendToGameSvrRsp:void 0,RecvFromGameSvrBst:void 0,ClientRecvFromGameSvrRsp:void 0},pe=o.QAppProtoErrCode;var Re;!function(e){e.EC_SDK_SEND_FAIL="\u53d1\u9001\u5931\u8d25",e.EC_SDK_UNINIT="\u672a\u521d\u59cb\u5316",e.EC_SDK_RES_TIMEOUT="\u53d1\u9001\u8d85\u65f6",e.EC_SDK_NO_LOGIN="\u672a\u767b\u5f55",e.EC_SDK_NO_CHECK_LOGIN="CheckLogin\u5931\u8d25",e.EC_SDK_SOCKET_ERROR="Socket\u9519\u8bef",e.EC_SDK_SOCKET_CLOSE="Socket\u65ad\u5f00",e.EC_SDK_NO_ROOM="\u65e0\u623f\u95f4\u4fe1\u606f"}(Re||(Re={}));const me={};me[pe.EC_SDK_SEND_FAIL]=Re.EC_SDK_SEND_FAIL,me[pe.EC_SDK_UNINIT]=Re.EC_SDK_UNINIT,me[pe.EC_SDK_RES_TIMEOUT]=Re.EC_SDK_RES_TIMEOUT,me[pe.EC_SDK_NO_LOGIN]=Re.EC_SDK_NO_LOGIN,me[pe.EC_SDK_NO_CHECK_LOGIN]=Re.EC_SDK_NO_CHECK_LOGIN,me[pe.EC_SDK_SOCKET_ERROR]=Re.EC_SDK_SOCKET_ERROR,me[pe.EC_SDK_SOCKET_CLOSE]=Re.EC_SDK_SOCKET_CLOSE,me[pe.EC_SDK_NO_ROOM]=Re.EC_SDK_NO_ROOM;var ye,ge=pe;!function(e){let t,n,o,r,i;!function(e){e[e.ROOM_ALL=1]="ROOM_ALL",e[e.ROOM_OTHERS=2]="ROOM_OTHERS",e[e.ROOM_SOME=3]="ROOM_SOME"}(t=e.RecvType||(e.RecvType={})),function(e){e[e.ROOM_SIMPLE=1]="ROOM_SIMPLE",e[e.PLAYER_COMPLEX=2]="PLAYER_COMPLEX"}(n=e.MatchType||(e.MatchType={})),function(e){e[e.COMMON_CREATE=0]="COMMON_CREATE",e[e.MATCH_CREATE=1]="MATCH_CREATE"}(o=e.CreateRoomType||(e.CreateRoomType={})),function(e){e[e.COMMON_OFFLINE=0]="COMMON_OFFLINE",e[e.COMMON_ONLINE=1]="COMMON_ONLINE",e[e.RELAY_OFFLINE=2]="RELAY_OFFLINE",e[e.RELAY_ONLINE=3]="RELAY_ONLINE"}(r=e.NetworkState||(e.NetworkState={})),function(e){e[e.STOP=0]="STOP",e[e.START=1]="START"}(i=e.FrameSyncState||(e.FrameSyncState={}))}(ye||(ye={}));var Se={get CreateRoomType(){return o.CreateRoomType},get MatchType(){return o.MatchType},get NetworkState(){return o.NetworkState},get FrameSyncState(){return o.FrameSyncState},get RecvType(){return ye.RecvType}};const Ce=n(2),Oe=(e,t)=>void 0===t?null:t,Ie={pingTimeout:5e3,reconnectInterval:500,reconnectMaxTimes:15,resendInterval:1e3,resendTimeout:2e4,url:void 0,enableUDP:!1,isAutoRequestFrame:!1,cacertNativeUrl:""},Te=JSON.stringify(Ie,Oe),ve={version:Ce.version,appName:void 0,cmd:"",seq:void 0,clientIp:void 0,serviceIp:void 0,business:void 0,authKey:void 0,authType:void 0,authIp:void 0,gameId:void 0,uid:void 0,playerId:void 0,body:void 0},Ae=JSON.stringify(ve,Oe),Me={gameId:void 0,openId:void 0,secretKey:void 0,createSignature:void 0},Ne=JSON.stringify(Me,Oe);var Pe,Le,we,be;!function(e){let t={};e.getInfo=(()=>t),e.setInfo=(e=>t=e)}(Pe||(Pe={})),function(e){let t;!function(e){e[e.INITED=1]="INITED",e[e.INITING=2]="INITING",e[e.UNINIT=3]="UNINIT"}(t=e.StatusType||(e.StatusType={}));let n=t.UNINIT;e.isInited=(()=>n===t.INITED),e.isIniting=(()=>n===t.INITING),e.isUnInit=(()=>n===t.UNINIT),e.setStatus=(e=>n=e)}(Le||(Le={})),function(e){let t;!function(e){e[e.LOGIN=1]="LOGIN",e[e.LOGINING=2]="LOGINING",e[e.LOGOUT=3]="LOGOUT",e[e.LOGOUTING=4]="LOGOUTING"}(t=e.StatusType||(e.StatusType={}));let n=t.LOGOUT,o=0,r="";e.isStatus=(e=>n===e),e.setStatus=(e=>{n=e,e===t.LOGIN&&(o=0)}),e.setErrCode=((e,t)=>{o=e,r=t}),e.getErrCode=(()=>o),e.getErrMsg=(()=>r)}(we||(we={})),function(e){let t;!function(e){e[e.CHECKING=1]="CHECKING",e[e.CHECKED=2]="CHECKED",e[e.OFFLINE=3]="OFFLINE"}(t=e.StatusType||(e.StatusType={}));let n=t.CHECKING;e.isChecked=(()=>n===t.CHECKED),e.isOffline=(()=>n===t.OFFLINE),e.setStatus=(e=>n=e);let o="";e.setRouteId=(e=>o=e),e.getRouteId=(()=>o)}(be||(be={}));const De=o.ClientSendServerReqWrap2Cmd,Fe=o.ServerSendClientBstWrap2Type;function Ye(){return!!("undefined"!=typeof cc&&"undefined"!=typeof WebSocket&&"undefined"!=typeof XMLHttpRequest&&cc.game&&"function"==typeof cc.game.on&&cc.game.EVENT_HIDE&&cc.game.EVENT_SHOW&&cc.sys&&cc.sys.isNative)}const Ue={};Ue.connectSocket=c(e=>new WebSocket(e,[],Ie.cacertNativeUrl)),Ue.request=_,Ue.onHide=(e=>cc.game.on(cc.game.EVENT_HIDE,e)),Ue.offHide=(e=>cc.game.off(cc.game.EVENT_HIDE,e)),Ue.onShow=(e=>cc.game.on(cc.game.EVENT_SHOW,e)),Ue.offShow=(e=>cc.game.off(cc.game.EVENT_SHOW,e)),Ue.getStorageSync=p,Ue.setStorageSync=R,Ue.removeStorageSync=m,Ue.getUserInfo=y,Ue.getSystemInfoSync=g,Ue.getLocation=S,Ue.getNetworkType=C,Ue.createUDPSocket=null;let ke=a,xe=r.UNKNOWN,Be=i.UNKNOWN;"undefined"!=typeof window&&(ke.root=window),M()?(ke=N,xe=r.QQ,ke.root=GameGlobal,Be=function(){if(!M())return i.UNKNOWN;const e=qq.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):J()?(ke=ee,xe=r.QQMP,ke.root={},Be=function(){if(!J())return i.UNKNOWN;const e=qq.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):T()?(ke=v,xe=r.WX,ke.root=GameGlobal,Be=function(){if(!T())return i.UNKNOWN;const e=wx.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):G()?(ke=K,xe=r.WXMP,ke.root={},Be=function(){if(!G())return i.UNKNOWN;const e=wx.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):w()?(ke=b,xe=r.BD,ke.root=GameGlobal,Be=function(){if(!w())return i.UNKNOWN;const e=swan.getSystemInfoSync(),t=e?e.system+"":"";return t.includes("Android")?i.ANDROID:t.includes("iOS")?i.IOS:i.UNKNOWN}()):Y()?(ke=U,xe=r.OP,ke.root=window,Be=Y()?i.ANDROID:i.UNKNOWN):x()?(ke=B,xe=r.VV,ke.root=window,Be=x()?i.ANDROID:i.UNKNOWN):Ye()&&(ke=Ue,xe=r.COCOS_NATIVE,"undefined"!=typeof window?ke.root=window:ke.root={},Be=Ye()?cc.sys.os===cc.sys.OS_ANDROID?i.ANDROID:cc.sys.os===cc.sys.OS_IOS?i.IOS:i.UNKNOWN:i.UNKNOWN),ke.globalData={};class He{constructor(e=-1){this.id=e}}const Ge=(e,t,n)=>{clearTimeout(e.id),e.id=setTimeout(t,n)},qe=(...e)=>{e.forEach(e=>e&&clearTimeout(e.id))},Ve=n(2);class Qe{}Qe.enable=!1,Qe.exclude=[],Qe.callback=(e=>console.log(...e)),Qe.log=((...e)=>{if(!Qe.enable)return;if(Array.isArray(Qe.exclude)&&Qe.exclude.findIndex(t=>t===e[0])>=0)return;const t=[`DEBUGGER_v${Ve.version}_${Ve.sdkType}_${xe} `+Date.now()].concat(e);"function"==typeof Qe.callback&&Qe.callback(t)}),Object.defineProperty(Qe,"log",{enumerable:!1,configurable:!1,writable:!1,value:Qe.log});var We=Qe;const Ke=n(3),je=n(4),Je=n(7).default,Xe=new Je($e(),16);let ze=1;function Ze(){const e=Xe.encode(ze++);return ze>=Number.MAX_SAFE_INTEGER&&(ze=1),e}function $e(){let e=Date.now().toString(36);for(let t=0;t<6;t++)e+=Math.ceil(1e6*(Math.random()+1)).toString(36);return e}const et=new Je($e(),32).encode(Date.now()),tt=(e,t)=>(e<0&&(t=`\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef[${e}]`,e=ge.EC_INNER_ERROR),{errCode:e,errMsg:t});function nt(){return Be}function ot(){return xe}function rt(e){return(...t)=>setTimeout(()=>e&&e(...t),0)}function it(e){return e.next=e,e.prev=e,e}function st(e,t){e.prev=t.prev,e.next=t,t.prev.next=e,t.prev=e}function at(e){e.next.prev=e.prev,e.prev.next=e.next,e.next=null,e.prev=null}function ct(e){return e===e.next}function lt(e=new Uint8Array(0)){return{data:e}}const _t=30,ut=100,ft=200,ht=6e4,dt=81,Et=82,pt=83,Rt=84,mt=1,yt=2,gt=32,St=128,Ct=1400,Ot=100,It=24,Tt=20,vt=2,At=2,Mt=7e3,Nt=12e4,Pt=5,Lt=1;function wt(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function bt(e,t,n){return e[t++]=n,t}function Dt(e,t){return[e[t++],t]}function Ft(e,t,n){return e[t++]=255&n,e[t++]=n>>8&255,e[t++]=n>>16&255,e[t++]=n>>24&255,t}function Yt(e,t){return[e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,t]}const Ut=Math.min,kt=Math.max;function xt(e,t){return e-t}function Bt(e,t){return 0==t.length?0:e.output(t,e)}function Ht(e){let t=0,n=new Uint8Array(0);if(ct(e.rcv_queue))return n;if(function(e){let t=0;if(ct(e.rcv_queue))return-1;let n=e.rcv_queue.next;if(0==n.frg)return n.data.length;if(e.nrcv_que<n.frg+1)return-1;for(let n=e.rcv_queue.next;n!=e.rcv_queue;n=n.next){let e=n;if(t+=e.data.length,0==e.frg)break}return t}(e)<0)return n;e.nrcv_que>=e.rcv_wnd&&(t=1);for(let t=e.rcv_queue.next;t!==e.rcv_queue;){let o=t;t=t.next,n=wt(n,o.data);let r=o.frg;if(at(o),e.nrcv_que--,0==r)break}for(;!ct(e.rcv_buf);){let t=e.rcv_buf.next;if(!(t.sn==e.rcv_nxt&&e.nrcv_que<e.rcv_wnd))break;at(t),e.nrcv_buf--,st(t,e.rcv_queue),e.nrcv_que++,e.rcv_nxt++}return e.nrcv_que<e.rcv_wnd&&t&&(e.probe|=yt),n}function Gt(e,t){let n=0;if(0==e.rx_srtt)e.rx_srtt=t,e.rx_rttval=t/2;else{let n=t-e.rx_srtt;n<0&&(n=-n),e.rx_rttval=(3*e.rx_rttval+n)/4,e.rx_srtt=(7*e.rx_srtt+t)/8,e.rx_srtt<1&&(e.rx_srtt=1)}var o,r;n=e.rx_srtt+kt(e.interval,4*e.rx_rttval),e.rx_rto=(o=e.rx_minrto,r=ht,Ut(kt(o,n),r))}function qt(e){let t=e.snd_buf.next;t!=e.snd_buf?e.snd_una=t.sn:e.snd_una=e.snd_nxt}function Vt(e,t){if(!(xt(t,e.snd_una)<0||xt(t,e.snd_nxt)>=0))for(let n,o=e.snd_buf.next;o!=e.snd_buf;o=n){if(n=o.next,t==o.sn){at(o),e.nsnd_buf--;break}if(xt(t,o.sn)<0)break}}function Qt(e,t){for(let n,o=e.snd_buf.next;o!=e.snd_buf&&(n=o.next,xt(t,o.sn)>0);o=n)at(o),e.nsnd_buf--}function Wt(e,t,n){let o=e.ackcount+1;if(o>e.ackblock){let t,n;for(n=8;n<o;n<<=1);if(t=new Uint32Array(2*n),null!=e.acklist)for(let n=0;n<e.ackcount;n++)t[2*n+0]=e.acklist[2*n+0],t[2*n+1]=e.acklist[2*n+1];e.acklist=t,e.ackblock=n}let r=2*e.ackcount;e.acklist[r]=t,e.acklist[r+1]=n,e.ackcount++}function Kt(e,t){return[e.acklist[2*t+0],e.acklist[2*t+1]]}function jt(e,t){let n,o,r=t.sn,i=0;if(!(xt(r,e.rcv_nxt+e.rcv_wnd)>=0||xt(r,e.rcv_nxt)<0)){for(n=e.rcv_buf.prev;n!=e.rcv_buf;n=o){if(o=n.prev,n.sn==r){i=1;break}if(xt(r,n.sn)>0)break}var s,a;for(0==i&&(it(t),a=n,(s=t).prev=a,s.next=a.next,a.next.prev=s,a.next=s,e.nrcv_buf++);!ct(e.rcv_buf);){let t=e.rcv_buf.next;if(!(t.sn==e.rcv_nxt&&e.nrcv_que<e.rcv_wnd))break;at(t),e.nrcv_buf--,st(t,e.rcv_queue),e.nrcv_que++,e.rcv_nxt++}}}function Jt(e,t,n){var o,r,i;return o=e,r=t=bt(e,t=bt(e,t=Ft(e,t,n.conv),n.cmd),n.frg),i=n.wnd,o[r++]=255&i,o[r++]=i>>8&255,Ft(e,t=Ft(e,t=Ft(e,t=Ft(e,t=r,n.ts),n.sn),n.una),n.data.length)}function Xt(e){let t=e.current;const n=e.buffer;let o=0,r=0,i=0,s=lt();if(0==e.updated)return;s.conv=e.conv,s.cmd=Et,s.frg=0,s.wnd=function(e){return e.nrcv_que<e.rcv_wnd?e.rcv_wnd-e.nrcv_que:0}(e),s.una=e.rcv_nxt,s.sn=0,s.ts=0;let a=e.ackcount;for(let t=0;t<a;t++)o+It>e.mtu&&(Bt(e,n.slice(0,o)),o=0),[s.sn,s.ts]=Kt(e,t),o=Jt(n,o,s);e.ackcount=0,0==e.rmt_wnd?0==e.probe_wait?(e.probe_wait=Mt,e.ts_probe=e.current+e.probe_wait):xt(e.current,e.ts_probe)>=0&&(e.probe_wait<Mt&&(e.probe_wait=Mt),e.probe_wait+=e.probe_wait/2,e.probe_wait>Nt&&(e.probe_wait=Nt),e.ts_probe=e.current+e.probe_wait,e.probe|=mt):(e.ts_probe=0,e.probe_wait=0),e.probe&mt&&(s.cmd=pt,o+It>e.mtu&&(Bt(e,n.slice(0,o)),o=0),o=Jt(n,o,s)),e.probe&yt&&(s.cmd=Rt,o+It>e.mtu&&(Bt(e,n.slice(0,o)),o=0),o=Jt(n,o,s)),e.probe=0;let c=Ut(e.snd_wnd,e.rmt_wnd);for(0==e.nocwnd&&(c=Ut(e.cwnd,c));xt(e.snd_nxt,e.snd_una+c)<0&&!ct(e.snd_queue);){let n=e.snd_queue.next;at(n),st(n,e.snd_buf),e.nsnd_que--,e.nsnd_buf++,n.conv=e.conv,n.cmd=dt,n.wnd=s.wnd,n.ts=t,n.sn=e.snd_nxt++,n.una=e.rcv_nxt,n.resendts=t,n.rto=e.rx_rto,n.fastack=0,n.xmit=0}let l=e.fastresend>0?e.fastresend:4294967295,_=0==e.nodelay?e.rx_rto>>3:0;for(let a=e.snd_buf.next;a!=e.snd_buf;a=a.next){let c=0;0==a.xmit?(c=1,a.xmit++,a.rto=e.rx_rto,a.resendts=t+a.rto+_):xt(t,a.resendts)>=0?(c=1,a.xmit++,e.xmit++,0==e.nodelay?a.rto+=e.rx_rto:a.rto+=e.rx_rto/2,a.resendts=t+a.rto,i=1):a.fastack>=l&&(a.xmit<=e.fastlimit||e.fastlimit<=0)&&(c=1,a.xmit++,a.fastack=0,a.resendts=t+a.rto,r++),c&&(a.ts=t,a.wnd=s.wnd,a.una=e.rcv_nxt,o+(It+a.data.length)>e.mtu&&(Bt(e,n.slice(0,o)),o=0),o=Jt(n,o,a),a.data.length>0&&(n.set(a.data.slice(0,a.data.length),o),o+=a.data.length),a.xmit>=e.dead_link&&(e.state=-1))}if(o>0&&(Bt(e,n.slice(0,o)),o=0),r){let t=e.snd_nxt-e.snd_una;e.ssthresh=t/2,e.ssthresh<At&&(e.ssthresh=At),e.cwnd=e.ssthresh+l,e.incr=e.cwnd*e.mss}i&&(e.ssthresh=c/2,e.ssthresh<At&&(e.ssthresh=At),e.cwnd=1,e.incr=e.mss),e.cwnd<1&&(e.cwnd=1,e.incr=e.mss)}class zt{constructor(e,t){this._ts=Date.now(),this.updateAsync=(()=>{let e=!1;return()=>{e||(e=!0,zt.asyncer(()=>{this.update(),e=!1}))}})(),this.context=t,this._kcp=function(e){return{conv:e,snd_una:0,snd_nxt:0,rcv_nxt:0,ts_recent:0,ts_lastack:0,ts_probe:0,probe_wait:0,snd_wnd:gt,rcv_wnd:St,rmt_wnd:St,cwnd:0,incr:0,probe:0,mtu:Ct,mss:Ct-It,stream:0,buffer:new Uint8Array(3*(Ct+It)),snd_queue:it(lt()),rcv_queue:it(lt()),snd_buf:it(lt()),rcv_buf:it(lt()),nrcv_buf:0,nsnd_buf:0,nrcv_que:0,nsnd_que:0,state:0,acklist:null,ackblock:0,ackcount:0,rx_srtt:0,rx_rttval:0,rx_rto:ft,rx_minrto:ut,current:0,interval:Ot,ts_flush:Ot,nodelay:0,updated:0,logmask:0,ssthresh:vt,fastresend:0,fastlimit:Pt,nocwnd:0,xmit:0,dead_link:Tt,output:null}}(e)}input(e){let t=function(e,t){let n=e.snd_una,o=0,r=0,i=0,s=0,a=t.length;for(;;){let n,_,u,f,h,d,E,p;if(a<It)break;if([h,s]=Yt(t,s),h!=e.conv)return-1;if([E,s]=Dt(t,s),[p,s]=Dt(t,s),[d,s]=(l=s,[(c=t)[l++]|c[l++]<<8,l]),[n,s]=Yt(t,s),[_,s]=Yt(t,s),[f,s]=Yt(t,s),[u,s]=Yt(t,s),(a-=It)<u||u<0)return-2;if(E!=dt&&E!=Et&&E!=pt&&E!=Rt)return-3;if(e.rmt_wnd=d,Qt(e,f),qt(e),E==Et)xt(e.current,n)>=0&&Gt(e,xt(e.current,n)),Vt(e,_),qt(e),0==i?(i=1,o=_,r=n):xt(_,o)>0&&xt(n,r)>0&&(o=_,r=n);else if(E==dt){if(xt(_,e.rcv_nxt+e.rcv_wnd)<0&&(Wt(e,_,n),xt(_,e.rcv_nxt)>=0)){let o=lt();o.conv=h,o.cmd=E,o.frg=p,o.wnd=d,o.ts=n,o.sn=_,o.una=f,u>0&&(o.data=t.slice(s,s+u)),jt(e,o)}}else if(E==pt)e.probe|=yt;else if(E!=Rt)return-3;s+=u,a-=u}var c,l;if(0!=i&&function(e,t,n){if(!(xt(t,e.snd_una)<0||xt(t,e.snd_nxt)>=0))for(let o,r=e.snd_buf.next;r!=e.snd_buf&&(o=r.next,!(xt(t,r.sn)<0));r=o)t!=r.sn&&xt(n,r.ts)>=0&&r.fastack++}(e,o,r),xt(e.snd_una,n)>0&&e.cwnd<e.rmt_wnd){let t=e.mss;e.cwnd<e.ssthresh?(e.cwnd++,e.incr+=t):(e.incr<t&&(e.incr=t),e.incr+=t*t/e.incr+t/16,(e.cwnd+1)*t<=e.incr&&e.cwnd++),e.cwnd>e.rmt_wnd&&(e.cwnd=e.rmt_wnd,e.incr=e.rmt_wnd*t)}return 0}(this._kcp,e);for(;;){let e=Ht(this._kcp);if(0===e.length)break;this._onRecv&&this._onRecv(e,this.context)}return t}onOutput(e){this._kcp.output=((t,n)=>(e(t,this.context),t.length))}send(e){return function(e,t){let n=0,o=t.length;if(0!=e.stream){if(!ct(e.snd_queue)){let i=e.snd_queue.prev;if(i.data.length<e.mss){let s=e.mss-i.data.length,a=o<s?o:s,c=wt(i.data,t.slice(n,n+a));n+=a;let l=lt(c);st(l,e.snd_queue),l.frg=0,o-=a,at(r=i),it(r)}}if(o<=0)return 0}var r;let i;if((i=o<=e.mss?1:(o+e.mss-1)/e.mss)>=St)return-2;0==i&&(i=1);for(let r=0;r<i;r++){let s=o>e.mss?e.mss:o,a=lt();o>0&&(a.data=t.slice(n,n+s),n+=s),a.frg=0==e.stream?i-r-1:0,it(a),st(a,e.snd_queue),e.nsnd_que++,o-=s}return 0}(this._kcp,e)}onRecv(e){this._onRecv=e}update(e=!1){let t=Date.now(),n=t-this._ts;return n>=4294967296&&(this._ts=t,n=0),e?(r=n,(o=this._kcp).current=r,0==o.updated&&(o.updated=1,o.ts_flush=o.current),o.ts_flush=o.current,o.ts_flush+=o.interval,xt(o.current,o.ts_flush)>=0&&(o.ts_flush=o.current+o.interval),void Xt(o)):function(e,t){e.current=t,0==e.updated&&(e.updated=1,e.ts_flush=e.current);let n=xt(e.current,e.ts_flush);(n>=1e4||n<-1e4)&&(e.ts_flush=e.current,n=0),n>=0&&(e.ts_flush+=e.interval,xt(e.current,e.ts_flush)>=0&&(e.ts_flush=e.current+e.interval),Xt(e))}(this._kcp,n);var o,r}nodelay(e,t,n,o){return function(e,t,n,o,r){return t>=0&&(e.nodelay=t,e.rx_minrto=t?_t:ut),n>=0&&(n>5e3?n=5e3:n<Lt&&(n=Lt),e.interval=n),o>=0&&(e.fastresend=o),r>=0&&(e.nocwnd=r),0}(this._kcp,e,t,n,o)}setWinSize(e,t){return o=e,r=t,(n=this._kcp)&&(o>0&&(n.snd_wnd=o),r>0&&(n.rcv_wnd=kt(r,St))),0;var n,o,r}}zt.asyncer=(e=>new Promise(e=>e()).then(e));const Zt={get connectSocket(){let e=ke.connectSocket;return Ie.enableUDP&&ke.createUDPSocket&&(e=(e=>{let t,n=null,o=null,r=null,i=null,s=0;const a=e.url.toLowerCase().replace("wss://","").replace("ws://",""),c=a.split(":")[0],l=parseInt(a.split(":")[1]||"443",10),_=new zt(123,{address:c,port:l});_.nodelay(1,10,2,1),_.setWinSize(1024,1024);const u=ke.createUDPSocket(),f={get readyState(){return s},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,onClose:e=>o=e,onOpen:e=>r=e,onError:e=>i=e,onMessage:e=>n=e,close:e=>{u.close(),d(),e&&e.success&&e.success()},send:({data:e,fail:t,success:n})=>{_&&(0!==_.send(new Uint8Array(e))?rt(()=>t&&t())():rt(()=>n&&n())(),_.updateAsync())}};u.onClose(e=>{s=3,d(),rt(()=>o&&o(e))()}),u.onError(e=>{s=3,u.close(),rt(()=>i&&i(e))()}),u.onListening(e=>{We.log("UDP_onListening"),s=1,h(),rt(()=>r&&r(e))()}),u.onMessage(e=>{const t=e.message||("number"==typeof e.byteLength?e:void 0);_.input(new Uint8Array(t)),_.updateAsync()}),_.onOutput((e,t)=>{u.send({address:c,port:l,message:e.buffer||e})}),_.onRecv((e,t)=>{e.length>0&&n&&n({data:e.buffer})});const h=()=>{t=!0,requestAnimationFrame(()=>{t&&(_.update(),h())})},d=()=>{t=!1},E=u.bind();return We.log("UDP_bind",E),f})),e}},$t={connectSocket:ke.connectSocket},en={connect:"connect",connectClose:"connectClose",connectClosing:"connectClosing",connectError:"connectError",connecting:"connecting",message:"message",autoAuth:"autoAuth"},tn=Object.keys(en);var nn=class{constructor(e,t,n){this.isMsgBind=!1,this.forceClose=!1,this.init(n),this.id=e,this.enableUdp=t}init(e){this.url=e,this.eventCallbacks=[],this.eventOnceCallbacks=new Map,this.socketTask=null;const t=new He;let n=0;const o=()=>{We.log("SOCKET_OPEN",this.id,this.isConnect()),n=0,_(),qe(t)},r=e=>{We.log("SOCKET_CLOSE",e,this.id),l(),Ge(t,()=>s("close"),Ie.reconnectInterval),this.forceClose&&(n=0,this.forceClose=!1,qe(t))},i=e=>{We.log("SOCKET_ERROR",e,this.id,this.socketTask&&this.socketTask.readyState),c(en.connectError,{msg:"socket connectError",data:e}),Ge(t,()=>s("error"),Ie.reconnectInterval)},s=e=>{if(!this.url)throw new Error("socket.url = "+this.url);if(!this.isConnect()&&!this.isClose())return Ge(t,()=>s("open"),Ie.reconnectInterval);if(!this.isClose())return;if(We.log("SOCKET_TRY_OPEN",this.id,e,this.socketTask&&this.socketTask.readyState,n,Ie.reconnectMaxTimes),++n>Ie.reconnectMaxTimes)return n=0,void We.log("SOCKET_RECONNECT_TIMEOUT");const a="wss://"+this.url.replace("wss://","").replace("ws://","");qe(t),this.forceClose=!1,this.enableUdp?this.socketTask=Zt.connectSocket({url:a,fail:()=>console.error("connectSocket fail")}):this.socketTask=$t.connectSocket({url:a,fail:()=>console.error("connectSocket fail")}),this.socketTask.onOpen(o.bind(this)),this.socketTask.onClose(r.bind(this)),this.socketTask.onError(i.bind(this)),this.socketTask.onMessage((e=>{c(en.message,{msg:"socket message",data:e.data})}).bind(this))},a=e=>{We.log("SOCKET_CONNECT",this.id,e),!this.isConnect()&&n>0&&n<Ie.reconnectMaxTimes||(n=0,s(e+" connect"))},c=(e,t={})=>{t.tag=e,this.eventCallbacks.forEach(([n,o])=>{n!==e&&"*"!==n||o(t)});const n=this.eventOnceCallbacks.get(e);n&&(n(t),this.eventOnceCallbacks.delete(e))},l=()=>c(en.connectClose,{msg:"socket is closed"}),_=()=>c(en.connect,{msg:"socket is connected"});this.connect=a,this.connectNewSocket=(e=>{We.log("SOCKET_CONNECT_NEW",this.id,this.isClose()),this.url=e,n=0;const t=()=>{a("connectNewSocket")};this.close(t,t)}),this.send=((e,{fail:t,success:n})=>{if(!this.isConnect())return t({data:e}),void a("send");this.socketTask.send({data:e.buffer,fail:n=>{We.log("SOCKET_SEND_FAIL",this.id,n),t({data:e})},success:()=>{n({data:e})}})}),this.close=((e,t)=>{if(this.forceClose=!0,!this.socketTask)return e&&e(),l();this.socketTask.close({success:t=>{We.log("SOCKET_CLOSE_SUCCESS",this.id,t),this.socketTask=null,e&&e()},fail:e=>{We.log("SOCKET_CLOSE_ERROR",this.id,e),this.socketTask=null,t&&t()}})}),this.destory=(()=>{qe(t),!this.isClose()&&this.close(),this.eventCallbacks=[],this.isMsgBind=!1}),this.isConnect=(()=>this.socketTask&&this.socketTask.readyState===this.socketTask.OPEN),this.isConnecting=(()=>this.socketTask&&this.socketTask.readyState===this.socketTask.CONNECTING),this.isClose=(()=>!this.socketTask||this.socketTask&&this.socketTask.readyState===this.socketTask.CLOSED),this.isClosing=(()=>this.socketTask&&this.socketTask.readyState===this.socketTask.CLOSING),this.on=((e,t)=>{(tn.includes(e)||"*"===e)&&"function"==typeof t&&(this.eventCallbacks.push([e,t]),e===en.message&&(this.isMsgBind=!0))}),this.once=((e,t)=>{tn.includes(e)&&"function"==typeof t&&this.eventOnceCallbacks.set(e,t)}),this.emit=c}};const on=[De.E_CMD_LOGIN_REQ,De.E_CMD_LOGOUT_REQ],rn=[De.E_CMD_RELAY_SEND_FRAME_REQ,De.E_CMD_RELAY_REQUEST_FRAME_REQ,De.E_CMD_HEART_BEAT_REQ,De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ];var sn;!function(e){e[e.CLIENT_PRE=parseInt("0x2",16)]="CLIENT_PRE",e[e.CLIENT_END=parseInt("0x3",16)]="CLIENT_END",e[e.SERVER_PRE=parseInt("0x28",16)]="SERVER_PRE",e[e.SERVER_END=parseInt("0x29",16)]="SERVER_END"}(sn||(sn={}));class an{constructor(){this.queue=new Set,this.bdHandlers=new Set,this.socket=null}static startQueueLoop(){Ge(an.timer,()=>{const e=Date.now();return Array.from(an.sendQueue).forEach(([t,n])=>{if(e-n.time>Ie.resendTimeout){let e,t="";we.isStatus(we.StatusType.LOGIN)?e=ge.EC_SDK_RES_TIMEOUT:we.getErrCode()===ge.EC_OK?(e=ge.EC_SDK_NO_LOGIN,t="\u767b\u5f55\u5931\u8d25"):(e=we.getErrCode(),t="\u767b\u5f55\u5931\u8d25\uff0c"+we.getErrMsg()),n.sendFail(e,t)}else!n.isSocketSend&&e-n.time>=Ie.resendInterval&&n.resend()}),an.startQueueLoop()},Ie.resendInterval)}static stopQueueLoop(){qe(an.timer),Array.from(an.sendQueue).forEach(([e,t])=>{t.remove()}),an.sendQueue.clear()}bindSocket(e,t,n){return!(this.socket||!e||(this.socket=e,!this.socket.isMsgBind&&this.socket.on(en.message,(e=>{if(!e.data)return;const{body:o,pre:r,end:i}=this.unpackBody(new Uint8Array(e.data));r===sn.CLIENT_PRE&&i===sn.CLIENT_END&&t(o),r===sn.SERVER_PRE&&i===sn.SERVER_END&&n(o)}).bind(this)),0))}unbindSocket(){this.socket=null,this.clearQueue(),this.clearBdHandlers()}clearQueue(){Array.from(this.queue).forEach(e=>{this.deleteSeqQueue(e)})}clearBdHandlers(){Array.from(this.bdHandlers).forEach(e=>{an.broadcastHandlers.delete(e),this.bdHandlers.delete(e)})}deleteSeqQueue(e){an.sendQueue.delete(e),this.queue.delete(e)}addSeqQueue(e,t){an.sendQueue.set(e,t),this.queue.add(e)}setBroadcastHandler(e,t){an.broadcastHandlers.set(e,t),this.bdHandlers.add(e)}handleErrCode(e){return!1}send(e,t,n){const o=this.getReadyCode(n);return an.sendQueue.size>10&&We.log("SENDQUEUE_size",an.sendQueue.size),0!==o?this.handleSendFail(t,o):this.socket.send(e,{fail:e=>this.handleSendFail(t,e),success:()=>this.handleSendSuccess(t)}),t}buildData(e,t,n){const o=5+t.length+1,r=new Uint8Array(function(e,t){let n=[];for(;e>255;)n.push(255&e),e>>=8;for(0!==e&&n.push(e),n=n.slice(0,4);n.length<4;)n.push(0);return n.reverse()}(o)),i=new Uint8Array(o);return i.set(e),i.set(r,e.length),i.set(t,e.length+r.length),i.set(n,e.length+r.length+t.length),i}unpackBody(e){const t=e.slice(1,5),n=function(e){let t=0;const n=e.length;for(let o=n-1;o>=0;o--)t+=e[o]*Math.pow(2,8*(n-1-o));return t}(Array.from(t))-6;return{body:e.slice(5,5+n),pre:e[0],end:e[e.length-1]}}handleSendFail(e,t){const n=an.sendQueue.get(e);if(n)return Date.now()-n.time>Ie.resendTimeout?n.sendFail(we.getErrCode()||t):t===ge.EC_SDK_UNINIT?n.sendFail(t):t===ge.EC_SDK_NO_LOGIN?this.socket.emit(en.autoAuth,{}):t===ge.EC_SDK_NO_CHECK_LOGIN?this.socket.emit(en.autoAuth,{}):void 0}handleSendSuccess(e){an.sendQueue.has(e)&&an.sendQueue.get(e).sendSuccess()}getReadyCode(e){return Le.isInited()||e===De.E_CMD_LOGIN_REQ?this.socket&&this.socket.url?we.isStatus(we.StatusType.LOGIN)||on.includes(e)?this.socket.id===o.ConnectionType.RELAY&&!be.isChecked()&&rn.includes(e)?ge.EC_SDK_NO_CHECK_LOGIN:0:ge.EC_SDK_NO_LOGIN:ge.EC_SDK_SEND_FAIL:(console.error("MGOBE.Listener \u672a\u521d\u59cb\u5316"),Pe.setInfo({id:""}),we.setStatus(we.StatusType.LOGOUT),ge.EC_SDK_UNINIT)}}an.sendQueue=new Map,an.broadcastHandlers=new Map,an.timer=new He;var cn=an;let ln=n(8);class _n{constructor(e){this.root=ln.newBuilder({}).import(e).build()}lookupType(e){let t=this.root;return e.split(".").forEach(e=>t=t[e]),t}static numberify(e){if(null==e)return e;if(e.constructor===ln.Long)return Number(e);let t=Object.prototype.toString.apply(e);return e.constructor===ln.ByteBuffer?e.buffer.slice(e.offset,e.offset+e.limit):("[object Object]"!==t&&"[object Array]"!==t||Object.keys(e).forEach(function(t){e[t]=_n.numberify(e[t])}),e)}bufferify(e,t){let n=this.lookupType(e);return function(e){let o={};t.forEach(t=>e.hasOwnProperty(t)&&(o[t]=e[t]));let r=n.encode(o);return new Uint8Array(r.buffer.slice(r.offset,r.offset+r.limit))}}objectify(e){let t=this.lookupType(e);return function(e){let n=t.decode(e);return _n.numberify(n)}}}function un(e,t,n,o){return{objectify:function(r){let i=e.objectify(r);return o.forEach(function(e){void 0!==e.value&&i[t]!==e.value||(i[e.key]=e.IProto.objectify(i[n]))}),i},bufferify:function(r){let i=Object.assign({},r);return o.forEach(function(e){i[e.key]&&(i[n]=e.IProto.bufferify(i[e.key]),void 0!==e.value&&(i[t]=e.value),delete i[e.key])}),e.bufferify(i)}}}const fn={ClientSendServerReqWrap1:["version","appName","cmd","seq","clientIp","serviceIp","business","authKey","authType","authIp","gameId","uid","playerId","body"],ServerSendClientBstWrap1:["version","appName","cmd","seq","clientIp","serviceIp","business","authKey","authType","authIp","gameId","uid","playerId","body"],ClientSendServerRspWrap1:["seq","errCode","errMsg","body"],ClientSendServerReqWrap2:["cmd","body"],ClientSendServerRspWrap2:["body"],HeartBeatReq:["conType","routeId"],HeartBeatRsp:[],ServerSendClientBstWrap2:["type","msg"],NOUSEServerSendClientBstRspWrap2:[],CheckLoginReq:["token","routeId"],CheckLoginRsp:[],PushBodyType:["pushMsg"],LoginReq:["gameId","openId","platform","channel","nonce","timestamp","sign","deviceId","mac","imei"],LoginRsp:["token","playerId","expireTime","sdkConfig"],SdkConfig:["pingInterval","reportInterval","serverTime","enableUdp"],LogoutReq:[],LogoutRsp:[],StartFrameSyncReq:[],StartFrameSyncRsp:[],StopFrameSyncReq:[],StopFrameSyncRsp:[],FrameItem:["playerId","data","timestamp"],SendFrameReq:["roomId","item"],SendFrameRsp:[],FrameExtInfo:["seed"],Frame:["id","items","ext"],RequestFrameReq:["roomId","beginFrameId","endFrameId"],RequestFrameRsp:["frames"],PlayerInfo:["id","name","teamId","customPlayerStatus","customProfile","commonNetworkState","relayNetworkState","isRobot","matchAttributes"],TeamInfo:["id","name","minPlayers","maxPlayers"],RoomInfo:["id","name","type","createType","maxPlayers","owner","isPrivate","customProperties","playerList","teamList","frameSyncState","frameRate","routeId","createTime","startGameTime","isForbidJoin"],CreateRoomReq:["roomName","roomType","createType","maxPlayers","isPrivate","customProperties","playerInfo","region","owner","playerList","teamList"],CreateRoomRsp:["roomInfo"],JoinRoomReq:["roomId","teamId","joinType","playerInfo"],JoinRoomRsp:["roomInfo"],LeaveRoomReq:[],LeaveRoomRsp:["roomInfo"],DismissRoomReq:[],DismissRoomRsp:[],ChangeRoomReq:["roomName","owner","isPrivate","customProperties","isForbidJoin","changeRoomOptionList"],ChangeRoomRsp:["roomInfo"],SvrChangeRoomReq:["roomName","owner","isPrivate","customProperties","isForbidJoin","roomId","changeRoomOptionList"],SvrChangeRoomRsp:["roomInfo"],RemovePlayerReq:["removePlayerId"],RemovePlayerRsp:["roomInfo"],SvrRemovePlayerReq:["roomId","removePlayerId"],SvrRemovePlayerRsp:["roomInfo"],GetRoomByRoomIdReq:["roomId"],GetRoomByRoomIdRsp:["roomInfo"],SendToClientReq:["roomId","recvPlayerList","msg"],SendToClientRsp:[],ChangeCustomPlayerStatusReq:["customPlayerStatus"],ChangeCustomPlayerStatusRsp:["roomInfo"],SvrChangeCustomPlayerStatusReq:["customPlayerStatus"],SvrChangeCustomPlayerStatusRsp:["roomInfo"],ChangePlayerNetworkStateReq:["networkState"],ChangePlayerNetworkStateRsp:["roomInfo"],GetRoomListReq:["gameId","pageNo","pageSize","roomType","isDesc"],GetRoomListRsp:["gameId","roomList","total"],MatchRoomSimpleReq:["roomType","maxPlayers","playerInfo"],MatchRoomSimpleRsp:["roomInfo"],MatchRoomComplexReq:[],MatchRoomComplexRsp:[],MatchPlayersSimpleReq:[],MatchPlayersSimpleRsp:[],MatchAttribute:["name","value"],MatchPlayerInfo:["id","name","customPlayerStatus","customProfile","matchAttributes","matchStatus","teamId","region","teamLeader","sdkVersion","groupId"],MatchGroupPlayerInfo:["id","name","customPlayerStatus","customProfile","matchAttributes","matchStatus","teamId","region","teamLeader","sdkVersion","groupId"],MatchGroupInfo:["id","leader","playerIdList","playerInfoList","matchAttributes","region","sdkVersion","teamId"],MatchTeamInfo:["teamId","teamName","teamLeader","members","matchAttributes","memberSdkVersions","groupIds","groupSdkVersions"],MatchPlayersReq:["matchCode","playerInfo"],MatchPlayersRsp:["matchCode"],MatchGroupReq:["matchCode","playerInfoList"],MatchGroupRsp:["matchCode"],CancelPlayerMatchReq:["matchType"],CancelPlayerMatchRsp:[],CreateRoomBst:["roomInfo"],DestroyRoomBst:["roomInfo"],JoinRoomBst:["roomInfo","joinPlayerId"],LeaveRoomBst:["roomInfo","leavePlayerId"],RemovePlayerBst:["roomInfo","removePlayerId"],DismissRoomBst:["roomInfo"],ChangeRoomBst:["roomInfo"],RecvFromClientBst:["roomId","sendPlayerId","msg"],ChangeCustomPlayerStatusBst:["changePlayerId","customPlayerStatus","roomInfo"],ChangePlayerNetworkStateBst:["changePlayerId","networkState","roomInfo"],MatchTimeoutBst:["matchType","errCode"],CancelMatchBst:["matchCode","playerId"],MatchPlayersBst:["matchType","roomInfo"],StartFrameSyncBst:["roomInfo"],StopFrameSyncBst:["roomInfo"],RecvFrameBst:["frame"],GameSvrCommunication:["type","body"],NotifyRelayConnectionReq:["roomId","ip","port"],NotifyRoomEventReq:["cmd","msg"],SendToGameSvrReq:["roomId","playerId","data"],SendToGameSvrRsp:[],RecvFromGameSvrBst:["roomId","recvPlayerIdList","data"],ClientRecvFromGameSvrRsp:[]},hn=n(13),dn=(()=>{let e;return()=>e||(e=new _n(hn))})();Object.keys(Ee).map(e=>Ee[e]=function(e,t,n){return{bufferify:e().bufferify(t,n),objectify:e().objectify(t)}}(dn,[ne,e].join("."),fn[e])),un(Ee.ClientSendServerReqWrap2,"cmd","body",[{value:ie.E_CMD_LOGIN_REQ,key:"LoginReq",IProto:Ee.LoginReq},{value:ie.E_CMD_LOGOUT_REQ,key:"LogoutReq",IProto:Ee.LogoutReq},{value:ie.E_CMD_CHANGE_PLAYER_STATE_REQ,key:"ChangeCustomPlayerStatusReq",IProto:Ee.ChangeCustomPlayerStatusReq},{value:ie.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,key:"SendToGameSvrReq",IProto:Ee.SendToGameSvrReq},{value:ie.E_CMD_RELAY_SEND_FRAME_REQ,key:"SendFrameReq",IProto:Ee.SendFrameReq},{value:ie.E_CMD_ROOM_CHAT_REQ,key:"SendToClientReq",IProto:Ee.SendToClientReq},{value:ie.E_CMD_CHECK_LOGIN_REQ,key:"CheckLoginReq",IProto:Ee.CheckLoginReq},{value:ie.E_CMD_RELAY_REQUEST_FRAME_REQ,key:"RequestFrameReq",IProto:Ee.RequestFrameReq},{value:ie.E_CMD_START_FRAME_SYNC_REQ,key:"StartFrameSyncReq",IProto:Ee.StartFrameSyncReq},{value:ie.E_CMD_STOP_FRAME_SYNC_REQ,key:"StopFrameSyncReq",IProto:Ee.StopFrameSyncReq},{value:ie.E_CMD_CREATE_ROOM_REQ,key:"CreateRoomReq",IProto:Ee.CreateRoomReq},{value:ie.E_CMD_JOIN_ROOM_REQ,key:"JoinRoomReq",IProto:Ee.JoinRoomReq},{value:ie.E_CMD_QUIT_ROOM_REQ,key:"LeaveRoomReq",IProto:Ee.LeaveRoomReq},{value:ie.E_CMD_DISSMISS_ROOM_REQ,key:"DismissRoomReq",IProto:Ee.DismissRoomReq},{value:ie.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,key:"ChangeRoomReq",IProto:Ee.ChangeRoomReq},{value:ie.E_CMD_REMOVE_MEMBER_REQ,key:"RemovePlayerReq",IProto:Ee.RemovePlayerReq},{value:ie.E_CMD_GET_ROOM_DETAIL_REQ,key:"GetRoomByRoomIdReq",IProto:Ee.GetRoomByRoomIdReq},{value:ie.E_CMD_GET_ROOM_LIST_REQ,key:"GetRoomListReq",IProto:Ee.GetRoomListReq},{value:ie.E_CMD_GET_ROOM_LIST_V2_REQ,key:"GetRoomListReq",IProto:Ee.GetRoomListReq},{value:ie.E_CMD_HEART_BEAT_REQ,key:"HeartBeatReq",IProto:Ee.HeartBeatReq},{value:ie.E_CMD_MATCH_PLAYER_COMPLEX_REQ,key:"MatchPlayersReq",IProto:Ee.MatchPlayersReq},{value:ie.E_CMD_MATCH_ROOM_SIMPLE_REQ,key:"MatchRoomSimpleReq",IProto:Ee.MatchRoomSimpleReq},{value:ie.E_CMD_MATCH_CANCEL_MATCH_REQ,key:"CancelPlayerMatchReq",IProto:Ee.CancelPlayerMatchReq}]),Ee.ClientSendServerRspWrap2,ie.E_CMD_LOGIN_REQ,Ee.LoginRsp,ie.E_CMD_LOGOUT_REQ,Ee.LogoutRsp,ie.E_CMD_CHANGE_PLAYER_STATE_REQ,Ee.ChangeCustomPlayerStatusRsp,ie.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,Ee.SendToGameSvrRsp,ie.E_CMD_RELAY_SEND_FRAME_REQ,Ee.SendFrameRsp,ie.E_CMD_ROOM_CHAT_REQ,Ee.SendToClientRsp,ie.E_CMD_CHECK_LOGIN_REQ,Ee.CheckLoginRsp,ie.E_CMD_RELAY_REQUEST_FRAME_REQ,Ee.RequestFrameRsp,ie.E_CMD_START_FRAME_SYNC_REQ,Ee.StartFrameSyncRsp,ie.E_CMD_STOP_FRAME_SYNC_REQ,Ee.StopFrameSyncRsp,ie.E_CMD_CREATE_ROOM_REQ,Ee.CreateRoomRsp,ie.E_CMD_JOIN_ROOM_REQ,Ee.JoinRoomRsp,ie.E_CMD_QUIT_ROOM_REQ,Ee.LeaveRoomRsp,ie.E_CMD_DISSMISS_ROOM_REQ,Ee.DismissRoomRsp,ie.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,Ee.ChangeRoomRsp,ie.E_CMD_REMOVE_MEMBER_REQ,Ee.RemovePlayerRsp,ie.E_CMD_GET_ROOM_DETAIL_REQ,Ee.GetRoomByRoomIdRsp,ie.E_CMD_GET_ROOM_LIST_V2_REQ,Ee.GetRoomListRsp,ie.E_CMD_HEART_BEAT_REQ,Ee.HeartBeatRsp,ie.E_CMD_MATCH_PLAYER_COMPLEX_REQ,Ee.MatchPlayersRsp,ie.E_CMD_MATCH_ROOM_SIMPLE_REQ,Ee.MatchRoomSimpleRsp,ie.E_CMD_MATCH_CANCEL_MATCH_REQ,Ee.CancelPlayerMatchRsp;const En=un(Ee.ServerSendClientBstWrap2,"type","msg",[{value:re.E_PUSH_TYPE_GAMESVR,key:"RecvFromGameSvrBst",IProto:Ee.RecvFromGameSvrBst},{value:re.E_PUSH_TYPE_ROOM_CHAT,key:"RecvFromClientBst",IProto:Ee.RecvFromClientBst},{value:re.E_PUSH_TYPE_START_GAME,key:"StartFrameSyncBst",IProto:Ee.StartFrameSyncBst},{value:re.E_PUSH_TYPE_STOP_GAME,key:"StopFrameSyncBst",IProto:Ee.StopFrameSyncBst},{value:re.E_PUSH_TYPE_RELAY,key:"RecvFrameBst",IProto:Ee.RecvFrameBst},{value:re.E_PUSH_TYPE_JOIN_ROOM,key:"JoinRoomBst",IProto:Ee.JoinRoomBst},{value:re.E_PUSH_TYPE_LEAVE_ROOM,key:"LeaveRoomBst",IProto:Ee.LeaveRoomBst},{value:re.E_PUSH_TYPE_DISMISS_ROOM,key:"DismissRoomBst",IProto:Ee.DismissRoomBst},{value:re.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,key:"ChangeRoomBst",IProto:Ee.ChangeRoomBst},{value:re.E_PUSH_TYPE_REMOVE_PLAYER,key:"RemovePlayerBst",IProto:Ee.RemovePlayerBst},{value:re.E_PUSH_TYPE_PLAYER_STATE,key:"ChangeCustomPlayerStatusBst",IProto:Ee.ChangeCustomPlayerStatusBst},{value:re.E_PUSH_TYPE_NETWORK_STATE,key:"ChangePlayerNetworkStateBst",IProto:Ee.ChangePlayerNetworkStateBst},{value:re.E_PUSH_TYPE_MATCH_TIMEOUT,key:"MatchTimeoutBst",IProto:Ee.MatchTimeoutBst},{value:re.E_PUSH_TYPE_MATCH_SUCCESS,key:"MatchPlayersBst",IProto:Ee.MatchPlayersBst}]),{errCodeConvert:pn}=(un(Ee.ClientSendServerReqWrap1,"cmd","body",[{value:void 0,key:"ClientSendServerReqWrap2",IProto:Ee.ClientSendServerReqWrap2}]),un(Ee.ServerSendClientBstWrap1,"cmd","body",[{value:void 0,key:"ServerSendClientBstWrap2",IProto:En}]),s),Rn=new Map,mn=new Map,yn=new Map,gn=Ee.ClientSendServerReqWrap1,Sn=Ee.ClientSendServerReqWrap2,Cn=Ee.ClientSendServerRspWrap1,On=Ee.ClientSendServerRspWrap2,In=Ee.ServerSendClientBstWrap1,Tn=Ee.ServerSendClientBstWrap2;var vn;Rn.set(De.E_CMD_LOGIN_REQ,Ee.LoginReq),mn.set(De.E_CMD_LOGIN_REQ,Ee.LoginRsp),Rn.set(De.E_CMD_LOGOUT_REQ,Ee.LogoutReq),mn.set(De.E_CMD_LOGOUT_REQ,Ee.LogoutRsp),Rn.set(De.E_CMD_CHANGE_PLAYER_STATE_REQ,Ee.ChangeCustomPlayerStatusReq),mn.set(De.E_CMD_CHANGE_PLAYER_STATE_REQ,Ee.ChangeCustomPlayerStatusRsp),Rn.set(De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,Ee.SendToGameSvrReq),mn.set(De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,Ee.SendToGameSvrRsp),Rn.set(De.E_CMD_RELAY_SEND_FRAME_REQ,Ee.SendFrameReq),mn.set(De.E_CMD_RELAY_SEND_FRAME_REQ,Ee.SendFrameRsp),Rn.set(De.E_CMD_ROOM_CHAT_REQ,Ee.SendToClientReq),mn.set(De.E_CMD_ROOM_CHAT_REQ,Ee.SendToClientRsp),Rn.set(De.E_CMD_CHECK_LOGIN_REQ,Ee.CheckLoginReq),mn.set(De.E_CMD_CHECK_LOGIN_REQ,Ee.CheckLoginRsp),Rn.set(De.E_CMD_RELAY_REQUEST_FRAME_REQ,Ee.RequestFrameReq),mn.set(De.E_CMD_RELAY_REQUEST_FRAME_REQ,Ee.RequestFrameRsp),Rn.set(De.E_CMD_START_FRAME_SYNC_REQ,Ee.StartFrameSyncReq),mn.set(De.E_CMD_START_FRAME_SYNC_REQ,Ee.StartFrameSyncRsp),Rn.set(De.E_CMD_STOP_FRAME_SYNC_REQ,Ee.StopFrameSyncReq),mn.set(De.E_CMD_STOP_FRAME_SYNC_REQ,Ee.StopFrameSyncRsp),Rn.set(De.E_CMD_CREATE_ROOM_REQ,Ee.CreateRoomReq),mn.set(De.E_CMD_CREATE_ROOM_REQ,Ee.CreateRoomRsp),Rn.set(De.E_CMD_JOIN_ROOM_REQ,Ee.JoinRoomReq),mn.set(De.E_CMD_JOIN_ROOM_REQ,Ee.JoinRoomRsp),Rn.set(De.E_CMD_QUIT_ROOM_REQ,Ee.LeaveRoomReq),mn.set(De.E_CMD_QUIT_ROOM_REQ,Ee.LeaveRoomRsp),Rn.set(De.E_CMD_DISSMISS_ROOM_REQ,Ee.DismissRoomReq),mn.set(De.E_CMD_DISSMISS_ROOM_REQ,Ee.DismissRoomRsp),Rn.set(De.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,Ee.ChangeRoomReq),mn.set(De.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,Ee.ChangeRoomRsp),Rn.set(De.E_CMD_REMOVE_MEMBER_REQ,Ee.RemovePlayerReq),mn.set(De.E_CMD_REMOVE_MEMBER_REQ,Ee.RemovePlayerRsp),Rn.set(De.E_CMD_GET_ROOM_DETAIL_REQ,Ee.GetRoomByRoomIdReq),mn.set(De.E_CMD_GET_ROOM_DETAIL_REQ,Ee.GetRoomByRoomIdRsp),Rn.set(De.E_CMD_GET_ROOM_LIST_REQ,Ee.GetRoomListReq),mn.set(De.E_CMD_GET_ROOM_LIST_REQ,Ee.GetRoomListRsp),Rn.set(De.E_CMD_GET_ROOM_LIST_V2_REQ,Ee.GetRoomListReq),mn.set(De.E_CMD_GET_ROOM_LIST_V2_REQ,Ee.GetRoomListRsp),Rn.set(De.E_CMD_HEART_BEAT_REQ,Ee.HeartBeatReq),mn.set(De.E_CMD_HEART_BEAT_REQ,Ee.HeartBeatRsp),Rn.set(De.E_CMD_MATCH_PLAYER_COMPLEX_REQ,Ee.MatchPlayersReq),mn.set(De.E_CMD_MATCH_PLAYER_COMPLEX_REQ,Ee.MatchPlayersRsp),Rn.set(De.E_CMD_MATCH_GROUP_REQ,Ee.MatchGroupReq),mn.set(De.E_CMD_MATCH_GROUP_REQ,Ee.MatchGroupRsp),Rn.set(De.E_CMD_MATCH_ROOM_SIMPLE_REQ,Ee.MatchRoomSimpleReq),mn.set(De.E_CMD_MATCH_ROOM_SIMPLE_REQ,Ee.MatchRoomSimpleRsp),Rn.set(De.E_CMD_MATCH_CANCEL_MATCH_REQ,Ee.CancelPlayerMatchReq),mn.set(De.E_CMD_MATCH_CANCEL_MATCH_REQ,Ee.CancelPlayerMatchRsp),yn.set(Fe.E_PUSH_TYPE_GAMESVR,Ee.RecvFromGameSvrBst),yn.set(Fe.E_PUSH_TYPE_ROOM_CHAT,Ee.RecvFromClientBst),yn.set(Fe.E_PUSH_TYPE_START_GAME,Ee.StartFrameSyncBst),yn.set(Fe.E_PUSH_TYPE_STOP_GAME,Ee.StopFrameSyncBst),yn.set(Fe.E_PUSH_TYPE_RELAY,Ee.RecvFrameBst),yn.set(Fe.E_PUSH_TYPE_JOIN_ROOM,Ee.JoinRoomBst),yn.set(Fe.E_PUSH_TYPE_LEAVE_ROOM,Ee.LeaveRoomBst),yn.set(Fe.E_PUSH_TYPE_DISMISS_ROOM,Ee.DismissRoomBst),yn.set(Fe.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,Ee.ChangeRoomBst),yn.set(Fe.E_PUSH_TYPE_REMOVE_PLAYER,Ee.RemovePlayerBst),yn.set(Fe.E_PUSH_TYPE_PLAYER_STATE,Ee.ChangeCustomPlayerStatusBst),yn.set(Fe.E_PUSH_TYPE_NETWORK_STATE,Ee.ChangePlayerNetworkStateBst),yn.set(Fe.E_PUSH_TYPE_MATCH_TIMEOUT,Ee.MatchTimeoutBst),yn.set(Fe.E_PUSH_TYPE_MATCH_SUCCESS,Ee.MatchPlayersBst),yn.set(Fe.E_PUSH_TYPE_MATCH_CANCEL,Ee.CancelMatchBst),function(e){e.initSdk="e1",e.request="e2",e.ping="e3",e.recFrame="e4",e.frameRate="e5"}(vn||(vn={}));const An={onPingTime:e=>null,onFitFrameTime:e=>null,onBstFrameRate:e=>null,onRenderFrameRate:e=>null};var Mn={get id(){return Pe.getInfo().id},get openId(){return Me.openId},get name(){return Pe.getInfo().name},get teamId(){return Pe.getInfo().teamId},get customPlayerStatus(){return Pe.getInfo().customPlayerStatus},get customProfile(){return Pe.getInfo().customProfile},get commonNetworkState(){return Pe.getInfo().commonNetworkState},get relayNetworkState(){return Pe.getInfo().relayNetworkState}};function Nn(e){return(1e6*Date.now()+Math.floor(1e6*Math.random())).toString(e)||""}function Pn(){bn.conf.getLocation&&ke.getLocation({type:bn.conf.locationType||"wgs84",success(e){ke.setStorageSync(bn.prefix+bn.lt,JSON.stringify(e))}})}function Ln(){bn.conf.getUserInfo&&ke.getUserInfo({withCredentials:!1,success(e){const t=e.userInfo;t.nickName=encodeURIComponent(t.nickName),ke.setStorageSync(bn.prefix+bn.ui,JSON.stringify(t))},fail(e){}})}function wn(e,t,n,o,r){(!t||void 0===t||0>=t)&&(t=(new Date).getTime());const i=[{type:2,data:{id:Nn(32),start:t,status:e,duration:n||0,events:o||[]}}],s=ke.getSystemInfoSync(),a={deviceId:function(){let e=ke.getStorageSync(bn.prefix+bn.u);return e||(e=Nn(36),ke.setStorageSync(bn.prefix+bn.u,e)),e}(),appkey:bn.conf.appKey,versionCode:bn.conf.version,initTime:t,channelID:bn.conf.channelId,sdkVersion:bn.sdkVersion,pixel:s.screenWidth+"*"+s.screenHeight+"*"+s.pixelRatio,language:s.language,model:encodeURIComponent(s.model),wxVersion:s.version,networkType:ke.getStorageSync(bn.prefix+bn.nt)||"4g",system:encodeURIComponent(s.system),platform:encodeURIComponent(s.platform),windowArea:s.windowWidth+"*"+s.windowHeight+"*"+s.pixelRatio,opid:bn.opid,unid:bn.unid,userInfo:bn.conf.getUserInfo&&ke.getStorageSync(bn.prefix+bn.ui)||"",location:bn.conf.getLocation&&ke.getStorageSync(bn.prefix+bn.lt)||"",msgs:i};ke.request({url:bn.serverUrl,data:a,method:"POST",success:()=>r&&r(!0),fail:()=>r&&r(!1)})}const bn={serverUrl:null,opid:null,unid:null,conf:{appKey:"MA0NCELB39H5S6",version:"1.0.0",channelId:"",getLocation:!1,getUserInfo:!1,isDebug:!1,locationType:void 0},prefix:"beacon_",sdkVersion:"weapp_v1.0.7",u:"u",ui:"ui",lt:"lt",nt:"nt",oik:"oik",uik:"uik",atl:0,ats:0,ptl:0,pts:0,init(){var e;bn.conf.appKey&&void 0!==bn.conf.appKey&&bn.conf.appKey.length>0&&bn.conf.version&&void 0!==bn.conf.version&&bn.conf.version.length>0&&(bn.serverUrl="https://"+(bn.conf.isDebug?"jrlts":"report")+".wxlagame.com/analytics/upload?tp=weapp",Pn(),Ln(),ke.getNetworkType({success(e){ke.setStorageSync(bn.prefix+bn.nt,e.networkType)}}),bn.opid=ke.getStorageSync(bn.prefix+bn.oik),bn.unid=ke.getStorageSync(bn.prefix+bn.uik),this.atl=(new Date).getTime(),(!(e=this.atl)||void 0===e||0>=e)&&(e=(new Date).getTime()),wn(1,e,0,[]))},onEvent(e,t,n){const o=(new Date).getTime();wn(4,o,0,[{count:1,start:o,name:e,params:t||{}}],n)},onEvents(e,t){const n=(new Date).getTime(),o=[];e.forEach(e=>{o.push({count:1,start:n,name:e.eventName,params:e.param||{}})}),o.length>0&&wn(4,n,0,o,t)},setAppKey(e){bn.conf.appKey=e},setChannelId(e){bn.conf.channelId=e},setOpenid(e){e&&e.length>0&&(bn.opid=e,ke.setStorageSync(bn.prefix+bn.oik,e))},setUnionid(e){e&&e.length>0&&(bn.unid=e,ke.setStorageSync(bn.prefix+bn.uik,e))},setGetLocation(e){bn.conf.getLocation=!0===e,!0===e&&Pn()},setGetUserInfo(e){bn.conf.getUserInfo=!0===e,!0===e&&Ln()}},Dn=n(2);let Fn=!1,Yn=[],Un=1e4;function kn(e){Fn&&xn({sdFt:e},vn.recFrame)}function xn(e,t){e.sv=Dn.version||"",e.pi=Mn.id||"",e.gi=Me.gameId||"",e.sc=xe||0,Yn.push({eventName:t,param:e})}function Bn(e,t=!1,n){(t||Le.isInited())&&bn.onEvents(e,()=>null)}setInterval(()=>{Fn&&0!==Yn.length&&(Bn(Yn),Yn=[])},Un);const Hn={lastTime:0,frameRate:0,callback:e=>null,run:e=>{Hn.callback&&Hn.callback(e),"function"==typeof requestAnimationFrame&&requestAnimationFrame(Hn.run)}};Hn.callback=(e=>{if(0===Hn.lastTime)return void(Hn.lastTime=e);const t=e,n=t-Hn.lastTime,o=Math.round(1e3/(n+1e-6));Hn.frameRate=o,Hn.lastTime=t,An.onRenderFrameRate&&An.onRenderFrameRate(n)}),Hn.run(0);const Gn=Math.pow(2,12);function qn(e){let t=!1;return[ge.EC_ACCESS_CMD_GET_TOKEN_ERR,ge.EC_ACCESS_CMD_TOKEN_PRE_EXPIRE,ge.EC_ACCESS_CMD_INVALID_TOKEN,ge.EC_ACCESS_GET_COMM_CONNECT_ERR].includes(e)&&(t=!0),t}function Vn(e){let t=!1;return[ge.EC_ACCESS_GET_RELAY_CONNECT_ERR].includes(e)&&(t=!0),t}var Qn,Wn=class extends cn{constructor(e){super(),this.responses=e}sendRequest(e,t,n,o,r,i=""){if(!i){i=Ze();const s={time:Date.now(),isSocketSend:!1,cmd:t,response:e=>{n(!0,e,o),this.deleteSeqQueue(i)},resend:()=>this.sendRequest(e,t,n,o,r,i),sendSuccess(){this.isSocketSend=!0},sendFail:(e,t="")=>{n(!1,{RspWrap1:{seq:i,body:null,errCode:e,errMsg:`\u6d88\u606f\u53d1\u9001\u5931\u8d25\uff0c${t} [${e}]`},RspWrap2:null,body:null},o),this.deleteSeqQueue(i)},remove:()=>this.deleteSeqQueue(i)};this.addSeqQueue(i,s)}const s=function(e,t,n){const o=t.cmd,r=Rn.get(o);if(!r||!r.bufferify)throw new Error("\u627e\u4e0d\u5230\u8be5 cmd \u7f16\u7801\u65b9\u6cd5: "+o);const i=r.bufferify(n),s=Sn.bufferify(Object.assign({},t,{body:i}));return gn.bufferify(Object.assign({},e,{body:s}))}(Object.assign({},ve,{cmd:r,seq:i,body:null}),{cmd:t,body:null},e);if(s.length>Gn){const e=cn.sendQueue.get(i);return setTimeout(()=>e&&e.sendFail(ge.EC_SDK_SEND_FAIL,"\u6570\u636e\u957f\u5ea6\u8d85\u9650"),0),i}const a=this.buildData(s);return this.send(a,i,t)}buildData(e){const t=new Uint8Array(1),n=new Uint8Array(1);return t[0]=sn.CLIENT_PRE,n[0]=sn.CLIENT_END,super.buildData(t,e,n)}handleMessage(e){let t=null;const n=function(e,t){const n=Cn.objectify(e),o=On.objectify(n.body),r=t(n.seq);if(!r)return null;let i=null;const s=mn.get(r);if(!s||!s.objectify)return console.error("\u627e\u4e0d\u5230\u8be5 cmd \u89e3\u7801\u65b9\u6cd5: "+r),{RspWrap1:n,RspWrap2:o,body:i};o.body&&(i=s.objectify(o.body));const{errCode:a,errMsg:c}=pn(n.errCode,n.errMsg);return n.errMsg=c,n.errCode=a,n.body=null,o.body=null,{RspWrap1:n,RspWrap2:o,body:i}}(e,e=>{if(t=cn.sendQueue.get(e))return t.cmd});var o;if(t&&(o={rqCmd:t.cmd,rqSq:n.RspWrap1.seq,rqCd:n.RspWrap1.errCode,time:Date.now()-t.time},Fn&&xn(o,vn.request),t.cmd===De.E_CMD_HEART_BEAT_REQ||!this.handleErrCode(n.RspWrap1)))return t.response(n)}handleResponse(e){return this.handleMessage(e)}handleErrCode(e){return qn(e.errCode)?(this.handleTokenErr(),We.log("TOKEN_ERROR",e),!0):Vn(e.errCode)&&this.socket.id===o.ConnectionType.RELAY?(this.handleRelayConnectErr(),We.log("RELAY_CONNECT_ERROR",e),!0):(e.errCode!==ge.EC_OK&&this.responses.error({code:e.errCode,msg:e.errMsg,seq:e.seq}),!1)}handleSuccess(e,t){e===ge.EC_OK&&t()}handleTokenErr(){we.setStatus(we.StatusType.LOGOUT),this.socket.emit(en.autoAuth,{})}handleRelayConnectErr(){be.setStatus(be.StatusType.OFFLINE),this.socket.emit(en.autoAuth,{})}},Kn=class extends cn{constructor(){super()}buildData(e){const t=new Uint8Array(1),n=new Uint8Array(1);return t[0]=sn.SERVER_PRE,n[0]=sn.SERVER_END,super.buildData(t,e,n)}handleMessage(e){const t=function(e){const t=In.objectify(e),n=Tn.objectify(t.body);let o=null;const r=yn.get(n.type);return r&&r.objectify?(n.msg&&(o=r.objectify(n.msg)),t.body=null,n.msg=null,{BstWrap1:t,BstWrap2:n,body:o}):(console.error("\u627e\u4e0d\u5230\u8be5 cmd \u89e3\u7801\u65b9\u6cd5: "+n.type),{BstWrap1:t,BstWrap2:n,body:o})}(e),n=cn.broadcastHandlers.get(t.BstWrap2.type);n&&n(t.body,t.BstWrap1.seq)}handleBroadcast(e){return this.handleMessage(e)}};!function(e){e.comm="comm_cmd",e.relay="relay_cmd"}(Qn||(Qn={}));const jn=[o.ClientSendServerReqWrap2Cmd.E_CMD_CREATE_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_JOIN_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_QUIT_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_DISSMISS_ROOM_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_REMOVE_MEMBER_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_CHANGE_PLAYER_STATE_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_START_FRAME_SYNC_REQ,o.ClientSendServerReqWrap2Cmd.E_CMD_STOP_FRAME_SYNC_REQ];class Jn{constructor(e){this.client=new Wn(e),this.server=new Kn,this.responses=e}static startQueueLoop(){Jn.checkLoginQueue=[],Jn.roomQueue=[],cn.startQueueLoop()}static stopQueueLoop(){Jn.checkLoginQueue=[],Jn.roomQueue=[],cn.stopQueueLoop()}bindSocket(e){const t=this.client.handleResponse.bind(this.client),n=this.server.handleBroadcast.bind(this.server);this.client.bindSocket(e,t,n),this.server.bindSocket(e,t,n)}unbindSocket(){this.client.unbindSocket(),this.server.unbindSocket()}setBroadcastHandler(e,t){this.server.setBroadcastHandler(e,t)}send(e,t,n,r){let i=Qn.comm;this.client.socket.id===o.ConnectionType.RELAY&&(i=Qn.relay);const s={body:e,subcmd:t,response:n,callback:r,requestCmd:i,running:!1};let a=null;return t===o.ClientSendServerReqWrap2Cmd.E_CMD_CHECK_LOGIN_REQ&&(a=Jn.checkLoginQueue,s.beforeRequest=(()=>{be.setStatus(be.StatusType.CHECKING)}),s.afterRequest=(e=>{We.log("CHECKLOGIN",e)})),jn.includes(t)&&(a=Jn.roomQueue),a?this.pushQueue(s,a):this.sendRequest(s)}pushQueue(e,t){const n=e.callback;return e.callback=((o,r,i,s)=>{n&&n(o,r,i,s),e.running=!1,t.shift(),this.sendQueue(t)}),t.push(e),this.sendQueue(t)}sendQueue(e){if(!Array.isArray(e)||0===e.length||e[0].running)return"NO_SEQ";const t=e[0];return this.sendRequest(t)}sendRequest(e){e.running=!0,e.beforeRequest&&e.beforeRequest();const t=this.client.sendRequest(e.body,e.subcmd,e.response,e.callback,e.requestCmd);return e.afterRequest&&e.afterRequest(t),t}}Jn.checkLoginQueue=[],Jn.roomQueue=[];var Xn=Jn,zn=class extends Xn{constructor(e){super(e),this.matchTimeoutBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_TIMEOUT,this.matchUsersBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_SUCCESS,this.cancelMatchBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MATCH_CANCEL,this.setBroadcastHandler(this.matchTimeoutBroadcastType,this.matchUsersTimeoutBroadcast.bind(this)),this.setBroadcastHandler(this.matchUsersBroadcastType,this.matchUsersBroadcast.bind(this)),this.setBroadcastHandler(this.cancelMatchBroadcastType,this.cancelMatchBroadcast.bind(this))}matchUsersComplex(e,t){const n=De.E_CMD_MATCH_PLAYER_COMPLEX_REQ,o=this.send(e,n,this.matchUsersComplexResponse.bind(this),t);return We.log("MATCH_USERS_COMPLEX_Para",e,o),o}matchGroup(e,t){const n=De.E_CMD_MATCH_GROUP_REQ,o=this.send(e,n,this.matchGroupResponse.bind(this),t);return We.log("MATCH_GROUP_Para",e,o),o}matchRoom(e,t){const n=De.E_CMD_MATCH_ROOM_SIMPLE_REQ,o=this.send(e,n,this.matchRoomResponse.bind(this),t);return We.log("MATCH_ROOM_Para",e,o),o}cancelMatch(e,t){const n=De.E_CMD_MATCH_CANCEL_MATCH_REQ,o=this.send(e,n,this.cancelMatchResponse.bind(this),t);return We.log("CANCEL_MATCH_Para",e,o),o}matchUsersComplexResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.matchPlayersRsp(r)}matchGroupResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.matchGroupRsp(r)}matchRoomResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.matchRoomSimpleRsp(r)}cancelMatchResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.cancelPlayerMatchRsp(r)}matchUsersTimeoutBroadcast(e,t){const n={data:e,seq:t};return this.responses.onMatchTimeout(n)}matchUsersBroadcast(e,t){const n={data:e,seq:t};return this.responses.onMatchPlayers(n)}cancelMatchBroadcast(e,t){const n={data:e,seq:t};return this.responses.onCancelMatch(n)}},Zn=class extends Xn{constructor(e){super(e),this.joinRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_JOIN_ROOM,this.leaveRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_LEAVE_ROOM,this.dismissRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_DISMISS_ROOM,this.changeRoomBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_MODIFY_ROOM_PROPERTY,this.removeUserBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_REMOVE_PLAYER,this.changeUserStateBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_PLAYER_STATE,this.roomUserNetworkBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_NETWORK_STATE,this.testBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_TEST,this.setBroadcastHandler(this.joinRoomBroadcastType,this.onJoinRoom.bind(this)),this.setBroadcastHandler(this.leaveRoomBroadcastType,this.onLeaveRoom.bind(this)),this.setBroadcastHandler(this.dismissRoomBroadcastType,this.onDismissRoom.bind(this)),this.setBroadcastHandler(this.changeRoomBroadcastType,this.onChangeRoom.bind(this)),this.setBroadcastHandler(this.removeUserBroadcastType,this.onRemoveUser.bind(this)),this.setBroadcastHandler(this.changeUserStateBroadcastType,this.onChangeUserState.bind(this)),this.setBroadcastHandler(this.roomUserNetworkBroadcastType,this.onChangePlayerNetworkState.bind(this)),this.setBroadcastHandler(this.testBroadcastType,this.testBroadcast.bind(this))}createRoom(e,t){const n=De.E_CMD_CREATE_ROOM_REQ,o=this.send(e,n,this.createRoomResponse.bind(this),t);return We.log("CREATE_ROOM_Para",e,o),o}joinRoom(e,t){const n=De.E_CMD_JOIN_ROOM_REQ,o=this.send(e,n,this.joinRoomResponse.bind(this),t);return We.log("JOIN_ROOM_Para",e,o),o}leaveRoom(e,t){const n=De.E_CMD_QUIT_ROOM_REQ,o=this.send(e,n,this.leaveRoomResponse.bind(this),t);return We.log("LEAVE_ROOM_Para",e,o),o}dismissRoom(e,t){const n=De.E_CMD_DISSMISS_ROOM_REQ,o=this.send(e,n,this.dismissRoomResponse.bind(this),t);return We.log("DISMISS_ROOM_Para",e,o),o}changeRoom(e,t){const n=De.E_CMD_CHANGE_ROOM_PROPERTIS_REQ,o=this.send(e,n,this.changeRoomResponse.bind(this),t);return We.log("CHANGE_ROOM_Para",e,o),o}removeUser(e,t){const n=De.E_CMD_REMOVE_MEMBER_REQ,o=this.send(e,n,this.removeUserResponse.bind(this),t);return We.log("REMOVE_USER_Para",e,o),o}getRoomByRoomId(e,t){const n=De.E_CMD_GET_ROOM_DETAIL_REQ,o=this.send(e,n,this.getRoomByRoomIdRsp().bind(this),t);return We.log("GET_ROOM_BY_ROOM_ID_Para",e,o),o}getRoomList(e,t){const n=De.E_CMD_GET_ROOM_LIST_V2_REQ,o=this.send(e,n,this.getRoomListResponse.bind(this),t);return We.log("GET_ROOM_LIST_Para",e,o),o}createRoomResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.createRoomRsp(r)}joinRoomResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.joinRoomRsp(r)}leaveRoomResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.leaveRoomRsp(r)}dismissRoomResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.dismissRoomRsp(r)}changeRoomResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.changeRoomRsp(r)}removeUserResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.removePlayerRsp(r)}getRoomByRoomIdRsp(){return(e,t,n)=>{const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};n&&n(r),this.responses.getRoomByRoomIdRsp(r)}}getRoomListResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.getRoomListRsp(r)}testBroadcast(e,t){const n={data:e,seq:t};We.log("test \u5e7f\u64ad",n)}onJoinRoom(e,t){const n={data:e,seq:t};return this.responses.onJoinRoom(n)}onLeaveRoom(e,t){const n={data:e,seq:t};return this.responses.onLeaveRoom(n)}onDismissRoom(e,t){const n={data:e,seq:t};return this.responses.onDismissRoom(n)}onChangeRoom(e,t){const n={data:e,seq:t};return this.responses.onChangeRoom(n)}onRemoveUser(e,t){const n={data:e,seq:t};return this.responses.onRemovePlayer(n)}onChangeUserState(e,t){const n={data:e,seq:t};return this.responses.onChangeCustomPlayerStatus(n)}onChangePlayerNetworkState(e,t){const n={data:e,seq:t};return this.responses.onChangePlayerNetworkState(n)}};const $n={lastFrameTime:0,deltaTime:0,trigger:()=>{const e=Date.now();0!==$n.lastFrameTime?($n.deltaTime=e-$n.lastFrameTime,An.onBstFrameRate&&An.onBstFrameRate($n.deltaTime),$n.lastFrameTime=e):$n.lastFrameTime=e},clear:()=>{$n.lastFrameTime=0}};var eo=class{constructor(e){this.netUtil1=null,this.netUtil2=null,this.frameBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_RELAY,this.startGameBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_START_GAME,this.stopGameBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_STOP_GAME,this.sendMessageExtBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_GAMESVR,this.responses=e,this.netUtil1=new Xn(e),this.netUtil2=new Xn(e),this.netUtil1.setBroadcastHandler(this.startGameBroadcastType,this.onStartFrameSync.bind(this)),this.netUtil1.setBroadcastHandler(this.stopGameBroadcastType,this.onStopFrameSync.bind(this)),this.netUtil2.setBroadcastHandler(this.frameBroadcastType,this.onRecvFrame.bind(this)),this.netUtil2.setBroadcastHandler(this.sendMessageExtBroadcastType,this.onRecvFromGameSvr.bind(this))}setFrameRoom(e){We.log("SETFRAMEROOM",e);const t=this.getFrameRoom();this.roomInfo=e||{roomId:0,routeId:""};const n=t.routeId,o=this.roomInfo.routeId;return o?n!==o?(be.setStatus(be.StatusType.OFFLINE),this.autoCheckLogin()):n===o?this.autoCheckLogin():void 0:this.netUtil2.client.socket&&this.netUtil2.client.socket.close()}getFrameRoom(){return this.roomInfo||{id:0,routeId:""}}isRoomExist(){return!!this.roomInfo&&!!this.roomInfo.id}startFrameSync(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:ge.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.startFrameSyncResponse(!1,e,t)}const n=De.E_CMD_START_FRAME_SYNC_REQ,o=this.netUtil1.send(e,n,this.startFrameSyncResponse.bind(this),t);return We.log("START_FRAMESYNC_Para",e,o),o}stopFrameSync(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:ge.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.stopFrameSyncResponse(!1,e,t)}const n=De.E_CMD_STOP_FRAME_SYNC_REQ,o=this.netUtil1.send(e,n,this.stopFrameSyncResponse.bind(this),t);return We.log("STOP_FRAMESYNC_Para",e,o),o}sendFrame(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:ge.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.sendFrameResponse(!1,e,t)}this.autoCheckLogin();const n=De.E_CMD_RELAY_SEND_FRAME_REQ,o=this.netUtil2.send(e,n,this.sendFrameResponse.bind(this),t);return We.log("SEND_FRAME_Para",e,o),o}requestFrame(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:ge.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.requestFrameResponse(!1,e,t)}this.autoCheckLogin();const n=De.E_CMD_RELAY_REQUEST_FRAME_REQ,o=this.netUtil2.send(e,n,this.requestFrameResponse.bind(this),t);return We.log("REQUEST_FRAME_Para",e,o),o}checkLogin(e,t){if(!this.isRoomExist()){const t={RspWrap1:{seq:null,body:null,errCode:ge.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.checkLoginResponse(!1,t,e)}be.setStatus(be.StatusType.CHECKING);const n=De.E_CMD_CHECK_LOGIN_REQ,o={token:ve.authKey,routeId:this.roomInfo.routeId},r=this.netUtil2.send(o,n,this.checkLoginResponse.bind(this),e);return We.log("CHECKLOGIN",r,t,o.routeId),be.setRouteId(o.routeId),r}sendMessageExt(e,t){if(!this.isRoomExist()){const e={RspWrap1:{seq:null,body:null,errCode:ge.EC_SDK_NO_ROOM,errMsg:"\u65e0\u623f\u95f4\u4fe1\u606f"},RspWrap2:null,body:null};return void this.sendMessageExtResponse(!1,e,t)}this.autoCheckLogin();const n=De.E_CMD_RELAY_CLIENT_SENDTO_GAMESVR_REQ,o=this.netUtil2.send(e,n,this.sendMessageExtResponse.bind(this),t);return We.log("SEND_TO_GAMESVR_Para",e,o),o}startFrameSyncResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.startFrameSyncRsp(r)}stopFrameSyncResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.stopFrameSyncRsp(r)}autoCheckLogin(){this.connect(),this.netUtil2.client.socket.isConnect()&&be.isOffline()&&this.netUtil2.client.socket.emit(en.autoAuth,{})}connect(){!this.netUtil2.client.socket.isConnect()&&this.roomInfo&&(this.netUtil2.client.socket.url=Ie.url+":"+(Ie.enableUDP?8585:5443),this.netUtil2.client.socket.connect("framesender connect"))}sendFrameResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.sendFrameRsp(r)}checkLoginResponse(e,t,n){be.setStatus(be.StatusType.OFFLINE);const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return r.code===ge.EC_OK&&be.setStatus(be.StatusType.CHECKED),We.log("RESPONSE_CheckLoginResponse",r),n&&n(r)}requestFrameResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.requestFrameRsp(r)}sendMessageExtResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.sendToGameSvrRsp(r)}onRecvFrame(e,t){const n={data:{frame:Object.assign({},e.frame,{roomId:this.getFrameRoom().id})},seq:t};var o;$n.trigger(),o=$n.deltaTime,Fn&&xn({frRt:Hn.frameRate,reFt:o},vn.frameRate);for(const t of e.frame.items)t.playerId===ve.playerId&&kn(Date.now()-t.timestamp);return this.responses.onRecvFrame(n)}onStartFrameSync(e,t){const n={data:Object.assign({},e),seq:t};return $n.clear(),this.responses.onStartFrameSync(n)}onStopFrameSync(e,t){const n={data:Object.assign({},e),seq:t};return this.netUtil2&&this.netUtil2.client.clearQueue(),$n.clear(),this.responses.onStopFrameSync(n)}onRecvFromGameSvr(e,t){let n={};try{n=JSON.parse(e.data)}catch(t){n=e.data}const o={data:Object.assign({},e,{data:n},{roomId:e.roomId}),seq:t};return this.responses.onRecvFromGameSvr(o)}},to=class extends Xn{constructor(e){super(e),this.messageBroadcastType=o.ServerSendClientBstWrap2Type.E_PUSH_TYPE_ROOM_CHAT,this.setBroadcastHandler(this.messageBroadcastType,this.onRecvFromClient.bind(this))}sendMessage(e,t){const n=De.E_CMD_ROOM_CHAT_REQ,o=this.send(e,n,this.sendMessageResponse.bind(this),t);return We.log("SEND_MESSAGE_Para",e,o),o}sendMessageResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.sendToClientRsp(r)}onRecvFromClient(e,t){const n={data:e,seq:t};return this.responses.onRecvFromClient(n)}},no=class extends Xn{constructor(e){super(e)}login(e,t,n,o){const r=De.E_CMD_LOGIN_REQ;let i,s,a;Array.from(this.client.queue).forEach(e=>{const t=cn.sendQueue.get(e);t&&t.cmd===r&&this.client.deleteSeqQueue(e)}),n?(i=n.timestamp,s=n.nonce,a=n.sign):(i=Math.floor(Date.now()/1e3),s=Math.floor(Math.random()*(Math.pow(2,32)-1)),a=function(e,t,n,o,r){const i=[["game_id",t],["open_id",n],["nonce",r],["timestamp",o]].sort().map(e=>e.join("=")).join("&"),s=je(i,e||"");return{sign:Ke.stringify(s)}}(t,e.gameId,e.openId,i,s).sign);const c=nt(),l=ot(),_=et,u={gameId:e.gameId,openId:e.openId,sign:a,timestamp:i,nonce:s,platform:c,channel:l,deviceId:_,mac:void 0,imei:void 0};we.setStatus(we.StatusType.LOGINING);const f=this.send(u,r,this.loginResponse.bind(this),o);return We.log("LOGIN_Para",u,f),we.setErrCode(0,""),f}logout(e,t){const n=De.E_CMD_LOGOUT_REQ,o=this.send(e,n,this.logoutResponse.bind(this),t);return We.log("LOGOUT_Para",e,o),we.setStatus(we.StatusType.LOGOUTING),o}changeUserState(e,t){const n=De.E_CMD_CHANGE_PLAYER_STATE_REQ,o=this.send(e,n,this.changeUserStateResponse.bind(this),t);return We.log("CHANGE_USER_STATE_Para",e,o),o}loginResponse(e,t,n){e||we.setStatus(we.StatusType.LOGOUT);const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};this.client.handleSuccess(r.code,()=>{ve.authKey=t.body.token,ve.playerId=t.body.playerId,we.setStatus(we.StatusType.LOGIN),!Pe.getInfo().id&&Pe.setInfo({id:r.data.playerId})}),we.setErrCode(r.code,r.msg),n&&n(r),We.log("RESPONSE_LoginResponse",r)}logoutResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq};return We.log("RESPONSE_LogoutResponse",r),this.client.handleSuccess(r.code,()=>{ve.authKey=void 0,ve.playerId=void 0,we.setStatus(we.StatusType.LOGOUT),Pe.setInfo({id:void 0})}),n&&n(r)}changeUserStateResponse(e,t,n){const o=t.RspWrap1,r={code:o.errCode,msg:o.errMsg,seq:o.seq,data:t.body};return n&&n(r),this.responses.changeCustomPlayerStatusRsp(r)}},oo=class extends Xn{constructor(e,t,n){super(e),this.pingTimer=new He,this.pongTimer=new He,this.currentSeq="",this.retry=2,this.id=t,this.frameSender=n}get timeout(){return this.id===o.ConnectionType.RELAY&&Ie.enableUDP?Ie.pingTimeout/2:Ie.pingTimeout}unbindSocket(){this.stop(),super.unbindSocket()}ping(e){if(qe(this.pingTimer),!ve.authKey)return;const t=Date.now(),n=this.frameSender&&this.frameSender.roomInfo&&this.frameSender.roomInfo.routeId?this.frameSender.roomInfo.routeId:"",o={conType:this.id,routeId:n},r=this.send(o,De.E_CMD_HEART_BEAT_REQ,(e,n)=>this.handlePong(e,n,t),e);this.currentSeq=r,We.log("PING",this.id,r),Ge(this.pongTimer,()=>this.handlePongTimeout(r),this.timeout)}stop(){qe(this.pingTimer,this.pongTimer)}handlePong(e,t,n){if(We.log("Pong",this.id,t.RspWrap1,"send",e),qe(this.pongTimer),!e)return this.handlePongTimeout(t.RspWrap1.seq);this.retry=2,this.client.clearQueue();const r=t.RspWrap1.errCode;var i;return this.id===o.ConnectionType.RELAY&&r===ge.EC_OK&&(i={time:Date.now()-n},Fn&&(An.onPingTime&&An.onPingTime(i.time),xn(i,vn.ping))),qn(r)?(we.setStatus(we.StatusType.LOGOUT),this.client.socket.emit(en.autoAuth,{})):Vn(r)&&this.client.socket.id===o.ConnectionType.RELAY?(be.setStatus(be.StatusType.OFFLINE),this.client.socket.emit(en.autoAuth,{})):void Ge(this.pingTimer,this.ping.bind(this),this.timeout)}handlePongTimeout(e){if(this.client.deleteSeqQueue(e),this.retry--,e===this.currentSeq&&this.client.socket){if(this.id===o.ConnectionType.RELAY&&Ie.enableUDP){if(this.retry>=0)return Ge(this.pingTimer,this.ping.bind(this),this.timeout);this.retry=2}this.client.socket.connectNewSocket(this.client.socket.url),this.client.clearQueue(),We.log("Pong_Timeout",this.id)}}};const ro=(e,t)=>n=>{"error"!==n&&We.log(n,e);const o=Array.from(t.values());for(const t of o)t&&t[n]&&t[n].call(t,e)};class io{constructor(){this.context=null,io.instance=this,this.context=new Set}static bindResponses(e){io.instance.context.add(e)}static unbindResponses(e){io.instance.context.delete(e)}static clearResponses(){io.instance.context.clear()}onNetwork(e){ro(e,io.instance.context)("onNetwork")}createRoomRsp(e){ro(e,io.instance.context)("createRoomRsp")}joinRoomRsp(e){ro(e,io.instance.context)("joinRoomRsp")}onJoinRoom(e){ro(e,io.instance.context)("onJoinRoom")}leaveRoomRsp(e){ro(e,io.instance.context)("leaveRoomRsp")}onLeaveRoom(e){ro(e,io.instance.context)("onLeaveRoom")}dismissRoomRsp(e){ro(e,io.instance.context)("dismissRoomRsp")}onDismissRoom(e){ro(e,io.instance.context)("onDismissRoom")}changeRoomRsp(e){ro(e,io.instance.context)("changeRoomRsp")}onChangeRoom(e){ro(e,io.instance.context)("onChangeRoom")}removePlayerRsp(e){ro(e,io.instance.context)("removePlayerRsp")}onRemovePlayer(e){ro(e,io.instance.context)("onRemovePlayer")}getRoomByRoomIdRsp(e){ro(e,io.instance.context)("getRoomByRoomIdRsp")}getRoomListRsp(e){ro(e,io.instance.context)("getRoomListRsp")}matchPlayersSimpleRsp(e){ro(e,io.instance.context)("matchPlayersSimpleRsp")}matchPlayersRsp(e){ro(e,io.instance.context)("matchPlayersRsp")}matchGroupRsp(e){ro(e,io.instance.context)("matchGroupRsp")}matchRoomSimpleRsp(e){ro(e,io.instance.context)("matchRoomSimpleRsp")}onMatchTimeout(e){ro(e,io.instance.context)("onMatchTimeout")}onMatchPlayers(e){ro(e,io.instance.context)("onMatchPlayers")}cancelPlayerMatchRsp(e){ro(e,io.instance.context)("cancelPlayerMatchRsp")}onCancelMatch(e){ro(e,io.instance.context)("onCancelMatch")}startFrameSyncRsp(e){ro(e,io.instance.context)("startFrameSyncRsp")}stopFrameSyncRsp(e){ro(e,io.instance.context)("stopFrameSyncRsp")}sendFrameRsp(e){ro(e,io.instance.context)("sendFrameRsp")}sendToClientRsp(e){ro(e,io.instance.context)("sendToClientRsp")}onRecvFromClient(e){ro(e,io.instance.context)("onRecvFromClient")}onRecvFromGameSvr(e){ro(e,io.instance.context)("onRecvFromGameSvr")}onChangePlayerNetworkState(e){ro(e,io.instance.context)("onChangePlayerNetworkState")}onRecvFrame(e){ro(e,io.instance.context)("onRecvFrame")}requestFrameRsp(e){ro(e,io.instance.context)("requestFrameRsp")}sendToGameSvrRsp(e){ro(e,io.instance.context)("sendToGameSvrRsp")}changeCustomPlayerStatusRsp(e){ro(e,io.instance.context)("changeCustomPlayerStatusRsp")}onChangeCustomPlayerStatus(e){ro(e,io.instance.context)("onChangeCustomPlayerStatus")}onStartFrameSync(e){ro(e,io.instance.context)("onStartFrameSync")}onStopFrameSync(e){ro(e,io.instance.context)("onStopFrameSync")}error(e){ro(e,io.instance.context)("error")}}let so;io.instance=null;let ao,co=null,lo=null,_o=null,uo=null,fo=null,ho=null,Eo=null;function po(){yo.instance.clearResponses(),so&&so.destory(),ao&&ao.destory(),((...e)=>{e.forEach(e=>e&&e.unbindSocket())})(_o,uo,fo,ho,Eo.netUtil1,Eo.netUtil2,co,lo),ke.offHide(yo.instance.onHide),ke.offShow(yo.instance.onShow),Le.setStatus(Le.StatusType.UNINIT),we.setStatus(we.StatusType.LOGOUT)}const Ro={login(e){const t=Object.assign({},Me),n=t=>{e&&e(t),Ro.loginRsp(t)};return Me.createSignature?_o&&Me.createSignature(e=>_o.login(t,void 0,e,n)):_o&&_o.login(t,Me.secretKey,null,n)},loginRsp(e){if(Le.isIniting()){if(e.code!==ge.EC_OK)return mo(!1,{code:e.code});let t=5e3,n=1e4,o=!1,r=0;return e.data.sdkConfig&&(e.data.sdkConfig.pingInterval&&(t=e.data.sdkConfig.pingInterval),e.data.sdkConfig.reportInterval&&(n=e.data.sdkConfig.reportInterval),e.data.sdkConfig.serverTime&&(r=e.data.sdkConfig.serverTime),e.data.sdkConfig.enableUdp&&(o=e.data.sdkConfig.enableUdp)),function(e,t,n,o){We.log("EventUploader","validate"),function(e,t,n=1e4){Un=n,bn.init(),bn.setOpenid(e||""),Fn=!0}(e,0,n);const r={eventName:vn.initSdk,param:{}},i={};i.sv=Dn.version||"",i.pi=t||"",i.gi=Me.gameId||"",i.sc=xe||0,r.param=i,Bn([r],!0)}(Me.openId,ve.playerId,n),Ie.pingTimeout=t,Ie.enableUDP=!!o,mo(!0,{code:ge.EC_OK,data:{serverTime:r}}),co.ping()}e.code===ge.EC_OK&&co.ping()},logout:()=>_o&&_o.logout({},Ro.logoutRsp),logoutRsp(e){e.code===ge.EC_OK&&co.stop()}};function mo(e,t){if(Le.isIniting()){e&&Le.setStatus(Le.StatusType.INITED),!e&&Le.setStatus(Le.StatusType.UNINIT);let n=Le.isInited()?ge.EC_OK:ge.EC_SDK_UNINIT;!e&&t&&t.code!==ge.EC_OK&&(n=t.code);const o={default:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u6b63\u786e\u914d\u7f6e\uff0c\u4ee5\u53ca\u7f51\u7edc\u662f\u5426\u987a\u7545\u3002",[ge.EC_ACCESS_PLAYER_DUPLICATE_LOGIN]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7528\u6237\u5df2\u5728\u5176\u4ed6\u5ba2\u6237\u7aef\u767b\u5f55\u3002",[ge.EC_INVALID_PARAMS_TIMESTAMP]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u8bf7\u68c0\u67e5\u672c\u5730\u65f6\u95f4\u662f\u5426\u6b63\u5e38\u3002",[ge.EC_INVALID_PARAMS_SIGN]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7b7e\u540d\u6821\u9a8c\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u521d\u59cb\u5316\u53c2\u6570\u662f\u5426\u6b63\u786e\u3002",[ge.EC_INVALID_PARAMS_GAME_ID]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u8bf7\u68c0\u67e5 gameId \u662f\u5426\u6b63\u786e\u3002",[ge.EC_SDK_SEND_FAIL]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u6d88\u606f\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u662f\u5426\u6b63\u5e38\u3002",[ge.EC_SDK_RES_TIMEOUT]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u6d88\u606f\u54cd\u5e94\u8d85\u65f6\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5\u3002",[ge.EC_SDK_SOCKET_ERROR]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7f51\u7edc\u5f02\u5e38\u3002"+(t.errMsg||""),[ge.EC_SDK_SOCKET_CLOSE]:"\u521d\u59cb\u5316\u5931\u8d25\u3002\u7f51\u7edc\u5df2\u65ad\u5f00\u3002"},r=Le.isInited()?"\u521d\u59cb\u5316\u6210\u529f":o[n]||o.default,i=t.data&&t.data.serverTime||void 0;yo.instance.initRsp&&yo.instance.initRsp({code:n,msg:r,seq:null,data:{serverTime:i}})}}class yo{constructor(e,t){if(this.ErrCode=yo.ErrCode,this.ENUM=yo.ENUM,yo.instance instanceof yo)return yo.instance;yo.instance=this,!e.openId&&(e.openId=""),e.openId=e.openId+"",Object.assign(Me,e),Object.assign(Ie,t,{pingTimeout:Ie.pingTimeout}),ve.gameId=Me.gameId,We.log("CONSTRUCTOR",e,t)}bindResponses(e){io.bindResponses(e)}unbindResponses(e){io.unbindResponses(e)}clearResponses(){io.clearResponses()}onHide(){we.setStatus(we.StatusType.LOGOUT),be.setStatus(be.StatusType.OFFLINE),co&&co.stop(),lo&&lo.stop(),lo.client.socket.id===o.ConnectionType.RELAY&&Ie.enableUDP&&lo.client.socket.close(),We.log("SDK_onHide")}onShow(){co&&co.stop(),lo&&lo.stop(),co&&co.client.socket.url&&co.ping(),lo&&lo.client.socket.url&&lo.ping(),We.log("SDK_onShow",co.client.socket.url,lo.client.socket.url)}getSocket(e){return e===o.ConnectionType.COMMON?so:e===o.ConnectionType.RELAY?ao:void 0}init(e){this.initRsp=(t=>{e(t)}),function(){var e,t;Le.isUnInit()&&(_o&&po(),Le.setStatus(Le.StatusType.INITING),_o=new no(yo.responses),fo=new zn(yo.responses),ho=new to(yo.responses),uo=new Zn(yo.responses),Eo=new eo(yo.responses),so=new nn(o.ConnectionType.COMMON,!1),ao=new nn(o.ConnectionType.RELAY,!0),co=new oo(yo.responses,o.ConnectionType.COMMON,null),lo=new oo(yo.responses,o.ConnectionType.RELAY,Eo),e=[co,_o,uo,fo,ho,Eo.netUtil1],t=[lo,Eo.netUtil2],e.forEach(e=>e.bindSocket(so)),t.forEach(e=>e.bindSocket(ao)),Xn.stopQueueLoop(),Xn.startQueueLoop(),so.url=Ie.url,so.on(en.connect,()=>{we.isStatus(we.StatusType.LOGINING)||Ro.login(),so.url&&yo.responses.onNetwork({code:ge.EC_OK,data:{type:so.id}})}),ao.on(en.connect,()=>{Eo.checkLogin(null,"connect "+!!ao.isConnect()),ao.url&&yo.responses.onNetwork({code:ge.EC_OK,data:{type:ao.id}}),lo.ping()}),so.on(en.connectClose,()=>{mo(!1,{code:ge.EC_SDK_SOCKET_CLOSE}),Le.isInited()&&(we.setStatus(we.StatusType.LOGOUT),so.url&&yo.responses.onNetwork({code:ge.EC_SDK_SOCKET_CLOSE,msg:"Socket\u65ad\u5f00",seq:null}))}),ao.on(en.connectClose,()=>{Le.isInited()&&(be.setStatus(be.StatusType.OFFLINE),ao.url&&yo.responses.onNetwork({code:ge.EC_SDK_SOCKET_CLOSE,msg:"Socket\u65ad\u5f00",seq:null}),lo.stop())}),so.on(en.connectError,e=>{mo(!1,{code:ge.EC_SDK_SOCKET_ERROR,errMsg:JSON.stringify(e)}),Le.isInited()&&so.url&&yo.responses.onNetwork({code:ge.EC_SDK_SOCKET_ERROR,msg:"Socket\u9519\u8bef",seq:null})}),ao.on(en.connectError,e=>{Le.isInited()&&ao.url&&yo.responses.onNetwork({code:ge.EC_SDK_SOCKET_ERROR,msg:"Socket\u9519\u8bef",seq:null})}),so.on(en.autoAuth,()=>{Le.isInited()&&setTimeout(()=>{const e=we.isStatus(we.StatusType.LOGOUT);so.url&&e&&Ro.login()},1e3)}),ao.on(en.autoAuth,()=>{Le.isInited()&&ao.url&&setTimeout(()=>{we.isStatus(we.StatusType.LOGOUT)&&Ro.login();const e=Eo.roomInfo||{routeId:""};(be.isOffline()||be.getRouteId()!==e.routeId)&&Eo.checkLogin(e=>{e.code===ge.EC_OK&&lo.ping()},"autoAuth")},1e3)}),so.connect("init sdk"),ke.onHide(yo.instance.onHide),ke.onShow(yo.instance.onShow))}()}initRsp(e){return null}unInit(){Le.isUnInit()||(Xn.stopQueueLoop(),co&&co.stop(),lo&&lo.stop(),we.setStatus(we.StatusType.LOGOUT),be.setStatus(be.StatusType.OFFLINE),Pe.setInfo({id:void 0}),po(),Object.assign(Me,JSON.parse(Ne)),Object.assign(Ie,JSON.parse(Te)),Object.assign(ve,JSON.parse(Ae)),yo.instance=null)}isInited(){return Le.isInited()}changeCustomPlayerStatus(e,t,n){const o=Object.assign({},e);return _o.changeUserState(o,n)}createRoom(e,t){return this.createTeamRoom(Object.assign({},e,{teamNumber:1}),t)}createTeamRoom(e,t){"object"!=typeof e&&(e={});const n=[];let o=(e=JSON.parse(JSON.stringify(e))).maxPlayers||0,r=e.teamNumber||0;if(o%r!=0){const e="";return t&&t({seq:e,code:ge.EC_PARAMS_INVALID,msg:"\u53c2\u6570\u9519\u8bef\uff0c\u6700\u5927\u73a9\u5bb6\u6570\u65e0\u6cd5\u88ab\u961f\u4f0d\u6570\u91cf\u6574\u9664",data:null}),e}const i=Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:ve.playerId},e.playerInfo);if(delete e.teamNumber,!("number"==typeof o&&"number"==typeof r&&o>=r&&r>=1)){const e="";return t&&t({seq:"",code:ge.EC_PARAMS_INVALID,msg:"\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u6700\u5927\u73a9\u5bb6\u6570\u91cf\u548c\u961f\u4f0d\u6570\u91cf",data:null}),e}{o=Math.floor(o),r=Math.floor(r);const e=Math.floor(o/r);for(let t=0;t<r;t++){const s={id:t+"",maxPlayers:e,minPlayers:1,name:""};!i.teamId&&(i.teamId=s.id),t===r-1&&(s.maxPlayers=o-(r-1)*e),n.push(s)}}const s=Object.assign({region:void 0,owner:void 0,playerList:void 0},e,{teamList:n,createType:Se.CreateRoomType.COMMON_CREATE,playerInfo:i});return uo.createRoom(s,t)}joinRoom(e,t,n){const r=Object.assign({},e,{teamId:"0",joinType:o.JoinRoomType.COMMON_JOIN,roomId:t,playerInfo:Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:ve.playerId},e.playerInfo)});return uo.joinRoom(r,n)}joinTeamRoom(e,t,n){const r=Object.assign({},e,{joinType:o.JoinRoomType.COMMON_JOIN,roomId:t,playerInfo:Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:ve.playerId},e.playerInfo)});return uo.joinRoom(r,n)}leaveRoom(e){return uo.leaveRoom({},e)}dismissRoom(e,t,n){return uo.dismissRoom({},n)}changeRoom(e,t,n){const r={changeRoomOptionList:[]};if(e.hasOwnProperty("roomName")&&r.changeRoomOptionList.push(o.ChangeRoomOption.ROOM_NAME),e.hasOwnProperty("owner")&&r.changeRoomOptionList.push(o.ChangeRoomOption.OWNER),e.hasOwnProperty("isPrivate")&&r.changeRoomOptionList.push(o.ChangeRoomOption.IS_PRIVATE),e.hasOwnProperty("customProperties")&&r.changeRoomOptionList.push(o.ChangeRoomOption.CUSTOM_PROPERTIES),e.hasOwnProperty("isForbidJoin")&&r.changeRoomOptionList.push(o.ChangeRoomOption.IS_FORBID_JOIN),0!==r.changeRoomOptionList.length)return uo.changeRoom(Object.assign({},r,e),n);{const e={code:o.QAppProtoErrCode.EC_OK,msg:"\u672a\u4fee\u6539\u623f\u95f4\u4fe1\u606f",seq:"",data:t};n&&n(e)}}removePlayer(e,t){const n=Object.assign({},e);return uo.removeUser(n,t)}getRoomByRoomId(e,t){const n=Object.assign({},e);return uo.getRoomByRoomId(n,t)}getRoomList(e,t){const n=Object.assign({roomType:"",isDesc:!1},e,{gameId:Me.gameId});return uo.getRoomList(n,t)}matchPlayers(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({matchStatus:void 0,id:ve.playerId,teamId:"",region:"",teamLeader:"",sdkVersion:void 0,groupId:void 0},e.playerInfo)});return fo.matchUsersComplex(n,t)}matchGroup(e,t){const n=e.playerInfoList.map(e=>Object.assign({matchStatus:void 0,teamId:"",region:"",teamLeader:"",sdkVersion:void 0,groupId:void 0},e)),o={matchCode:e.matchCode,playerInfoList:n};return fo.matchGroup(o,t)}matchRoom(e,t){const n=Object.assign({},e,{playerInfo:Object.assign({commonNetworkState:void 0,relayNetworkState:void 0,teamId:void 0,isRobot:void 0,matchAttributes:void 0,id:ve.playerId},e.playerInfo)});return fo.matchRoom(n,t)}cancelMatch(e,t){const n=Object.assign({},e);return fo.cancelMatch(n,t)}setFrameRoom(e){return!(!e||!Array.isArray(e.playerList)||e.playerList.findIndex(e=>e.id===ve.playerId)<0||(Eo.setFrameRoom(e),0))}startFrameSync(e){const t=Eo.roomInfo;function n(t){e&&e(t),yo.responses.startFrameSyncRsp(t)}if(!t)return We.log("STARTFRAMESYNC","fail at roomInfo === null"),n({code:yo.ErrCode.EC_SDK_NO_ROOM,msg:"\u65e0\u623f\u95f4\u4fe1\u606f",seq:null});We.log("STARTFRAMESYNC",Eo.roomInfo),We.log("STARTFRAMESYNC","socket2 isConnect",ao.isConnect(),ao.socketTask),Eo.checkLogin(o=>{if(o.code===ge.EC_OK){We.log("STARTFRAMESYNC","start");const n={roomId:t.id,gameId:Me.gameId};return Eo.startFrameSync(n,e)}return We.log("STARTFRAMESYNC","fail at CheckLogin, seq=",o.seq,", code=",o.code,t),n({code:yo.ErrCode.EC_SDK_NO_CHECK_LOGIN,msg:"CheckLogin\u5931\u8d25\u3002"+JSON.stringify(o),seq:null})},"sdk startFrame")}stopFrameSync(e){const t={roomId:(Eo.roomInfo||{id:void 0}).id,gameId:Me.gameId};Eo.stopFrameSync(t,t=>e&&e(t))}sendFrame(e,t){const n={roomId:(Eo.roomInfo||{id:void 0}).id,item:{playerId:ve.playerId,data:JSON.stringify(e.data),timestamp:Date.now()}};return Eo.sendFrame(n,t)}requestFrame(e,t){const n=Eo.roomInfo||{id:void 0},o=Object.assign({},e,{roomId:n.id});return Eo.requestFrame(o,t)}sendToClient(e,t,n){if(0===e.recvPlayerList.length)return void(n&&n({code:this.ErrCode.EC_OK,data:null,seq:"",msg:""}));const o=Object.assign({},e,{roomId:t});return ho.sendMessage(o,n)}sendToGameSvr(e,t,n){const o=Object.assign({},e,{playerId:ve.playerId,roomId:t,data:JSON.stringify(e.data)});return Eo.sendMessageExt(o,n)}}yo.instance=null,yo.responses=new io,yo.ErrCode=ge,yo.ENUM=Se;class go{constructor(e,t){this.frameIdFill=0,this.frameIdSent=0,this.autoReqFrameErrTimes=0,this.lastFrameTime=0,this.beginFrameId=-1,this.endFrameId=-1,this.fillCache={},this.timer=new So(e),this.callback=t}reset(e=0){this.timer.init(),this.frameIdSent=e,this.frameIdFill=e,this.lastFrameTime=0}push(e,t){const n=e.data.frame.id;1===n&&this.reset(),this.timer.push(n,Date.now());const o=this.frameIdSent,r=this.frameIdFill;return this.frameIdFill=n,Ie.isAutoRequestFrame?n<=o+1?this.send(e):(this.fillCache[n]={endFrameId:n,data:[e.data.frame]},void(n>r+1&&this.fill(r+1,n-1,t))):this.send(e)}retryFill(e){this.beginFrameId===this.endFrameId&&this.beginFrameId<0||(this.autoReqFrameErrTimes=0,this.fill(this.beginFrameId,this.endFrameId,e))}send(e){const t=e.data.frame.id;if(t<=this.frameIdSent)return;e.data.frame.time=this.timer.time(t),this.frameIdSent=t,this.callback(e),!this.lastFrameTime&&(this.lastFrameTime=e.data.frame.time);const n=e.data.frame.time-this.lastFrameTime;0!==n&&An.onFitFrameTime(n),Math.abs(n)>300&&!e.data.frame.isReplay&&(this.reset(t),this.timer.push(t,Date.now())),this.lastFrameTime=e.data.frame.time}fillSend(e){if(e<=this.frameIdSent+1&&this.fillCache[e]){const t=this.fillCache[e];delete this.fillCache[e],t.data.forEach(e=>this.send({data:{frame:e},seq:""})),this.fillSend(t.endFrameId+1)}}fill(e,t,n){n.isInRoom()&&n.requestFrame({beginFrameId:e,endFrameId:t},r=>{if(this.beginFrameId=e,this.endFrameId=t,r.code!==o.QAppProtoErrCode.EC_OK){if(this.autoReqFrameErrTimes++,this.autoReqFrameErrTimes<=5)return this.fill(e,t,n);n.onAutoRequestFrameError&&n.onAutoRequestFrameError({data:r,seq:""})}else this.beginFrameId=-1,this.endFrameId=-1,this.autoReqFrameErrTimes=0,this.fillCache[e]={endFrameId:t,data:r.data.frames.map(e=>Object.assign({},e,{roomId:n.roomInfo.id,isReplay:!0}))},this.fillSend(e)})}}class So{constructor(e){this._a1=e,this.init()}init(){this.n=0,this.S_xi=0,this.S_yi=0,this.S_xiyi=0,this.S_xixi=0}push(e,t){this.n++,this.S_xi+=e,this.S_yi+=t,this.S_xiyi+=e*t,this.S_xixi+=e*e}a0(e){return void 0===e&&(e=this.a1()),this.S_yi/this.n-this.a1()*this.S_xi/this.n}a1(){return(this.n*this.S_xiyi-this.S_xi*this.S_yi)/(this.n*this.S_xixi-this.S_xi*this.S_xi)}ap(){const e=this.a1();return{a0:this.a0(e),a1:e}}time(e){if(0===this.n)return 0;const t=this.n>=2?this.ap():{a0:this.S_yi-this.S_xi*this._a1,a1:this._a1};return Math.round(t.a0+e*t.a1)}}class Co{constructor(e){this.frameBroadcastFrameId=0,this.room=e,this.frameBroadcast=new go(this.room.roomInfo.frameRate?Math.floor(1e3/this.room.roomInfo.frameRate):66,e=>{e&&e.data&&e.data.frame&&e.data.frame.items&&e.data.frame.items.forEach(e=>e.data="object"==typeof e.data?e.data:JSON.parse(e.data)),this.matchFrameBstAndInvoke("onRecvFrame",e)})}onNetwork(e){this.room.onUpdate&&this.room.onUpdate(this.room)}onJoinRoom(e){this.saveAndInvoke("onJoinRoom",e)}onLeaveRoom(e){this.saveAndInvoke("onLeaveRoom",e)}onDismissRoom(e){this.matchRoomInfoAndInvoke("onDismissRoom",e,()=>this.room.roomInfo={})}onChangeRoom(e){this.saveAndInvoke("onChangeRoom",e)}onRemovePlayer(e){this.saveAndInvoke("onRemovePlayer",e)}onRecvFromClient(e){this.matchIDAndInvoke("onRecvFromClient",e)}onRecvFromGameSvr(e){this.matchIDAndInvoke("onRecvFromGameSvr",e,null)}onMatchPlayers(e){this.room.roomUtil.setRoomInfo(e.data.roomInfo),e.data.roomInfo&&e.data.roomInfo.playerList&&e.data.roomInfo.playerList.find(e=>Mo.isMe(e.id))&&this.room.roomUtil.activeFrame();const t=e.data.matchType;Oo.once(t,{code:o.QAppProtoErrCode.EC_OK,msg:"",seq:"",data:e.data})}onMatchTimeout(e){const t=e.data.matchType,n=e.data.errCode||o.QAppProtoErrCode.EC_MATCH_TIMEOUT,{errCode:r,errMsg:i}=tt(n,"");Oo.once(t,{code:r,msg:i,seq:"",data:{}})}onChangePlayerNetworkState(e){this.saveAndInvoke("onChangePlayerNetworkState",e)}onChangeCustomPlayerStatus(e){this.saveAndInvoke("onChangeCustomPlayerStatus",e)}onStartFrameSync(e){this.saveAndInvoke("onStartFrameSync",e)}onStopFrameSync(e){this.frameBroadcast.reset(),this.saveAndInvoke("onStopFrameSync",e)}onRecvFrame(e){this.room.roomInfo.frameSyncState!==o.FrameSyncState.STOP&&this.frameBroadcast.push(e,this.room)}frameBroadcastFrameIdReset(e=0){return this.frameBroadcast.reset(e)}matchRoomInfo(e){return this.room.roomInfo.id===e.data.roomInfo.id}matchID(e){return this.room.roomInfo.id===e.data.roomId}invoke(e,t){this.room[e]&&this.room[e].call(this.room,t)}saveAndInvoke(e,t){this.matchRoomInfo(t)&&(this.room.roomUtil.setRoomInfo(t.data.roomInfo),this.invoke(e,t))}matchFrameBstAndInvoke(e,t,n){this.matchID({data:t.data.frame,seq:""})&&(n&&n(t),this.invoke(e,t))}matchIDAndInvoke(e,t,n){this.matchID(t)&&(n&&n(t),this.invoke(e,t))}matchRoomInfoAndInvoke(e,t,n){this.matchRoomInfo(t)&&(n&&n(t),this.invoke(e,t))}}const Oo=new class{constructor(){this.callbacks={}}push(e,t){!this.callbacks[e]&&(this.callbacks[e]=[]),this.callbacks[e].push(t)}once(e,t){(this.callbacks[e]||[]).forEach(e=>e&&e(t)),this.removeCallbacksByTag(e)}removeCallbacksByTag(e){e&&this.callbacks[e]&&delete this.callbacks[e]}},Io=new class{onMatchPlayers(e){const t={data:{roomInfo:e.data.roomInfo,errCode:ge.EC_OK},seq:e.seq};Ao.onMatch&&Ao.onMatch(t)}onMatchTimeout(e){const t={data:{roomInfo:null,errCode:e.data.errCode},seq:e.seq};Ao.onMatch&&Ao.onMatch(t)}onCancelMatch(e){const t={data:{matchCode:e.data.matchCode,playerId:e.data.playerId},seq:e.seq};Ao.onCancelMatch&&Ao.onCancelMatch(t)}};class To{constructor(e){this.room=e}setRoomInfo(e){!e&&(e={});const t=JSON.parse(JSON.stringify(this.room.roomInfo||{}));this.room.roomInfo=JSON.parse(JSON.stringify(e||{})),this.room.roomInfo.playerList=this.room.roomInfo.playerList||[],this.room.isInRoom()&&Pe.setInfo(this.room.roomInfo.playerList.find(e=>e.id===ve.playerId)),t.id===this.room.roomInfo.id&&this.room.roomInfo.id&&this.room.isInRoom()&&t.startGameTime===this.room.roomInfo.startGameTime||this.room.roomBroadcast&&this.room.roomBroadcast.frameBroadcastFrameIdReset(),this.room.roomInfo&&Array.isArray(this.room.roomInfo.playerList)&&this.room.roomInfo.playerList.find(e=>Mo.isMe(e.id))&&this.activeFrame(),this.room.onUpdate&&this.room.onUpdate(this.room)}saveRoomInfo(e){e.code===o.QAppProtoErrCode.EC_OK&&this.setRoomInfo(e.data?e.data.roomInfo:null)}setParam(e){this.room.roomInfo.id&&(e.roomId=this.room.roomInfo.id)}addRoomParam(){return{roomId:this.room.roomInfo.id||""}}initBroadcast(){this.room.roomBroadcast||(this.room.roomBroadcast=new Co(this.room))}activeFrame(){return yo.instance.setFrameRoom(this.room.roomInfo)}}class vo{}class Ao extends vo{constructor(e){super(),this.roomUtil=new To(this),this.roomUtil.setRoomInfo(e||null)}static getRoomList(e,t){yo.instance.getRoomList(e,rt(t))}static getRoomByRoomId(e,t){yo.instance.getRoomByRoomId(e,rt(t))}static getMyRoom(e){yo.instance.getRoomByRoomId({roomId:""},rt(e))}isInRoom(){return!!this.roomInfo.playerList.find(e=>e.id===ve.playerId)}initRoom(e){this.roomUtil.setRoomInfo(e);let t=e;t&&t.id&&t.routeId&&Array.isArray(t.playerList)&&t.playerList.find(e=>e.id&&Mo.isMe(e.id))&&this.roomUtil.activeFrame()}onUpdate(e){}get networkState(){let e=!1,t=!1;const n=yo.instance.getSocket(o.ConnectionType.COMMON),r=yo.instance.getSocket(o.ConnectionType.RELAY);return{COMMON:e=!(!n||!n.isConnect()),RELAY:t=!(!r||!r.isConnect())}}createRoom(e,t){yo.instance.createRoom(e,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}createTeamRoom(e,t){yo.instance.createTeamRoom(e,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}joinRoom(e,t){yo.instance.joinRoom(Object.assign({},e),this.roomInfo.id,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}joinTeamRoom(e,t){yo.instance.joinTeamRoom(Object.assign({},e),this.roomInfo.id,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}leaveRoom(e,t){this.roomUtil.setParam(e),yo.instance.leaveRoom(rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}dismissRoom(e,t){yo.instance.dismissRoom(e,this.roomInfo.id,rt(e=>{e.code===o.QAppProtoErrCode.EC_OK&&this.roomUtil.setRoomInfo(null),t&&t(e)}))}changeRoom(e,t){yo.instance.changeRoom(e,this.roomInfo,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}changeCustomPlayerStatus(e,t){yo.instance.changeCustomPlayerStatus(Object.assign({},e),this.roomInfo.id,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}removePlayer(e,t){yo.instance.removePlayer(e,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}getRoomDetail(e){yo.instance.getRoomByRoomId(Object.assign({},this.roomUtil.addRoomParam()),rt(t=>{this.roomUtil.saveRoomInfo(t),e&&e(t)}))}matchPlayers(e,t){let n=t;We.log("typeof_Room.onMatch",typeof Ao.onMatch),"function"!=typeof Ao.onMatch&&(Oo.push(o.MatchType.PLAYER_COMPLEX,t),n=(e=>{if(e.code!==o.QAppProtoErrCode.EC_OK)return e.data=null,Oo.once(o.MatchType.PLAYER_COMPLEX,e)})),yo.instance.matchPlayers(e,rt(n))}matchGroup(e,t){yo.instance.matchGroup(e,rt(t))}matchRoom(e,t){yo.instance.matchRoom(e,rt(e=>{this.roomUtil.saveRoomInfo(e),t&&t(e)}))}cancelPlayerMatch(e,t){let n=t;e.matchType===Se.MatchType.PLAYER_COMPLEX&&(n=(n=>{n.code===ge.EC_OK&&Oo.removeCallbacksByTag(e.matchType),t&&t(n)})),yo.instance.cancelMatch(e,rt(n))}startFrameSync(e,t){this.roomUtil.activeFrame(),yo.instance.startFrameSync(rt(t))}stopFrameSync(e,t){this.roomUtil.activeFrame(),yo.instance.stopFrameSync(rt(t))}sendFrame(e,t){this.roomUtil.activeFrame(),yo.instance.sendFrame(e,rt(t))}requestFrame(e,t){this.roomUtil.activeFrame(),yo.instance.requestFrame(e,rt(e=>{e&&e.data&&e.data.frames&&e.data.frames.forEach(e=>{e.items.forEach(e=>{e.data="object"==typeof e.data?e.data:JSON.parse(e.data)})}),t&&t(e)}))}retryAutoRequestFrame(){this.roomBroadcast.frameBroadcast.retryFill(this)}sendToClient(e,t){let n=e.recvPlayerList||[];e.recvType===Se.RecvType.ROOM_ALL?n=this.roomInfo.playerList.map(e=>e.id):e.recvType===Se.RecvType.ROOM_OTHERS&&(n=this.roomInfo.playerList.filter(e=>e.id!==ve.playerId).map(e=>e.id));const o={recvType:void 0,recvPlayerList:n,msg:e.msg};yo.instance.sendToClient(o,this.roomInfo.id,rt(t))}sendToGameSvr(e,t){yo.instance.sendToGameSvr(e,this.roomInfo.id,rt(t))}}class Mo{static isMe(e){return ve.playerId===e}static get isInited(){return yo.instance.isInited()}static init(e,t,n){yo.instance=new yo(e,t),yo.instance.init(rt(n)),yo.instance.bindResponses(Io)}static add(e){e.roomUtil.initBroadcast(),yo.instance.bindResponses(e.roomBroadcast)}static remove(e){yo.instance.unbindResponses(e.roomBroadcast)}static clear(){yo.instance.clearResponses()}}let No=0;const Po=Math.pow(2,32)-1;var Lo={init(e){No=e},random(){const e=(1103515245*No+123456789)%Po;return No=e,e/Po}};class wo{}wo.Listener=null,wo.Room=null,wo.ENUM=null,wo.ErrCode=null,wo.RandomUtil=null,wo.DebuggerLog=null,wo.Player=null,wo.StatCallbacks=null,wo.Listener=Mo,wo.Room=Ao,wo.ENUM=Se,wo.ErrCode=ge,wo.RandomUtil=Lo,wo.DebuggerLog=We,wo.Player=Mn,wo.StatCallbacks=An,(ke.root||{}).MGOBE=wo,wo.types=Se,t.default=wo}]).default})},{}],AppFacade:[function(e,t,n){"use strict";cc._RF.push(t,"9bd88dxjkxI86h2WuaC9sGd","AppFacade");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("./model/UserProxy"),i=e("./controller/UserCommand"),s=e("./model/RoomProxy"),a=e("./controller/GameCommand"),c=function(e){function t(){return e.call(this)||this}return o(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.startup=function(){},t.prototype.initializeFacade=function(){e.prototype.initializeFacade.call(this)},t.prototype.initializeModel=function(){e.prototype.initializeModel.call(this),this.registerProxy(new r.default),this.registerProxy(new s.default)},t.prototype.initializeController=function(){e.prototype.initializeController.call(this),(new i.default).register(),(new a.default).register()},t.prototype.initializeView=function(){e.prototype.initializeView.call(this)},t.STARTUP="startup",t}(puremvc.Facade);n.default=c,cc._RF.pop()},{"./controller/GameCommand":"GameCommand","./controller/UserCommand":"UserCommand","./model/RoomProxy":"RoomProxy","./model/UserProxy":"UserProxy"}],ChessboardView:[function(e,t,n){"use strict";cc._RF.push(t,"4bb22mfnUJH251ybTymQYqS","ChessboardView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../model/vo/GameVO"),s=e("../../util/Util"),a=e("../../Constants"),c=cc._decorator,l=c.ccclass,_=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hWall=null,t.vWall=null,t.hWallShadow=null,t.vWallShadow=null,t.chessPrefab=null,t.chessNodes=[],t.wallNodes=[],t.wallPositions=[],t}return o(t,e),t.prototype.onLoad=function(){var e=this.node.getContentSize();this.unit=e.width/44;for(var t=0;t<4;t++){var n=cc.instantiate(this.chessPrefab);n.parent=this.node,n.name="chess"+t.toString(),n.active=!1,this.chessNodes.push(n)}this.listenChessBoard();var o=cc.instantiate(this.hWall);this.wallNodeWidth=o.getContentSize().width},t.prototype.initView=function(e){for(var t=s.default.getPlayerCntByType(e.gameType),n=0;n<t;n++)console.log("\u663e\u793a\u68cb\u5b50"),this.setChessView(this.chessNodes[n],e.playersInfo[n].avatarUrl),this.chessNodes[n].active=!0;this.chessNodes[0].getComponent(cc.Button).interactable=!0,this.updateView(e)},t.prototype.updateView=function(e){for(var t=s.default.getPlayerCntByType(e.gameType),n=0;n<t;n++)console.log("===",n,e.playersInfo[n]),this.setChessPosition(this.chessNodes[n],e.playersInfo[n].chessPosition);this.clearWall();for(n=0;n<e.walls.length;n++)this.addWall(e.walls[n].position,e.walls[n].wallType)},t.prototype.showChessHint=function(e){},t.prototype.clearChessHint=function(){},t.prototype.setChessPosition=function(e,t){if(t){var n=t.x*this.unit*5+2*this.unit,o=t.y*this.unit*5+2*this.unit;e.x=n,e.y=o}},t.prototype.setChessView=function(e,t){if(e){var n=e.getChildByName("mask").getChildByName("chess"),o=n.getComponent(cc.Sprite);t?cc.loader.load({url:t,type:"jpg"},function(e,t){null==e&&(o.spriteFrame=new cc.SpriteFrame(t)),n.active=!0}):n.active=!0}},t.prototype.clearWall=function(){for(var e=0;e<this.wallNodes.length;e++)this.wallNodes[e].destroy()},t.prototype.addWall=function(e,t){if(e&&t){var n;t==a.WallType.HORIZONTAL?n=cc.instantiate(this.hWall):t==a.WallType.VERTICAL&&(n=cc.instantiate(this.vWall)),this.wallNodes.push(n),n.parent=this.node;var o=e.x*this.unit*5+4.5*this.unit,r=e.y*this.unit*5+4.5*this.unit;n.x=o,n.y=r}},t.prototype.listenChessBoard=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onChessTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onChessTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onChessTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onChessTouchCancel,this)},t.prototype.removeListenChessBoard=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onChessTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onChessTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onChessTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onChessTouchCancel,this)},t.prototype.onChessTouchStart=function(e){console.log("onChessTouchStart");var t=e.getLocation(),n=this.node.convertToNodeSpaceAR(t);this.touchWallShadowNode=cc.instantiate(this.hWallShadow),this.touchWallShadowNode.active=!1,this.touchWallShadowNode.parent=this.node,this.touchWallNode=cc.instantiate(this.hWall),this.touchWallNode.active=!1,this.touchWallNode.parent=this.node,this.touchWallNode.anchorX=.75,this.touchWallType=a.WallType.HORIZONTAL,this.touchWallPosition=new i.Position(-1,-1),this.touchStartPosition=n},t.prototype.onChessTouchMove=function(e){console.log("onChessTouchMove");var t=e.getLocation(),n=this.node.convertToNodeSpaceAR(t);if(!(Math.abs(n.x-this.touchStartPosition.x)<this.unit&&Math.abs(n.y-this.touchStartPosition.y)<this.unit)){this.touchWallNode.position=n,this.touchWallNode.y+=10*this.unit,this.touchWallNode.active=!0;var o,r,i=(n.x+.5*this.unit)%(5*this.unit);if(i>1.5*this.unit&&(i=5*this.unit-i),i<1.2*this.unit){if(this.touchWallType==a.WallType.HORIZONTAL){var s=cc.rotateTo(.1,-90);this.touchWallNode.runAction(s),this.touchWallType=a.WallType.VERTICAL,this.touchWallShadowNode.destroy(),this.touchWallShadowNode=cc.instantiate(this.vWallShadow),this.touchWallShadowNode.active=!1,this.touchWallShadowNode.parent=this.node,this.touchWallShadowNode.setSiblingIndex(0)}}else if(this.touchWallType==a.WallType.VERTICAL){s=cc.rotateTo(.1,0);this.touchWallNode.runAction(s),this.touchWallType=a.WallType.HORIZONTAL,this.touchWallShadowNode.destroy(),this.touchWallShadowNode=cc.instantiate(this.hWallShadow),this.touchWallShadowNode.active=!1,this.touchWallShadowNode.parent=this.node,this.touchWallShadowNode.setSiblingIndex(0)}this.touchWallType==a.WallType.HORIZONTAL?(o=(this.touchWallNode.position.x-4.5*this.unit-.25*this.wallNodeWidth)/(5*this.unit),r=(this.touchWallNode.position.y-4.5*this.unit)/(5*this.unit)):(o=(this.touchWallNode.position.x-4.5*this.unit)/(5*this.unit),r=(this.touchWallNode.position.y-4.5*this.unit+.25*this.wallNodeWidth)/(5*this.unit)),o=Math.round(o),r=Math.round(r),o<0||o>7||r<0||r>7?(this.touchWallShadowNode.active=!1,this.touchWallPosition.x=-1,this.touchWallPosition.y=-1):(this.touchWallShadowNode.x=o*this.unit*5+4.5*this.unit,this.touchWallShadowNode.y=r*this.unit*5+4.5*this.unit,this.touchWallShadowNode.active=!0,this.touchWallPosition.x=o,this.touchWallPosition.y=r)}},t.prototype.onChessTouchEnd=function(e){console.log("onChessTouchEnd"),console.log("-====",this.touchWallPosition),-1!=this.touchWallPosition.x&&-1!=this.touchWallPosition.y&&this.addWall(this.touchWallPosition,this.touchWallType),this.touchWallNode.destroy(),this.touchWallShadowNode.destroy()},t.prototype.onChessTouchCancel=function(e){console.log("onChessTouchCancel"),console.log("-====",this.touchWallPosition),-1!=this.touchWallPosition.x&&-1!=this.touchWallPosition.y&&this.addWall(this.touchWallPosition,this.touchWallType),this.touchWallNode.destroy(),this.touchWallShadowNode.destroy()},r([_(cc.Prefab)],t.prototype,"hWall",void 0),r([_(cc.Prefab)],t.prototype,"vWall",void 0),r([_(cc.Prefab)],t.prototype,"hWallShadow",void 0),r([_(cc.Prefab)],t.prototype,"vWallShadow",void 0),r([_(cc.Prefab)],t.prototype,"chessPrefab",void 0),t=r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../Constants":"Constants","../../model/vo/GameVO":"GameVO","../../util/Util":"Util"}],Constants:[function(e,t,n){"use strict";cc._RF.push(t,"da307vdKUpNKaGAi0Er7i68","Constants"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.ACTION_LAUNCH="ACTION_LAUNCH",e.SHOW_LOADING="SHOW_LOADING",e.HIDE_LOADING="HIDE_LOADING",e.SHOW_TIPS="SHOW_TIPS"}(n.WorldNotification||(n.WorldNotification={})),function(e){e.AUTHORIZE="AUTHORIZE",e.AUTHORIZE_SUCC="AUTHORIZE_SUCC",e.AUTHORIZE_FAIL="AUTHORIZE_FAIL"}(n.UserNotification||(n.UserNotification={})),function(e){e.ROOM_CREATE_SUCC="ROOM_CREATE_SUCC",e.ROOM_CREATE_FAIL="ROOM_CREATE_FAIL",e.ROOM_JOIN_SUCC="ROOM_JOIN_SUCC",e.ROOM_JOIN_FAIL="ROOM_JOIN_FAIL",e.ROOM_LEAVE_SUCC="ROOM_LEAVE_SUCC",e.ROOM_LEAVE_FAIL="ROOM_LEAVE_FAIL",e.ROOM_RETURN_CHECK="ROOM_RETURN_CHECK",e.ROOM_RETURN_NOT_CHECK="ROOM_RETURN_NOT_CHECK",e.ROOM_UPDATE="ROOM_UPDATE"}(n.RoomNotification||(n.RoomNotification={})),n.GameNotification||(n.GameNotification={}),function(e){e.TEAM2="team2",e.MATCH2="match2",e.MACHINE2="machine2",e.TEAM4="team4",e.MATCH4="match4",e.MACHINE4="machine4"}(n.GameType||(n.GameType={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(n.WallType||(n.WallType={})),function(e){e.WELCOME="welcome",e.MENU="menu",e.ROOM="room",e.GAME="game"}(n.Scene||(n.Scene={})),n.Config={WXCloudEnvID:"dev-620e72",MGOBEGameId:"obg-fqdy9jzs",MGOBESecretKey:"edb151a57fbbbd59f1c81399d8a5773aa40aee21",MGOBEHost:"fqdy9jzs.wxlagame.com",reconnectMaxTimes:5,reconnectInterval:1e3,resendInterval:1e3,resendTimeout:1e4,isDebug:!1},cc._RF.pop()},{}],DevPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"a5040h52i1JMaYtUjbxzhfn","DevPlatform");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.getOpenID=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return[2,"user dev"]})})},e.prototype.authorize=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return[2]})})},e.prototype.getUserInfo=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return[2,{avatarUrl:"https://blog.shiyicode.com/image/avatar.png",nickName:"\u75af\u900dsadsada",gender:1,language:"zh_CN",city:"\u6d77\u6dc0",province:"\u5317\u4eac",country:"\u4e2d\u56fd"}]})})},e.prototype.shareAppMessage=function(e,t,n){return o(this,void 0,void 0,function(){return r(this,function(e){return console.log("share app message:",n),[2]})})},e.prototype.getLaunchOption=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return[2]})})},e.prototype.getLaunchOptionOnShow=function(e){},e.prototype.showLoading=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!1),console.log("\u5c55\u793aLoading",e,t)},e.prototype.hideLoading=function(){console.log("\u9690\u85cfLoading")},e.prototype.showToast=function(e,t){void 0===t&&(t=1e3),console.log("\u5c55\u793atoast",e,t)},e.prototype.hideToast=function(){console.log("\u9690\u85cfLoading")},e.prototype.showModal=function(){console.log("\u9690\u85cfLoading")},e.prototype.hideModal=function(){},e}();n.default=i,cc._RF.pop()},{}],GameCommand:[function(e,t,n){"use strict";cc._RF.push(t,"80b90EpSv5L06ZDCniOkP5C","GameCommand");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.register=function(){},t.prototype.execute=function(e){e.getBody().gameType;e.getName()},t.NAME="GameCommand",t}(puremvc.SimpleCommand);n.default=r,cc._RF.pop()},{}],GameVO:[function(e,t,n){"use strict";cc._RF.push(t,"d3828kjzjdAdKkv2ZcPczAu","GameVO"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../util/Util"),r=function(){return function(e){this.gameType=e,this.nowPlayerID="",this.walls=new Array,this.playersInfo=new Array;for(var t=o.default.getPlayerCntByType(e),n=0;n<t;n++)this.playersInfo.push(new i)}}();n.GameVO=r;var i=function(){return function(){this.chessPosition=new c}}();n.PlayerVO=i;var s=function(){return function(){}}();n.ChessBoardVO=s;var a=function(){return function(e,t){this.position=t,this.wallType=e}}();n.WallVO=a;var c=function(){return function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}}();n.Position=c,cc._RF.pop()},{"../../util/Util":"Util"}],GameViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"9ca47wjz0RGKb0IiseSCFys","GameViewMediator");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(n){return e.call(this,t.NAME,n)||this}return o(t,e),t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.onRegister=function(){this.viewComponent},t.prototype.onRemove=function(){},t.NAME="GameViewMediator",t}(puremvc.Mediator);n.default=r,cc._RF.pop()},{}],GameView:[function(e,t,n){"use strict";cc._RF.push(t,"2867boT5cdFs5cDOWF1DHry","GameView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../model/vo/GameVO"),s=e("../../util/Util"),a=e("../../Constants"),c=cc._decorator,l=c.ccclass,_=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chessBoardLayer=null,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=new i.GameVO(a.GameType.TEAM2);e.playersInfo[0].nickName="hello",e.playersInfo[0].avatarUrl="hello",e.playersInfo[0].chessPosition=new i.Position(5,5);var t=new i.WallVO(a.WallType.HORIZONTAL,new cc.Vec2(5,5));e.walls.push(t),this.initView(e)},t.prototype.onDestroy=function(){},t.prototype.update=function(e){},t.prototype.initView=function(e){this.chessBoardLayer.getComponent("ChessboardView").initView(e);s.default.getPlayerCntByType(e.gameType)},t.prototype.updateView=function(e){this.chessBoardLayer.getComponent("ChessboardView").updateView(e)},r([_(cc.Node)],t.prototype,"chessBoardLayer",void 0),t=r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../Constants":"Constants","../../model/vo/GameVO":"GameVO","../../util/Util":"Util"}],IPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"17710N0H3FDNI01GLjbmctM","IPlatform"),Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("./WXPlatform"),i=e("./DevPlatform");n.Platform=function(){if(null!=o)return o;switch(cc.sys.platform){case cc.sys.WECHAT_GAME:o=new r.default;break;default:o=new i.default}return o},cc._RF.pop()},{"./DevPlatform":"DevPlatform","./WXPlatform":"WXPlatform"}],MenuViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"11836H8iipECLNDx7ro0OY0","MenuViewMediator");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Constants"),i=e("../model/UserProxy"),s=e("../model/RoomProxy"),a=e("../services/platform/IPlatform"),c=function(e){function t(n){return e.call(this,t.NAME,n)||this}return o(t,e),t.prototype.listNotificationInterests=function(){return[r.RoomNotification.ROOM_CREATE_SUCC,r.RoomNotification.ROOM_CREATE_FAIL,r.RoomNotification.ROOM_JOIN_SUCC,r.RoomNotification.ROOM_JOIN_FAIL,r.RoomNotification.ROOM_RETURN_CHECK,r.RoomNotification.ROOM_RETURN_NOT_CHECK,r.WorldNotification.ACTION_LAUNCH]},t.prototype.handleNotification=function(e){var t=this.facade.retrieveProxy(s.default.NAME);e.getBody();switch(e.getName()){case r.RoomNotification.ROOM_CREATE_SUCC:a.Platform().hideLoading(),cc.director.loadScene(r.Scene.ROOM);break;case r.RoomNotification.ROOM_CREATE_FAIL:a.Platform().hideLoading(),a.Platform().showToast("\u521b\u5efa\u623f\u95f4\u5931\u8d25");break;case r.RoomNotification.ROOM_JOIN_SUCC:a.Platform().hideLoading(),cc.director.loadScene(r.Scene.ROOM);break;case r.RoomNotification.ROOM_JOIN_FAIL:a.Platform().hideLoading(),a.Platform().showToast("\u52a0\u5165\u623f\u95f4\u5931\u8d25");break;case r.RoomNotification.ROOM_RETURN_CHECK:a.Platform().hideLoading(),a.Platform().showModal("\u63d0\u793a",function(e){e?(console.log("\u8fdb\u5165\u5df2\u8fdb\u884c\u4e2d\u7684\u6e38\u620f"),cc.director.loadScene(r.Scene.ROOM)):(console.log("\u5ffd\u7565\u5df2\u8fdb\u884c\u4e2d\u7684\u6e38\u620f"),t.leaveRoom())},"\u68c0\u6d4b\u5230\u60a8\u6709\u5bf9\u5c40\u5c1a\u672a\u7ed3\u675f\uff0c\u662f\u5426\u8df3\u8f6c\uff1f",!0,"\u786e\u8ba4","\u53d6\u6d88");break;case r.RoomNotification.ROOM_RETURN_NOT_CHECK:case r.WorldNotification.ACTION_LAUNCH:a.Platform().hideLoading(),this.actionByLaunchQuery()}},t.prototype.onRegister=function(){this.initView(),this.initCallback(),this.facade.retrieveProxy(s.default.NAME).returnRoom(),a.Platform().showLoading()},t.prototype.onRemove=function(){},t.prototype.initCallback=function(){var e=this.facade.retrieveProxy(s.default.NAME),t=this.facade.retrieveProxy(i.default.NAME),n=this.viewComponent;n.mode2ButtonClick=function(e,o){console.log("mode2 button click"),n.setModeType(4),t.setModeType(4)},n.mode4ButtonClick=function(e,o){console.log("mode4 button click"),n.setModeType(2),t.setModeType(2)},n.team2ButtonClick=function(t,n){console.log("team2 button click"),e.createRoom(r.GameType.TEAM2),a.Platform().showLoading()},n.team4ButtonClick=function(t,n){console.log("team4 button click"),e.createRoom(r.GameType.TEAM4),a.Platform().showLoading()},n.match2ButtonClick=function(e,t){console.log("match2 button click")}},t.prototype.initView=function(){var e=this.viewComponent,t=this.facade.retrieveProxy(i.default.NAME);e.setModeType(t.getModeType());var n=t.getUserInfo();e.setUserInfo(n.avatarUrl,n.nickName)},t.prototype.actionByLaunchQuery=function(){var e=this.facade.retrieveProxy(i.default.NAME),t=e.getLaunch();if(e.setLaunch({}),console.log("\u6267\u884c\u83b7\u53d6\u53c2\u6570",t),t&&t.query&&t.scene&&(1007==t.scene||1008==t.scene))switch(t.query.type){case r.GameType.TEAM2:var n=this.facade.retrieveProxy(s.default.NAME);a.Platform().showLoading(),n.joinRoom(t.query.roomId)}},t.NAME="MenuViewMediator",t}(puremvc.Mediator);n.default=c,cc._RF.pop()},{"../Constants":"Constants","../model/RoomProxy":"RoomProxy","../model/UserProxy":"UserProxy","../services/platform/IPlatform":"IPlatform"}],MenuView:[function(e,t,n){"use strict";cc._RF.push(t,"a412dCXcExGoIv2Dq6SbnKc","MenuView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../AppFacade"),s=e("../MenuViewMediator"),a=e("../../util/Util"),c=cc._decorator,l=c.ccclass,_=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popupLayer=null,t.playerNode=null,t.mode2Node=null,t.mode4Node=null,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){i.default.getInstance().registerMediator(new s.default(this))},t.prototype.onDestroy=function(){i.default.getInstance().removeMediator(s.default.NAME)},t.prototype.setModeType=function(e){2==e?(this.mode2Node.active=!0,this.mode4Node.active=!1):(this.mode2Node.active=!1,this.mode4Node.active=!0)},t.prototype.setUserInfo=function(e,t){var n=this.playerNode.getChildByName("mask").getChildByName("head"),o=n.getComponent(cc.Sprite),r=this.playerNode.getChildByName("name").getComponent(cc.Label);e?cc.loader.load({url:e,type:"jpg"},function(e,t){null==e&&(o.spriteFrame=new cc.SpriteFrame(t)),n.active=!0}):n.active=!1,t?(t=a.default.cutstr(t,5),r.string=t):r.string="\u6e38\u5ba2"},t.prototype.mode2ButtonClick=function(e,t){},t.prototype.mode4ButtonClick=function(e,t){},t.prototype.team2ButtonClick=function(e,t){},t.prototype.team4ButtonClick=function(e,t){},t.prototype.match2ButtonClick=function(e,t){},t.prototype.machine2ButtonClick=function(e,t){},r([_(cc.Node)],t.prototype,"popupLayer",void 0),r([_(cc.Node)],t.prototype,"playerNode",void 0),r([_(cc.Node)],t.prototype,"mode2Node",void 0),r([_(cc.Node)],t.prototype,"mode4Node",void 0),t=r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../AppFacade":"AppFacade","../../util/Util":"Util","../MenuViewMediator":"MenuViewMediator"}],MgobeService:[function(e,t,n){"use strict";cc._RF.push(t,"1e661LPs0JJcZmGTTesr646","MgobeService"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Constants");e("../../library/mgobe/MGOBE.js");var r=function(){function e(){}return e.getMyRoom=function(e){var t=this;MGOBE.Room.getMyRoom(function(n){console.log("\u83b7\u53d6\u5f53\u524d\u623f\u95f4\u4fe1\u606f",n),n.code===MGOBE.ErrCode.EC_OK&&(t.room.roomInfo=n.data.roomInfo),e&&e(n)})},e.initRoom=function(e,t){var n={roomId:e};MGOBE.Room.getRoomByRoomId(n,function(e){t&&t(e)})},e.joinRoom=function(e,t,n){var o=this;this.initRoom(e,function(r){console.log("\u83b7\u53d6\u623f\u95f4\u4fe1\u606f",e,r),r.code===MGOBE.ErrCode.EC_OK&&(console.log("\u83b7\u53d6\u623f\u95f4\u4fe1\u606f, \u66f4\u65b0\u6210\u529f",e),o.room.initRoom(r.data.roomInfo));var i={playerInfo:{name:t.nickName,customPlayerStatus:t.isReady?1:0,customProfile:t.avatarUrl}};o.room.joinRoom(i,function(e){n&&n(e)})})},e.createRoom=function(e,t,n,o){var r={roomName:"\u623f\u95f4\u540d",maxPlayers:t,roomType:n,isPrivate:!1,customProperties:"WAIT",playerInfo:{name:e.nickName,customPlayerStatus:e.isReady?1:0,customProfile:e.avatarUrl}};this.room.createRoom(r,function(e){o&&o(e)})},e.leaveRoom=function(e){this.room.leaveRoom({},function(t){e&&e(t)})},e.changeCustomPlayerStatus=function(e,t){var n={customPlayerStatus:e};this.room.changeCustomPlayerStatus(n,function(e){t&&t(e)})},e.isInited=function(){return!!MGOBE.Player&&!!MGOBE.Player.id},e.initMgobeSDK=function(e,t,n,r,i,s){var a=this;if(this.isInited())return s&&s({code:MGOBE.ErrCode.EC_OK});var c={gameId:t,secretKey:n,openId:e},l={url:r,reconnectInterval:o.Config.reconnectInterval,reconnectMaxTimes:o.Config.reconnectMaxTimes,resendInterval:o.Config.resendInterval,resendTimeout:o.Config.resendTimeout,isAutoRequestFrame:!0,cacertNativeUrl:i};MGOBE.DebuggerLog.enable=o.Config.isDebug,MGOBE.Listener.init(c,l,function(e){e.code===MGOBE.ErrCode.EC_OK?(console.log("\u521d\u59cb\u5316\u6210\u529f"),a.room=new MGOBE.Room,MGOBE.Listener.add(a.room),a.setBroadcastCallbacks(null,{})):console.log("\u521d\u59cb\u5316\u5931\u8d25",e.code),s&&s({code:e.code})})},e.setCallbacks=function(){},e.setBroadcastCallbacks=function(e,t){var n=this;if(this.room){var o=function(e){return function(t){console.log(e,"->",t)}},r={onUpdate:function(){return o("onUpdate")},onJoinRoom:function(){return o("onJoinRoom")},onLeaveRoom:function(){return o("onLeaveRoom")},onChangeRoom:function(){return o("onChangeRoom")},onDismissRoom:function(){return o("onDismissRoom")},onStartFrameSync:function(){return o("onStartFrameSync")},onStopFrameSync:function(){return o("onStopFrameSync")},onRecvFrame:function(e){o("onRecvFrame")},onChangeCustomPlayerStatus:function(){return o("onChangeCustomPlayerStatus")},onRemovePlayer:function(){return o("onRemovePlayer")},onRecvFromClient:function(){return o("onRecvFromClient")},onRecvFromGameSvr:function(){return o("onRecvFromGameSvr")},onAutoRequestFrameError:function(){return o("onAutoRequestFrameError")}};Object.keys(r).forEach(function(o){var i=t[o]?t[o].bind(e):r[o];n.room[o]=i})}},e.room=null,e}();n.default=r,cc._RF.pop()},{"../../Constants":"Constants","../../library/mgobe/MGOBE.js":1}],PopupView:[function(e,t,n){"use strict";cc._RF.push(t,"6704dlSDhRMJYOXjwusSjDq","PopupView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingNode=null,t}return o(t,e),t.prototype.onLoad=function(){this.loadingNode=this.node.getChildByName("loading"),this.loadingNode.active=!1},t.prototype.start=function(){},t.prototype.showLoading=function(e){void 0===e&&(e=!1),this.loadingNode.active=!0,this.loadingNode.getChildByName("loadingBG").active=e},t.prototype.hideLoading=function(){this.loadingNode.active=!1},t.prototype.update=function(e){this.loadingNode.active&&this.rotateLoadingFrame()},t.prototype.rotateLoadingFrame=function(){this.loadingNode.getChildByName("load_icon").angle-=5},t=r([s],t)}(cc.Component));n.default=a,cc._RF.pop()},{}],RoomProxy:[function(e,t,n){"use strict";cc._RF.push(t,"ed6bdqJX9hAjYCHi7krJftG","RoomProxy");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("./vo/RoomVO"),i=e("../Constants"),s=e("../util/Util"),a=e("./UserProxy");e("../library/mgobe/MGOBE.js");var c=e("../services/mgobe/MgobeService"),l=(MGOBE.Room,MGOBE.Listener,MGOBE.ErrCode,MGOBE.ENUM,MGOBE.DebuggerLog,function(e){function t(){var n=e.call(this,t.NAME)||this;return n.room=null,n.room=new r.RoomVO,n}return o(t,e),t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.returnRoom=function(){var e=this;c.default.getMyRoom(function(t){t.code===MGOBE.ErrCode.EC_OK?(console.log("\u73a9\u5bb6\u5df2\u5728\u623f\u95f4\u4e2d",t),e.listenRoom(),e.setRoom(t.data.roomInfo),e.facade.sendNotification(i.RoomNotification.ROOM_RETURN_CHECK)):(console.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u4e2d"),e.facade.sendNotification(i.RoomNotification.ROOM_RETURN_NOT_CHECK))})},t.prototype.joinRoom=function(e){var t=this;console.log("\u52a0\u5165\u623f\u95f4");var n=this.facade.retrieveProxy(a.default.NAME).getUserInfo(),o=new r.PlayerVO;o.avatarUrl=n.avatarUrl,o.nickName=n.nickName,o.isReady=!1,c.default.joinRoom(e,o,function(e){e.code===MGOBE.ErrCode.EC_OK?(console.log("\u52a0\u5165\u623f\u95f4\u6210\u529f",e),t.setRoom(e.data.roomInfo),t.listenRoom(),t.facade.sendNotification(i.RoomNotification.ROOM_JOIN_SUCC)):(console.log("\u52a0\u5165\u623f\u95f4\u5931\u8d25",e),t.facade.sendNotification(i.RoomNotification.ROOM_JOIN_FAIL))})},t.prototype.createRoom=function(e){var t=this;console.log("\u521b\u5efa\u623f\u95f4");var n=this.facade.retrieveProxy(a.default.NAME).getUserInfo(),o=new r.PlayerVO;o.avatarUrl=n.avatarUrl,o.nickName=n.nickName,o.isReady=!1,c.default.createRoom(o,s.default.getPlayerCntByType(e),e,function(e){e.code===MGOBE.ErrCode.EC_OK?(console.log("\u521b\u5efa\u623f\u95f4\u6210\u529f",e),t.setRoom(e.data.roomInfo),t.listenRoom(),t.facade.sendNotification(i.RoomNotification.ROOM_CREATE_SUCC)):(console.log("\u521b\u5efa\u623f\u95f4\u5931\u8d25",e),t.facade.sendNotification(i.RoomNotification.ROOM_CREATE_FAIL))})},t.prototype.leaveRoom=function(){var e=this,n=this.facade.retrieveProxy(t.NAME);c.default.leaveRoom(function(t){console.log("\u79bb\u5f00\u623f\u95f4",t),t.code===MGOBE.ErrCode.EC_OK||t.code===MGOBE.ErrCode.EC_ROOM_PLAYER_NOT_IN_ROOM?(n.removeListenRoom(),e.facade.sendNotification(i.RoomNotification.ROOM_LEAVE_SUCC)):e.facade.sendNotification(i.RoomNotification.ROOM_LEAVE_FAIL)})},t.prototype.setReadyStatus=function(e){c.default.changeCustomPlayerStatus(e?1:0,function(e){e.code===MGOBE.ErrCode.EC_OK||console.log("\u5f39\u7a97\uff0c\u63d0\u9192\u7528\u6237\u91cd\u8bd5")})},t.prototype.getRoom=function(){return this.room},t.prototype.setRoom=function(e){var t=this.facade.retrieveProxy(a.default.NAME);this.room.gameType=e.type,this.room.roomId=e.id;for(var n=0,o=e.playerList,i=0;i<o.length;i++)if(o[i].id==t.getPlayerId()){n=i;break}var c=s.default.getPlayerCntByType(this.room.gameType);for(i=0;i<o.length;i++){var l=(i+n)%c;this.room.playersInfo[i].playerID=o[l].id,this.room.playersInfo[i].avatarUrl=o[l].customProfile,this.room.playersInfo[i].nickName=o[l].name,this.room.playersInfo[i].isReady=1==o[l].customPlayerStatus,console.log("\u66f4\u65b0\u7528\u6237",i)}for(i=o.length;i<4;i++)console.log("\u91cd\u7f6e\u7528\u6237",i),this.room.playersInfo[i]=new r.PlayerVO},t.prototype.listenRoom=function(){var e=this;console.log("\u542f\u52a8room\u76d1\u542c"),c.default.room.onUpdate=function(t){console.log("\u4e8b\u4ef6\u56de\u8c03onUpdate",t.roomInfo),e.setRoom(t.roomInfo),t.roomInfo.playerList.find(function(e){return 1!==e.customPlayerStatus}),e.facade.sendNotification(i.RoomNotification.ROOM_UPDATE)},c.default.room.onJoinRoom=function(e){},c.default.room.onLeaveRoom=function(e){}},t.prototype.removeListenRoom=function(){console.log("\u5173\u95edroom\u76d1\u542c"),c.default.room.onUpdate=null},t.NAME="RoomProxy",t.instance=null,t}(puremvc.Proxy));n.default=l,cc._RF.pop()},{"../Constants":"Constants","../library/mgobe/MGOBE.js":1,"../services/mgobe/MgobeService":"MgobeService","../util/Util":"Util","./UserProxy":"UserProxy","./vo/RoomVO":"RoomVO"}],RoomVO:[function(e,t,n){"use strict";cc._RF.push(t,"d31e5kfDXlJpJd2aFOOEbna","RoomVO"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){this.playersInfo=[];for(var e=0;e<4;e++)this.playersInfo.push(new r)}}();n.RoomVO=o;var r=function(){return function(){this.playerID="",this.isReady=!1,this.avatarUrl="",this.nickName=""}}();n.PlayerVO=r,cc._RF.pop()},{}],RoomViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"3030aNz+05P3rUQGjqfUkle","RoomViewMediator");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Constants"),i=e("../model/RoomProxy"),s=e("../services/platform/IPlatform"),a=function(e){function t(n){return e.call(this,t.NAME,n)||this}return o(t,e),t.prototype.listNotificationInterests=function(){return[r.RoomNotification.ROOM_UPDATE,r.RoomNotification.ROOM_LEAVE_SUCC,r.RoomNotification.ROOM_LEAVE_FAIL]},t.prototype.handleNotification=function(e){var t=this.facade.retrieveProxy(i.default.NAME),n=this.viewComponent;e.getBody();switch(e.getName()){case r.RoomNotification.ROOM_UPDATE:var o=t.getRoom();n.updateRoom(o);break;case r.RoomNotification.ROOM_LEAVE_SUCC:cc.director.loadScene(r.Scene.MENU);break;case r.RoomNotification.ROOM_LEAVE_FAIL:}},t.prototype.onRegister=function(){this.facade.retrieveProxy(i.default.NAME).listenRoom(),this.initView(),this.initCallback()},t.prototype.onRemove=function(){this.facade.retrieveProxy(i.default.NAME).removeListenRoom()},t.prototype.initCallback=function(){var e=this.viewComponent,t=this.facade.retrieveProxy(i.default.NAME);e.readyButtonClick=function(e,n){console.log("ready button click"),t.setReadyStatus(!0)},e.cancelButtonClick=function(e,n){console.log("cancel button click"),t.setReadyStatus(!1)},e.leaveButtonClick=function(e,n){console.log("leave button click"),t.leaveRoom()},e.inviteButtonClick=function(e,n){console.log("invite button click");var o=t.getRoom();console.log("\u597d\u53cb\u7ec4\u961f\u9080\u8bf7","type="+o.gameType+"&roomId="+o.roomId),s.Platform().shareAppMessage("\u623f\u5df2\u5f00\u597d\uff0c\u5c31\u5dee\u4f60\u4e86\uff01","","type="+o.gameType+"&roomId="+o.roomId)}},t.prototype.initView=function(){var e=this.viewComponent,t=this.facade.retrieveProxy(i.default.NAME).getRoom();console.log("init view",t),e.updateRoom(t)},t.NAME="RoomViewMediator",t}(puremvc.Mediator);n.default=a,cc._RF.pop()},{"../Constants":"Constants","../model/RoomProxy":"RoomProxy","../services/platform/IPlatform":"IPlatform"}],RoomView:[function(e,t,n){"use strict";cc._RF.push(t,"f88b57zTsVCUZrvdSsIN7Vf","RoomView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../AppFacade"),s=e("../RoomViewMediator"),a=e("../../util/Util"),c=cc._decorator,l=c.ccclass,_=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playersNode=null,t.barNode=null,t.readyButton=null,t.cancelButton=null,t}return o(t,e),t.prototype.start=function(){i.default.getInstance().registerMediator(new s.default(this))},t.prototype.onDestroy=function(){i.default.getInstance().removeMediator(s.default.NAME)},t.prototype.update=function(e){},t.prototype.updateRoom=function(e){console.log("\u66f4\u65b0\u623f\u95f4\u754c\u9762");var t=[],n=a.default.getPlayerCntByType(e.gameType);if(2==n)t.push(this.playersNode.getChildByName("player0")),t.push(this.playersNode.getChildByName("player2")),this.playersNode.getChildByName("player1").active=!1,this.playersNode.getChildByName("player3").active=!1;else for(var o=0;o<4;o++){var r=this.playersNode.getChildByName("player"+o.toString());t.push(r)}for(o=0;o<n;o++)this.setPlayerInfo(t[o],e.playersInfo[o].avatarUrl,e.playersInfo[o].nickName,e.playersInfo[o].isReady);void 0!=e.playersInfo[0].isReady&&(this.readyButton.node.active=!e.playersInfo[0].isReady,this.cancelButton.node.active=e.playersInfo[0].isReady)},t.prototype.setPlayerInfo=function(e,t,n,o){var r=e.getChildByName("mask").getChildByName("head"),i=r.getComponent(cc.Sprite),s=e.getChildByName("name").getComponent(cc.Label);t?cc.loader.load({url:t,type:"jpg"},function(e,t){null==e&&(i.spriteFrame=new cc.SpriteFrame(t)),r.active=!0}):r.active=!1,n?(n=a.default.cutstr(n,5),s.string=n):s.string="",e.getChildByName("ready_tag").active=void 0!=o&&o},t.prototype.readyButtonClick=function(e,t){},t.prototype.cancelButtonClick=function(e,t){},t.prototype.inviteButtonClick=function(e,t){},t.prototype.leaveButtonClick=function(e,t){},t.prototype.chatButtonClick=function(e,t){},r([_(cc.Node)],t.prototype,"playersNode",void 0),r([_(cc.Node)],t.prototype,"barNode",void 0),r([_(cc.Button)],t.prototype,"readyButton",void 0),r([_(cc.Button)],t.prototype,"cancelButton",void 0),t=r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../AppFacade":"AppFacade","../../util/Util":"Util","../RoomViewMediator":"RoomViewMediator"}],Start:[function(e,t,n){"use strict";cc._RF.push(t,"4a325iyUG9K9LyYe710XiAb","Start");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,a=(i.property,e("./AppFacade")),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){a.default.getInstance().startup()},t=r([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./AppFacade":"AppFacade"}],UserCommand:[function(e,t,n){"use strict";cc._RF.push(t,"a2eeb3+f7dEmoETuYbm6Zy+","UserCommand");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.register=function(){},t.prototype.execute=function(e){e.getBody();e.getName()},t.NAME="UserCommand",t}(puremvc.SimpleCommand);n.default=r,cc._RF.pop()},{}],UserProxy:[function(e,t,n){"use strict";cc._RF.push(t,"2c087vE7fxBJ6jTcleAgUMg","UserProxy");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("./vo/UserVO"),i=function(e){function t(){var n=e.call(this,t.NAME)||this;return n.user=null,n.launch=null,n.user=new r.UserVO,n}return o(t,e),t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.setOpenId=function(e){this.user.openId=e},t.prototype.getOpenId=function(){return this.user.openId},t.prototype.setPlayerId=function(e){this.user.playerId=e},t.prototype.getPlayerId=function(){return this.user.playerId},t.prototype.setUserInfo=function(e){console.log("update user info",e),this.user.avatarUrl=e.avatarUrl,this.user.nickName=e.nickName,this.user.city=e.city,this.user.country=e.country,this.user.gender=e.gender,this.user.province=e.province},t.prototype.getUserInfo=function(){return{avatarUrl:this.user.avatarUrl,nickName:this.user.nickName}},t.prototype.setModeType=function(e){this.user.modeType=e},t.prototype.getModeType=function(){return this.user.modeType},t.prototype.hasAuthorize=function(){return null!=this.user.openId},t.prototype.setLaunch=function(e){this.launch=e},t.prototype.getLaunch=function(){if(this.launch)return{query:this.launch.query,scene:this.launch.scene}},t.NAME="UserProxy",t.instance=null,t}(puremvc.Proxy);n.default=i,cc._RF.pop()},{"./vo/UserVO":"UserVO"}],UserVO:[function(e,t,n){"use strict";cc._RF.push(t,"2eb05NNoZhCdZKCbyPpqgrZ","UserVO"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){this.modeType=2}}();n.UserVO=o,cc._RF.pop()},{}],Util:[function(e,t,n){"use strict";cc._RF.push(t,"2c091hmZBNGxYOoU8JSvA6c","Util"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Constants"),r=function(){function e(){}return e.cutstr=function(e,t){for(var n=0,o=new String,r=e.length,i=0;i<r;i++){var s=e.charAt(i);if(n++,escape(s).length>4&&n++,o=o.concat(s),n>=t)return o=o.concat("...")}if(n<t)return e},e.getPlayerCntByType=function(e){return e==o.GameType.MACHINE2||e==o.GameType.MATCH2||e==o.GameType.TEAM2?2:4},e.loadScene=function(e){cc.director.preloadScene(e,function(){cc.log("Next scene preloaded:",e)}),cc.director.loadScene(e)},e}();n.default=r,cc._RF.pop()},{"../Constants":"Constants"}],WXPlatform:[function(e,t,n){"use strict";cc._RF.push(t,"59c55SEb7ZNk6laeRYJ7tLA","WXPlatform");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../library/wechat/wxApi"),s=function(){function e(){}return e.prototype.getOpenID=function(){return o(this,void 0,void 0,function(){var e,t;return r(this,function(n){switch(n.label){case 0:console.log("get openId"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,i.wxApi.callFunction("login")];case 2:return e=n.sent(),console.log("call login succ",e),[2,e.result.openid];case 3:return t=n.sent(),console.log("call login fail",t),[3,4];case 4:return[2]}})})},e.prototype.authorize=function(){return o(this,void 0,void 0,function(){var e,t,n;return r(this,function(o){switch(o.label){case 0:return[4,i.wxApi.authSettingOfUserInfo()];case 1:return o.sent()?(console.log("authorize already"),[3,4]):[3,2];case 2:return console.log("authorize wait"),e=window.innerWidth/2-125,t=window.innerHeight/1.2,n=wx.createUserInfoButton({type:"text",text:"\u5fae\u4fe1\u767b\u9646",image:"",style:{left:e,top:t,width:250,height:43,lineHeight:43,backgroundColor:"#FC3768",color:"#ffffff",textAlign:"center",fontSize:18,borderRadius:4}}),[4,new Promise(function(e){n.onTap(function(t){console.log("authorize finish:",t),t.userInfo&&(n.destroy(),e())})})];case 3:o.sent(),o.label=4;case 4:return[2]}})})},e.prototype.getUserInfo=function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,i.wxApi.getUserInfo(!1,"zh_CN")];case 1:return[2,e.sent().userInfo]}})})},e.prototype.shareAppMessage=function(e,t,n){return o(this,void 0,void 0,function(){return r(this,function(o){return wx.shareAppMessage({title:e,imageUrl:t,query:n}),[2]})})},e.prototype.getLaunchOption=function(){return o(this,void 0,void 0,function(){var e;return r(this,function(t){return(e=wx.getLaunchOptionsSync())&&e.query?[2,{query:e.query,scene:e.scene}]:[2]})})},e.prototype.getLaunchOptionOnShow=function(e){wx.onShow(function(t){t&&t.query&&t.scene&&e&&e(t.query,t.scene)})},e.prototype.showLoading=function(e,t){return void 0===e&&(e="\u52a0\u8f7d\u4e2d"),void 0===t&&(t=!0),o(this,void 0,void 0,function(){return r(this,function(n){return wx.showLoading({title:e,mask:t}),[2]})})},e.prototype.hideLoading=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return wx.hideLoading({}),[2]})})},e.prototype.showToast=function(e,t){return void 0===t&&(t=1e3),o(this,void 0,void 0,function(){return r(this,function(n){return wx.showToast({title:e,icon:"none",duration:t}),[2]})})},e.prototype.hideToast=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return wx.hideToast({}),[2]})})},e.prototype.showModal=function(e,t,n,o,r,i){void 0===n&&(n=""),void 0===o&&(o=!0),void 0===r&&(r="\u786e\u5b9a"),void 0===i&&(i="\u53d6\u6d88"),wx.showModal({title:e,content:n,showCancel:o,confirmText:r,cancelText:i,success:function(e){e.confirm?t(!0):e.cancel&&t(!1)}})},e.prototype.hideModal=function(){},e}();n.default=s,cc._RF.pop()},{"../../library/wechat/wxApi":"wxApi"}],WelcomeViewMediator:[function(e,t,n){"use strict";cc._RF.push(t,"adccctWljBJtY+ZGVmHgZJB","WelcomeViewMediator");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../Constants"),a=e("../model/UserProxy"),c=e("../services/platform/IPlatform"),l=e("../services/mgobe/MgobeService"),_=function(e){function t(n){return e.call(this,t.NAME,n)||this}return o(t,e),t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.onRegister=function(){this.initialization(),this.registerOnShow()},t.prototype.onRemove=function(){},t.prototype.initialization=function(){return r(this,void 0,void 0,function(){var e,t,n,o=this;return i(this,function(r){switch(r.label){case 0:return e=this.facade.retrieveProxy(a.default.NAME),[4,c.Platform().getOpenID()];case 1:return t=r.sent(),e.setOpenId(t),[4,c.Platform().authorize()];case 2:return r.sent(),this.viewComponent.popupLayer.getComponent("PopupView").showLoading(),e.getUserInfo().avatarUrl?[3,4]:[4,c.Platform().getUserInfo()];case 3:n=r.sent(),e.setUserInfo(n),r.label=4;case 4:return l.default.initMgobeSDK(e.getOpenId(),s.Config.MGOBEGameId,s.Config.MGOBESecretKey,s.Config.MGOBEHost,"",function(t){t.code===MGOBE.ErrCode.EC_OK?(e.setPlayerId(MGOBE.Player.id),o.loadLaunchOption(),cc.director.loadScene(s.Scene.MENU)):(console.log("initialization fail"),c.Platform().showModal("\u63d0\u793a",function(e){e&&o.initialization()},"\u521d\u59cb\u5316\u5931\u8d25\uff0c\u70b9\u51fb\u91cd\u8bd5",!1,"\u786e\u8ba4"))}),[2]}})})},t.prototype.loadLaunchOption=function(){return r(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return e=this.facade.retrieveProxy(a.default.NAME),[4,c.Platform().getLaunchOption()];case 1:return t=n.sent(),console.log("\u83b7\u53d6launch\u53c2\u6570",t),t&&e.setLaunch(t),[2]}})})},t.prototype.registerOnShow=function(){return r(this,void 0,void 0,function(){var e,t=this;return i(this,function(n){return e=this.facade.retrieveProxy(a.default.NAME),c.Platform().getLaunchOptionOnShow(function(n,o){console.log("\u518d\u6b21\u8fdb\u5165\u754c\u9762OnShow",n,o),e.setLaunch({query:n,scene:o}),t.facade.sendNotification(s.RoomNotification.ROOM_RETURN_NOT_CHECK)}),[2]})})},t.NAME="WelcomeViewMediator",t}(puremvc.Mediator);n.default=_,cc._RF.pop()},{"../Constants":"Constants","../model/UserProxy":"UserProxy","../services/mgobe/MgobeService":"MgobeService","../services/platform/IPlatform":"IPlatform"}],WelcomeView:[function(e,t,n){"use strict";cc._RF.push(t,"e8f31Ef7w1IZr7rEQ1PVtqD","WelcomeView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../AppFacade"),s=e("../WelcomeViewMediator"),a=cc._decorator,c=a.ccclass,l=a.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popupLayer=null,t}return o(t,e),t.prototype.start=function(){i.default.getInstance().registerMediator(new s.default(this))},t.prototype.onDestroy=function(){i.default.getInstance().removeMediator(s.default.NAME)},t.prototype.update=function(e){},r([l(cc.Node)],t.prototype,"popupLayer",void 0),t=r([c],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../AppFacade":"AppFacade","../WelcomeViewMediator":"WelcomeViewMediator"}],wxApi:[function(e,t,n){"use strict";cc._RF.push(t,"7a96eQ70IBDtrSyAUngGjty","wxApi");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Constants"),s=function(){function e(){}return e.login=function(){return o(this,void 0,Promise,function(){return r(this,function(e){return[2,new Promise(function(e,t){wx.login({success:function(t){e(t)},fail:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.apply(void 0,e)},complete:function(){}})})]})})},e.callFunction=function(e){return o(this,void 0,Promise,function(){return r(this,function(t){return wx.cloud.init({env:i.Config.WXCloudEnvID}),[2,new Promise(function(t,n){wx.cloud.callFunction({name:e,success:function(e){t(e)},fail:function(){n()},complete:function(){}})})]})})},e.checkSession=function(){return o(this,void 0,Promise,function(){return r(this,function(e){return[2,new Promise(function(e,t){console.log("wx checksession"),wx.checkSession({success:function(){e()},fail:function(){t()},complete:function(){}})})]})})},e.authorize=function(e){return o(this,void 0,Promise,function(){return r(this,function(t){return[2,new Promise(function(t,n){wx.authorize({scope:e,success:function(e){t(e)},fail:function(e){n(e)}})})]})})},e.getUserInfo=function(e,t){return o(this,void 0,Promise,function(){return r(this,function(n){return[2,new Promise(function(n,o){wx.getUserInfo({withCredentials:e,lang:t,success:function(e){n(e)},fail:function(e){o(e)}})})]})})},e.getSetting=function(){return o(this,void 0,Promise,function(){return r(this,function(e){return[2,new Promise(function(e,t){wx.getSetting({success:function(t){e(t)},fail:function(){t()}})})]})})},e.authSettingOfUserInfo=function(){return o(this,void 0,Promise,function(){var t=this;return r(this,function(n){return[2,new Promise(function(n,i){return o(t,void 0,void 0,function(){var t;return r(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e.getSetting()];case 1:return(t=o.sent()).authSetting&&t.authSetting["scope.userInfo"]?n(!0):n(!1),[3,3];case 2:return o.sent(),n(!1),[3,3];case 3:return[2]}})})})]})})},e.getUserGameLabel=function(){},e}();n.wxApi=s,cc._RF.pop()},{"../../Constants":"Constants"}]},{},["AppFacade","Constants","Start","GameCommand","UserCommand","wxApi","RoomProxy","UserProxy","GameVO","RoomVO","UserVO","MgobeService","DevPlatform","IPlatform","WXPlatform","Util","GameViewMediator","MenuViewMediator","RoomViewMediator","WelcomeViewMediator","ChessboardView","GameView","MenuView","PopupView","RoomView","WelcomeView"]);